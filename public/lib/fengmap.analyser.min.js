/**Released Version v3.1.10,BUILD 237,Time 1749031855583. Fengmap Javascript SDK , see: https://www.fengmap.com for details**/
((t,i)=>{"object"==typeof exports&&"object"==typeof module?module.exports=i(require("fs")):"function"==typeof define&&define.amd?define(["fs"],i):"object"==typeof exports?exports.fengmap=i(require("fs")):t.fengmap=i(t.fs)})(this,function(__WEBPACK_EXTERNAL_MODULE__49__){return function(u){function t(t){for(var i,r,n=t[0],e=t[1],o=0,s=[];o<n.length;o++)r=n[o],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&s.push(a[r][0]),a[r]=0;for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(u[i]=e[i]);for(f&&f(t);s.length;)s.shift()()}var r={},a={1:0,0:0};function e(t){var i;return(r[t]||(i=r[t]={i:t,l:!1,exports:{}},u[t].call(i.exports,i,i.exports,e),i.l=!0,i)).exports}e.m=u,e.c=r,e.d=function(t,i,r){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"u",{value:!0})},e.t=function(i,t){if(1&t&&(i=e(i)),8&t)return i;if(4&t&&"object"==typeof i&&i&&i.u)return i;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:i}),2&t&&"string"!=typeof i)for(var n in i)e.d(r,n,function(t){return i[t]}.bind(null,n));return r},e.n=function(t){var i=t&&t.u?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="",e.oe=function(t){throw console.error(t),t};var i=(n=this.webpackJsonpfengmap=this.webpackJsonpfengmap||[]).push.bind(n);n.push=t;for(var n=n.slice(),o=0;o<n.length;o++)t(n[o]);var f=i;return e(e.s=50)}([function(t,i,r){r.d(i,"a",function(){return n});var i=r(2),n={document:"undefined"!=typeof document?document:{},window:"undefined"!=typeof window?window:{},environment:i.a.BROWSER,XMLHttpRequest:"undefined"!=typeof XMLHttpRequest?XMLHttpRequest:{}}},function(t,i,r){var n,e,o=t.exports=r(4),s=r(18),u=(o.codegen=r(42),o.fetch=r(43),o.path=r(44),o.fs=o.inquire("fs"),o.toArray=function(t){if(t){for(var i=Object.keys(t),r=new Array(i.length),n=0;n<i.length;)r[n]=t[i[n++]];return r}return[]},o.toObject=function(t){for(var i={},r=0;r<t.length;){var n=t[r++],e=t[r++];void 0!==e&&(i[n]=e)}return i},/\\/g),a=/"/g,f=(o.isReserved=function(t){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(t)},o.safeProp=function(t){return!/^[$\w_]+$/.test(t)||o.isReserved(t)?'["'+t.replace(u,"\\\\").replace(a,'\\"')+'"]':"."+t},o.ucFirst=function(t){return t.charAt(0).toUpperCase()+t.substring(1)},/_([a-z])/g),h=(o.camelCase=function(t){return t.substring(0,1)+t.substring(1).replace(f,function(t,i){return i.toUpperCase()})},o.compareFieldsById=function(t,i){return t.id-i.id},o.decorateType=function(t,i){return t.$type?(i&&t.$type.name!==i&&(o.decorateRoot.remove(t.$type),t.$type.name=i,o.decorateRoot.add(t.$type)),t.$type):(i=new(n=n||r(20))(i||t.name),o.decorateRoot.add(i),i.ctor=t,Object.defineProperty(t,"$type",{value:i,enumerable:!1}),Object.defineProperty(t.prototype,"$type",{value:i,enumerable:!1}),i)},0);o.decorateEnum=function(t){var i;return t.$type||(i=new(e=e||r(5))("Enum"+h++,t),o.decorateRoot.add(i),Object.defineProperty(t,"$type",{value:i,enumerable:!1}),i)},o.setProperty=function(t,i,r){if("object"!=typeof t)throw TypeError("dst must be an object");if(i)return function t(i,r,n){var e=r.shift();return"__proto__"!==e&&"prototype"!==e&&(0<r.length?i[e]=t(i[e]||{},r,n):((r=i[e])&&(n=[].concat(r).concat(n)),i[e]=n)),i}(t,i=i.split("."),r);throw TypeError("path must be specified")},Object.defineProperty(o,"decorateRoot",{get:function(){return s.decorated||(s.decorated=new(r(28)))}})},function(t,i,r){var n={BROWSER:0,WX:1};Object.freeze(n),i.a=n},function(t,i,r){!function(s){var u=r(2),a=r(0);function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=e(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==e(t)?t:t+""))(n.key),n)}}var h=null,t=(()=>{function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function")}return i=t,r=null,n=[{key:"global",value:(e=function(){if("undefined"!=typeof self&&null!==self&&0!==Object.keys(self).length)return self;if("undefined"!=typeof window&&null!==window&&0!==Object.keys(window).length)return window;if(null!=s&&0!==Object.keys(s).length)return s;var t;if("undefined"!=typeof my)return h||(t=my.getAppIdSync(),h={location:{host:t.appId+".hybrid.alipay-eco.com"}}),h;if(a.a.environment==u.a.WX)return{};throw new Error("unable to locate global object")},o.toString=function(){return e.toString()},o)}],r&&f(i.prototype,r),n&&f(i,n),Object.defineProperty(i,"prototype",{writable:!1}),i;var i,r,n,e;function o(){return e.apply(this,arguments)}})();i.a=t}.call(this,r(11))},function(t,r,o){!function(t){var n=r;function e(t,i,r){for(var n=Object.keys(i),e=0;e<n.length;++e)void 0!==t[n[e]]&&r||(t[n[e]]=i[n[e]]);return t}function i(t){function r(t,i){if(!(this instanceof r))return new r(t,i);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,r):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),i&&e(this,i)}return(r.prototype=Object.create(Error.prototype)).constructor=r,Object.defineProperty(r.prototype,"name",{get:function(){return t}}),r.prototype.toString=function(){return this.name+": "+this.message},r}n.asPromise=o(15),n.base64=o(33),n.EventEmitter=o(34),n.float=o(35),n.inquire=o(16),n.utf8=o(36),n.pool=o(37),n.LongBits=o(38),n.isNode=Boolean(void 0!==t&&t&&t.process&&t.process.versions&&t.process.versions.node),n.global=n.isNode&&t||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},n.isString=function(t){return"string"==typeof t||t instanceof String},n.isObject=function(t){return t&&"object"==typeof t},n.isset=n.isSet=function(t,i){var r=t[i];return!(null==r||!t.hasOwnProperty(i))&&("object"!=typeof r||0<(Array.isArray(r)?r:Object.keys(r)).length)},n.Buffer=(()=>{try{var t=n.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(t){return null}})(),n.v=null,n._=null,n.newBuffer=function(t){return"number"==typeof t?n.Buffer?n._(t):new n.Array(t):n.Buffer?n.v(t):"undefined"==typeof Uint8Array?t:new Uint8Array(t)},n.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(t){return t?n.LongBits.from(t).toHash():n.LongBits.zeroHash},n.longFromHash=function(t,i){t=n.LongBits.fromHash(t);return n.Long?n.Long.fromBits(t.lo,t.hi,i):t.toNumber(Boolean(i))},n.merge=e,n.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)},n.newError=i,n.ProtocolError=i("ProtocolError"),n.oneOfGetter=function(t){for(var r={},i=0;i<t.length;++i)r[t[i]]=1;return function(){for(var t=Object.keys(this),i=t.length-1;-1<i;--i)if(1===r[t[i]]&&null!=this[t[i]])return t[i]}},n.oneOfSetter=function(r){return function(t){for(var i=0;i<r.length;++i)r[i]!==t&&delete this[r[i]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n.j=function(){var r=n.Buffer;r?(n.v=r.from!==Uint8Array.from&&r.from||function(t,i){return new r(t,i)},n._=r.allocUnsafe||function(t){return new r(t)}):n.v=n._=null}}.call(this,o(11))},function(t,i,r){t.exports=o;var u=r(6),n=(((o.prototype=Object.create(u.prototype)).constructor=o).className="Enum",r(8)),e=r(1);function o(t,i,r,n,e){if(u.call(this,t,r),i&&"object"!=typeof i)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=n,this.comments=e||{},this.reserved=void 0,i)for(var o=Object.keys(i),s=0;s<o.length;++s)"number"==typeof i[o[s]]&&(this.valuesById[this.values[o[s]]=i[o[s]]]=o[s])}o.fromJSON=function(t,i){t=new o(t,i.values,i.options,i.comment,i.comments);return t.reserved=i.reserved,t},o.prototype.toJSON=function(t){t=!!t&&Boolean(t.keepComments);return e.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",t?this.comment:void 0,"comments",t?this.comments:void 0])},o.prototype.add=function(t,i,r){if(!e.isString(t))throw TypeError("name must be a string");if(!e.isInteger(i))throw TypeError("id must be an integer");if(void 0!==this.values[t])throw Error("duplicate name '"+t+"' in "+this);if(this.isReservedId(i))throw Error("id "+i+" is reserved in "+this);if(this.isReservedName(t))throw Error("name '"+t+"' is reserved in "+this);if(void 0!==this.valuesById[i]){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+i+" in "+this);this.values[t]=i}else this.valuesById[this.values[t]=i]=t;return this.comments[t]=r||null,this},o.prototype.remove=function(t){if(!e.isString(t))throw TypeError("name must be a string");var i=this.values[t];if(null==i)throw Error("name '"+t+"' does not exist in "+this);return delete this.valuesById[i],delete this.values[t],delete this.comments[t],this},o.prototype.isReservedId=function(t){return n.isReservedId(this.reserved,t)},o.prototype.isReservedName=function(t){return n.isReservedName(this.reserved,t)}},function(t,i,r){(t.exports=e).className="ReflectionObject";var n,s=r(1);function e(t,i){if(!s.isString(t))throw TypeError("name must be a string");if(i&&!s.isObject(i))throw TypeError("options must be an object");this.options=i,this.parsedOptions=null,this.name=t,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(e.prototype,{root:{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t}},fullName:{get:function(){for(var t=[this.name],i=this.parent;i;)t.unshift(i.name),i=i.parent;return t.join(".")}}}),e.prototype.toJSON=function(){throw Error()},e.prototype.onAdd=function(t){this.parent&&this.parent!==t&&this.parent.remove(this),this.parent=t,this.resolved=!1;t=t.root;t instanceof n&&t.S(this)},e.prototype.onRemove=function(t){t=t.root;t instanceof n&&t.O(this),this.parent=null,this.resolved=!1},e.prototype.resolve=function(){return this.resolved||this.root instanceof n&&(this.resolved=!0),this},e.prototype.getOption=function(t){if(this.options)return this.options[t]},e.prototype.setOption=function(t,i,r){return r&&this.options&&void 0!==this.options[t]||((this.options||(this.options={}))[t]=i),this},e.prototype.setParsedOption=function(i,t,r){this.parsedOptions||(this.parsedOptions=[]);var n,e,o=this.parsedOptions;return r?(n=o.find(function(t){return Object.prototype.hasOwnProperty.call(t,i)}))?(e=n[i],s.setProperty(e,r,t)):((n={})[i]=s.setProperty({},r,t),o.push(n)):((e={})[i]=t,o.push(e)),this},e.prototype.setOptions=function(t,i){if(t)for(var r=Object.keys(t),n=0;n<r.length;++n)this.setOption(r[n],t[r[n]],i);return this},e.prototype.toString=function(){var t=this.constructor.className,i=this.fullName;return i.length?t+" "+i:t},e.j=function(t){n=t}},function(t,i,r){t.exports=s;var n,u=r(6),e=(((s.prototype=Object.create(u.prototype)).constructor=s).className="Field",r(5)),a=r(9),f=r(1),h=/^required|optional|repeated$/;function s(t,i,r,n,e,o,s){if(f.isObject(n)?(s=e,o=n,n=e=void 0):f.isObject(e)&&(s=o,o=e,e=void 0),u.call(this,t,o),!f.isInteger(i)||i<0)throw TypeError("id must be a non-negative integer");if(!f.isString(r))throw TypeError("type must be a string");if(void 0!==n&&!h.test(n=n.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(void 0!==e&&!f.isString(e))throw TypeError("extend must be a string");this.rule=(n="proto3_optional"===n?"optional":n)&&"optional"!==n?n:void 0,this.type=r,this.id=i,this.extend=e||void 0,this.required="required"===n,this.optional=!this.required,this.repeated="repeated"===n,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!f.Long&&void 0!==a.long[r],this.bytes="bytes"===r,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this.k=null,this.comment=s}s.fromJSON=function(t,i){return new s(t,i.id,i.type,i.rule,i.extend,i.options,i.comment)},Object.defineProperty(s.prototype,"packed",{get:function(){return null===this.k&&(this.k=!1!==this.getOption("packed")),this.k}}),s.prototype.setOption=function(t,i,r){return"packed"===t&&(this.k=null),u.prototype.setOption.call(this,t,i,r)},s.prototype.toJSON=function(t){t=!!t&&Boolean(t.keepComments);return f.toObject(["rule","optional"!==this.rule&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},s.prototype.resolve=function(){var t;return this.resolved?this:(void 0===(this.typeDefault=a.defaults[this.type])&&(this.resolvedType=(this.declaringField||this).parent.lookupTypeOrEnum(this.type),this.resolvedType instanceof n?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof e)&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault]),this.options&&(!0!==this.options.packed&&(void 0===this.options.packed||!this.resolvedType||this.resolvedType instanceof e)||delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long?(this.typeDefault=f.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault)):this.bytes&&"string"==typeof this.typeDefault&&(f.base64.test(this.typeDefault)?f.base64.decode(this.typeDefault,t=f.newBuffer(f.base64.length(this.typeDefault)),0):f.utf8.write(this.typeDefault,t=f.newBuffer(f.utf8.length(this.typeDefault)),0),this.typeDefault=t),this.map?this.defaultValue=f.emptyObject:this.repeated?this.defaultValue=f.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof n&&(this.parent.ctor.prototype[this.name]=this.defaultValue),u.prototype.resolve.call(this))},s.d=function(r,n,e,o){return"function"==typeof n?n=f.decorateType(n).name:n&&"object"==typeof n&&(n=f.decorateEnum(n).name),function(t,i){f.decorateType(t.constructor).add(new s(i,r,n,e,{default:o}))}},s.j=function(t){n=t}},function(t,i,r){t.exports=l;var e,o,s,n=r(6),u=(((l.prototype=Object.create(n.prototype)).constructor=l).className="Namespace",r(7)),a=r(10),f=r(1);function h(t,i){if(t&&t.length){for(var r={},n=0;n<t.length;++n)r[t[n].name]=t[n].toJSON(i);return r}}function l(t,i){n.call(this,t,i),this.nested=void 0,this.T=null}function c(t){return t.T=null,t}l.fromJSON=function(t,i){return new l(t,i.options).addJSON(i.nested)},l.arrayToJSON=h,l.isReservedId=function(t,i){if(t)for(var r=0;r<t.length;++r)if("string"!=typeof t[r]&&t[r][0]<=i&&t[r][1]>i)return!0;return!1},l.isReservedName=function(t,i){if(t)for(var r=0;r<t.length;++r)if(t[r]===i)return!0;return!1},Object.defineProperty(l.prototype,"nestedArray",{get:function(){return this.T||(this.T=f.toArray(this.nested))}}),l.prototype.toJSON=function(t){return f.toObject(["options",this.options,"nested",h(this.nestedArray,t)])},l.prototype.addJSON=function(t){if(t)for(var i,r=Object.keys(t),n=0;n<r.length;++n)i=t[r[n]],this.add((void 0!==i.fields?e:void 0!==i.values?s:void 0!==i.methods?o:void 0!==i.id?u:l).fromJSON(r[n],i));return this},l.prototype.get=function(t){return this.nested&&this.nested[t]||null},l.prototype.getEnum=function(t){if(this.nested&&this.nested[t]instanceof s)return this.nested[t].values;throw Error("no such enum: "+t)},l.prototype.add=function(t){if(!(t instanceof u&&void 0!==t.extend||t instanceof e||t instanceof s||t instanceof o||t instanceof l||t instanceof a))throw TypeError("object must be a valid nested object");if(this.nested){var i=this.get(t.name);if(i){if(!(i instanceof l&&t instanceof l)||i instanceof e||i instanceof o)throw Error("duplicate name '"+t.name+"' in "+this);for(var r=i.nestedArray,n=0;n<r.length;++n)t.add(r[n]);this.remove(i),this.nested||(this.nested={}),t.setOptions(i.options,!0)}}else this.nested={};return(this.nested[t.name]=t).onAdd(this),c(this)},l.prototype.remove=function(t){if(!(t instanceof n))throw TypeError("object must be a ReflectionObject");if(t.parent!==this)throw Error(t+" is not a member of "+this);return delete this.nested[t.name],Object.keys(this.nested).length||(this.nested=void 0),t.onRemove(this),c(this)},l.prototype.define=function(t,i){if(f.isString(t))t=t.split(".");else if(!Array.isArray(t))throw TypeError("illegal path");if(t&&t.length&&""===t[0])throw Error("path must be relative");for(var r=this;0<t.length;){var n=t.shift();if(r.nested&&r.nested[n]){if(!((r=r.nested[n])instanceof l))throw Error("path conflicts with non-namespace objects")}else r.add(r=new l(n))}return i&&r.addJSON(i),r},l.prototype.resolveAll=function(){for(var t=this.nestedArray,i=0;i<t.length;)t[i]instanceof l?t[i++].resolveAll():t[i++].resolve();return this.resolve()},l.prototype.lookup=function(t,i,r){if("boolean"==typeof i?(r=i,i=void 0):i&&!Array.isArray(i)&&(i=[i]),f.isString(t)&&t.length){if("."===t)return this.root;t=t.split(".")}else if(!t.length)return this;if(""===t[0])return this.root.lookup(t.slice(1),i);var n=this.get(t[0]);if(n){if(1===t.length){if(!i||-1<i.indexOf(n.constructor))return n}else if(n instanceof l&&(n=n.lookup(t.slice(1),i,!0)))return n}else for(var e=0;e<this.nestedArray.length;++e)if(this.T[e]instanceof l&&(n=this.T[e].lookup(t,i,!0)))return n;return null===this.parent||r?null:this.parent.lookup(t,i)},l.prototype.lookupType=function(t){var i=this.lookup(t,[e]);if(i)return i;throw Error("no such type: "+t)},l.prototype.lookupEnum=function(t){var i=this.lookup(t,[s]);if(i)return i;throw Error("no such Enum '"+t+"' in "+this)},l.prototype.lookupTypeOrEnum=function(t){var i=this.lookup(t,[e,s]);if(i)return i;throw Error("no such Type or Enum '"+t+"' in "+this)},l.prototype.lookupService=function(t){var i=this.lookup(t,[o]);if(i)return i;throw Error("no such Service '"+t+"' in "+this)},l.j=function(t,i,r){e=t,o=i,s=r}},function(t,i,r){var r=r(1),e=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function n(t,i){var r=0,n={};for(i|=0;r<t.length;)n[e[r+i]]=t[r++];return n}i.basic=n([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),i.defaults=n([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",r.emptyArray,null]),i.long=n([0,0,0,1,1],7),i.mapKey=n([0,0,0,5,5,0,0,0,1,1,0,2],2),i.packed=n([1,5,0,0,0,5,5,0,0,0,1,1,0])},function(t,i,r){t.exports=s;var e=r(6),n=(((s.prototype=Object.create(e.prototype)).constructor=s).className="OneOf",r(7)),o=r(1);function s(t,i,r,n){if(Array.isArray(i)||(r=i,i=void 0),e.call(this,t,r),void 0!==i&&!Array.isArray(i))throw TypeError("fieldNames must be an Array");this.oneof=i||[],this.fieldsArray=[],this.comment=n}function u(t){if(t.parent)for(var i=0;i<t.fieldsArray.length;++i)t.fieldsArray[i].parent||t.parent.add(t.fieldsArray[i])}s.fromJSON=function(t,i){return new s(t,i.oneof,i.options,i.comment)},s.prototype.toJSON=function(t){t=!!t&&Boolean(t.keepComments);return o.toObject(["options",this.options,"oneof",this.oneof,"comment",t?this.comment:void 0])},s.prototype.add=function(t){if(t instanceof n)return t.parent&&t.parent!==this.parent&&t.parent.remove(t),this.oneof.push(t.name),this.fieldsArray.push(t),u(t.partOf=this),this;throw TypeError("field must be a Field")},s.prototype.remove=function(t){if(!(t instanceof n))throw TypeError("field must be a Field");var i=this.fieldsArray.indexOf(t);if(i<0)throw Error(t+" is not a member of "+this);return this.fieldsArray.splice(i,1),-1<(i=this.oneof.indexOf(t.name))&&this.oneof.splice(i,1),t.partOf=null,this},s.prototype.onAdd=function(t){e.prototype.onAdd.call(this,t);for(var i=0;i<this.oneof.length;++i){var r=t.get(this.oneof[i]);r&&!r.partOf&&(r.partOf=this).fieldsArray.push(r)}u(this)},s.prototype.onRemove=function(t){for(var i,r=0;r<this.fieldsArray.length;++r)(i=this.fieldsArray[r]).parent&&i.parent.remove(i);e.prototype.onRemove.call(this,t)},s.d=function(){for(var r=new Array(arguments.length),t=0;t<arguments.length;)r[t]=arguments[t++];return function(t,i){o.decorateType(t.constructor).add(new s(i,r)),Object.defineProperty(t,i,{get:o.oneOfGetter(r),set:o.oneOfSetter(r)})}}},function(t,i){var r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,i,r){t.exports=l;var n,e=r(4),o=e.LongBits,s=e.base64,u=e.utf8;function a(t,i,r){this.fn=t,this.len=i,this.next=void 0,this.val=r}function f(){}function h(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function l(){this.len=0,this.head=new a(f,0,0),this.tail=this.head,this.states=null}function c(){return e.Buffer?function(){return(l.create=function(){return new n})()}:function(){return new l}}function v(t,i,r){i[r]=255&t}function y(t,i){this.len=t,this.next=void 0,this.val=i}function d(t,i,r){for(;t.hi;)i[r++]=127&t.lo|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;127<t.lo;)i[r++]=127&t.lo|128,t.lo=t.lo>>>7;i[r++]=t.lo}function b(t,i,r){i[r]=255&t,i[r+1]=t>>>8&255,i[r+2]=t>>>16&255,i[r+3]=t>>>24}l.create=c(),l.alloc=function(t){return new e.Array(t)},e.Array!==Array&&(l.alloc=e.pool(l.alloc,e.Array.prototype.subarray)),l.prototype.M=function(t,i,r){return this.tail=this.tail.next=new a(t,i,r),this.len+=i,this},(y.prototype=Object.create(a.prototype)).fn=function(t,i,r){for(;127<t;)i[r++]=127&t|128,t>>>=7;i[r]=t},l.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new y((t>>>=0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this},l.prototype.int32=function(t){return t<0?this.M(d,10,o.fromNumber(t)):this.uint32(t)},l.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)},l.prototype.int64=l.prototype.uint64=function(t){t=o.from(t);return this.M(d,t.length(),t)},l.prototype.sint64=function(t){t=o.from(t).zzEncode();return this.M(d,t.length(),t)},l.prototype.bool=function(t){return this.M(v,1,t?1:0)},l.prototype.sfixed32=l.prototype.fixed32=function(t){return this.M(b,4,t>>>0)},l.prototype.sfixed64=l.prototype.fixed64=function(t){t=o.from(t);return this.M(b,4,t.lo).M(b,4,t.hi)},l.prototype.float=function(t){return this.M(e.float.writeFloatLE,4,t)},l.prototype.double=function(t){return this.M(e.float.writeDoubleLE,8,t)};var p=e.Array.prototype.set?function(t,i,r){i.set(t,r)}:function(t,i,r){for(var n=0;n<t.length;++n)i[r+n]=t[n]};l.prototype.bytes=function(t){var i,r=t.length>>>0;return r?(e.isString(t)&&(i=l.alloc(r=s.length(t)),s.decode(t,i,0),t=i),this.uint32(r).M(p,r,t)):this.M(v,1,0)},l.prototype.string=function(t){var i=u.length(t);return i?this.uint32(i).M(u.write,i,t):this.M(v,1,0)},l.prototype.fork=function(){return this.states=new h(this),this.head=this.tail=new a(f,0,0),this.len=0,this},l.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new a(f,0,0),this.len=0),this},l.prototype.ldelim=function(){var t=this.head,i=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=t.next,this.tail=i,this.len+=r),this},l.prototype.finish=function(){for(var t=this.head.next,i=this.constructor.alloc(this.len),r=0;t;)t.fn(t.val,i,r),r+=t.len,t=t.next;return i},l.j=function(t){n=t,l.create=c(),n.j()}},function(t,i,r){t.exports=a;var n,e=r(4),o=e.LongBits,s=e.utf8;function u(t,i){return RangeError("index out of range: "+t.pos+" + "+(i||1)+" > "+t.len)}function a(t){this.buf=t,this.pos=0,this.len=t.length}function f(){return e.Buffer?function(t){return(a.create=function(t){return e.Buffer.isBuffer(t)?new n(t):l(t)})(t)}:l}var h,l="undefined"!=typeof Uint8Array?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new a(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new a(t);throw Error("illegal buffer")};function c(){var t=new o(0,0),i=0;if(!(4<this.len-this.pos)){for(;i<3;++i){if(this.pos>=this.len)throw u(this);if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*i)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(127&this.buf[this.pos++])<<7*i)>>>0,t}for(;i<4;++i)if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*i)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return t;if(i=0,4<this.len-this.pos){for(;i<5;++i)if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*i+3)>>>0,this.buf[this.pos++]<128)return t}else for(;i<5;++i){if(this.pos>=this.len)throw u(this);if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*i+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}function v(t,i){return(t[i-4]|t[i-3]<<8|t[i-2]<<16|t[i-1]<<24)>>>0}function y(){if(this.pos+8>this.len)throw u(this,8);return new o(v(this.buf,this.pos+=4),v(this.buf,this.pos+=4))}a.create=f(),a.prototype.R=e.Array.prototype.subarray||e.Array.prototype.slice,a.prototype.uint32=(h=4294967295,function(){if(h=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(h=(h|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(h=(h|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(h=(h|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(h=(h|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)||!((this.pos+=5)>this.len))return h;throw this.pos=this.len,u(this,10)}),a.prototype.int32=function(){return 0|this.uint32()},a.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(1&t)|0},a.prototype.bool=function(){return 0!==this.uint32()},a.prototype.fixed32=function(){if(this.pos+4>this.len)throw u(this,4);return v(this.buf,this.pos+=4)},a.prototype.sfixed32=function(){if(this.pos+4>this.len)throw u(this,4);return 0|v(this.buf,this.pos+=4)},a.prototype.float=function(){if(this.pos+4>this.len)throw u(this,4);var t=e.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t},a.prototype.double=function(){if(this.pos+8>this.len)throw u(this,4);var t=e.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t},a.prototype.bytes=function(){var t=this.uint32(),i=this.pos,r=this.pos+t;if(r>this.len)throw u(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(i,r):i===r?new this.buf.constructor(0):this.R.call(this.buf,i,r)},a.prototype.string=function(){var t=this.bytes();return s.read(t,0,t.length)},a.prototype.skip=function(t){if("number"==typeof t){if(this.pos+t>this.len)throw u(this,t);this.pos+=t}else do{if(this.pos>=this.len)throw u(this)}while(128&this.buf[this.pos++]);return this},a.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(t=7&this.uint32());)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this},a.j=function(t){n=t,a.create=f(),n.j();var i=e.Long?"toLong":"toNumber";e.merge(a.prototype,{int64:function(){return c.call(this)[i](!1)},uint64:function(){return c.call(this)[i](!0)},sint64:function(){return c.call(this).zzDecode()[i](!1)},fixed64:function(){return y.call(this)[i](!0)},sfixed64:function(){return y.call(this)[i](!1)}})}},function(t,i,r){t.exports=e;var n=r(4);function e(t){if(t)for(var i=Object.keys(t),r=0;r<i.length;++r)this[i[r]]=t[i[r]]}e.create=function(t){return this.$type.create(t)},e.encode=function(t,i){return this.$type.encode(t,i)},e.encodeDelimited=function(t,i){return this.$type.encodeDelimited(t,i)},e.decode=function(t){return this.$type.decode(t)},e.decodeDelimited=function(t){return this.$type.decodeDelimited(t)},e.verify=function(t){return this.$type.verify(t)},e.fromObject=function(t){return this.$type.fromObject(t)},e.toObject=function(t,i){return this.$type.toObject(t,i)},e.prototype.toJSON=function(){return this.$type.toObject(this,n.toJSONOptions)}},function(t,i,r){t.exports=function(t,i){var r=new Array(arguments.length-1),o=0,n=2,s=!0;for(;n<arguments.length;)r[o++]=arguments[n++];return new Promise(function(n,e){r[o]=function(t){if(s)if(s=!1,t)e(t);else{for(var i=new Array(arguments.length-1),r=0;r<i.length;)i[r++]=arguments[r];n.apply(null,i)}};try{t.apply(i||null,r)}catch(t){s&&(s=!1,e(t))}})}},function(module,exports,__webpack_require__){function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},function(t,i,r){i.Service=r(41)},function(t,i,r){t.exports={}},function(t,i,r){t.exports=function(t){for(var i,r=l.codegen(["m","w"],t.name+"$encode")("if(!w)")("w=Writer.create()"),n=t.fieldsArray.slice().sort(l.compareFieldsById),e=0;e<n.length;++e){var o=n[e].resolve(),s=t.N.indexOf(o),u=o.resolvedType instanceof f?"int32":o.type,a=h.basic[u];i="m"+l.safeProp(o.name),o.map?(r("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",i,o.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",i)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(o.id<<3|2)>>>0,8|h.mapKey[o.keyType],o.keyType),void 0===a?r("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",s,i):r(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|a,u,i),r("}")("}")):o.repeated?(r("if(%s!=null&&%s.length){",i,i),o.packed&&void 0!==h.packed[u]?r("w.uint32(%i).fork()",(o.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",i)("w.%s(%s[i])",u,i)("w.ldelim()"):(r("for(var i=0;i<%s.length;++i)",i),void 0===a?c(r,o,s,i+"[i]"):r("w.uint32(%i).%s(%s[i])",(o.id<<3|a)>>>0,u,i)),r("}")):(o.optional&&r("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",i,o.name),void 0===a?c(r,o,s,i):r("w.uint32(%i).%s(%s)",(o.id<<3|a)>>>0,u,i))}return r("return w")};var f=r(5),h=r(9),l=r(1);function c(t,i,r,n){i.resolvedType.group?t("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",r,n,(i.id<<3|3)>>>0,(i.id<<3|4)>>>0):t("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",r,n,(i.id<<3|2)>>>0)}},function(t,i,r){t.exports=w;var s=r(8),u=(((w.prototype=Object.create(s.prototype)).constructor=w).className="Type",r(5)),a=r(10),f=r(7),h=r(21),l=r(22),e=r(14),o=r(13),c=r(12),v=r(1),y=r(19),d=r(24),b=r(25),p=r(26),m=r(27);function w(t,i){s.call(this,t,i),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this.I=null,this.N=null,this.A=null,this.P=null}function n(t){return t.I=t.N=t.A=null,delete t.encode,delete t.decode,delete t.verify,t}Object.defineProperties(w.prototype,{fieldsById:{get:function(){if(!this.I){this.I={};for(var t=Object.keys(this.fields),i=0;i<t.length;++i){var r=this.fields[t[i]],n=r.id;if(this.I[n])throw Error("duplicate id "+n+" in "+this);this.I[n]=r}}return this.I}},fieldsArray:{get:function(){return this.N||(this.N=v.toArray(this.fields))}},oneofsArray:{get:function(){return this.A||(this.A=v.toArray(this.oneofs))}},ctor:{get:function(){return this.P||(this.ctor=w.generateConstructor(this)())},set:function(t){for(var i=t.prototype,r=(i instanceof e||((t.prototype=new e).constructor=t,v.merge(t.prototype,i)),t.$type=t.prototype.$type=this,v.merge(t,e,!0),this.P=t,0);r<this.fieldsArray.length;++r)this.N[r].resolve();for(var n={},r=0;r<this.oneofsArray.length;++r)n[this.A[r].resolve().name]={get:v.oneOfGetter(this.A[r].oneof),set:v.oneOfSetter(this.A[r].oneof)};r&&Object.defineProperties(t.prototype,n)}}}),w.generateConstructor=function(t){for(var i,r=v.codegen(["p"],t.name),n=0;n<t.fieldsArray.length;++n)(i=t.N[n]).map?r("this%s={}",v.safeProp(i.name)):i.repeated&&r("this%s=[]",v.safeProp(i.name));return r("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},w.fromJSON=function(t,i){for(var r=new w(t,i.options),n=(r.extensions=i.extensions,r.reserved=i.reserved,Object.keys(i.fields)),e=0;e<n.length;++e)r.add((void 0!==i.fields[n[e]].keyType?h:f).fromJSON(n[e],i.fields[n[e]]));if(i.oneofs)for(n=Object.keys(i.oneofs),e=0;e<n.length;++e)r.add(a.fromJSON(n[e],i.oneofs[n[e]]));if(i.nested)for(n=Object.keys(i.nested),e=0;e<n.length;++e){var o=i.nested[n[e]];r.add((void 0!==o.id?f:void 0!==o.fields?w:void 0!==o.values?u:void 0!==o.methods?l:s).fromJSON(n[e],o))}return i.extensions&&i.extensions.length&&(r.extensions=i.extensions),i.reserved&&i.reserved.length&&(r.reserved=i.reserved),i.group&&(r.group=!0),i.comment&&(r.comment=i.comment),r},w.prototype.toJSON=function(t){var i=s.prototype.toJSON.call(this,t),r=!!t&&Boolean(t.keepComments);return v.toObject(["options",i&&i.options||void 0,"oneofs",s.arrayToJSON(this.oneofsArray,t),"fields",s.arrayToJSON(this.fieldsArray.filter(function(t){return!t.declaringField}),t)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",i&&i.nested||void 0,"comment",r?this.comment:void 0])},w.prototype.resolveAll=function(){for(var t=this.fieldsArray,i=0;i<t.length;)t[i++].resolve();for(var r=this.oneofsArray,i=0;i<r.length;)r[i++].resolve();return s.prototype.resolveAll.call(this)},w.prototype.get=function(t){return this.fields[t]||this.oneofs&&this.oneofs[t]||this.nested&&this.nested[t]||null},w.prototype.add=function(t){if(this.get(t.name))throw Error("duplicate name '"+t.name+"' in "+this);if(t instanceof f&&void 0===t.extend){if((this.I||this.fieldsById)[t.id])throw Error("duplicate id "+t.id+" in "+this);if(this.isReservedId(t.id))throw Error("id "+t.id+" is reserved in "+this);if(this.isReservedName(t.name))throw Error("name '"+t.name+"' is reserved in "+this);return t.parent&&t.parent.remove(t),(this.fields[t.name]=t).message=this,t.onAdd(this),n(this)}return t instanceof a?(this.oneofs||(this.oneofs={}),(this.oneofs[t.name]=t).onAdd(this),n(this)):s.prototype.add.call(this,t)},w.prototype.remove=function(t){if(t instanceof f&&void 0===t.extend){if(this.fields&&this.fields[t.name]===t)return delete this.fields[t.name],t.parent=null,t.onRemove(this),n(this);throw Error(t+" is not a member of "+this)}if(t instanceof a){if(this.oneofs&&this.oneofs[t.name]===t)return delete this.oneofs[t.name],t.parent=null,t.onRemove(this),n(this);throw Error(t+" is not a member of "+this)}return s.prototype.remove.call(this,t)},w.prototype.isReservedId=function(t){return s.isReservedId(this.reserved,t)},w.prototype.isReservedName=function(t){return s.isReservedName(this.reserved,t)},w.prototype.create=function(t){return new this.ctor(t)},w.prototype.setup=function(){for(var t=this.fullName,i=[],r=0;r<this.fieldsArray.length;++r)i.push(this.N[r].resolve().resolvedType);this.encode=y(this)({Writer:c,types:i,util:v}),this.decode=d(this)({Reader:o,types:i,util:v}),this.verify=b(this)({types:i,util:v}),this.fromObject=p.fromObject(this)({types:i,util:v}),this.toObject=p.toObject(this)({types:i,util:v});var n,t=m[t];return t&&((n=Object.create(this)).fromObject=this.fromObject,this.fromObject=t.fromObject.bind(n),n.toObject=this.toObject,this.toObject=t.toObject.bind(n)),this},w.prototype.encode=function(t,i){return this.setup().encode(t,i)},w.prototype.encodeDelimited=function(t,i){return this.encode(t,i&&i.len?i.fork():i).ldelim()},w.prototype.decode=function(t,i){return this.setup().decode(t,i)},w.prototype.decodeDelimited=function(t){return t instanceof o||(t=o.create(t)),this.decode(t,t.uint32())},w.prototype.verify=function(t){return this.setup().verify(t)},w.prototype.fromObject=function(t){return this.setup().fromObject(t)},w.prototype.toObject=function(t,i){return this.setup().toObject(t,i)},w.d=function(i){return function(t){v.decorateType(t,i)}}},function(t,i,r){t.exports=o;var s=r(7),n=(((o.prototype=Object.create(s.prototype)).constructor=o).className="MapField",r(9)),u=r(1);function o(t,i,r,n,e,o){if(s.call(this,t,i,n,void 0,void 0,e,o),!u.isString(r))throw TypeError("keyType must be a string");this.keyType=r,this.resolvedKeyType=null,this.map=!0}o.fromJSON=function(t,i){return new o(t,i.id,i.keyType,i.type,i.options,i.comment)},o.prototype.toJSON=function(t){t=!!t&&Boolean(t.keepComments);return u.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},o.prototype.resolve=function(){if(this.resolved)return this;if(void 0===n.mapKey[this.keyType])throw Error("invalid key type: "+this.keyType);return s.prototype.resolve.call(this)},o.d=function(r,n,e){return"function"==typeof e?e=u.decorateType(e).name:e&&"object"==typeof e&&(e=u.decorateEnum(e).name),function(t,i){u.decorateType(t.constructor).add(new o(i,r,n,e))}}},function(t,i,r){t.exports=s;var n=r(8),o=(((s.prototype=Object.create(n.prototype)).constructor=s).className="Service",r(23)),u=r(1),a=r(17);function s(t,i){n.call(this,t,i),this.methods={},this.L=null}function e(t){return t.L=null,t}s.fromJSON=function(t,i){var r=new s(t,i.options);if(i.methods)for(var n=Object.keys(i.methods),e=0;e<n.length;++e)r.add(o.fromJSON(n[e],i.methods[n[e]]));return i.nested&&r.addJSON(i.nested),r.comment=i.comment,r},s.prototype.toJSON=function(t){var i=n.prototype.toJSON.call(this,t),r=!!t&&Boolean(t.keepComments);return u.toObject(["options",i&&i.options||void 0,"methods",n.arrayToJSON(this.methodsArray,t)||{},"nested",i&&i.nested||void 0,"comment",r?this.comment:void 0])},Object.defineProperty(s.prototype,"methodsArray",{get:function(){return this.L||(this.L=u.toArray(this.methods))}}),s.prototype.get=function(t){return this.methods[t]||n.prototype.get.call(this,t)},s.prototype.resolveAll=function(){for(var t=this.methodsArray,i=0;i<t.length;++i)t[i].resolve();return n.prototype.resolve.call(this)},s.prototype.add=function(t){if(this.get(t.name))throw Error("duplicate name '"+t.name+"' in "+this);return t instanceof o?e((this.methods[t.name]=t).parent=this):n.prototype.add.call(this,t)},s.prototype.remove=function(t){if(t instanceof o){if(this.methods[t.name]!==t)throw Error(t+" is not a member of "+this);return delete this.methods[t.name],t.parent=null,e(this)}return n.prototype.remove.call(this,t)},s.prototype.create=function(t,i,r){for(var n,e=new a.Service(t,i,r),o=0;o<this.methodsArray.length;++o){var s=u.lcFirst((n=this.L[o]).resolve().name).replace(/[^$\w_]/g,"");e[s]=u.codegen(["r","c"],u.isReserved(s)?s+"_":s)("return this.rpcCall(m,q,s,r,c)")({m:n,q:n.resolvedRequestType.ctor,s:n.resolvedResponseType.ctor})}return e}},function(t,i,r){t.exports=n;var f=r(6),h=(((n.prototype=Object.create(f.prototype)).constructor=n).className="Method",r(1));function n(t,i,r,n,e,o,s,u,a){if(h.isObject(e)?(s=e,e=o=void 0):h.isObject(o)&&(s=o,o=void 0),void 0!==i&&!h.isString(i))throw TypeError("type must be a string");if(!h.isString(r))throw TypeError("requestType must be a string");if(!h.isString(n))throw TypeError("responseType must be a string");f.call(this,t,s),this.type=i||"rpc",this.requestType=r,this.requestStream=!!e||void 0,this.responseType=n,this.responseStream=!!o||void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=u,this.parsedOptions=a}n.fromJSON=function(t,i){return new n(t,i.type,i.requestType,i.responseType,i.requestStream,i.responseStream,i.options,i.comment,i.parsedOptions)},n.prototype.toJSON=function(t){t=!!t&&Boolean(t.keepComments);return h.toObject(["type","rpc"!==this.type&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",t?this.comment:void 0,"parsedOptions",this.parsedOptions])},n.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),f.prototype.resolve.call(this))}},function(t,i,r){t.exports=function(t){var i=f.codegen(["r","l"],t.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(t.fieldsArray.filter(function(t){return t.map}).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");t.group&&i("if((t&7)===4)")("break");i("switch(t>>>3){");for(var r=0;r<t.fieldsArray.length;++r){var n=t.N[r].resolve(),e=n.resolvedType instanceof u?"int32":n.type,o="m"+f.safeProp(n.name);i("case %i:",n.id),n.map?(i("if(%s===util.emptyObject)",o)("%s={}",o)("var c2 = r.uint32()+r.pos"),void 0!==a.defaults[n.keyType]?i("k=%j",a.defaults[n.keyType]):i("k=null"),void 0!==a.defaults[e]?i("value=%j",a.defaults[e]):i("value=null"),i("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",n.keyType)("case 2:"),void 0===a.basic[e]?i("value=types[%i].decode(r,r.uint32())",r):i("value=r.%s()",e),i("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),void 0!==a.long[n.keyType]?i('%s[typeof k==="object"?util.longToHash(k):k]=value',o):i("%s[k]=value",o)):n.repeated?(i("if(!(%s&&%s.length))",o,o)("%s=[]",o),void 0!==a.packed[e]&&i("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",o,e)("}else"),void 0===a.basic[e]?i(n.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",o,r):i("%s.push(r.%s())",o,e)):void 0===a.basic[e]?i(n.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",o,r):i("%s=r.%s()",o,e),i("break")}for(i("default:")("r.skipType(t&7)")("break")("}")("}"),r=0;r<t.N.length;++r){var s=t.N[r];s.required&&i("if(!m.hasOwnProperty(%j))",s.name)("throw util.ProtocolError(%j,{instance:m})","missing required '"+s.name+"'")}return i("return m")};var u=r(5),a=r(9),f=r(1)},function(t,i,r){t.exports=function(t){var i=a.codegen(["m"],t.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),r=t.oneofsArray,n={};r.length&&i("var p={}");for(var e=0;e<t.fieldsArray.length;++e){var o,s=t.N[e].resolve(),u="m"+a.safeProp(s.name);s.optional&&i("if(%s!=null&&m.hasOwnProperty(%j)){",u,s.name),s.map?(i("if(!util.isObject(%s))",u)("return%j",f(s,"object"))("var k=Object.keys(%s)",u)("for(var i=0;i<k.length;++i){"),((t,i,r)=>{switch(i.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":t("if(!util.key32Re.test(%s))",r)("return%j",f(i,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":t("if(!util.key64Re.test(%s))",r)("return%j",f(i,"integer|Long key"));break;case"bool":t("if(!util.key2Re.test(%s))",r)("return%j",f(i,"boolean key"))}})(i,s,"k[i]"),h(i,s,e,u+"[k[i]]")("}")):s.repeated?(i("if(!Array.isArray(%s))",u)("return%j",f(s,"array"))("for(var i=0;i<%s.length;++i){",u),h(i,s,e,u+"[i]")("}")):(s.partOf&&(o=a.safeProp(s.partOf.name),1===n[s.partOf.name]&&i("if(p%s===1)",o)("return%j",s.partOf.name+": multiple values"),n[s.partOf.name]=1,i("p%s=1",o)),h(i,s,e,u)),s.optional&&i("}")}return i("return null")};var s=r(5),a=r(1);function f(t,i){return t.name+": "+i+(t.repeated&&"array"!==i?"[]":t.map&&"object"!==i?"{k:"+t.keyType+"}":"")+" expected"}function h(t,i,r,n){if(i.resolvedType)if(i.resolvedType instanceof s){t("switch(%s){",n)("default:")("return%j",f(i,"enum value"));for(var e=Object.keys(i.resolvedType.values),o=0;o<e.length;++o)t("case %i:",i.resolvedType.values[e[o]]);t("break")("}")}else t("{")("var e=types[%i].verify(%s);",r,n)("if(e)")("return%j+e",i.name+".")("}");else switch(i.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":t("if(!util.isInteger(%s))",n)("return%j",f(i,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":t("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",n,n,n,n)("return%j",f(i,"integer|Long"));break;case"float":case"double":t('if(typeof %s!=="number")',n)("return%j",f(i,"number"));break;case"bool":t('if(typeof %s!=="boolean")',n)("return%j",f(i,"boolean"));break;case"string":t("if(!util.isString(%s))",n)("return%j",f(i,"string"));break;case"bytes":t('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',n,n,n)("return%j",f(i,"buffer"))}return t}},function(t,i,r){var c=r(5),v=r(1);function s(t,i,r,n){if(i.resolvedType)if(i.resolvedType instanceof c){t("switch(d%s){",n);for(var e=i.resolvedType.values,o=Object.keys(e),s=0;s<o.length;++s)i.repeated&&e[o[s]]===i.typeDefault&&t("default:"),t("case%j:",o[s])("case %i:",e[o[s]])("m%s=%j",n,e[o[s]])("break");t("}")}else t('if(typeof d%s!=="object")',n)("throw TypeError(%j)",i.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",n,r,n);else{var u=!1;switch(i.type){case"double":case"float":t("m%s=Number(d%s)",n,n);break;case"uint32":case"fixed32":t("m%s=d%s>>>0",n,n);break;case"int32":case"sint32":case"sfixed32":t("m%s=d%s|0",n,n);break;case"uint64":u=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":t("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",n,n,u)('else if(typeof d%s==="string")',n)("m%s=parseInt(d%s,10)",n,n)('else if(typeof d%s==="number")',n)("m%s=d%s",n,n)('else if(typeof d%s==="object")',n)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",n,n,n,u?"true":"");break;case"bytes":t('if(typeof d%s==="string")',n)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",n,n,n)("else if(d%s.length)",n)("m%s=d%s",n,n);break;case"string":t("m%s=String(d%s)",n,n);break;case"bool":t("m%s=Boolean(d%s)",n,n)}}return t}function y(t,i,r,n){if(i.resolvedType)i.resolvedType instanceof c?t("d%s=o.enums===String?types[%i].values[m%s]:m%s",n,r,n,n):t("d%s=types[%i].toObject(m%s,o)",n,r,n);else{var e=!1;switch(i.type){case"double":case"float":t("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",n,n,n,n);break;case"uint64":e=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":t('if(typeof m%s==="number")',n)("d%s=o.longs===String?String(m%s):m%s",n,n,n)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",n,n,n,n,e?"true":"",n);break;case"bytes":t("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",n,n,n,n,n);break;default:t("d%s=m%s",n,n)}}return t}i.fromObject=function(t){var i=t.fieldsArray,r=v.codegen(["d"],t.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!i.length)return r("return new this.ctor");r("var m=new this.ctor");for(var n=0;n<i.length;++n){var e=i[n].resolve(),o=v.safeProp(e.name);e.map?(r("if(d%s){",o)('if(typeof d%s!=="object")',o)("throw TypeError(%j)",e.fullName+": object expected")("m%s={}",o)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",o),s(r,e,n,o+"[ks[i]]")("}")("}")):e.repeated?(r("if(d%s){",o)("if(!Array.isArray(d%s))",o)("throw TypeError(%j)",e.fullName+": array expected")("m%s=[]",o)("for(var i=0;i<d%s.length;++i){",o),s(r,e,n,o+"[i]")("}")("}")):(e.resolvedType instanceof c||r("if(d%s!=null){",o),s(r,e,n,o),e.resolvedType instanceof c||r("}"))}return r("return m")},i.toObject=function(t){var i=t.fieldsArray.slice().sort(v.compareFieldsById);if(!i.length)return v.codegen()("return {}");for(var r=v.codegen(["m","o"],t.name+"$toObject")("if(!o)")("o={}")("var d={}"),n=[],e=[],o=[],s=0;s<i.length;++s)i[s].partOf||(i[s].resolve().repeated?n:i[s].map?e:o).push(i[s]);if(n.length){for(r("if(o.arrays||o.defaults){"),s=0;s<n.length;++s)r("d%s=[]",v.safeProp(n[s].name));r("}")}if(e.length){for(r("if(o.objects||o.defaults){"),s=0;s<e.length;++s)r("d%s={}",v.safeProp(e[s].name));r("}")}if(o.length){for(r("if(o.defaults){"),s=0;s<o.length;++s){var u,a=o[s],f=v.safeProp(a.name);a.resolvedType instanceof c?r("d%s=o.enums===String?%j:%j",f,a.resolvedType.valuesById[a.typeDefault],a.typeDefault):a.long?r("if(util.Long){")("var n=new util.Long(%i,%i,%j)",a.typeDefault.low,a.typeDefault.high,a.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",f)("}else")("d%s=o.longs===String?%j:%i",f,a.typeDefault.toString(),a.typeDefault.toNumber()):a.bytes?(u="["+Array.prototype.slice.call(a.typeDefault).join(",")+"]",r("if(o.bytes===String)d%s=%j",f,String.fromCharCode.apply(String,a.typeDefault))("else{")("d%s=%s",f,u)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",f,f)("}")):r("d%s=%j",f,a.typeDefault)}r("}")}for(var h=!1,s=0;s<i.length;++s){var a=i[s],l=t.N.indexOf(a),f=v.safeProp(a.name);a.map?(h||(h=!0,r("var ks2")),r("if(m%s&&(ks2=Object.keys(m%s)).length){",f,f)("d%s={}",f)("for(var j=0;j<ks2.length;++j){"),y(r,a,l,f+"[ks2[j]]")("}")):a.repeated?(r("if(m%s&&m%s.length){",f,f)("d%s=[]",f)("for(var j=0;j<m%s.length;++j){",f),y(r,a,l,f+"[j]")("}")):(r("if(m%s!=null&&m.hasOwnProperty(%j)){",f,a.name),y(r,a,l,f),a.partOf&&r("if(o.oneofs)")("d%s=%j",v.safeProp(a.partOf.name),a.name)),r("}")}return r("return d")}},function(t,i,r){var s=r(14);i[".google.protobuf.Any"]={fromObject:function(t){if(t&&t["@type"]){var i,r=t["@type"].substring(t["@type"].lastIndexOf("/")+1),r=this.lookup(r);if(r)return-1===(i="."===t["@type"].charAt(0)?t["@type"].substr(1):t["@type"]).indexOf("/")&&(i="/"+i),this.create({type_url:i,value:r.encode(r.fromObject(t)).finish()})}return this.fromObject(t)},toObject:function(t,i){var r,n,e="",o="";return!((t=i&&i.json&&t.type_url&&t.value&&(o=t.type_url.substring(t.type_url.lastIndexOf("/")+1),e=t.type_url.substring(0,t.type_url.lastIndexOf("/")+1),r=this.lookup(o))?r.decode(t.value):t)instanceof this.ctor)&&t instanceof s?(r=t.$type.toObject(t,i),n="."===t.$type.fullName[0]?t.$type.fullName.substr(1):t.$type.fullName,r["@type"]=o=(e=""===e?"type.googleapis.com/":e)+n,r):this.toObject(t,i)}}},function(t,i,r){t.exports=a;var n,v,y,e=r(8),o=(((a.prototype=Object.create(e.prototype)).constructor=a).className="Root",r(7)),s=r(5),u=r(10),d=r(1);function a(t){e.call(this,"",t),this.deferred=[],this.files=[]}function b(){}a.fromJSON=function(t,i){return i=i||new a,t.options&&i.setOptions(t.options),i.addJSON(t.nested)},a.prototype.resolvePath=d.path.resolve,a.prototype.fetch=d.fetch,a.prototype.load=function t(i,o,e){"function"==typeof o&&(e=o,o=void 0);var s=this;if(!e)return d.asPromise(t,s,i,o);var u=e===b;function a(t,i){if(e){var r=e;if(e=null,u)throw t;r(t,i)}}function f(t){var i=t.lastIndexOf("google/protobuf/");if(-1<i){t=t.substring(i);if(t in y)return t}return null}function h(t,i){try{if(d.isString(i)&&"{"===i.charAt(0)&&(i=JSON.parse(i)),d.isString(i)){v.filename=t;var r,n=v(i,s,o),e=0;if(n.imports)for(;e<n.imports.length;++e)(r=f(n.imports[e])||s.resolvePath(t,n.imports[e]))&&l(r);if(n.weakImports)for(e=0;e<n.weakImports.length;++e)(r=f(n.weakImports[e])||s.resolvePath(t,n.weakImports[e]))&&l(r,!0)}else s.setOptions(i.options).addJSON(i.nested)}catch(t){a(t)}u||c||a(null,s)}function l(r,n){if(!(-1<s.files.indexOf(r)))if(s.files.push(r),r in y)u?h(r,y[r]):(++c,setTimeout(function(){--c,h(r,y[r])}));else if(u){var t;try{t=d.fs.readFileSync(r).toString("utf8")}catch(t){return void(n||a(t))}h(r,t)}else++c,s.fetch(r,function(t,i){--c,e&&(t?n?c||a(null,s):a(t):h(r,i))})}var c=0;d.isString(i)&&(i=[i]);for(var r,n=0;n<i.length;++n)(r=s.resolvePath("",i[n]))&&l(r);if(u)return s;c||a(null,s)},a.prototype.loadSync=function(t,i){if(d.isNode)return this.load(t,i,b);throw Error("not supported")},a.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(t){return"'extend "+t.extend+"' in "+t.parent.fullName}).join(", "));return e.prototype.resolveAll.call(this)};var f=/^[A-Z]/;function h(t,i){var r,n=i.parent.lookup(i.extend);if(n)return((r=new o(i.fullName,i.id,i.type,i.rule,void 0,i.options)).declaringField=i).extensionField=r,n.add(r),1}a.prototype.S=function(t){if(t instanceof o)void 0===t.extend||t.extensionField||h(0,t)||this.deferred.push(t);else if(t instanceof s)f.test(t.name)&&(t.parent[t.name]=t.values);else if(!(t instanceof u)){if(t instanceof n)for(var i=0;i<this.deferred.length;)h(0,this.deferred[i])?this.deferred.splice(i,1):++i;for(var r=0;r<t.nestedArray.length;++r)this.S(t.T[r]);f.test(t.name)&&(t.parent[t.name]=t)}},a.prototype.O=function(t){var i;if(t instanceof o)void 0!==t.extend&&(t.extensionField?(t.extensionField.parent.remove(t.extensionField),t.extensionField=null):-1<(i=this.deferred.indexOf(t))&&this.deferred.splice(i,1));else if(t instanceof s)f.test(t.name)&&delete t.parent[t.name];else if(t instanceof e){for(var r=0;r<t.nestedArray.length;++r)this.O(t.T[r]);f.test(t.name)&&delete t.parent[t.name]}},a.j=function(t,i,r){n=t,v=i,y=r}},function(t,i,r){t.exports=r(31)},function(t,i,r){!function(s){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=e(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==e(t)?t:t+""))(n.key),n)}}"undefined"==typeof window&&(u=Promise.resolve().then(r.t.bind(null,49,7)));var u,t=(()=>{function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.D=null,this.C=400,this.F=null,this.B=null,this.G=new Map}return i=t,(r=[{key:"url",get:function(){return this.D}},{key:"status",get:function(){return this.C}},{key:"responseType",get:function(){return this.F},set:function(t){this.F=t}},{key:"response",get:function(){return this.B}},{key:"open",value:function(t,i){"GET"==t&&(this.D=i)}},{key:"addEventListener",value:function(t,i){var r=this.G.get(t);r||this.G.set(t,r=[]),r.push(i)}},{key:"send",value:function(){var e=this,o=this.D;u.then(function(t){var i=t.createReadStream(o),r=[],n=0;e.B=null,i.on("readable",function(){var t=i.read();null!=t&&(r.push(t),n+=t.length,e.B?e.B=s.concat([e.B,new s(t)],n):e.B=new s(t))}),i.on("end",function(){e.C=200,e.U("load")}),i.on("error",function(t){e.C=400,e.U("error",t)})})}}])&&o(i.prototype,r),n&&o(i,n),Object.defineProperty(i,"prototype",{writable:!1}),i;var i,r,n})();Object.assign(t.prototype,{U:function(t,i){if(0!=this.G.size){var r=this.G.get(t);if(r)for(var n=0;n<r.length;n++)r[n]&&r[n](i)}}}),i.a=t}.call(this,r(45).Buffer)},function(t,i,r){var n=t.exports=r(32);n.build="light",n.load=function(t,i,r){return(i="function"==typeof i?(r=i,new n.Root):i||new n.Root).load(t,r)},n.loadSync=function(t,i){return(i=i||new n.Root).loadSync(t)},n.encoder=r(19),n.decoder=r(24),n.verifier=r(25),n.converter=r(26),n.ReflectionObject=r(6),n.Namespace=r(8),n.Root=r(28),n.Enum=r(5),n.Type=r(20),n.Field=r(7),n.OneOf=r(10),n.MapField=r(21),n.Service=r(22),n.Method=r(23),n.Message=r(14),n.wrappers=r(27),n.types=r(9),n.util=r(1),n.ReflectionObject.j(n.Root),n.Namespace.j(n.Type,n.Service,n.Enum),n.Root.j(n.Type),n.Field.j(n.Type)},function(t,i,r){var n=i;function e(){n.util.j(),n.Writer.j(n.BufferWriter),n.Reader.j(n.BufferReader)}n.build="minimal",n.Writer=r(12),n.BufferWriter=r(39),n.Reader=r(13),n.BufferReader=r(40),n.util=r(4),n.rpc=r(17),n.roots=r(18),n.configure=e,e()},function(t,i,r){i.length=function(t){var i=t.length;if(!i)return 0;for(var r=0;1<--i%4&&"="===t.charAt(i);)++r;return Math.ceil(3*t.length)/4-r};for(var f=new Array(64),a=new Array(123),n=0;n<64;)a[f[n]=n<26?n+65:n<52?n+71:n<62?n-4:n-59|43]=n++;i.encode=function(t,i,r){for(var n,e=null,o=[],s=0,u=0;i<r;){var a=t[i++];switch(u){case 0:o[s++]=f[a>>2],n=(3&a)<<4,u=1;break;case 1:o[s++]=f[n|a>>4],n=(15&a)<<2,u=2;break;case 2:o[s++]=f[n|a>>6],o[s++]=f[63&a],u=0}8191<s&&((e=e||[]).push(String.fromCharCode.apply(String,o)),s=0)}return u&&(o[s++]=f[n],o[s++]=61,1===u)&&(o[s++]=61),e?(s&&e.push(String.fromCharCode.apply(String,o.slice(0,s))),e.join("")):String.fromCharCode.apply(String,o.slice(0,s))};var h="invalid encoding";i.decode=function(t,i,r){for(var n,e=r,o=0,s=0;s<t.length;){var u=t.charCodeAt(s++);if(61===u&&1<o)break;if(void 0===(u=a[u]))throw Error(h);switch(o){case 0:n=u,o=1;break;case 1:i[r++]=n<<2|(48&u)>>4,n=u,o=2;break;case 2:i[r++]=(15&n)<<4|(60&u)>>2,n=u,o=3;break;case 3:i[r++]=(3&n)<<6|u,o=0}}if(1===o)throw Error(h);return r-e},i.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}},function(t,i,r){function n(){this.G={}}(t.exports=n).prototype.on=function(t,i,r){return(this.G[t]||(this.G[t]=[])).push({fn:i,ctx:r||this}),this},n.prototype.off=function(t,i){if(void 0===t)this.G={};else if(void 0===i)this.G[t]=[];else for(var r=this.G[t],n=0;n<r.length;)r[n].fn===i?r.splice(n,1):++n;return this},n.prototype.emit=function(t){var i=this.G[t];if(i){for(var r=[],n=1;n<arguments.length;)r.push(arguments[n++]);for(n=0;n<i.length;)i[n].fn.apply(i[n++].ctx,r)}return this}},function(t,i,r){function n(t){function i(t,i,r,n){var e=i<0?1:0;0===(i=e?-i:i)?t(0<1/i?0:2147483648,r,n):isNaN(i)?t(2143289344,r,n):t(34028234663852886e22<i?(e<<31|2139095040)>>>0:i<11754943508222875e-54?(e<<31|Math.round(i/1401298464324817e-60))>>>0:(e<<31|(t=Math.floor(Math.log(i)/Math.LN2))+127<<23|8388607&Math.round(i*Math.pow(2,-t)*8388608))>>>0,r,n)}function r(t,i,r){t=t(i,r),i=2*(t>>31)+1,r=t>>>23&255,t&=8388607;return 255==r?t?NaN:1/0*i:0==r?1401298464324817e-60*i*t:i*Math.pow(2,r-150)*(8388608+t)}function n(t,i,r){u[0]=t,i[r]=a[0],i[r+1]=a[1],i[r+2]=a[2],i[r+3]=a[3]}function e(t,i,r){u[0]=t,i[r]=a[3],i[r+1]=a[2],i[r+2]=a[1],i[r+3]=a[0]}function o(t,i){return a[0]=t[i],a[1]=t[i+1],a[2]=t[i+2],a[3]=t[i+3],u[0]}function s(t,i){return a[3]=t[i],a[2]=t[i+1],a[1]=t[i+2],a[0]=t[i+3],u[0]}var u,a,f,h,l;function c(t,i,r,n,e,o){var s,u,a=n<0?1:0;0===(n=a?-n:n)?(t(0,e,o+i),t(0<1/n?0:2147483648,e,o+r)):isNaN(n)?(t(0,e,o+i),t(2146959360,e,o+r)):17976931348623157e292<n?(t(0,e,o+i),t((a<<31|2146435072)>>>0,e,o+r)):n<22250738585072014e-324?(t((s=n/5e-324)>>>0,e,o+i),t((a<<31|s/4294967296)>>>0,e,o+r)):(1024===(u=Math.floor(Math.log(n)/Math.LN2))&&(u=1023),t(4503599627370496*(s=n*Math.pow(2,-u))>>>0,e,o+i),t((a<<31|u+1023<<20|1048576*s&1048575)>>>0,e,o+r))}function v(t,i,r,n,e){i=t(n,e+i),t=t(n,e+r),n=2*(t>>31)+1,e=t>>>20&2047,r=4294967296*(1048575&t)+i;return 2047==e?r?NaN:1/0*n:0==e?5e-324*n*r:n*Math.pow(2,e-1075)*(r+4503599627370496)}function y(t,i,r){f[0]=t,i[r]=h[0],i[r+1]=h[1],i[r+2]=h[2],i[r+3]=h[3],i[r+4]=h[4],i[r+5]=h[5],i[r+6]=h[6],i[r+7]=h[7]}function d(t,i,r){f[0]=t,i[r]=h[7],i[r+1]=h[6],i[r+2]=h[5],i[r+3]=h[4],i[r+4]=h[3],i[r+5]=h[2],i[r+6]=h[1],i[r+7]=h[0]}function b(t,i){return h[0]=t[i],h[1]=t[i+1],h[2]=t[i+2],h[3]=t[i+3],h[4]=t[i+4],h[5]=t[i+5],h[6]=t[i+6],h[7]=t[i+7],f[0]}function p(t,i){return h[7]=t[i],h[6]=t[i+1],h[5]=t[i+2],h[4]=t[i+3],h[3]=t[i+4],h[2]=t[i+5],h[1]=t[i+6],h[0]=t[i+7],f[0]}return"undefined"!=typeof Float32Array?(u=new Float32Array([-0]),a=new Uint8Array(u.buffer),l=128===a[3],t.writeFloatLE=l?n:e,t.writeFloatBE=l?e:n,t.readFloatLE=l?o:s,t.readFloatBE=l?s:o):(t.writeFloatLE=i.bind(null,m),t.writeFloatBE=i.bind(null,w),t.readFloatLE=r.bind(null,g),t.readFloatBE=r.bind(null,_)),"undefined"!=typeof Float64Array?(f=new Float64Array([-0]),h=new Uint8Array(f.buffer),l=128===h[7],t.writeDoubleLE=l?y:d,t.writeDoubleBE=l?d:y,t.readDoubleLE=l?b:p,t.readDoubleBE=l?p:b):(t.writeDoubleLE=c.bind(null,m,0,4),t.writeDoubleBE=c.bind(null,w,4,0),t.readDoubleLE=v.bind(null,g,0,4),t.readDoubleBE=v.bind(null,_,4,0)),t}function m(t,i,r){i[r]=255&t,i[r+1]=t>>>8&255,i[r+2]=t>>>16&255,i[r+3]=t>>>24}function w(t,i,r){i[r]=t>>>24,i[r+1]=t>>>16&255,i[r+2]=t>>>8&255,i[r+3]=255&t}function g(t,i){return(t[i]|t[i+1]<<8|t[i+2]<<16|t[i+3]<<24)>>>0}function _(t,i){return(t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3])>>>0}t.exports=n(n)},function(t,i,r){i.length=function(t){for(var i,r=0,n=0;n<t.length;++n)(i=t.charCodeAt(n))<128?r+=1:i<2048?r+=2:55296==(64512&i)&&56320==(64512&t.charCodeAt(n+1))?(++n,r+=4):r+=3;return r},i.read=function(t,i,r){if(r-i<1)return"";for(var n,e=null,o=[],s=0;i<r;)(n=t[i++])<128?o[s++]=n:191<n&&n<224?o[s++]=(31&n)<<6|63&t[i++]:239<n&&n<365?(n=((7&n)<<18|(63&t[i++])<<12|(63&t[i++])<<6|63&t[i++])-65536,o[s++]=55296+(n>>10),o[s++]=56320+(1023&n)):o[s++]=(15&n)<<12|(63&t[i++])<<6|63&t[i++],8191<s&&((e=e||[]).push(String.fromCharCode.apply(String,o)),s=0);return e?(s&&e.push(String.fromCharCode.apply(String,o.slice(0,s))),e.join("")):String.fromCharCode.apply(String,o.slice(0,s))},i.write=function(t,i,r){for(var n,e,o=r,s=0;s<t.length;++s)(n=t.charCodeAt(s))<128?i[r++]=n:(n<2048?i[r++]=n>>6|192:(55296==(64512&n)&&56320==(64512&(e=t.charCodeAt(s+1)))?(++s,i[r++]=(n=65536+((1023&n)<<10)+(1023&e))>>18|240,i[r++]=n>>12&63|128):i[r++]=n>>12|224,i[r++]=n>>6&63|128),i[r++]=63&n|128);return r-o}},function(t,i,r){t.exports=function(i,r,t){var n=t||8192,e=n>>>1,o=null,s=n;return function(t){if(t<1||e<t)return i(t);n<s+t&&(o=i(n),s=0);t=r.call(o,s,s+=t);return 7&s&&(s=1+(7|s)),t}}},function(t,i,r){t.exports=e;var n=r(4);function e(t,i){this.lo=t>>>0,this.hi=i>>>0}var o=e.zero=new e(0,0),s=(o.toNumber=function(){return 0},o.zzEncode=o.zzDecode=function(){return this},o.length=function(){return 1},e.zeroHash="\0\0\0\0\0\0\0\0",e.fromNumber=function(t){var i,r;return 0===t?o:(r=(t=(i=t<0)?-t:t)>>>0,t=(t-r)/4294967296>>>0,i&&(t=~t>>>0,r=~r>>>0,4294967295<++r)&&(r=0,4294967295<++t)&&(t=0),new e(r,t))},e.from=function(t){if("number"==typeof t)return e.fromNumber(t);if(n.isString(t)){if(!n.Long)return e.fromNumber(parseInt(t,10));t=n.Long.fromString(t)}return t.low||t.high?new e(t.low>>>0,t.high>>>0):o},e.prototype.toNumber=function(t){var i;return!t&&this.hi>>>31?(t=1+~this.lo>>>0,i=~this.hi>>>0,-(t+4294967296*(i=t?i:i+1>>>0))):this.lo+4294967296*this.hi},e.prototype.toLong=function(t){return n.Long?new n.Long(0|this.lo,0|this.hi,Boolean(t)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(t)}},String.prototype.charCodeAt);e.fromHash=function(t){return"\0\0\0\0\0\0\0\0"===t?o:new e((s.call(t,0)|s.call(t,1)<<8|s.call(t,2)<<16|s.call(t,3)<<24)>>>0,(s.call(t,4)|s.call(t,5)<<8|s.call(t,6)<<16|s.call(t,7)<<24)>>>0)},e.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},e.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this},e.prototype.zzDecode=function(){var t=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this},e.prototype.length=function(){var t=this.lo,i=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0==r?0==i?t<16384?t<128?1:2:t<2097152?3:4:i<16384?i<128?5:6:i<2097152?7:8:r<128?9:10}},function(t,i,r){t.exports=o;var n=r(12),e=((o.prototype=Object.create(n.prototype)).constructor=o,r(4));function o(){n.call(this)}function s(t,i,r){t.length<40?e.utf8.write(t,i,r):i.utf8Write?i.utf8Write(t,r):i.write(t,r)}o.j=function(){o.alloc=e._,o.writeBytesBuffer=e.Buffer&&e.Buffer.prototype instanceof Uint8Array&&"set"===e.Buffer.prototype.set.name?function(t,i,r){i.set(t,r)}:function(t,i,r){if(t.copy)t.copy(i,r,0,t.length);else for(var n=0;n<t.length;)i[r++]=t[n++]}},o.prototype.bytes=function(t){var i=(t=e.isString(t)?e.v(t,"base64"):t).length>>>0;return this.uint32(i),i&&this.M(o.writeBytesBuffer,i,t),this},o.prototype.string=function(t){var i=e.Buffer.byteLength(t);return this.uint32(i),i&&this.M(s,i,t),this},o.j()},function(t,i,r){t.exports=o;var n=r(13),e=((o.prototype=Object.create(n.prototype)).constructor=o,r(4));function o(t){n.call(this,t)}o.j=function(){e.Buffer&&(o.prototype.R=e.Buffer.prototype.slice)},o.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))},o.j()},function(t,i,r){t.exports=n;var u=r(4);function n(t,i,r){if("function"!=typeof t)throw TypeError("rpcImpl must be a function");u.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(i),this.responseDelimited=Boolean(r)}((n.prototype=Object.create(u.EventEmitter.prototype)).constructor=n).prototype.rpcCall=function t(r,i,n,e,o){if(!e)throw TypeError("request must be specified");var s=this;if(!o)return u.asPromise(t,s,r,i,n,e);if(s.rpcImpl)try{return s.rpcImpl(r,i[s.requestDelimited?"encodeDelimited":"encode"](e).finish(),function(t,i){if(t)return s.emit("error",t,r),o(t);if(null!==i){if(!(i instanceof n))try{i=n[s.responseDelimited?"decodeDelimited":"decode"](i)}catch(t){return s.emit("error",t,r),o(t)}return s.emit("data",i,r),o(null,i)}s.end(!0)})}catch(t){s.emit("error",t,r),setTimeout(function(){o(t)},0)}else setTimeout(function(){o(Error("already ended"))},0)},n.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},function(t,i,r){function n(i,r){"string"==typeof i&&(r=i,i=void 0);var a=[];function f(t){if("string"!=typeof t){var i="return "+h();if(t){for(var r=Object.keys(t),n=new Array(r.length+1),e=new Array(r.length),o=0;o<r.length;)n[o]=r[o],e[o]=t[r[o++]];return n[o]=i,Function.apply(null,n).apply(null,e)}return Function(i)()}for(var s=new Array(arguments.length-1),u=0;u<s.length;)s[u]=arguments[++u];if(u=0,t=t.replace(/%([%dfijs])/g,function(t,i){var r=s[u++];switch(i){case"d":case"f":return String(Number(r));case"i":return String(Math.floor(r));case"j":return JSON.stringify(r);case"s":return String(r)}return"%"}),u!==s.length)throw Error("parameter count mismatch");return a.push(t),f}function h(t){return"function "+(t||r||"")+"("+(i&&i.join(",")||"")+"){\n  "+a.join("\n  ")+"\n}"}return f.toString=h,f}(t.exports=n).verbose=!1},function(t,i,r){t.exports=u;var o=r(15),s=r(16)("fs");function u(r,n,e){return n="function"==typeof n?(e=n,{}):n||{},e?!n.xhr&&s&&s.readFile?s.readFile(r,function(t,i){return t&&"undefined"!=typeof XMLHttpRequest?u.xhr(r,n,e):t?e(t):e(null,n.binary?i:i.toString("utf8"))}):u.xhr(r,n,e):o(u,this,r,n)}u.xhr=function(t,r,n){var e=new XMLHttpRequest;e.onreadystatechange=function(){if(4===e.readyState){if(0!==e.status&&200!==e.status)return n(Error("status "+e.status));if(r.binary){if(!(t=e.response))for(var t=[],i=0;i<e.responseText.length;++i)t.push(255&e.responseText.charCodeAt(i));return n(null,"undefined"!=typeof Uint8Array?new Uint8Array(t):t)}return n(null,e.responseText)}},r.binary&&("overrideMimeType"in e&&e.overrideMimeType("text/plain; charset=x-user-defined"),e.responseType="arraybuffer"),e.open("GET",t),e.send()}},function(t,i,r){var e=i.isAbsolute=function(t){return/^(?:\/|\w+:)/.test(t)},n=i.normalize=function(t){var i=(t=t.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),r=e(t),t="";r&&(t=i.shift()+"/");for(var n=0;n<i.length;)".."===i[n]?0<n&&".."!==i[n-1]?i.splice(--n,2):r?i.splice(n,1):++n:"."===i[n]?i.splice(n,1):++n;return t+i.join("/")};i.resolve=function(t,i,r){return r||(i=n(i)),!e(i)&&(t=(t=r?t:n(t)).replace(/(?:\/|^)[^/]+$/,"")).length?n(t+"/"+i):i}},function(t,A,x){!function(t){var O=x(46),o=x(47),u=x(48);function r(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,i){if(r()<i)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(i)).__proto__=l.prototype:(t=null===t?new l(i):t).length=i,t}function l(t,i,r){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(t,i,r);if("number"!=typeof t)return n(this,t,i,r);if("string"==typeof i)throw new Error("If encoding is specified then the first argument must be a string");return s(this,t)}function n(t,i,r,n){if("number"==typeof i)throw new TypeError('"value" argument must not be a number');if("undefined"!=typeof ArrayBuffer&&i instanceof ArrayBuffer){var e=t,o=i,s=r;if(o.byteLength,s<0||o.byteLength<s)throw new RangeError("'offset' is out of bounds");if(o.byteLength<s+(n||0))throw new RangeError("'length' is out of bounds");return o=void 0===s&&void 0===n?new Uint8Array(o):void 0===n?new Uint8Array(o,s):new Uint8Array(o,s,n),l.TYPED_ARRAY_SUPPORT?(e=o).__proto__=l.prototype:e=f(e,o),e}if("string"!=typeof i){s=t,n=i;if(l.isBuffer(n))return o=0|h(n.length),0!==(s=a(s,o)).length&&n.copy(s,0,0,o),s;if(n){if("undefined"!=typeof ArrayBuffer&&n.buffer instanceof ArrayBuffer||"length"in n)return"number"!=typeof n.length||(t=>t!=t)(n.length)?a(s,0):f(s,n);if("Buffer"===n.type&&u(n.data))return f(s,n.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}e=t,n=i,t=r;if(l.isEncoding(t="string"==typeof t&&""!==t?t:"utf8"))return i=0|c(n,t),e=(n=(e=a(e,i)).write(n,t))!==i?e.slice(0,n):e;throw new TypeError('"encoding" must be a valid string encoding')}function e(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function s(t,i){if(e(i),t=a(t,i<0?0:0|h(i)),!l.TYPED_ARRAY_SUPPORT)for(var r=0;r<i;++r)t[r]=0;return t}function f(t,i){var r=i.length<0?0:0|h(i.length);t=a(t,r);for(var n=0;n<r;n+=1)t[n]=255&i[n];return t}function h(t){if(r()<=t)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|t}function c(t,i){if(l.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;var r=(t="string"!=typeof t?""+t:t).length;if(0===r)return 0;for(var n=!1;;)switch(i){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return R(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return N(t).length;default:if(n)return R(t).length;i=(""+i).toLowerCase(),n=!0}}function i(t,i,r){var n,e=!1;if((i=void 0===i||i<0?0:i)>this.length)return"";if((r=void 0===r||r>this.length?this.length:r)<=0)return"";if((r>>>=0)<=(i>>>=0))return"";for(t=t||"utf8";;)switch(t){case"hex":var o=this,s=i,u=r,a=o.length;(!u||u<0||a<u)&&(u=a);for(var f="",h=s=!s||s<0?0:s;h<u;++h)f+=(t=>t<16?"0"+t.toString(16):t.toString(16))(o[h]);return f;case"utf8":case"utf-8":return E(this,i,r);case"ascii":var l=this,a=i,c=r,v="";c=Math.min(l.length,c);for(var y=a;y<c;++y)v+=String.fromCharCode(127&l[y]);return v;case"latin1":case"binary":var d=this,s=i,b=r,p="";b=Math.min(d.length,b);for(var m=s;m<b;++m)p+=String.fromCharCode(d[m]);return p;case"base64":return w=this,n=r,0===(g=i)&&n===w.length?O.fromByteArray(w):O.fromByteArray(w.slice(g,n));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var w=i,g=r,_=this.slice(w,g),j="",S=0;S<_.length;S+=2)j+=String.fromCharCode(_[S]+256*_[S+1]);return j;default:if(e)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),e=!0}}function v(t,i,r){var n=t[i];t[i]=t[r],t[r]=n}function y(t,i,r,n,e){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):2147483647<r?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,(r=(r=isNaN(r)?e?0:t.length-1:r)<0?t.length+r:r)>=t.length){if(e)return-1;r=t.length-1}else if(r<0){if(!e)return-1;r=0}if("string"==typeof i&&(i=l.from(i,n)),l.isBuffer(i))return 0===i.length?-1:d(t,i,r,n,e);if("number"==typeof i)return i&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?(e?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(t,i,r):d(t,[i],r,n,e);throw new TypeError("val must be string, number or Buffer")}function d(t,i,r,n,e){var o=1,s=t.length,u=i.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||i.length<2)return-1;s/=o=2,u/=2,r/=2}function a(t,i){return 1===o?t[i]:t.readUInt16BE(i*o)}if(e)for(var f=-1,h=r;h<s;h++)if(a(t,h)===a(i,-1===f?0:h-f)){if(h-(f=-1===f?h:f)+1===u)return f*o}else-1!==f&&(h-=h-f),f=-1;else for(h=r=s<r+u?s-u:r;0<=h;h--){for(var l=!0,c=0;c<u;c++)if(a(t,h+c)!==a(i,c)){l=!1;break}if(l)return h}return-1}function b(t,i,r,n){return I((t=>{for(var i=[],r=0;r<t.length;++r)i.push(255&t.charCodeAt(r));return i})(i),t,r,n)}function p(t,i,r,n){return I(((t,i)=>{for(var r,n,e=[],o=0;o<t.length&&!((i-=2)<0);++o)r=t.charCodeAt(o),n=r>>8,e.push(r%256),e.push(n);return e})(i,t.length-r),t,r,n)}function E(t,i,r){r=Math.min(t.length,r);for(var n=[],e=i;e<r;){var o,s,u,a,f=t[e],h=null,l=239<f?4:223<f?3:191<f?2:1;if(e+l<=r)switch(l){case 1:f<128&&(h=f);break;case 2:128==(192&(o=t[e+1]))&&127<(a=(31&f)<<6|63&o)&&(h=a);break;case 3:o=t[e+1],s=t[e+2],128==(192&o)&&128==(192&s)&&2047<(a=(15&f)<<12|(63&o)<<6|63&s)&&(a<55296||57343<a)&&(h=a);break;case 4:o=t[e+1],s=t[e+2],u=t[e+3],128==(192&o)&&128==(192&s)&&128==(192&u)&&65535<(a=(15&f)<<18|(63&o)<<12|(63&s)<<6|63&u)&&a<1114112&&(h=a)}null===h?(h=65533,l=1):65535<h&&(n.push((h-=65536)>>>10&1023|55296),h=56320|1023&h),n.push(h),e+=l}var c=n,v=c.length;if(v<=m)return String.fromCharCode.apply(String,c);for(var y="",d=0;d<v;)y+=String.fromCharCode.apply(String,c.slice(d,d+=m));return y}A.Buffer=l,A.SlowBuffer=function(t){+t!=t&&(t=0);return l.alloc(+t)},A.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:(()=>{try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}})(),A.kMaxLength=r(),l.poolSize=8192,l.V=function(t){return t.__proto__=l.prototype,t},l.from=function(t,i,r){return n(null,t,i,r)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol)&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0}),l.alloc=function(t,i,r){return n=null,i=i,r=r,e(t=t),!(t<=0)&&void 0!==i?"string"==typeof r?a(n,t).fill(i,r):a(n,t).fill(i):a(n,t);var n},l.allocUnsafe=function(t){return s(null,t)},l.allocUnsafeSlow=function(t){return s(null,t)},l.isBuffer=function(t){return!(null==t||!t.Z)},l.compare=function(t,i){if(!l.isBuffer(t)||!l.isBuffer(i))throw new TypeError("Arguments must be Buffers");if(t===i)return 0;for(var r=t.length,n=i.length,e=0,o=Math.min(r,n);e<o;++e)if(t[e]!==i[e]){r=t[e],n=i[e];break}return r<n?-1:n<r?1:0},l.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(t,i){if(!u(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return l.alloc(0);if(void 0===i)for(e=i=0;e<t.length;++e)i+=t[e].length;for(var r=l.allocUnsafe(i),n=0,e=0;e<t.length;++e){var o=t[e];if(!l.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,n),n+=o.length}return r},l.byteLength=c,l.prototype.Z=!0,l.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var i=0;i<t;i+=2)v(this,i,i+1);return this},l.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var i=0;i<t;i+=4)v(this,i,i+3),v(this,i+1,i+2);return this},l.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var i=0;i<t;i+=8)v(this,i,i+7),v(this,i+1,i+6),v(this,i+2,i+5),v(this,i+3,i+4);return this},l.prototype.toString=function(){var t=0|this.length;return 0==t?"":0===arguments.length?E(this,0,t):i.apply(this,arguments)},l.prototype.equals=function(t){if(l.isBuffer(t))return this===t||0===l.compare(this,t);throw new TypeError("Argument must be a Buffer")},l.prototype.inspect=function(){var t="",i=A.INSPECT_MAX_BYTES;return 0<this.length&&(t=this.toString("hex",0,i).match(/.{2}/g).join(" "),this.length>i)&&(t+=" ... "),"<Buffer "+t+">"},l.prototype.compare=function(t,i,r,n,e){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===e&&(e=this.length),(i=void 0===i?0:i)<0||r>t.length||n<0||e>this.length)throw new RangeError("out of range index");if(e<=n&&r<=i)return 0;if(e<=n)return-1;if(r<=i)return 1;if(this===t)return 0;for(var o=(e>>>=0)-(n>>>=0),s=(r>>>=0)-(i>>>=0),u=Math.min(o,s),a=this.slice(n,e),f=t.slice(i,r),h=0;h<u;++h)if(a[h]!==f[h]){o=a[h],s=f[h];break}return o<s?-1:s<o?1:0},l.prototype.includes=function(t,i,r){return-1!==this.indexOf(t,i,r)},l.prototype.indexOf=function(t,i,r){return y(this,t,i,r,!0)},l.prototype.lastIndexOf=function(t,i,r){return y(this,t,i,r,!1)},l.prototype.write=function(t,i,r,n){if(void 0===i)n="utf8",r=this.length,i=0;else if(void 0===r&&"string"==typeof i)n=i,r=this.length,i=0;else{if(!isFinite(i))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");i|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var e=this.length-i;if((void 0===r||e<r)&&(r=e),0<t.length&&(r<0||i<0)||i>this.length)throw new RangeError("Attempt to write outside buffer bounds");n=n||"utf8";for(var o,s,u,a=!1;;)switch(n){case"hex":var f=this,h=t,l=i,c=r,v=(l=Number(l)||0,f.length-l);if((!c||v<(c=Number(c)))&&(c=v),(v=h.length)%2!=0)throw new TypeError("Invalid hex string");v/2<c&&(c=v/2);for(var y=0;y<c;++y){var d=parseInt(h.substr(2*y,2),16);if(isNaN(d))return y;f[l+y]=d}return y;case"utf8":case"utf-8":return v=i,u=r,I(R(t,(s=this).length-v),s,v,u);case"ascii":return b(this,t,i,r);case"latin1":case"binary":return b(this,t,i,r);case"base64":return s=this,u=i,o=r,I(N(t),s,u,o);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return p(this,t,i,r);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var m=4096;function w(t,i,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(r<t+i)throw new RangeError("Trying to access beyond buffer length")}function g(t,i,r,n,e,o){if(!l.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e<i||i<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function _(t,i,r,n){i<0&&(i=65535+i+1);for(var e=0,o=Math.min(t.length-r,2);e<o;++e)t[r+e]=(i&255<<8*(n?e:1-e))>>>8*(n?e:1-e)}function j(t,i,r,n){i<0&&(i=4294967295+i+1);for(var e=0,o=Math.min(t.length-r,4);e<o;++e)t[r+e]=i>>>8*(n?e:3-e)&255}function S(t,i,r,n){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function k(t,i,r,n,e){return e||S(t,0,r,4),o.write(t,i,r,n,23,4),r+4}function T(t,i,r,n,e){return e||S(t,0,r,8),o.write(t,i,r,n,52,8),r+8}l.prototype.slice=function(t,i){var r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):r<t&&(t=r),(i=void 0===i?r:~~i)<0?(i+=r)<0&&(i=0):r<i&&(i=r),i<t&&(i=t),l.TYPED_ARRAY_SUPPORT)(e=this.subarray(t,i)).__proto__=l.prototype;else for(var n=i-t,e=new l(n,void 0),o=0;o<n;++o)e[o]=this[o+t];return e},l.prototype.readUIntLE=function(t,i,r){t|=0,i|=0,r||w(t,i,this.length);for(var n=this[t],e=1,o=0;++o<i&&(e*=256);)n+=this[t+o]*e;return n},l.prototype.readUIntBE=function(t,i,r){t|=0,i|=0,r||w(t,i,this.length);for(var n=this[t+--i],e=1;0<i&&(e*=256);)n+=this[t+--i]*e;return n},l.prototype.readUInt8=function(t,i){return i||w(t,1,this.length),this[t]},l.prototype.readUInt16LE=function(t,i){return i||w(t,2,this.length),this[t]|this[t+1]<<8},l.prototype.readUInt16BE=function(t,i){return i||w(t,2,this.length),this[t]<<8|this[t+1]},l.prototype.readUInt32LE=function(t,i){return i||w(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},l.prototype.readUInt32BE=function(t,i){return i||w(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},l.prototype.readIntLE=function(t,i,r){t|=0,i|=0,r||w(t,i,this.length);for(var n=this[t],e=1,o=0;++o<i&&(e*=256);)n+=this[t+o]*e;return(e*=128)<=n&&(n-=Math.pow(2,8*i)),n},l.prototype.readIntBE=function(t,i,r){t|=0,i|=0,r||w(t,i,this.length);for(var n=i,e=1,o=this[t+--n];0<n&&(e*=256);)o+=this[t+--n]*e;return(e*=128)<=o&&(o-=Math.pow(2,8*i)),o},l.prototype.readInt8=function(t,i){return i||w(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},l.prototype.readInt16LE=function(t,i){i||w(t,2,this.length);i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},l.prototype.readInt16BE=function(t,i){i||w(t,2,this.length);i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},l.prototype.readInt32LE=function(t,i){return i||w(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},l.prototype.readInt32BE=function(t,i){return i||w(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},l.prototype.readFloatLE=function(t,i){return i||w(t,4,this.length),o.read(this,t,!0,23,4)},l.prototype.readFloatBE=function(t,i){return i||w(t,4,this.length),o.read(this,t,!1,23,4)},l.prototype.readDoubleLE=function(t,i){return i||w(t,8,this.length),o.read(this,t,!0,52,8)},l.prototype.readDoubleBE=function(t,i){return i||w(t,8,this.length),o.read(this,t,!1,52,8)},l.prototype.writeUIntLE=function(t,i,r,n){t=+t,i|=0,r|=0,n||g(this,t,i,r,Math.pow(2,8*r)-1,0);var e=1,o=0;for(this[i]=255&t;++o<r&&(e*=256);)this[i+o]=t/e&255;return i+r},l.prototype.writeUIntBE=function(t,i,r,n){t=+t,i|=0,r|=0,n||g(this,t,i,r,Math.pow(2,8*r)-1,0);var e=r-1,o=1;for(this[i+e]=255&t;0<=--e&&(o*=256);)this[i+e]=t/o&255;return i+r},l.prototype.writeUInt8=function(t,i,r){return t=+t,i|=0,r||g(this,t,i,1,255,0),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[i]=255&t,i+1},l.prototype.writeUInt16LE=function(t,i,r){return t=+t,i|=0,r||g(this,t,i,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[i]=255&t,this[i+1]=t>>>8):_(this,t,i,!0),i+2},l.prototype.writeUInt16BE=function(t,i,r){return t=+t,i|=0,r||g(this,t,i,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[i]=t>>>8,this[i+1]=255&t):_(this,t,i,!1),i+2},l.prototype.writeUInt32LE=function(t,i,r){return t=+t,i|=0,r||g(this,t,i,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[i+3]=t>>>24,this[i+2]=t>>>16,this[i+1]=t>>>8,this[i]=255&t):j(this,t,i,!0),i+4},l.prototype.writeUInt32BE=function(t,i,r){return t=+t,i|=0,r||g(this,t,i,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[i]=t>>>24,this[i+1]=t>>>16,this[i+2]=t>>>8,this[i+3]=255&t):j(this,t,i,!1),i+4},l.prototype.writeIntLE=function(t,i,r,n){t=+t,i|=0,n||g(this,t,i,r,(n=Math.pow(2,8*r-1))-1,-n);var e=0,o=1,s=0;for(this[i]=255&t;++e<r&&(o*=256);)t<0&&0===s&&0!==this[i+e-1]&&(s=1),this[i+e]=(t/o>>0)-s&255;return i+r},l.prototype.writeIntBE=function(t,i,r,n){t=+t,i|=0,n||g(this,t,i,r,(n=Math.pow(2,8*r-1))-1,-n);var e=r-1,o=1,s=0;for(this[i+e]=255&t;0<=--e&&(o*=256);)t<0&&0===s&&0!==this[i+e+1]&&(s=1),this[i+e]=(t/o>>0)-s&255;return i+r},l.prototype.writeInt8=function(t,i,r){return t=+t,i|=0,r||g(this,t,i,1,127,-128),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[i]=255&(t=t<0?255+t+1:t),i+1},l.prototype.writeInt16LE=function(t,i,r){return t=+t,i|=0,r||g(this,t,i,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[i]=255&t,this[i+1]=t>>>8):_(this,t,i,!0),i+2},l.prototype.writeInt16BE=function(t,i,r){return t=+t,i|=0,r||g(this,t,i,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[i]=t>>>8,this[i+1]=255&t):_(this,t,i,!1),i+2},l.prototype.writeInt32LE=function(t,i,r){return t=+t,i|=0,r||g(this,t,i,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[i]=255&t,this[i+1]=t>>>8,this[i+2]=t>>>16,this[i+3]=t>>>24):j(this,t,i,!0),i+4},l.prototype.writeInt32BE=function(t,i,r){return t=+t,i|=0,r||g(this,t,i,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),l.TYPED_ARRAY_SUPPORT?(this[i]=t>>>24,this[i+1]=t>>>16,this[i+2]=t>>>8,this[i+3]=255&t):j(this,t,i,!1),i+4},l.prototype.writeFloatLE=function(t,i,r){return k(this,t,i,!0,r)},l.prototype.writeFloatBE=function(t,i,r){return k(this,t,i,!1,r)},l.prototype.writeDoubleLE=function(t,i,r){return T(this,t,i,!0,r)},l.prototype.writeDoubleBE=function(t,i,r){return T(this,t,i,!1,r)},l.prototype.copy=function(t,i,r,n){if(r=r||0,n||0===n||(n=this.length),i>=t.length&&(i=t.length),(n=0<n&&n<r?r:n)===r)return 0;if(0===t.length||0===this.length)return 0;if((i=i||0)<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length);var e,o=(n=t.length-i<n-r?t.length-i+r:n)-r;if(this===t&&r<i&&i<n)for(e=o-1;0<=e;--e)t[e+i]=this[e+r];else if(o<1e3||!l.TYPED_ARRAY_SUPPORT)for(e=0;e<o;++e)t[e+i]=this[e+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+o),i);return o},l.prototype.fill=function(t,i,r,n){if("string"==typeof t){var e;if("string"==typeof i?(n=i,i=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length&&(e=t.charCodeAt(0))<256&&(t=e),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!l.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(i<0||this.length<i||this.length<r)throw new RangeError("Out of range index");if(!(r<=i))if(i>>>=0,r=void 0===r?this.length:r>>>0,"number"==typeof(t=t||0))for(u=i;u<r;++u)this[u]=t;else for(var o=l.isBuffer(t)?t:R(new l(t,n).toString()),s=o.length,u=0;u<r-i;++u)this[u+i]=o[u%s];return this};var M=/[^+\/0-9A-Za-z-_]/g;function R(t,i){i=i||1/0;for(var r,n=t.length,e=null,o=[],s=0;s<n;++s){if(55295<(r=t.charCodeAt(s))&&r<57344){if(!e){if(56319<r){-1<(i-=3)&&o.push(239,191,189);continue}if(s+1===n){-1<(i-=3)&&o.push(239,191,189);continue}e=r;continue}if(r<56320){-1<(i-=3)&&o.push(239,191,189),e=r;continue}r=65536+(e-55296<<10|r-56320)}else e&&-1<(i-=3)&&o.push(239,191,189);if(e=null,r<128){if(--i<0)break;o.push(r)}else if(r<2048){if((i-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((i-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((i-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function N(t){return O.toByteArray((t=>{var i;if((t=((i=t).trim?i.trim():i.replace(/^\s+|\s+$/g,"")).replace(M,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t})(t))}function I(t,i,r,n){for(var e=0;e<n&&!(e+r>=i.length||e>=t.length);++e)i[e+r]=t[e];return e}}.call(this,x(11))},function(t,i,r){i.byteLength=function(t){var t=h(t),i=t[0],t=t[1];return 3*(i+t)/4-t},i.toByteArray=function(t){var i,r,n=h(t),e=n[0],n=n[1],o=new f(((t,i)=>3*(t+i)/4-i)(e,n)),s=0,u=0<n?e-4:e;for(r=0;r<u;r+=4)i=a[t.charCodeAt(r)]<<18|a[t.charCodeAt(r+1)]<<12|a[t.charCodeAt(r+2)]<<6|a[t.charCodeAt(r+3)],o[s++]=i>>16&255,o[s++]=i>>8&255,o[s++]=255&i;2===n&&(i=a[t.charCodeAt(r)]<<2|a[t.charCodeAt(r+1)]>>4,o[s++]=255&i);1===n&&(i=a[t.charCodeAt(r)]<<10|a[t.charCodeAt(r+1)]<<4|a[t.charCodeAt(r+2)]>>2,o[s++]=i>>8&255,o[s++]=255&i);return o},i.fromByteArray=function(t){for(var i,r=t.length,n=r%3,e=[],o=0,s=r-n;o<s;o+=16383)e.push(((t,i,r)=>{for(var n,e=[],o=i;o<r;o+=3)n=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),e.push((t=>u[t>>18&63]+u[t>>12&63]+u[t>>6&63]+u[63&t])(n));return e.join("")})(t,o,s<o+16383?s:o+16383));1==n?(i=t[r-1],e.push(u[i>>2]+u[i<<4&63]+"==")):2==n&&(i=(t[r-2]<<8)+t[r-1],e.push(u[i>>10]+u[i>>4&63]+u[i<<2&63]+"="));return e.join("")};for(var u=[],a=[],f="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,o=n.length;e<o;++e)u[e]=n[e],a[n.charCodeAt(e)]=e;function h(t){var i=t.length;if(0<i%4)throw new Error("Invalid string. Length must be a multiple of 4");t=t.indexOf("="),i=(t=-1===t?i:t)===i?0:4-t%4;return[t,i]}a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63},function(t,i){i.read=function(t,i,r,n,e){var o,s,u=8*e-n-1,a=(1<<u)-1,f=a>>1,h=-7,l=r?e-1:0,c=r?-1:1,e=t[i+l];for(l+=c,o=e&(1<<-h)-1,e>>=-h,h+=u;0<h;o=256*o+t[i+l],l+=c,h-=8);for(s=o&(1<<-h)-1,o>>=-h,h+=n;0<h;s=256*s+t[i+l],l+=c,h-=8);if(0===o)o=1-f;else{if(o===a)return s?NaN:1/0*(e?-1:1);s+=Math.pow(2,n),o-=f}return(e?-1:1)*s*Math.pow(2,o-n)},i.write=function(t,i,r,n,e,o){var s,u,a=8*o-e-1,f=(1<<a)-1,h=f>>1,l=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,c=n?0:o-1,v=n?1:-1,o=i<0||0===i&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(u=isNaN(i)?1:0,s=f):(s=Math.floor(Math.log(i)/Math.LN2),i*(n=Math.pow(2,-s))<1&&(s--,n*=2),2<=(i+=1<=s+h?l/n:l*Math.pow(2,1-h))*n&&(s++,n/=2),f<=s+h?(u=0,s=f):1<=s+h?(u=(i*n-1)*Math.pow(2,e),s+=h):(u=i*Math.pow(2,h-1)*Math.pow(2,e),s=0));8<=e;t[r+c]=255&u,c+=v,u/=256,e-=8);for(s=s<<e|u,a+=e;0<a;t[r+c]=255&s,c+=v,s/=256,a-=8);t[r+c-v]|=128*o}},function(t,i){var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},function(t,i){t.exports=__WEBPACK_EXTERNAL_MODULE__49__},function(e,o,t){t.r(o);var M="v3.1.10",R=237,i={NONE:0,EXTRUDE_MARKER:2,FM3DTILE_LAYER:4,IMAGE_MARKER:8,LOCATION_MARKER:16,POLYGON_MARKER:32,TEXT_MARKER:64,LINE_MARKER:128,LINE3D_MARKER:256,HEAT_MAP_MARKER:512,EXTENT:1024,EXTERNAL_MODEL:2048,MODEL:4096,FACILITY:8192,LABEL:16384,DYNAMIC_MODEL_MARKER:32768,DOM_MARKER:65536,SPHERE_MARKER:1<<17,CAD_LAYER:1<<18,EXTENT_LAYER:1<<20,EXTERNAL_MODEL_LAYER:1<<21,MODEL_LAYER:1<<22,FACILITY_LAYER:1<<23,LABEL_LAYER:1<<24,MARKER_GROUP:1<<25,FLOW_LINE_LAYER:1<<27,FLOW_LINE_MARKER:1<<27,FIRE_MARKER:1<<28,WALL_MARKER:1<<29,TUBE_MARKER:1<<30},s=(i.LAYER_NODE_TYPE=new Map,i.LAYER_NODE_TYPE.set(i.EXTENT_LAYER,i.EXTENT),i.LAYER_NODE_TYPE.set(i.EXTERNAL_MODEL_LAYER,i.EXTERNAL_MODEL),i.LAYER_NODE_TYPE.set(i.MODEL_LAYER,i.MODEL),i.LAYER_NODE_TYPE.set(i.FACILITY_LAYER,i.FACILITY),i.LAYER_NODE_TYPE.set(i.LABEL_LAYER,i.LABEL),i.LAYER_NODE_TYPE.set(i.DOM_MARKER,i.DOM_MARKER),i.LAYER_NODE_TYPE.set(i.DYNAMIC_MODEL_MARKER,i.DYNAMIC_MODEL_MARKER),i.LAYER_NODE_TYPE.set(i.EXTRUDE_MARKER,i.EXTRUDE_MARKER),i.LAYER_NODE_TYPE.set(i.HEAT_MAP_MARKER,i.HEAT_MAP_MARKER),i.LAYER_NODE_TYPE.set(i.LINE_MARKER,i.LINE_MARKER),i.LAYER_NODE_TYPE.set(i.LOCATION_MARKER,i.LOCATION_MARKER),i.LAYER_NODE_TYPE.set(i.POLYGON_MARKER,i.POLYGON_MARKER),i.LAYER_NODE_TYPE.set(i.TEXT_MARKER,i.TEXT_MARKER),i.LAYER_NODE_TYPE.set(i.IMAGE_MARKER,i.IMAGE_MARKER),i.LAYER_NODE_TYPE.set(i.FLOW_LINE_LAYER,i.FLOW_LINE_MARKER),i.LAYER_NODE_TYPE.set(i.FIRE_MARKER,i.FIRE_MARKER),i.LAYER_NODE_TYPE.set(i.WALL_MARKER,i.WALL_MARKER),i.LAYER_NODE_TYPE.set(i.TUBE_MARKER,i.TUBE_MARKER),i.LAYER_NODE_TYPE.set(i.LINE3D_MARKER,i.LINE3D_MARKER),i.LAYER_NODE_TYPE.set(i.SPHERE_MARKER,i.SPHERE_MARKER),i.LAYER_NODE_TYPE.set(i.CAD_LAYER,i.CAD_LAYER),i),j={MODULE_SHORTEST:1,MODULE_BEST:2},g={PRIORITY_DEFAULT:1,PRIORITY_LIFTFIRST:2,PRIORITY_ESCALATORFIRST:3,PRIORITY_STAIRFIRST:4,PRIORITY_LIFTONLY:5,PRIORITY_ESCALATORONLY:6,PRIORITY_STAIRONLY:7,PRIORITY_ACCESSIBLEONLY:8,PRIORITY_LIFTFIRST1:9,PRIORITY_ESCALATORFIRST1:10,PRIORITY_STAIRFIRST1:11},ut={ROUTE_SUCCESS:1,ROUTE_FAILED_NO_DATA_START:2,ROUTE_FAILED_NO_DATA_DEST:3,ROUTE_FAILED_CANNOT_ARRIVE:4,ROUTE_FAILED_WAYPOINT_CALCULATE_ERROR:5,ROUTE_FAILED_NO_START_ARRIVAL:6,ROUTE_FAILED_NO_DEST_ARRIVAL:7,ROUTE_FAILED_OUTLINE:8,ROUTE_FAILED_ENTRANCE:9},u={ZH:"zh",EN:"en"},N={TRANSFER_LIFT:1,TRANSFER_STAIR:2,TRANSFER_ESCALATOR:3,TRANSFER_ACCESSIBLE:4,TRANSFER_RAMP:5,TRANSFER_ENTRANCE:6},I={NONE_RODE_NETWORK:1,NONE_WALK_RODE_NETWORK:2,NONE_DRIVE_RODE_NETWORK:4};function A(t){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function L(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=A(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=A(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==A(t)?t:t+""))(n.key),n)}}function D(t,i,r){return i&&L(t.prototype,i),r&&L(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var i=D(function t(i,r){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.W=i,this.Y=r}),C=(Object.assign(i.prototype,{X:function(t){return!1},H:function(t,i){}}),i);function F(t){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function B(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=F(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=F(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==F(t)?t:t+""))(n.key),n)}}function G(t,i,r){i=W(i);var n=t,i=U()?Reflect.construct(i,r||[],W(t).constructor):i.apply(t,r);if(!i||"object"!=F(i)&&"function"!=typeof i){if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(i=n))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return i}function U(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(U=function(){return!!t})()}function W(t){return(W=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function X(t,i){return(X=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t})(t,i)}var i=(()=>{function r(t,i){if(this instanceof r)return G(this,r,[t,i]);throw new TypeError("Cannot call a class as a function")}var t,i,n=r,e=C;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");return n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&X(n,e),n=r,t&&B(n.prototype,t),i&&B(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n})(),H=(Object.assign(i.prototype,{X:function(t){return Array.isArray(this.Y)?-1!=this.Y.indexOf(t.fid):this.Y===t.fid}}),i);function Q(t){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function K(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=Q(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=Q(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==Q(t)?t:t+""))(n.key),n)}}function J(t,i,r){i=tt(i);var n=t,i=$()?Reflect.construct(i,r||[],tt(t).constructor):i.apply(t,r);if(!i||"object"!=Q(i)&&"function"!=typeof i){if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(i=n))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return i}function $(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return($=function(){return!!t})()}function tt(t){return(tt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function it(t,i){return(it=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t})(t,i)}var i=(()=>{function r(t,i){if(this instanceof r)return(t=J(this,r,[t,i])).K=null,"object"==Q(t.Y)?(t.J=t.Y.text,t.$=t.Y.fuzzy,t.tt=void 0===t.Y.matchCase||t.Y.matchCase):(t.J=t.Y,t.tt=!0),t;throw new TypeError("Cannot call a class as a function")}var t,i,n=r,e=C;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");return n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&it(n,e),n=r,t&&K(n.prototype,t),i&&K(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n})(),rt=(Object.assign(i.prototype,{X:function(t){var i=null,i="ename"===this.K?t.ename:t.name;return this.J=this.J.trim(),!!i&&(this.$?(t=this.J.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),t=this.J.replace(/%rn%/g,".*"),new RegExp(t,this.tt?"":"i").test(i&&i.replace(/%rn%/g,".*"))):this.tt?i&&this.J===i:i&&this.J.toLowerCase()===i.toLowerCase())}}),i);function nt(t){return(nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function et(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=nt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=nt(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==nt(t)?t:t+""))(n.key),n)}}function ot(t,i,r){i=ct(i);var n=t,i=st()?Reflect.construct(i,r||[],ct(t).constructor):i.apply(t,r);if(!i||"object"!=nt(i)&&"function"!=typeof i){if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(i=n))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return i}function st(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(st=function(){return!!t})()}function ct(t){return(ct=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vt(t,i){return(vt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t})(t,i)}var yt=(()=>{function r(t,i){if(this instanceof r)return(t=ot(this,r,[t,i])).K="name",t;throw new TypeError("Cannot call a class as a function")}var t,i,n=r,e=rt;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");return n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&vt(n,e),n=r,t&&et(n.prototype,t),i&&et(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n})();function dt(t){return(dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bt(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=dt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=dt(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==dt(t)?t:t+""))(n.key),n)}}function pt(t,i,r){i=wt(i);var n=t,i=mt()?Reflect.construct(i,r||[],wt(t).constructor):i.apply(t,r);if(!i||"object"!=dt(i)&&"function"!=typeof i){if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(i=n))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return i}function mt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(mt=function(){return!!t})()}function wt(t){return(wt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function gt(t,i){return(gt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t})(t,i)}var _t=(()=>{function r(t,i){if(this instanceof r)return(t=pt(this,r,[t,i])).K="ename",t;throw new TypeError("Cannot call a class as a function")}var t,i,n=r,e=rt;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");return n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&gt(n,e),n=r,t&&bt(n.prototype,t),i&&bt(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n})();function jt(t){return(jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function St(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=jt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=jt(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==jt(t)?t:t+""))(n.key),n)}}function Ot(t,i,r){i=kt(i);var n=t,i=Et()?Reflect.construct(i,r||[],kt(t).constructor):i.apply(t,r);if(!i||"object"!=jt(i)&&"function"!=typeof i){if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(i=n))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return i}function Et(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Et=function(){return!!t})()}function kt(t){return(kt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Tt(t,i){return(Tt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t})(t,i)}var i=(()=>{function r(t,i){if(this instanceof r)return(t=Ot(this,r,[t])).Y=Array.isArray(i)?i:[i],t;throw new TypeError("Cannot call a class as a function")}var t,i,n=r,e=C;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");return n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&Tt(n,e),n=r,t&&St(n.prototype,t),i&&St(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n})(),Mt=(Object.assign(i.prototype,{X:function(t){return-1!=this.Y.indexOf(t.type)}}),i);function Rt(t){return(Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nt(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=Rt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=Rt(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==Rt(t)?t:t+""))(n.key),n)}}function It(t,i,r){i=xt(i);var n=t,i=At()?Reflect.construct(i,r||[],xt(t).constructor):i.apply(t,r);if(!i||"object"!=Rt(i)&&"function"!=typeof i){if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(i=n))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return i}function At(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(At=function(){return!!t})()}function xt(t){return(xt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Pt(t,i){return(Pt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t})(t,i)}var i=(()=>{function r(t,i){if(this instanceof r)return"object"==Rt((t=It(this,r,[t,i])).Y)?(t.J=t.Y.text,t.$=void 0===t.Y.fuzzy||t.Y.fuzzy,t.tt=void 0===t.Y.matchCase||t.Y.matchCase):(t.J=t.Y,t.$=!0,t.tt=!0),t;throw new TypeError("Cannot call a class as a function")}var t,i,n=r,e=C;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");return n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&Pt(n,e),n=r,t&&Nt(n.prototype,t),i&&Nt(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n})(),Lt=(Object.assign(i.prototype,{X:function(t){var i=null,r=null,i=t.name,r=t.ename;return this.J=this.J.trim(),this.$?(t=this.J.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),t=this.J.replace(/%rn%/g,".*"),(t=new RegExp(t,this.tt?"":"i")).test(i&&i.replace(/%rn%/g,".*"))||t.test(r&&r.replace(/%rn%/g,".*"))):this.tt?i&&this.J===i||r&&this.J===r:i&&this.J.toLowerCase()===i.toLowerCase()||r&&this.J.toLowerCase()===r.toLowerCase()}}),i),i={NONE:0,POINT:1,LINE:2,POLYGON:4,MULTIPOINT:8,MULTILINE:16,MULTIPOLYGON:32,GROUP:64,EXTENT:1024,EXTERNALMODEL:2048,MODEL:4096,FACILITY:8192,LABEL:16384,EXTENTGROUP:1<<20,EXTERNALMODELGROUP:1<<21,MODELGROUP:1<<22,FACILITYGROUP:1<<23,LABELGROUP:1<<24},_=(Object.freeze(i),i),Dt=function(t,i,r){r=r||2;var n,e,o,s,u,a=i&&i.length,f=a?i[0]*r:t.length,h=Ct(t,0,f,r,!0),l=[];if(h&&h.next!==h.prev){if(a&&(h=((t,i,r,n)=>{var e,o,s,u,a=[];for(e=0,o=i.length;e<o;e++)u=i[e]*n,s=e<o-1?i[e+1]*n:t.length,(u=Ct(t,u,s,n,!1))===u.next&&(u.steiner=!0),a.push((t=>{for(var i=t,r=t;(i.x<r.x||i.x===r.x&&i.y<r.y)&&(r=i),(i=i.next)!==t;);return r})(u));for(a.sort(Gt),e=0;e<a.length;e++){{f=void 0;h=void 0;var f=a[e];var h=r;(h=((t,i)=>{var r,n=i,e=t.x,o=t.y,s=-1/0;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var u=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(u<=e&&s<u){if((s=u)===e){if(o===n.y)return n;if(o===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}}while((n=n.next)!==i);if(!r)return null;if(e!==s){var a,f=r,h=r.x,l=r.y,c=1/0;for(n=r;e>=n.x&&n.x>=h&&e!==n.x&&Vt(o<l?e:s,o,h,l,o<l?s:e,o,n.x,n.y)&&(a=Math.abs(o-n.y)/(e-n.x),zt(n,t))&&(a<c||a===c&&(n.x>r.x||n.x===r.x&&((t,i)=>E(t.prev,t,i.prev)<0&&E(i.next,t,t.next)<0)(r,n)))&&(r=n,c=a),(n=n.next)!==f;);}return r})(f,h))&&(f=Xt(h,f),Ft(h,h.next),Ft(f,f.next))}r=Ft(r,r.next)}return r})(t,i,h,r)),t.length>80*r){for(var c=n=t[0],v=e=t[1],y=r;y<f;y+=r)(o=t[y])<c&&(c=o),(s=t[y+1])<v&&(v=s),n<o&&(n=o),e<s&&(e=s);u=0!==(u=Math.max(n-c,e-v))?1/u:0}Bt(h,l,r,c,v,u)}return l};function Ct(t,i,r,n,e){var o,s;if(e===0<((t,i,r,n)=>{for(var e=0,o=i,s=r-n;o<r;o+=n)e+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return e})(t,i,r,n))for(o=i;o<r;o+=n)s=Ht(o,t[o],t[o+1],s);else for(o=r-n;i<=o;o-=n)s=Ht(o,t[o],t[o+1],s);return s&&Zt(s,s.next)&&(Qt(s),s=s.next),s}function Ft(t,i){if(!t)return t;i=i||t;var r,n=t;do{if(r=!1,n.steiner||!Zt(n,n.next)&&0!==E(n.prev,n,n.next))n=n.next;else{if(Qt(n),(n=i=n.prev)===n.next)break;r=!0}}while(r||n!==i);return i}function Bt(t,i,r,n,e,o,s){if(t){if(!s&&o){for(var u=t,a=n,f=e,h=o,l=u;null===l.z&&(l.z=Ut(l.x,l.y,a,f,h)),l.prevZ=l.prev,l.nextZ=l.next,(l=l.next)!==u;);l.prevZ.nextZ=null,l.prevZ=null;var c,v,y,d,b,p,m,w,g=l,_=1;do{for(v=g,b=g=null,p=0;v;){for(p++,y=v,c=m=0;c<_&&(m++,y=y.nextZ);c++);for(w=_;0<m||0<w&&y;)0!==m&&(0===w||!y||v.z<=y.z)?(v=(d=v).nextZ,m--):(y=(d=y).nextZ,w--),b?b.nextZ=d:g=d,d.prevZ=b,b=d;v=y}}while(b.nextZ=null,_*=2,1<p)}for(var j,S,O=t;t.prev!==t.next;)if(j=t.prev,S=t.next,o?((t,i,r,n)=>{var e=t.prev,o=t,s=t.next;if(!(0<=E(e,o,s))){for(var u=(e.x<o.x?e.x<s.x?e:s:o.x<s.x?o:s).x,a=(e.y<o.y?e.y<s.y?e:s:o.y<s.y?o:s).y,f=(o.x<e.x?e.x>s.x?e:s:o.x>s.x?o:s).x,h=(o.y<e.y?e.y>s.y?e:s:o.y>s.y?o:s).y,l=Ut(u,a,i,r,n),c=Ut(f,h,i,r,n),v=t.prevZ,y=t.nextZ;v&&v.z>=l&&y&&y.z<=c;){if(v!==t.prev&&v!==t.next&&Vt(e.x,e.y,o.x,o.y,s.x,s.y,v.x,v.y)&&0<=E(v.prev,v,v.next))return;if(v=v.prevZ,y!==t.prev&&y!==t.next&&Vt(e.x,e.y,o.x,o.y,s.x,s.y,y.x,y.y)&&0<=E(y.prev,y,y.next))return;y=y.nextZ}for(;v&&v.z>=l;){if(v!==t.prev&&v!==t.next&&Vt(e.x,e.y,o.x,o.y,s.x,s.y,v.x,v.y)&&0<=E(v.prev,v,v.next))return;v=v.prevZ}for(;y&&y.z<=c;){if(y!==t.prev&&y!==t.next&&Vt(e.x,e.y,o.x,o.y,s.x,s.y,y.x,y.y)&&0<=E(y.prev,y,y.next))return;y=y.nextZ}return 1}})(t,n,e,o):(t=>{var i=t.prev,r=t,n=t.next;if(!(0<=E(i,r,n))){for(var e=t.next.next;e!==t.prev;){if(Vt(i.x,i.y,r.x,r.y,n.x,n.y,e.x,e.y)&&0<=E(e.prev,e,e.next))return;e=e.next}return 1}})(t))i.push(j.i/r),i.push(t.i/r),i.push(S.i/r),Qt(t),t=S.next,O=S.next;else if((t=S)===O){s?1===s?Bt(t=((t,i,r)=>{var n=t;do{var e=n.prev,o=n.next.next}while(!Zt(e,o)&&Wt(e,n,n.next,o)&&zt(e,o)&&zt(o,e)&&(i.push(e.i/r),i.push(n.i/r),i.push(o.i/r),Qt(n),Qt(n.next),n=t=o),(n=n.next)!==t);return Ft(n)})(Ft(t),i,r),i,r,n,e,o,2):2===s&&((t,i,r,n,e,o)=>{var s=t;do{for(var u,a=s.next.next;a!==s.prev;){if(s.i!==a.i&&((t,i)=>t.next.i!==i.i&&t.prev.i!==i.i&&!((t,i)=>{var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==i.i&&r.next.i!==i.i&&Wt(r,r.next,t,i))return 1}while((r=r.next)!==t)})(t,i)&&(zt(t,i)&&zt(i,t)&&((t,i)=>{for(var r=t,n=!1,e=(t.x+i.x)/2,o=(t.y+i.y)/2;r.y>o!=r.next.y>o&&r.next.y!==r.y&&e<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),(r=r.next)!==t;);return n})(t,i)&&(E(t.prev,t,i.prev)||E(t,i.prev,i))||Zt(t,i)&&0<E(t.prev,t,t.next)&&0<E(i.prev,i,i.next)))(s,a))return u=Xt(s,a),s=Ft(s,s.next),u=Ft(u,u.next),Bt(s,i,r,n,e,o),Bt(u,i,r,n,e,o);a=a.next}}while((s=s.next)!==t)})(t,i,r,n,e,o):Bt(Ft(t),i,r,n,e,o,1);break}}}function Gt(t,i){return t.x-i.x}function Ut(t,i,r,n,e){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*e)|t<<8))|t<<4))|t<<2))|t<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=32767*(i-n)*e)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function Vt(t,i,r,n,e,o,s,u){return 0<=(e-s)*(i-u)-(t-s)*(o-u)&&0<=(t-s)*(n-u)-(r-s)*(i-u)&&0<=(r-s)*(o-u)-(e-s)*(n-u)}function E(t,i,r){return(i.y-t.y)*(r.x-i.x)-(i.x-t.x)*(r.y-i.y)}function Zt(t,i){return t.x===i.x&&t.y===i.y}function Wt(t,i,r,n){var e=Yt(E(t,i,r)),o=Yt(E(t,i,n)),s=Yt(E(r,n,t)),u=Yt(E(r,n,i));return e!==o&&s!==u||0===e&&qt(t,r,i)||0===o&&qt(t,n,i)||0===s&&qt(r,t,n)||!(0!==u||!qt(r,i,n))}function qt(t,i,r){return i.x<=Math.max(t.x,r.x)&&i.x>=Math.min(t.x,r.x)&&i.y<=Math.max(t.y,r.y)&&i.y>=Math.min(t.y,r.y)}function Yt(t){return 0<t?1:t<0?-1:0}function zt(t,i){return E(t.prev,t,t.next)<0?0<=E(t,i,t.next)&&0<=E(t,t.prev,i):E(t,i,t.prev)<0||E(t,t.next,i)<0}function Xt(t,i){var r=new Kt(t.i,t.x,t.y),n=new Kt(i.i,i.x,i.y),e=t.next,o=i.prev;return(t.next=i).prev=t,(r.next=e).prev=r,n.next=r,(o.next=r.prev=n).prev=o,n}function Ht(t,i,r,n){t=new Kt(t,i,r);return n?(t.next=n.next,(t.prev=n).next.prev=t,n.next=t):(t.prev=t).next=t,t}function Qt(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Kt(t,i,r){this.i=t,this.x=i,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Jt(t){return(t=>{if(Array.isArray(t))return $t(t)})(t)||(t=>{if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)})(t)||((t,i)=>{var r;if(t)return"string"==typeof t?$t(t,i):"Map"===(r="Object"===(r={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$t(t,i):void 0})(t)||(()=>{throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}function $t(t,i){(null==i||i>t.length)&&(i=t.length);for(var r=0,n=Array(i);r<i;r++)n[r]=t[r];return n}var ti={area:function(t){for(var i=t.length,r=0,n=i-1,e=0;e<i;n=e++)r+=t[n].x*t[e].y-t[e].x*t[n].y;return.5*r},isClockWise:function(t){return ti.area(t)<0},triangulateShape:function(t,i){var r=[],n=[],e=[],o=(ii(t),ri(r,t),t.length);i.forEach(ii);for(var s=0;s<i.length;s++)n.push(o),o+=i[s].length,ri(r,i[s]);for(var u=Dt(r,n),a=0;a<u.length;a+=3)e.push(u.slice(a,a+3));return e},triangulate:function(t){(e=[]).push.apply(e,Jt(t[0]));for(var i=[],r=1;r<t.length;r++){var n=[];n.push.apply(n,Jt(t[r])),i.push(n)}if(!ti.isClockWise(e))for(var e=e.reverse(),o=0,s=i.length;o<s;o++){var u=i[o];ti.isClockWise(u)&&(i[o]=u.reverse())}return ti.triangulateShape(e,i)}};function ii(t){var i,r=t.length;2<r&&(r=t[r-1],i=t[0],r.x===i.x)&&r.y===i.y&&t.pop()}function ri(t,i){for(var r=0;r<i.length;r++)t.push(i[r].x),t.push(i[r].y)}Math.PI;function ni(t,i,r){return Math.max(i,Math.min(r,t))}function ei(t,i){return(t%i+i)%i}function oi(t,i,r){return(1-r)*t+r*i}function si(t){return(si="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ui(){ui=function(){return s};var a,s={},t=Object.prototype,f=t.hasOwnProperty,h=Object.defineProperty||function(t,i,r){t[i]=r.value},i="function"==typeof Symbol?Symbol:{},n=i.iterator||"@@iterator",r=i.asyncIterator||"@@asyncIterator",e=i.toStringTag||"@@toStringTag";function o(t,i,r){return Object.defineProperty(t,i,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[i]}try{o({},"")}catch(a){o=function(t,i,r){return t[i]=r}}function u(t,i,r,n){var e,o,s,u,i=i&&i.prototype instanceof p?i:p,i=Object.create(i.prototype),n=new k(n||[]);return h(i,"_invoke",{value:(e=t,o=r,s=n,u=c,function(t,i){if(u===y)throw Error("Generator is already running");if(u===d){if("throw"===t)throw i;return{value:a,done:!0}}for(s.method=t,s.arg=i;;){var r=s.delegate;if(r){r=function t(i,r){var n=r.method,e=i.iterator[n];if(e===a)return r.delegate=null,"throw"===n&&i.iterator.return&&(r.method="return",r.arg=a,t(i,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;n=l(e,i.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,b;e=n.arg;return e?e.done?(r[i.resultName]=e.value,r.next=i.nextLoc,"return"!==r.method&&(r.method="next",r.arg=a),r.delegate=null,b):e:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}(r,s);if(r){if(r===b)continue;return r}}if("next"===s.method)s.sent=s.it=s.arg;else if("throw"===s.method){if(u===c)throw u=d,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);u=y;r=l(e,o,s);if("normal"===r.type){if(u=s.done?d:v,r.arg===b)continue;return{value:r.arg,done:s.done}}"throw"===r.type&&(u=d,s.method="throw",s.arg=r.arg)}})}),i}function l(t,i,r){try{return{type:"normal",arg:t.call(i,r)}}catch(t){return{type:"throw",arg:t}}}s.wrap=u;var c="suspendedStart",v="suspendedYield",y="executing",d="completed",b={};function p(){}function m(){}function w(){}var i={},g=(o(i,n,function(){return this}),Object.getPrototypeOf),g=g&&g(g(T([]))),_=(g&&g!==t&&f.call(g,n)&&(i=g),w.prototype=p.prototype=Object.create(i));function j(t){["next","throw","return"].forEach(function(i){o(t,i,function(t){return this._invoke(i,t)})})}function S(s,u){var i;h(this,"_invoke",{value:function(r,n){function t(){return new u(function(t,i){!function i(t,r,n,e){var o,t=l(s[t],s,r);if("throw"!==t.type)return(r=(o=t.arg).value)&&"object"==si(r)&&f.call(r,"__await")?u.resolve(r.rt).then(function(t){i("next",t,n,e)},function(t){i("throw",t,n,e)}):u.resolve(r).then(function(t){o.value=t,n(o)},function(t){return i("throw",t,n,e)});e(t.arg)}(r,n,t,i)})}return i=i?i.then(t,t):t()}})}function O(t){var i={tryLoc:t[0]};1 in t&&(i.catchLoc=t[1]),2 in t&&(i.finallyLoc=t[2],i.afterLoc=t[3]),this.tryEntries.push(i)}function E(t){var i=t.completion||{};i.type="normal",delete i.arg,t.completion=i}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function T(i){if(i||""===i){var r,t=i[n];if(t)return t.call(i);if("function"==typeof i.next)return i;if(!isNaN(i.length))return r=-1,(t=function t(){for(;++r<i.length;)if(f.call(i,r))return t.value=i[r],t.done=!1,t;return t.value=a,t.done=!0,t}).next=t}throw new TypeError(si(i)+" is not iterable")}return h(_,"constructor",{value:m.prototype=w,configurable:!0}),h(w,"constructor",{value:m,configurable:!0}),m.displayName=o(w,e,"GeneratorFunction"),s.isGeneratorFunction=function(t){t="function"==typeof t&&t.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},s.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,o(t,e,"GeneratorFunction")),t.prototype=Object.create(_),t},s.awrap=function(t){return{rt:t}},j(S.prototype),o(S.prototype,r,function(){return this}),s.AsyncIterator=S,s.async=function(t,i,r,n,e){void 0===e&&(e=Promise);var o=new S(u(t,i,r,n),e);return s.isGeneratorFunction(i)?o:o.next().then(function(t){return t.done?t.value:o.next()})},j(_),o(_,e,"Generator"),o(_,n,function(){return this}),o(_,"toString",function(){return"[object Generator]"}),s.keys=function(t){var i,r=Object(t),n=[];for(i in r)n.push(i);return n.reverse(),function t(){for(;n.length;){var i=n.pop();if(i in r)return t.value=i,t.done=!1,t}return t.done=!0,t}},s.values=T,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this.it=a,this.done=!1,this.delegate=null,this.method="next",this.arg=a,this.tryEntries.forEach(E),!t)for(var i in this)"t"===i.charAt(0)&&f.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=a)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var n=this;function t(t,i){return o.type="throw",o.arg=r,n.next=t,i&&(n.method="next",n.arg=a),!!i}for(var i=this.tryEntries.length-1;0<=i;--i){var e=this.tryEntries[i],o=e.completion;if("root"===e.tryLoc)return t("end");if(e.tryLoc<=this.prev){var s=f.call(e,"catchLoc"),u=f.call(e,"finallyLoc");if(s&&u){if(this.prev<e.catchLoc)return t(e.catchLoc,!0);if(this.prev<e.finallyLoc)return t(e.finallyLoc)}else if(s){if(this.prev<e.catchLoc)return t(e.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<e.finallyLoc)return t(e.finallyLoc)}}}},abrupt:function(t,i){for(var r=this.tryEntries.length-1;0<=r;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&f.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var e=n;break}}var o=(e=e&&("break"===t||"continue"===t)&&e.tryLoc<=i&&i<=e.finallyLoc?null:e)?e.completion:{};return o.type=t,o.arg=i,e?(this.method="next",this.next=e.finallyLoc,b):this.complete(o)},complete:function(t,i){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&i&&(this.next=i),b},finish:function(t){for(var i=this.tryEntries.length-1;0<=i;--i){var r=this.tryEntries[i];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),E(r),b}},catch:function(t){for(var i=this.tryEntries.length-1;0<=i;--i){var r,n,e=this.tryEntries[i];if(e.tryLoc===t)return"throw"===(r=e.completion).type&&(n=r.arg,E(e)),n}throw Error("illegal catch attempt")},delegateYield:function(t,i,r){return this.delegate={iterator:T(t),resultName:i,nextLoc:r},"next"===this.method&&(this.arg=a),b}},s}function ai(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=si(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=si(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==si(t)?t:t+""))(n.key),n)}}i=(()=>{return t=function t(){var i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,o=this,s=t;if(!(o instanceof s))throw new TypeError("Cannot call a class as a function");this.isQuaternion=!0,this.nt=i,this.et=r,this.ot=n,this.st=e},i=[{key:"x",get:function(){return this.nt},set:function(t){this.nt=t,this.ut()}},{key:"y",get:function(){return this.et},set:function(t){this.et=t,this.ut()}},{key:"z",get:function(){return this.ot},set:function(t){this.ot=t,this.ut()}},{key:"w",get:function(){return this.st},set:function(t){this.st=t,this.ut()}},{key:"set",value:function(t,i,r,n){return this.nt=t,this.et=i,this.ot=r,this.st=n,this.ut(),this}},{key:"clone",value:function(){return new this.constructor(this.nt,this.et,this.ot,this.st)}},{key:"copy",value:function(t){return this.nt=t.x,this.et=t.y,this.ot=t.z,this.st=t.w,this.ut(),this}},{key:"setFromEuler",value:function(t){var i=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],r=t.nt,n=t.et,e=t.ot,o=t._order,t=Math.cos,s=Math.sin,u=t(r/2),a=t(n/2),f=t(e/2),h=s(r/2),l=s(n/2),c=s(e/2);switch(o){case"XYZ":this.nt=h*a*f+u*l*c,this.et=u*l*f-h*a*c,this.ot=u*a*c+h*l*f,this.st=u*a*f-h*l*c;break;case"YXZ":this.nt=h*a*f+u*l*c,this.et=u*l*f-h*a*c,this.ot=u*a*c-h*l*f,this.st=u*a*f+h*l*c;break;case"ZXY":this.nt=h*a*f-u*l*c,this.et=u*l*f+h*a*c,this.ot=u*a*c+h*l*f,this.st=u*a*f-h*l*c;break;case"ZYX":this.nt=h*a*f-u*l*c,this.et=u*l*f+h*a*c,this.ot=u*a*c-h*l*f,this.st=u*a*f+h*l*c;break;case"YZX":this.nt=h*a*f+u*l*c,this.et=u*l*f+h*a*c,this.ot=u*a*c-h*l*f,this.st=u*a*f-h*l*c;break;case"XZY":this.nt=h*a*f-u*l*c,this.et=u*l*f-h*a*c,this.ot=u*a*c+h*l*f,this.st=u*a*f+h*l*c;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!0===i&&this.ut(),this}},{key:"setFromAxisAngle",value:function(t,i){var i=i/2,r=Math.sin(i);return this.nt=t.x*r,this.et=t.y*r,this.ot=t.z*r,this.st=Math.cos(i),this.ut(),this}},{key:"setFromRotationMatrix",value:function(t){var t=t.elements,i=t[0],r=t[4],n=t[8],e=t[1],o=t[5],s=t[9],u=t[2],a=t[6],t=t[10],f=i+o+t;return 0<f?(f=.5/Math.sqrt(f+1),this.st=.25/f,this.nt=(a-s)*f,this.et=(n-u)*f,this.ot=(e-r)*f):o<i&&t<i?(f=2*Math.sqrt(1+i-o-t),this.st=(a-s)/f,this.nt=.25*f,this.et=(r+e)/f,this.ot=(n+u)/f):t<o?(f=2*Math.sqrt(1+o-i-t),this.st=(n-u)/f,this.nt=(r+e)/f,this.et=.25*f,this.ot=(s+a)/f):(f=2*Math.sqrt(1+t-i-o),this.st=(e-r)/f,this.nt=(n+u)/f,this.et=(s+a)/f,this.ot=.25*f),this.ut(),this}},{key:"setFromUnitVectors",value:function(t,i){var r=t.dot(i)+1;return r<Number.EPSILON?(r=0,Math.abs(t.x)>Math.abs(t.z)?(this.nt=-t.y,this.et=t.x,this.ot=0):(this.nt=0,this.et=-t.z,this.ot=t.y)):(this.nt=t.y*i.z-t.z*i.y,this.et=t.z*i.x-t.x*i.z,this.ot=t.x*i.y-t.y*i.x),this.st=r,this.normalize()}},{key:"angleTo",value:function(t){return 2*Math.acos(Math.abs(ni(this.dot(t),-1,1)))}},{key:"rotateTowards",value:function(t,i){var r=this.angleTo(t);return 0!==r&&(i=Math.min(1,i/r),this.slerp(t,i)),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this.nt*=-1,this.et*=-1,this.ot*=-1,this.ut(),this}},{key:"dot",value:function(t){return this.nt*t.nt+this.et*t.et+this.ot*t.ot+this.st*t.st}},{key:"lengthSq",value:function(){return this.nt*this.nt+this.et*this.et+this.ot*this.ot+this.st*this.st}},{key:"length",value:function(){return Math.sqrt(this.nt*this.nt+this.et*this.et+this.ot*this.ot+this.st*this.st)}},{key:"normalize",value:function(){var t=this.length();return 0===t?(this.nt=0,this.et=0,this.ot=0,this.st=1):(this.nt=this.nt*(t=1/t),this.et=this.et*t,this.ot=this.ot*t,this.st=this.st*t),this.ut(),this}},{key:"multiply",value:function(t){return this.multiplyQuaternions(this,t)}},{key:"premultiply",value:function(t){return this.multiplyQuaternions(t,this)}},{key:"multiplyQuaternions",value:function(t,i){var r=t.nt,n=t.et,e=t.ot,t=t.st,o=i.nt,s=i.et,u=i.ot,i=i.st;return this.nt=r*i+t*o+n*u-e*s,this.et=n*i+t*s+e*o-r*u,this.ot=e*i+t*u+r*s-n*o,this.st=t*i-r*o-n*s-e*u,this.ut(),this}},{key:"slerp",value:function(t,i){if(0!==i){if(1===i)return this.copy(t);var r,n=this.nt,e=this.et,o=this.ot,s=this.st,u=s*t.st+n*t.nt+e*t.et+o*t.ot;u<0?(this.st=-t.st,this.nt=-t.nt,this.et=-t.et,this.ot=-t.ot,u=-u):this.copy(t),1<=u?(this.st=s,this.nt=n,this.et=e,this.ot=o):(t=1-u*u)<=Number.EPSILON?(this.st=(r=1-i)*s+i*this.st,this.nt=r*n+i*this.nt,this.et=r*e+i*this.et,this.ot=r*o+i*this.ot,this.normalize()):(r=Math.sqrt(t),t=Math.atan2(r,u),u=Math.sin((1-i)*t)/r,i=Math.sin(i*t)/r,this.st=s*u+this.st*i,this.nt=n*u+this.nt*i,this.et=e*u+this.et*i,this.ot=o*u+this.ot*i,this.ut())}return this}},{key:"slerpQuaternions",value:function(t,i,r){return this.copy(t).slerp(i,r)}},{key:"random",value:function(){var t=2*Math.PI*Math.random(),i=2*Math.PI*Math.random(),r=Math.random(),n=Math.sqrt(1-r),r=Math.sqrt(r);return this.set(n*Math.sin(t),n*Math.cos(t),r*Math.sin(i),r*Math.cos(i))}},{key:"equals",value:function(t){return t.nt===this.nt&&t.et===this.et&&t.ot===this.ot&&t.st===this.st}},{key:"fromArray",value:function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return this.nt=t[i],this.et=t[i+1],this.ot=t[i+2],this.st=t[i+3],this.ut(),this}},{key:"toArray",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return t[i]=this.nt,t[i+1]=this.et,t[i+2]=this.ot,t[i+3]=this.st,t}},{key:"fromBufferAttribute",value:function(t,i){return this.nt=t.getX(i),this.et=t.getY(i),this.ot=t.getZ(i),this.st=t.getW(i),this.ut(),this}},{key:"toJSON",value:function(){return this.toArray()}},{key:"_onChange",value:function(t){return this.ut=t,this}},{key:"_onChangeCallback",value:function(){}},{key:Symbol.iterator,value:ui().mark(function t(){return ui().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.nt;case 2:return t.next=4,this.et;case 4:return t.next=6,this.ot;case 6:return t.next=8,this.st;case 8:case"end":return t.stop()}},t,this)})}],r=[{key:"slerpFlat",value:function(t,i,r,n,e,o,s){var u,a,f,h=r[n+0],l=r[n+1],c=r[n+2],r=r[n+3],n=e[o+0],v=e[o+1],y=e[o+2],e=e[o+3];0===s?(t[i+0]=h,t[i+1]=l,t[i+2]=c,t[i+3]=r):1===s?(t[i+0]=n,t[i+1]=v,t[i+2]=y,t[i+3]=e):(r===e&&h===n&&l===v&&c===y||(o=1-s,u=0<=(a=h*n+l*v+c*y+r*e)?1:-1,(f=1-a*a)>Number.EPSILON&&(f=Math.sqrt(f),a=Math.atan2(f,a*u),o=Math.sin(o*a)/f,s=Math.sin(s*a)/f),h=h*o+n*(a=s*u),l=l*o+v*a,c=c*o+y*a,r=r*o+e*a,o===1-s&&(h*=f=1/Math.sqrt(h*h+l*l+c*c+r*r),l*=f,c*=f,r*=f)),t[i]=h,t[i+1]=l,t[i+2]=c,t[i+3]=r)}},{key:"multiplyQuaternionsFlat",value:function(t,i,r,n,e,o){var s=r[n],u=r[n+1],a=r[n+2],r=r[n+3],n=e[o],f=e[o+1],h=e[o+2],e=e[o+3];return t[i]=s*e+r*n+u*h-a*f,t[i+1]=u*e+r*f+a*n-s*h,t[i+2]=a*e+r*h+s*f-u*n,t[i+3]=r*e-s*n-u*f-a*h,t}}],i&&ai(t.prototype,i),r&&ai(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,i,r})();function fi(t){return(fi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hi(){hi=function(){return s};var a,s={},t=Object.prototype,f=t.hasOwnProperty,h=Object.defineProperty||function(t,i,r){t[i]=r.value},i="function"==typeof Symbol?Symbol:{},n=i.iterator||"@@iterator",r=i.asyncIterator||"@@asyncIterator",e=i.toStringTag||"@@toStringTag";function o(t,i,r){return Object.defineProperty(t,i,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[i]}try{o({},"")}catch(a){o=function(t,i,r){return t[i]=r}}function u(t,i,r,n){var e,o,s,u,i=i&&i.prototype instanceof p?i:p,i=Object.create(i.prototype),n=new k(n||[]);return h(i,"_invoke",{value:(e=t,o=r,s=n,u=c,function(t,i){if(u===y)throw Error("Generator is already running");if(u===d){if("throw"===t)throw i;return{value:a,done:!0}}for(s.method=t,s.arg=i;;){var r=s.delegate;if(r){r=function t(i,r){var n=r.method,e=i.iterator[n];if(e===a)return r.delegate=null,"throw"===n&&i.iterator.return&&(r.method="return",r.arg=a,t(i,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;n=l(e,i.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,b;e=n.arg;return e?e.done?(r[i.resultName]=e.value,r.next=i.nextLoc,"return"!==r.method&&(r.method="next",r.arg=a),r.delegate=null,b):e:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}(r,s);if(r){if(r===b)continue;return r}}if("next"===s.method)s.sent=s.it=s.arg;else if("throw"===s.method){if(u===c)throw u=d,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);u=y;r=l(e,o,s);if("normal"===r.type){if(u=s.done?d:v,r.arg===b)continue;return{value:r.arg,done:s.done}}"throw"===r.type&&(u=d,s.method="throw",s.arg=r.arg)}})}),i}function l(t,i,r){try{return{type:"normal",arg:t.call(i,r)}}catch(t){return{type:"throw",arg:t}}}s.wrap=u;var c="suspendedStart",v="suspendedYield",y="executing",d="completed",b={};function p(){}function m(){}function w(){}var i={},g=(o(i,n,function(){return this}),Object.getPrototypeOf),g=g&&g(g(T([]))),_=(g&&g!==t&&f.call(g,n)&&(i=g),w.prototype=p.prototype=Object.create(i));function j(t){["next","throw","return"].forEach(function(i){o(t,i,function(t){return this._invoke(i,t)})})}function S(s,u){var i;h(this,"_invoke",{value:function(r,n){function t(){return new u(function(t,i){!function i(t,r,n,e){var o,t=l(s[t],s,r);if("throw"!==t.type)return(r=(o=t.arg).value)&&"object"==fi(r)&&f.call(r,"__await")?u.resolve(r.rt).then(function(t){i("next",t,n,e)},function(t){i("throw",t,n,e)}):u.resolve(r).then(function(t){o.value=t,n(o)},function(t){return i("throw",t,n,e)});e(t.arg)}(r,n,t,i)})}return i=i?i.then(t,t):t()}})}function O(t){var i={tryLoc:t[0]};1 in t&&(i.catchLoc=t[1]),2 in t&&(i.finallyLoc=t[2],i.afterLoc=t[3]),this.tryEntries.push(i)}function E(t){var i=t.completion||{};i.type="normal",delete i.arg,t.completion=i}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function T(i){if(i||""===i){var r,t=i[n];if(t)return t.call(i);if("function"==typeof i.next)return i;if(!isNaN(i.length))return r=-1,(t=function t(){for(;++r<i.length;)if(f.call(i,r))return t.value=i[r],t.done=!1,t;return t.value=a,t.done=!0,t}).next=t}throw new TypeError(fi(i)+" is not iterable")}return h(_,"constructor",{value:m.prototype=w,configurable:!0}),h(w,"constructor",{value:m,configurable:!0}),m.displayName=o(w,e,"GeneratorFunction"),s.isGeneratorFunction=function(t){t="function"==typeof t&&t.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},s.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,o(t,e,"GeneratorFunction")),t.prototype=Object.create(_),t},s.awrap=function(t){return{rt:t}},j(S.prototype),o(S.prototype,r,function(){return this}),s.AsyncIterator=S,s.async=function(t,i,r,n,e){void 0===e&&(e=Promise);var o=new S(u(t,i,r,n),e);return s.isGeneratorFunction(i)?o:o.next().then(function(t){return t.done?t.value:o.next()})},j(_),o(_,e,"Generator"),o(_,n,function(){return this}),o(_,"toString",function(){return"[object Generator]"}),s.keys=function(t){var i,r=Object(t),n=[];for(i in r)n.push(i);return n.reverse(),function t(){for(;n.length;){var i=n.pop();if(i in r)return t.value=i,t.done=!1,t}return t.done=!0,t}},s.values=T,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this.it=a,this.done=!1,this.delegate=null,this.method="next",this.arg=a,this.tryEntries.forEach(E),!t)for(var i in this)"t"===i.charAt(0)&&f.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=a)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var n=this;function t(t,i){return o.type="throw",o.arg=r,n.next=t,i&&(n.method="next",n.arg=a),!!i}for(var i=this.tryEntries.length-1;0<=i;--i){var e=this.tryEntries[i],o=e.completion;if("root"===e.tryLoc)return t("end");if(e.tryLoc<=this.prev){var s=f.call(e,"catchLoc"),u=f.call(e,"finallyLoc");if(s&&u){if(this.prev<e.catchLoc)return t(e.catchLoc,!0);if(this.prev<e.finallyLoc)return t(e.finallyLoc)}else if(s){if(this.prev<e.catchLoc)return t(e.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<e.finallyLoc)return t(e.finallyLoc)}}}},abrupt:function(t,i){for(var r=this.tryEntries.length-1;0<=r;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&f.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var e=n;break}}var o=(e=e&&("break"===t||"continue"===t)&&e.tryLoc<=i&&i<=e.finallyLoc?null:e)?e.completion:{};return o.type=t,o.arg=i,e?(this.method="next",this.next=e.finallyLoc,b):this.complete(o)},complete:function(t,i){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&i&&(this.next=i),b},finish:function(t){for(var i=this.tryEntries.length-1;0<=i;--i){var r=this.tryEntries[i];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),E(r),b}},catch:function(t){for(var i=this.tryEntries.length-1;0<=i;--i){var r,n,e=this.tryEntries[i];if(e.tryLoc===t)return"throw"===(r=e.completion).type&&(n=r.arg,E(e)),n}throw Error("illegal catch attempt")},delegateYield:function(t,i,r){return this.delegate={iterator:T(t),resultName:i,nextLoc:r},"next"===this.method&&(this.arg=a),b}},s}function li(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=fi(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=fi(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==fi(t)?t:t+""))(n.key),n)}}var ci=(()=>{function o(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=this,e=o;if(!(n instanceof e))throw new TypeError("Cannot call a class as a function");o.prototype.isVector3=!0,this.x=t,this.y=i,this.z=r}return t=o,(i=[{key:"set",value:function(t,i,r){return void 0===r&&(r=this.z),this.x=t,this.y=i,this.z=r,this}},{key:"setScalar",value:function(t){return this.x=t,this.y=t,this.z=t,this}},{key:"setX",value:function(t){return this.x=t,this}},{key:"setY",value:function(t){return this.y=t,this}},{key:"setZ",value:function(t){return this.z=t,this}},{key:"setComponent",value:function(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;default:throw new Error("index is out of range: "+t)}return this}},{key:"getComponent",value:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}},{key:"add",value:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}},{key:"addScalar",value:function(t){return this.x+=t,this.y+=t,this.z+=t,this}},{key:"addVectors",value:function(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this}},{key:"addScaledVector",value:function(t,i){return this.x+=t.x*i,this.y+=t.y*i,this.z+=t.z*i,this}},{key:"sub",value:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}},{key:"subScalar",value:function(t){return this.x-=t,this.y-=t,this.z-=t,this}},{key:"subVectors",value:function(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this}},{key:"multiply",value:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}},{key:"multiplyScalar",value:function(t){return this.x*=t,this.y*=t,this.z*=t,this}},{key:"multiplyVectors",value:function(t,i){return this.x=t.x*i.x,this.y=t.y*i.y,this.z=t.z*i.z,this}},{key:"applyEuler",value:function(t){return this.applyQuaternion(yi.setFromEuler(t))}},{key:"applyAxisAngle",value:function(t,i){return this.applyQuaternion(yi.setFromAxisAngle(t,i))}},{key:"applyMatrix3",value:function(t){var i=this.x,r=this.y,n=this.z,t=t.elements;return this.x=t[0]*i+t[3]*r+t[6]*n,this.y=t[1]*i+t[4]*r+t[7]*n,this.z=t[2]*i+t[5]*r+t[8]*n,this}},{key:"applyNormalMatrix",value:function(t){return this.applyMatrix3(t).normalize()}},{key:"applyMatrix4",value:function(t){var i=this.x,r=this.y,n=this.z,t=t.elements,e=1/(t[3]*i+t[7]*r+t[11]*n+t[15]);return this.x=(t[0]*i+t[4]*r+t[8]*n+t[12])*e,this.y=(t[1]*i+t[5]*r+t[9]*n+t[13])*e,this.z=(t[2]*i+t[6]*r+t[10]*n+t[14])*e,this}},{key:"applyQuaternion",value:function(t){var i=this.x,r=this.y,n=this.z,e=t.x,o=t.y,s=t.z,t=t.w,u=2*(o*n-s*r),a=2*(s*i-e*n),f=2*(e*r-o*i);return this.x=i+t*u+o*f-s*a,this.y=r+t*a+s*u-e*f,this.z=n+t*f+e*a-o*u,this}},{key:"project",value:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}},{key:"unproject",value:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}},{key:"transformDirection",value:function(t){var i=this.x,r=this.y,n=this.z,t=t.elements;return this.x=t[0]*i+t[4]*r+t[8]*n,this.y=t[1]*i+t[5]*r+t[9]*n,this.z=t[2]*i+t[6]*r+t[10]*n,this.normalize()}},{key:"divide",value:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}},{key:"divideScalar",value:function(t){return this.multiplyScalar(1/t)}},{key:"min",value:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}},{key:"max",value:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}},{key:"clamp",value:function(t,i){return this.x=Math.max(t.x,Math.min(i.x,this.x)),this.y=Math.max(t.y,Math.min(i.y,this.y)),this.z=Math.max(t.z,Math.min(i.z,this.z)),this}},{key:"clampScalar",value:function(t,i){return this.x=Math.max(t,Math.min(i,this.x)),this.y=Math.max(t,Math.min(i,this.y)),this.z=Math.max(t,Math.min(i,this.z)),this}},{key:"clampLength",value:function(t,i){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(t,Math.min(i,r)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y+this.z*t.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(t){return this.normalize().multiplyScalar(t)}},{key:"lerp",value:function(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this.z+=(t.z-this.z)*i,this}},{key:"lerpVectors",value:function(t,i,r){return this.x=t.x+(i.x-t.x)*r,this.y=t.y+(i.y-t.y)*r,this.z=t.z+(i.z-t.z)*r,this}},{key:"cross",value:function(t){return this.crossVectors(this,t)}},{key:"crossVectors",value:function(t,i){var r=t.x,n=t.y,t=t.z,e=i.x,o=i.y,i=i.z;return this.x=n*i-t*o,this.y=t*e-r*i,this.z=r*o-n*e,this}},{key:"projectOnVector",value:function(t){var i=t.lengthSq();return 0===i?this.set(0,0,0):(i=t.dot(this)/i,this.copy(t).multiplyScalar(i))}},{key:"projectOnPlane",value:function(t){return vi.copy(this).projectOnVector(t),this.sub(vi)}},{key:"reflect",value:function(t){return this.sub(vi.copy(t).multiplyScalar(2*this.dot(t)))}},{key:"angleTo",value:function(t){var i=Math.sqrt(this.lengthSq()*t.lengthSq());return 0===i?Math.PI/2:(t=this.dot(t)/i,Math.acos(ni(t,-1,1)))}},{key:"distanceTo",value:function(t){return Math.sqrt(this.distanceToSquared(t))}},{key:"distanceToSquared",value:function(t){var i=this.x-t.x,r=this.y-t.y,t=this.z-t.z;return i*i+r*r+t*t}},{key:"manhattanDistanceTo",value:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}},{key:"setFromSpherical",value:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}},{key:"setFromSphericalCoords",value:function(t,i,r){var n=Math.sin(i)*t;return this.x=n*Math.sin(r),this.y=Math.cos(i)*t,this.z=n*Math.cos(r),this}},{key:"setFromCylindrical",value:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}},{key:"setFromCylindricalCoords",value:function(t,i,r){return this.x=t*Math.sin(i),this.y=r,this.z=t*Math.cos(i),this}},{key:"setFromMatrixPosition",value:function(t){t=t.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}},{key:"setFromMatrixScale",value:function(t){var i=this.setFromMatrixColumn(t,0).length(),r=this.setFromMatrixColumn(t,1).length(),t=this.setFromMatrixColumn(t,2).length();return this.x=i,this.y=r,this.z=t,this}},{key:"setFromMatrixColumn",value:function(t,i){return this.fromArray(t.elements,4*i)}},{key:"setFromMatrix3Column",value:function(t,i){return this.fromArray(t.elements,3*i)}},{key:"setFromEuler",value:function(t){return this.x=t.nt,this.y=t.et,this.z=t.ot,this}},{key:"setFromColor",value:function(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}},{key:"equals",value:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}},{key:"fromArray",value:function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[i],this.y=t[i+1],this.z=t[i+2],this}},{key:"toArray",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return t[i]=this.x,t[i+1]=this.y,t[i+2]=this.z,t}},{key:"fromBufferAttribute",value:function(t,i){return this.x=t.getX(i),this.y=t.getY(i),this.z=t.getZ(i),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}},{key:"randomDirection",value:function(){var t=Math.random()*Math.PI*2,i=2*Math.random()-1,r=Math.sqrt(1-i*i);return this.x=r*Math.cos(t),this.y=i,this.z=r*Math.sin(t),this}},{key:Symbol.iterator,value:hi().mark(function t(){return hi().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.x;case 2:return t.next=4,this.y;case 4:return t.next=6,this.z;case 6:case"end":return t.stop()}},t,this)})}])&&li(t.prototype,i),r&&li(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,i,r})(),vi=new ci,yi=new i;function di(t){return(di="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bi(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=di(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=di(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==di(t)?t:t+""))(n.key),n)}}function pi(t,i,r){return i&&bi(t.prototype,i),r&&bi(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var a=1e-5,mi=.001,wi=Math.PI/180,gi=180/Math.PI,i=pi(function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function")});Object.assign(i.prototype,{ft:function(){return a},ht:function(){return wi},lt:function(){return gi},ct:function(t){return t<a&&-a<t},vt:function(t){return a<t},yt:function(t){return t<-a},dt:function(t,i,r){i=(t.x-r.x)*(i.y-r.y)-(i.x-r.x)*(t.y-r.y);return Math.abs(i)<a?0:i},distanceOfTwoPoints:function(t,i){return t&&i?Math.sqrt((t.x-i.x)*(t.x-i.x)+(t.y-i.y)*(t.y-i.y)):Number.NaN},distance:function(t,i){return Math.sqrt(Math.pow(i.x-t.x,2)+Math.pow(i.y-t.y,2))},isPolygonContainPoint:function(t,i){for(var r=0,n=0;n<t.length;n++){var e=t[n].x,o=t[n].y,s=0,u=0,u=(n<t.length-1?(s=t[n+1].x,t[n+1]):(s=t[0].x,t[0])).y;if(e===i.x&&o===i.y||s===i.x&&u===i.y)return!0;if(u!==o){var a=e+(i.y-o)*(s-e)/(u-o);if(a===i.x)return!0;e!==s?a<=Math.max(e,s)&&a>=Math.min(e,s)&&a>i.x&&a!==e&&(a===s&&0<(o-i.y)*(u-i.y)?r+=2:r++):a<=Math.max(e,s)&&a>=Math.min(e,s)&&a>i.x&&(a===s&&0<(o-i.y)*(u-i.y)?r+=2:r++)}}return 0<r%2},isPolygonContainPoint2:function(t,i){var r=t.length;if(r<3)return!1;for(var n=r-1,e=0,o=0;o<r;o++){var s=t[o],u=t[n];s.y>i.y!=u.y>i.y&&i.x<(u.x-s.x)*(i.y-s.y)/(u.y-s.y)+s.x&&(s.y>u.y?e++:e--),n=o}return 0!=e},isPolygonInPolygon:function(t,i){var r=Object.assign([],t),n=Object.assign([],i);r.push(r[0]),n.push(n[0]);for(var e=0;e<r.length-1;e++){var o=r[e];if(!this.isPolygonContainPoint(n,o)&&!this.isPolygonContainPoint2(n,o))return!1}for(var s=0;s<r.length-1;s++)for(var u=0;u<n.length-1;u++)if(this.bt(r[s],r[s+1],n[u],n[u+1]).isintersect&&!this.wt(n[u],n[u+1],r[s])&&!this.wt(n[u],n[u+1],r[s+1]))return!1;return!0},gt:function(t,i,r,n){return!(Math.max(t.x,i.x)<Math.min(r.x,n.x)||Math.max(t.y,i.y)<Math.min(r.y,n.y)||Math.max(r.x,n.x)<Math.min(t.x,i.x)||Math.max(r.y,n.y)<Math.min(t.y,i.y))},_t:function(t,i,r,n){return!(Math.max(t.x,i.x)<Math.min(r.x,n.x)||Math.max(t.y,i.y)<Math.min(r.y,n.y)||Math.max(r.x,n.x)<Math.min(t.x,i.x)||Math.max(r.y,n.y)<Math.min(t.y,i.y)||0===this.dt(r,i,t)&&0===this.dt(i,n,t)||this.dt(r,i,t)*this.dt(i,n,t)<0||this.dt(t,n,r)*this.dt(n,i,r)<0)},jt:function(t,i,r){return!(t.x<i.x||t.y<i.y||t.x>r.x||r.y<t.y)},St:function(t,i,r){var n=Math.min(i.x,r.x),e=Math.max(i.x,r.x),o=Math.min(i.y,r.y),i=Math.max(i.y,r.y);return!(t.x<n||t.x>e||t.y<o||t.y>i)},Ot:function(t,i,r){var n=Math.min(r.x,i.x),e=Math.max(r.x,i.x),o=Math.min(r.y,i.y),r=Math.max(r.y,i.y);return!(t.x<n||t.x>e||t.y<o||t.y>r)},Et:function(t,i,r){for(var n,e,o=!1,s=0;s<r;s++)n=i[s],e=i[(s+1)%r],(n.y<t.y&&e.y>=t.y||e.y<t.y&&n.y>=t.y)&&(n.x<=t.x||e.x<=t.x)&&n.x+(t.y-n.y)/(e.y-n.y)*(e.x-n.x)<t.x&&(o=!o);return o},kt:function(t,i,r){return(t.x-i.x)*(r.y-i.y)==(r.x-i.x)*(t.y-i.y)&&Math.min(i.x,r.x)<=t.x&&t.x<=Math.max(i.x,r.x)&&Math.min(i.y,r.y)<=t.y&&t.y<=Math.max(i.y,r.y)},Tt:function(t,i){return Math.sqrt((t.x-i.x)*(t.x-i.x)+(t.y-i.y)*(t.y-i.y))},Mt:function(t,i){return(t.x-i.x)*(t.x-i.x)+(t.y-i.y)*(t.y-i.y)},Rt:function(t,i,r){var n=i.x,i=i.y,e=r.x,r=r.y,o=t.x,t=t.y,s=e-n,u=r-i,a=s*s+u*u,f=o-n,h=t-i,l=f*f+h*h;return this.ct(a)?this.ct(l)?0:l:(a=Math.sqrt(a),h=this.vt(u=(s=s/a)*f+(f=u/a)*h)?this.yt(u-a)?(h=o-(n+u*s))*h+(a=t-(i+u*f))*a:(n=o-e)*n+(s=t-r)*s:l,this.ct(h)?0:h)},Nt:function(t,i,r,n){var e,o=i.x,s=i.y,u=r.x,a=r.y,f=t.x,t=t.y,h=u-o,l=a-s,c=Math.sqrt(h*h+l*l),v=f-o,y=t-s,d=Math.sqrt(v*v+y*y);return this.ct(c)?(n.x=i.x,n.y=i.y,this.ct(e=d)?0:e):(e=this.vt(l=(h=h/c)*v+(v=l/c)*y)?this.yt(l-c)?(c=f-(y=o+l*h),h=t-(o=s+l*v),s=Math.sqrt(c*c+h*h),n.x=y,n.y=o,s):(l=f-u,v=t-a,c=Math.sqrt(l*l+v*v),n.x=r.x,n.y=r.y,c):(n.x=i.x,n.y=i.y,d),this.ct(e)?0:e)},It:function(t,i){for(var r=0,n=0,e=0,o=0;o<i;o++){var s=t[o],u=t[(o+1)%i],a=(s.x*u.y-s.y*u.x)/2;r+=a,n+=a*(s.x+u.x)/3,e+=a*(s.y+u.y)/3}return{x:n/=r,y:e/=r}},At:function(t){for(var i=ti.triangulate([t]),r=0,n=0,e=0,o=0;o<i.length;o++){var s=t[i[o][0]],u=t[i[o][1]],a=t[i[o][2]],f=u.x-s.x,h=u.y-s.y,l=a.x-s.x,f=(f*(a.y-s.y)-l*h)/2;r+=f,n+=(s.x+u.x+a.x)/3*f,e+=(s.y+u.y+a.y)/3*f}return{x:n/r,y:e/r}},xt:function(t,i){if(i<3)return 0;for(var r=0,n=0;n<i;++n){var e=t[n],o=t[(n+1)%i];r+=e.x*o.y-e.y*o.x}return Math.abs(r/2)},Pt:function(t,i,r,n,e){var o;return this._t(t,i,r,n)?(o=(n.x-r.x)*(t.y-i.y)-(i.x-t.x)*(r.y-n.y),e.x=((t.y-r.y)*(i.x-t.x)*(n.x-r.x)+r.x*(n.y-r.y)*(i.x-t.x)-t.x*(i.y-t.y)*(n.x-r.x))/o,e.y=(i.y*(t.x-i.x)*(n.y-r.y)+(n.x-i.x)*(n.y-r.y)*(t.y-i.y)-n.y*(r.x-n.x)*(i.y-t.y))/(o=(t.x-i.x)*(n.y-r.y)-(i.y-t.y)*(r.x-n.x)),1):0},Lt:function(t,i,r,n,e){var o=Math.min(r.x,n.x),s=Math.max(r.x,n.x),u=Math.min(r.y,n.y),a=Math.max(r.y,n.y),f=t.x,h=t.y,l=r.x,c=r.y,v=n.x,y=n.y;if(90==i)return!(t.x<o||t.x>s||(s-o<mi?t.y>=c&&t.y<=y||t.y>=y&&t.y<=c?(e.x=t.x,e.y=t.y,0):c<y&&t.x<c?(e.x=l,e.y=c,0):!(y<c&&t.x<y)||(e.x=v,e.y=y,0):(e.y=d=(y-c)/(v-l)*(f-l)+c,e.x=f,d<h||!this.Ot(e,r,n))));if(270==i)return!(t.x<o||t.x>s||(Math.abs(s-o<mi)?t.y>=c&&t.y<=y||t.y>=y&&t.y<=c?(e.x=t.x,e.y=t.y,0):c<y&&t.y>y?(e.x=v,e.y=y,0):!(y<c&&t.y>c)||(e.x=l,e.y=c,0):(e.y=d=(y-c)/(v-l)*(f-l)+c,e.x=f,h<d||!this.Ot(e,r,n))));if(270!=i&&90!=i&&Math.abs(s-o<mi)){var t=o,d=Math.tan(i/180*Math.PI)*(t-f)+h;if(e.y=d,e.x=t,this.Ot(e,r,n))return s=d-h,0<(o=t-f)/Math.sqrt(o*o+s*s)*Math.cos(i/180*Math.PI)}return Math.abs(a-u<=mi)?(d=u,t=1/Math.tan(i/180*Math.PI)*(d-h)+f,e.x=t,e.y=d,!!this.Ot(e,r,n)&&(o=d-h,0<(s=t-f)/Math.sqrt(s*s+o*o)*Math.cos(i/180*Math.PI))):(t=h+(a=Math.tan(i/180*Math.PI))*((d=(c-h-((u=(y-c)/(v-l))*l-a*f))/(a-u))-f),e.x=d,e.y=t,!!this.Ot(e,r,n)&&(s=d-f,o=t-h,Math.abs(s)<=mi&&Math.abs(o)<=mi||0<s/Math.sqrt(s*s+o*o)*Math.cos(i/180*Math.PI)))},Dt:function(t,i){return Math.abs(t.x-i.x)<a&&Math.abs(t.y-i.y)<a},Ct:function(t,i,r,n){var e,o,s,u,a=t.x,f=t.y,h=i.x,l=i.y,c=r.x,v=r.y;return this.Dt(t,i)||this.Dt(t,r)?(n.x=a,n.y=f,!0):(s=Math.min(i.x,r.x),u=Math.max(i.x,r.x),e=Math.min(i.y,r.y),o=Math.max(i.y,r.y),Math.abs(h-c)<1e-5?(n.x=h,e<=(n.y=f)&&f<=o):Math.abs(l-v)<1e-5?(n.x=a,n.y=l,s<=a&&a<=u):(u=f+(e=-1/((v-l)/(c-h)))*((s=(l-f-((o=(v-l)/(c-h))*h-e*a))/(e-o))-a),n.x=s,n.y=u,!!this.Ot(n,i,r)||!(!this.Dt(t,i)&&!this.Dt(t,r))))},Ft:function(t,i){return{x:t.y*i.z-t.z*i.y,y:t.z*i.x-t.x*i.z,z:t.x*i.y-t.y*i.x}},Bt:function(t,i){return t.x*i.x+t.y*i.y+t.z*i.z},Gt:function(t){return Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z)},Ut:function(t,i){return t.x*i.x+t.y*i.y},Vt:function(t,i){return t.x*i.y-t.y*i.x},Zt:function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},Wt:function(t,i){var r,n;return 0==t.x&&0==t.y||0==i.x&&0==i.y?0:(r={x:i.x,y:i.y,z:0},r=this.Ft({x:t.x,y:t.y,z:0},r),n=this.Ut(t,i),n=Math.acos(n/(this.Zt(t)*this.Zt(i))),0<r.z?n/Math.PI*180:360-n/Math.PI*180)},qt:function(t,i,r,n){for(var e=0;e<r.length;e++)if(1==this.Pt(t,i,r[e],r[(e+1)%r.length],n))return!0;return!1},Yt:function(t,i,r,n,e){var o=Math.min(t.x,r.x,n.x),s=Math.max(t.x,r.x,n.x),u=Math.min(t.y,r.y,n.y),a=Math.max(t.y,r.y,n.y),s=Math.sqrt((s-o)*(s-o)+(a-u)*(a-u)),o=i/180*Math.PI,a=s*Math.cos(o)+t.x,u=s*Math.sin(o)+t.y;return 1==this.Pt(t,{x:a,y:u},r,n,e)},zt:function(t){var i={x:null,y:null},r=0,n=0,e=t.length;1<t.length&&t[0].x===t[t.length-1].x&&t[0].y===t[t.length-1].y&&e--;for(var o=0;o<e;o++)r+=t[o].x,n+=t[o].y;return i.x=r/t.length,i.y=n/t.length,i},Xt:function(t,i,r,n){var e=[],o=t.x-i,s=t.x+i,u=t.y-i,a=t.y+i,f=Math.min(r.x,n.x),h=Math.max(r.x,n.x),l=Math.min(r.y,n.y),c=Math.max(r.y,n.y);return h<o||s<f||c<u||a<l||(s=(t=((o=n.x-r.x)*(s=t.x-r.x)+(u=n.y-r.y)*(a=t.y-r.y))/(n=o*o+u*u))*t-(s*s+a*a-i*i)/n)<0||(a=Math.sqrt(s),n={x:r.x-o*(i=-t+a),y:r.y-u*i},o={x:r.x-o*(s=-t-a),y:r.y-u*s},i!==s&&(f<=n.x&&n.x<=h&&l<=n.y&&n.y<=c&&e.push(n),f<=o.x)&&o.x<=h&&l<=o.y&&o.y<=c&&e.push(o)),e},Ht:function(t,i){return Math.abs(t.x-i.x)<=a&&Math.abs(t.y-i.y)<=a},Qt:function(t,i,r){var n,e={};if(t.x!=i.x)return n=i=(i.y-t.y)/(i.x-t.x),e.x=(+r.x- -1*n*r.y-n*(i=t.y-i*t.x))/(n*n+1),e.y=(n*n*r.y- -1*n*r.x- -1*i)/(n*n+1),e;e.x=t.x,e.y=r.y},bt:function(t,i,r,n){var e,o,s,u,a={point:null,isintersect:!1};return this.distanceOfTwoPoints(t,r)<.001||this.distanceOfTwoPoints(t,n)<.001?(a.isintersect=!0,a.point=t):this.distanceOfTwoPoints(i,r)<.001||this.distanceOfTwoPoints(i,n)<.001?(a.isintersect=!0,a.point=i):(e={x:i.x-t.x,y:i.y-t.y},o={x:n.x-r.x,y:n.y-r.y},n={x:n.x-t.x,y:n.y-t.y},i={x:i.x-r.x,y:i.y-r.y},s={x:-(r={x:r.x-t.x,y:r.y-t.y}).x,y:-r.y},u=this.Vt(o,e),Math.abs(u)<=1e-5||this.Vt(r,e)*this.Vt(n,e)<=-5e-4&&this.Vt(s,o)*this.Vt(i,o)<-5e-4&&(n=this.Vt(o,r)/u,a.point={x:t.x+e.x*n,y:t.y+e.y*n},a.isintersect=!0)),a},Kt:function(t,i,r){return t.x===i.x&&(i.x=i.x+1),t.y===i.y&&(i.y=i.y+1),i.x===r.x&&(r.x=r.x+1),i.y===r.y&&(r.y=r.y+1),!(0<(i.x-t.x)*(r.y-i.y)-(i.y-t.y)*(r.x-i.x))},getAngle:function(t){var i=t.p1,t=t.p2,r=t.x-i.x,t=t.y-i.y,i=Math.sqrt(r*r+t*t),i=Math.asin(Math.abs(t)/i);return 0<r&&0<t?i:r<0&&0<t?Math.PI-i:r<0&&t<0?Math.PI+i:0<r&&t<0?2*Math.PI-i:0==r&&0<t?i:0==r&&t<0?3*Math.PI/2:0<r&&0==t?i:r<0&&0==t?Math.PI:null},Jt:function(t){var i=this.distanceOfTwoPoints(t[0],t[1]),r=this.distanceOfTwoPoints(t[1],t[2]),t=this.distanceOfTwoPoints(t[0],t[2]),n=(i+r+t)/2;return Math.sqrt(n*(n-i)*(n-r)*(n-t))},$t:function(t,i){var r,n,e,o,s;return this.Nt(t,i[0],i[1],{})<1e-4||this.Nt(t,i[0],i[2],{})<1e-4||this.Nt(t,i[1],i[2],{})<1e-4||(o={x:i[1].x-i[0].x,y:i[1].y-i[0].y},r={x:i[0].x-i[2].x,y:i[0].y-i[2].y},n={x:i[2].x-i[1].x,y:i[2].y-i[1].y},s={x:t.x-i[0].x,y:t.y-i[0].y},e={x:t.x-i[1].x,y:t.y-i[1].y},t={x:t.x-i[2].x,y:t.y-i[2].y},i=this.Vt(o,s),o=this.Vt(n,e),s=this.Vt(r,t),a<i*o&&a<o*s)},ti:function(t,i,r){var n=r.length,e={isintersect:!1,start:null,end:null,type:0,outer:null},o=[];if(this.$t(t,r)&&(e.start=t),this.$t(i,r)&&(e.end=i),null!=e.start&&null!=e.end)e.isintersect=!0,e.type=1;else{for(var s=(r[1].x+r[2].x)/2,u=(r[1].y+r[2].y)/2,a=1;a<n;a++){var f,h=this.bt(t,i,r[a-1],r[a]);if(h.isintersect){if(null!=e.start)return e.end=h.point,e.isintersect=!0,e.outer="end",f=this.Wt({x:s-r[0].x,y:u-r[0].y},{x:i.x-r[0].x,y:i.y-r[0].y}),e.type=0<(f=f<180?f:f-360)?2:3,e;if(null!=e.end)return e.start=h.point,e.isintersect=!0,e.outer="start",f=this.Wt({x:s-r[0].x,y:u-r[0].y},{x:t.x-r[0].x,y:t.y-r[0].y}),e.type=0<(f=f<180?f:f-360)?2:3,e;o.push(h)}}var l,c=this.bt(t,i,r[0],r[n-1]);if(c.isintersect){if(null!=e.start)return e.end=c.point,e.isintersect=!0,e.outer="end",l=this.Wt({x:s-r[0].x,y:u-r[0].y},{x:i.x-r[0].x,y:i.y-r[0].y}),e.type=0<(l=l<180?l:l-360)?2:3,e;if(null!=e.end)return e.start=c.point,e.isintersect=!0,e.outer="start",l=this.Wt({x:s-r[0].x,y:u-r[0].y},{x:t.x-r[0].x,y:t.y-r[0].y}),e.type=0<(l=l<180?l:l-360)?2:3,e;o.push(c)}2!=o.length||this.distanceOfTwoPoints(o[0].point,o[1].point)<.01||(this.distanceOfTwoPoints(o[0].point,t)<=this.distanceOfTwoPoints(o[0].point,i)?(e.start=o[0].point,e.end=o[1].point):(e.start=o[1].point,e.end=o[0].point),e.isintersect=!0,e.type=4)}return e},ii:function(t,i,r){var n=r.length,e={isintersect:!1,start:null,end:null},o=[];if(this.$t(t,r)&&(e.start=t),this.$t(i,r)&&(e.end=i),null!=e.start&&null!=e.end)e.isintersect=!0;else{for(var s=1;s<n;s++){var u=this.bt(t,i,r[s-1],r[s]);if(u.isintersect){if(null!=e.start)return e.end=u.point,e.isintersect=!0,e;if(null!=e.end)return e.start=t,e.isintersect=!0,e;o.push(u)}}var a=this.bt(t,i,r[0],r[n-1]);if(a.isintersect){if(null!=e.start)return e.end=a.point,e.isintersect=!0,e;if(null!=e.end)return e.start=t,e.isintersect=!0,e;o.push(a)}2==o.length&&(e.start=(this.distanceOfTwoPoints(o[0].point,t)<=this.distanceOfTwoPoints(o[0].point,i)?o[0]:o[1]).point,e.end=(this.distanceOfTwoPoints(o[0].point,t)>this.distanceOfTwoPoints(o[0].point,i)?o[0]:o[1]).point,e.isintersect=!0)}return e},ri:function(e,t){if(0==t.length)return[e];for(var i,r,n=this.ni(t),o=[],s=(n.sort(function(t,i){var r=(t.ei.x-e.ei.x)*(t.ei.x-e.ei.x)+(t.ei.y-e.ei.y)*(t.ei.y-e.ei.y),n=(i.ei.x-e.ei.x)*(i.ei.x-e.ei.x)+(i.ei.y-e.ei.y)*(i.ei.y-e.ei.y),t=(t.oi.x-e.ei.x)*(t.oi.x-e.ei.x)+(t.oi.y-e.ei.y)*(t.oi.y-e.ei.y),i=(i.oi.x-e.ei.x)*(i.oi.x-e.ei.x)+(i.oi.y-e.ei.y)*(i.oi.y-e.ei.y);return(r<t?r:t)<(n<i?n:i)}),0),s=0;s<n.length;s++)this.distanceOfTwoPoints(n[s].ei,n[s].oi)<.01||(i=this.distanceOfTwoPoints(n[s].ei,e.ei),r=this.distanceOfTwoPoints(n[s].oi,e.ei),i<.01?e.ei=n[s].oi:r<.01?e.ei=n[s].ei:i<r?.1<this.distanceOfTwoPoints(e.ei,n[s].ei)&&(o.push({si:e.si,ei:e.ei,oi:n[s].ei,Tt:e.Tt,ui:e.ui}),e.ei=n[s].oi):.1<this.distanceOfTwoPoints(e.ei,n[s].oi)&&(o.push({si:e.si,ei:e.ei,oi:n[s].oi,Tt:e.Tt,ui:e.ui}),e.ei=n[s].ei),n.splice(s,1));return.1<this.distanceOfTwoPoints(e.ei,e.oi)&&o.push(e),o},ni:function(t){var i=[];if(1==t.length)return t;for(var r=t[0],n=1;0<t.length;){if(t.length<=n){if(i.push(r),t.splice(0,1),t.length<1)break;r=t[0],n=1}if(1===t.length){i.push(r);break}this.wt(r.ei,r.oi,t[n].ei)?(this.wt(r.ei,r.oi,t[n].oi)||(r.oi=t[n].oi),t.splice(n,1)):this.wt(r.ei,r.oi,t[n].oi)?(r.ei=t[n].ei,t.splice(n,1)):this.wt(t[n].ei,t[n].oi,r.ei)?(r=(this.wt(t[n].ei,t[n].oi,r.oi)||(t[n].oi=r.oi),t[n]),t.splice(n,1)):this.wt(t[n].ei,t[n].oi,r.oi)?(t[n].ei=r.ei,r=t[n],t.splice(n,1)):n++}return i},wt:function(t,i,r){var n=t.x-r.x,e=t.y-r.y,o=i.x-r.x,s=i.y-r.y,u=this.distanceOfTwoPoints(t,r),r=this.distanceOfTwoPoints(i,r),t=this.distanceOfTwoPoints(t,i);return n*s-e*o<1e-5&&u+r-t<.001},ai:function(t,i,r){var n=i.x-t.x,t=i.y-t.y,e=Math.sqrt(n*n+t*t);return{x:i.x+n/e*r,y:i.y+t/e*r}},fi:function(t){for(var i=null,r=0,n=0,e=0,o=0;o<t.length;o++)(null===i||t[o].x>i)&&(i=t[o].x,r=o);var s=new ci(t[r].x,t[r].y,0),n=0===r?t.length-1:r-1,e=r===t.length-1?0:r+1,n=new ci(t[n].x,t[n].y,0),e=new ci(t[e].x,t[e].y,0),n=(new ci).copy(s).sub(n),e=(new ci).copy(e).sub(s);return 0<n.cross(e).z}});var at=new i;function _i(t){return(_i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ji(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=_i(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=_i(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==_i(t)?t:t+""))(n.key),n)}}var i=(()=>{function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.li={x:Number.MAX_VALUE,y:Number.MAX_VALUE},this.ci={x:-Number.MAX_VALUE,y:-Number.MAX_VALUE}}return i=t,(r=[{key:"min",get:function(){return this.li}},{key:"max",get:function(){return this.ci}},{key:"center",get:function(){var t={x:Number.NaN,y:Number.NaN};return this.valid()&&(t.x=(this.min.x+this.max.x)/2,t.y=(this.min.y+this.max.y)/2),t}},{key:"size",get:function(){var t={x:Number.NaN,y:Number.NaN};return this.valid()&&(t.x=this.max.x-this.min.x,t.y=this.max.y-this.min.y),t}},{key:"copy",value:function(t){return this.ci.x=t.max.x,this.ci.y=t.max.y,this.li.x=t.min.x,this.li.y=t.min.y,this}},{key:"clone",value:function(){return(new t).copy(this)}},{key:"reset",value:function(){this.li={x:Number.MAX_VALUE,y:Number.MAX_VALUE},this.ci={x:-Number.MAX_VALUE,y:-Number.MAX_VALUE}}},{key:"toObject",value:function(){return{min:this.min,max:this.max,center:this.center,size:this.size}}},{key:"expand",value:function(t){this.vi(t)}},{key:"expandByCoords",value:function(t){this.yi(t)}},{key:"valid",value:function(){return this.di()}},{key:"isCross",value:function(t){var i=!0;return t.max.x<this.min.x&&(i=!1),t.min.x>this.max.x&&(i=!1),t.max.y<this.min.y&&(i=!1),i=t.min.y>this.max.y?!1:i}}])&&ji(i.prototype,r),n&&ji(i,n),Object.defineProperty(i,"prototype",{writable:!1}),i;var i,r,n})(),Si=(Object.assign(i.prototype,{di:function(){return!(this.min.x>this.max.x||this.min.y>this.max.y)},vi:function(t){t&&t.valid()&&(t.min.x<this.min.x&&(this.min.x=t.min.x),t.min.y<this.min.y&&(this.min.y=t.min.y),t.max.x>this.max.x&&(this.max.x=t.max.x),t.max.y>this.max.y)&&(this.max.y=t.max.y)},yi:function(t){var i=this;t&&0!=t.length&&t.forEach(function(t){t.x<i.min.x&&(i.min.x=t.x),t.y<i.min.y&&(i.min.y=t.y),t.x>i.max.x&&(i.max.x=t.x),t.y>i.max.y&&(i.max.y=t.y)})}}),i);function Oi(t){return(Oi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ei(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=Oi(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=Oi(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==Oi(t)?t:t+""))(n.key),n)}}function ki(t,i,r){i=Mi(i);var n=t,i=Ti()?Reflect.construct(i,r||[],Mi(t).constructor):i.apply(t,r);if(!i||"object"!=Oi(i)&&"function"!=typeof i){if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(i=n))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return i}function Ti(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Ti=function(){return!!t})()}function Mi(t){return(Mi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ri(t,i){return(Ri=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t})(t,i)}var i=(()=>{function r(t,i){if(this instanceof r)return(t=ki(this,r,[t,i])).bi=new Si,t.pi=null,t;throw new TypeError("Cannot call a class as a function")}var t,i,n=r,e=C;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");return n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&Ri(n,e),n=r,t&&Ei(n.prototype,t),i&&Ei(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n})(),Ni=(Object.assign(i.prototype,{X:function(t){return t.getType()!=_.MODEL?this.mi(t):this.wi(t)},wi:function(t){return!0},gi:function(t){t=t.getBound();return!!at.gt(this.bi.li,this.bi.ci,t.min,t.max)},H:function(t,i){var r=t.getCoordinates();if(t.getType()!==_.MODEL)i.Tt=Math.sqrt(at.Mt(r[0],this._i));else{for(var n=Number.MAX_VALUE,e=0,o=r.length;e<o;e++)for(var s=1,u=r[e].length;s<u;s++){var a=r[e][s-1],f=r[e][s],a=at.Rt(this._i,a,f);a<n&&(n=a)}i.Tt=Math.sqrt(n)}},mi:function(t){t=t.getCoordinates()[0];return!!at.jt(t,this.bi.li,this.bi.ci)&&("circle"===this.pi?at.Mt(t,this._i)<this.ji:at.Et(t,this.Si,this.Si.length-1))}}),i);function Ii(t){return(Ii="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ai(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=Ii(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=Ii(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==Ii(t)?t:t+""))(n.key),n)}}function xi(t,i,r){i=Li(i);var n=t,i=Pi()?Reflect.construct(i,r||[],Li(t).constructor):i.apply(t,r);if(!i||"object"!=Ii(i)&&"function"!=typeof i){if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(i=n))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return i}function Pi(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Pi=function(){return!!t})()}function Li(t){return(Li=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Di(t,i){return(Di=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t})(t,i)}var i=(()=>{function r(t,i){if(this instanceof r)return(t=xi(this,r,[t,i])).pi="circle",t._i=t.Y.center,t.Oi=t.Y.radius,t.ji=t.Y.radius*t.Y.radius,t.bi.yi([{x:t._i.x-t.Oi,y:t._i.y-t.Oi},{x:t._i.x+t.Oi,y:t._i.y+t.Oi}]),t;throw new TypeError("Cannot call a class as a function")}var t,i,n=r,e=Ni;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");return n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&Di(n,e),n=r,t&&Ai(n.prototype,t),i&&Ai(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n})(),Ci=(Object.assign(i.prototype,{wi:function(t){if(this.gi(t))for(var i=t.getCoordinates(),r=0;r<i.length;r++)for(var n=0;n<i[r].length-1;n++){var e=i[r][n];if(at.Mt(this._i,e)<this.ji)return!0;var o=i[r][n+1];if(at.Rt(this._i,e,o)<this.ji)return!0}return!1}}),i);function Fi(t){return(Fi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bi(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=Fi(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=Fi(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==Fi(t)?t:t+""))(n.key),n)}}function Gi(t,i,r){i=Vi(i);var n=t,i=Ui()?Reflect.construct(i,r||[],Vi(t).constructor):i.apply(t,r);if(!i||"object"!=Fi(i)&&"function"!=typeof i){if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(i=n))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return i}function Ui(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Ui=function(){return!!t})()}function Vi(t){return(Vi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Zi(t,i){return(Zi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t})(t,i)}var i=(()=>{function r(t,i){if(this instanceof r)return(t=Gi(this,r,[t,i])).pi="polygon",t.Si=t.Y,t.Ei=t.Si.length-1,t._i=at.At(t.Si),t.bi.yi(t.Si),t;throw new TypeError("Cannot call a class as a function")}var t,i,n=r,e=Ni;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");return n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&Zi(n,e),n=r,t&&Bi(n.prototype,t),i&&Bi(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n})(),Wi=(Object.assign(i.prototype,{wi:function(t){if(this.gi(t)){for(var i=t.getCoordinates(),r=0,n=i.length;r<n;r++)for(var e=0,o=i[r].length-1;e<o;e++)if(at.Et(i[r][e],this.Si,this.Si.length))return!0;for(var s=0;s<this.Ei;s++){for(var u=!1,a=0,f=i.length;a<f;a++)at.Et(this.Si[s],i[a],i[a].length-1)&&(u=0==a);if(u)return!0}for(var h=0;h<=this.Ei;h++)for(var l=null,c=null,c=h===this.Ei?(l=this.Si[0],this.Si[h]):(l=this.Si[h],this.Si[h+1]),v=0,y=i.length;v<y;v++)for(var d=0,b=i[v].length-1;d<b;d++){var p=i[v][d],m=i[v][d+1];if(at._t(l,c,p,m))return!0}}return!1}}),i);function qi(t){return(qi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yi(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=qi(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=qi(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==qi(t)?t:t+""))(n.key),n)}}function zi(t,i,r){i=Hi(i);var n=t,i=Xi()?Reflect.construct(i,r||[],Hi(t).constructor):i.apply(t,r);if(!i||"object"!=qi(i)&&"function"!=typeof i){if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(i=n))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return i}function Xi(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Xi=function(){return!!t})()}function Hi(t){return(Hi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qi(t,i){return(Qi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t})(t,i)}var i=(()=>{function r(t,i){if(this instanceof r)return zi(this,r,[t,i]);throw new TypeError("Cannot call a class as a function")}var t,i,n=r,e=C;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");return n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&Qi(n,e),n=r,t&&Yi(n.prototype,t),i&&Yi(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n})(),Ki=(Object.assign(i.prototype,{X:function(t){return!1}}),i);function Ji(t){return(Ji="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $i(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=Ji(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=Ji(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==Ji(t)?t:t+""))(n.key),n)}}function tr(t,i,r){i=rr(i);var n=t,i=ir()?Reflect.construct(i,r||[],rr(t).constructor):i.apply(t,r);if(!i||"object"!=Ji(i)&&"function"!=typeof i){if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(i=n))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return i}function ir(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(ir=function(){return!!t})()}function rr(t){return(rr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function nr(t,i){return(nr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t})(t,i)}var i=(()=>{function r(t,i){if(this instanceof r)return(t=tr(this,r,[t,i])).ki=t.Y.point,t;throw new TypeError("Cannot call a class as a function")}var t,i,n=r,e=C;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");return n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&nr(n,e),n=r,t&&$i(n.prototype,t),i&&$i(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n})(),er=(Object.assign(i.prototype,{X:function(t){return t.getType()==_.MODEL&&this.wi(t)},wi:function(t){var i=t.getBound();if(!at.jt(this.ki,i.min,i.max))return!1;for(var r=t.getCoordinates(),n=0,e=0,o=r.length;e<o&&(at.Et(this.ki,r[e],r[e].length-1)&&n++,!(1<n));e++);return 1==n}}),i);function or(t){return(or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sr(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=or(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=or(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==or(t)?t:t+""))(n.key),n)}}function ur(t,i,r){i=fr(i);var n=t,i=ar()?Reflect.construct(i,r||[],fr(t).constructor):i.apply(t,r);if(!i||"object"!=or(i)&&"function"!=typeof i){if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(i=n))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return i}function ar(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(ar=function(){return!!t})()}function fr(t){return(fr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function hr(t,i){return(hr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t})(t,i)}var i=(()=>{function r(t,i){if(this instanceof r)return(t=ur(this,r,[t,i])).pi="linebuffer",t.Ti=t.Y.coords,t.Mi=t.Y.buffer,t.Ri=t.Mi*t.Mi,t.Ni=[],t.Ni=t._calculateBound(t.Ti,t.Mi),t;throw new TypeError("Cannot call a class as a function")}var t,i=r,n=Ni;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return i.prototype=Object.create(n&&n.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),n&&hr(i,n),i=r,(n=[{key:"_calculateBound",value:function(t,i){for(var r=[],n=0;n<t.length-1;n++){var e=Math.min(t[n].x,t[n+1].x),o=Math.max(t[n].x,t[n+1].x),s=Math.min(t[n].y,t[n+1].y),u=Math.max(t[n].y,t[n+1].y),a=(e-=i,o+=i,s-=i,u+=i,new Si);a.expandByCoords([{x:e,y:s},{x:o,y:u}]),r.push(a)}return r}}])&&sr(i.prototype,n),t&&sr(i,t),Object.defineProperty(i,"prototype",{writable:!1}),i})(),lr=(Object.assign(i.prototype,{gi:function(t){for(var i=t.getBound(),r=0;r<this.Ni.length;r++){var n=this.Ni[r];if(at.gt(n.li,n.ci,i.min,i.max))return!0}return!1},wi:function(t){if(this.gi(t))for(var i=t.getCoordinates(),r=0,n=i.length;r<n;r++)for(var e=1,o=i[r].length;e<o;e++)for(var s=i[r][e],u=i[r][e-1],a=0;a<this.Ti.length-1;a++){var f=this.Ti[a],h=this.Ti[a+1];if(at.Rt(s,f,h)<this.Ri)return!0;if(1==e&&at.Rt(u,f,h)<this.Ri)return!0;if(at.Rt(f,u,s)<this.Ri)return!0;if(at.Rt(h,u,s)<this.Ri)return!0;if(at._t(f,h,u,s))return!0}return!1},mi:function(t){for(var i=t.getCoordinates()[0],r=0;r<this.Ti.length-1;r++){var n=this.Ti[k],e=this.Ti[k+1];if(at.Rt(i,n,e)<this.Ri)return!0}return!1},H:function(t,i){return i}}),i);function cr(t){return(cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vr(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=cr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=cr(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==cr(t)?t:t+""))(n.key),n)}}var yr=new((()=>{function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function")}return i=t,(r=[{key:"create",value:function(t){if(!t||"object"!=cr(t))return null;var i,r=[];for(i in t)switch(i){case"FID":r.push(new H(i,t[i]));break;case"name":r.push(new yt(i,t[i]));break;case"ename":r.push(new _t(i,t[i]));break;case"keyword":r.push(new Lt(i,t[i]));break;case"typeID":r.push(new Mt(i,t[i]));break;case"circle":r.push(new Ci(i,t[i]));break;case"polygon":r.push(new Wi(i,t[i]));break;case"buffer":r.push(new Ki(i,t[i]));break;case"contain":r.push(new er(i,t[i]));break;case"line":r.push(new lr(i,t[i]))}return r}}])&&vr(i.prototype,r),n&&vr(i,n),Object.defineProperty(i,"prototype",{writable:!1}),i;var i,r,n})());function dr(t){return(dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function br(t){return(t=>{if(Array.isArray(t))return pr(t)})(t)||(t=>{if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)})(t)||((t,i)=>{var r;if(t)return"string"==typeof t?pr(t,i):"Map"===(r="Object"===(r={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?pr(t,i):void 0})(t)||(()=>{throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}function pr(t,i){(null==i||i>t.length)&&(i=t.length);for(var r=0,n=Array(i);r<i;r++)n[r]=t[r];return n}function mr(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=dr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=dr(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==dr(t)?t:t+""))(n.key),n)}}var i=(()=>{function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.Ii=null,this.Ai=s.MODEL,this.xi=null,this.Pi=[],this.Li=[],this.Di=!1,this.Ci=null}return i=t,(r=[{key:"levels",get:function(){return this.Ii},set:function(t){this.Ii=t}},{key:"type",get:function(){return this.Ai},set:function(t){this.Ai=t}},{key:"addCondition",value:function(t){var i,r=yr.create(t);(i=this.Li).push.apply(i,br(r)),this.Pi.push(t)}},{key:"onlyInBuilding",get:function(){return this.Di},set:function(t){this.Di=t}},{key:"buildings",get:function(){return this.Ci},set:function(t){this.Ci=t}},{key:"buildingID",get:function(){return this.xi},set:function(t){this.xi=t}}])&&mr(i.prototype,r),n&&mr(i,n),Object.defineProperty(i,"prototype",{writable:!1}),i;var i,r,n})(),wr=t(3),v={NAME_KEY_ERROR:0,MAP_ID_URL_ERROR:2,THEME_ID_URL_ERROR:4,LICENSE_ERROR:8,PATH_ERROR:404,INFO:32,DEFAULT_LEVEL_ERROR:64},gr=t(2),l=t(0);function _r(t){return(_r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jr(i,t){var r,n=Object.keys(i);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(i),t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable})),n.push.apply(n,r)),n}function Sr(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?jr(Object(e),!0).forEach(function(t){var i,r;i=n,r=e[t=t],(t=kr(t))in i?Object.defineProperty(i,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[t]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):jr(Object(e)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))})}return n}function Or(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,kr(n.key),n)}}function Er(t,i,r){return i&&Or(t.prototype,i),r&&Or(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function kr(t){t=((t,i)=>{if("object"!=_r(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=_r(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string");return"symbol"==_r(t)?t:t+""}var r=Er(function t(i){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.Fi=Sr({data:null,method:"GET",responseType:"json"},i),this.Bi=null}),f=(Object.assign(r.prototype,{Gi:function(t,i,r){var n=this.Fi,e=n.data,o=n.method,s=n.url,u=n.responseType,a=n.header,f=null;if((f=new(l.a.environment===gr.a.WX?l.a.XMLHttpRequest:"undefined"!=typeof XMLHttpRequest?XMLHttpRequest:wr.a.global().fengmap.XMLHttpRequest)).responseType=u,f.open(o,s),"object"==_r(a))for(var h in a)f.setRequestHeader(h,a[h]);f.addEventListener("load",function(){200===f.status||0===f.status||201===f.status?t&&t(f.response):i&&(404===f.status?i(v.PATH_ERROR):2069===f.response.error_code?i(v.NAME_KEY_ERROR):2063===f.response.error_code?i(v.MAP_ID_URL_ERROR):400===f.response.error_code?i(v.THEME_ID_URL_ERROR):i(f.response))}),f.addEventListener("timeout",function(t){r&&r(t)}),f.addEventListener("error",function(t){i&&i(t)}),f.send(JSON.stringify(e)),this.Bi=f},Ui:function(){this.Bi&&this.Bi.abort&&(this.Bi.abort(),this.Bi=null)}}),r),r=t(29),Tr=t.n(r);function Mr(t){return(Mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Rr(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=Mr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=Mr(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==Mr(t)?t:t+""))(n.key),n)}}function Nr(t,i,r){return i&&Rr(t.prototype,i),r&&Rr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}for(var r=["TmF2aVNlZ21lbg==","YWNjZXNzaWJsZQ==","Zmlk","bmZv","Rmxvb3JHZW8=","bGlmdFR5cGU=","bGVu","dmVs","ZXh0ZW50TGF5ZQ==","RXh0ZW50Qml6SQ==","cmVhZE9ubHk=","LnByb3RvYnVm","aW50MzI=","ZG9vcnR5cGU=","R0VPUE9JTlRfTQ==","TmF2aVpvbmU=","ZW50cmFuY2VGbA==","bGVuZ3Ro","ZWxCaXpJbmZv","c3RhaXJMYXllcg==","dG9CaWQ=","R2F0ZQ==","b2Zmc2V0WQ==","Zmlkcw==","aXNTZWxlY3RhYg==","ZmxhZw==","ZXh0ZXJuYWxNbw==","bGlmdEVudHJ5","VklTRUdNRU5U","SW5kZXhJbmZv","ZGF0YQ==","ZGVsQml6SW5mbw==","bWlk","cG9pTGF5ZXI=","bW9kZWxpZA==","cGFja2Vk","dGhyb3VnaA==","bmF2aVNlZ21lbg==","bGlmdExheWVy","cmVwZWF0ZWQ=","ZGVmQ2VuWQ==","b29y","bm9kZUlk","TmF2aU1vZGVs","cmFuaw==","c25vZGU=","cHRz","ZGVmR2lk","aGFzaENvZGU=","bmVzdGVk","Ymlk","cmVxdWlyZWQ=","R0VPTElORV9OQQ==","b2Zmc2V0WA==","TmF2aU5vZGU=","bHR5cGU=","T1ZFUkxBWURBVA==","ZGVmQ2VuWA==","b3B0aW9ucw==","YmFzZUxldmVs","YXJlYQ==","TGF5ZXJHcm91cA==","ZmllbGRz","cGFzcw==","Zmxvb3Jz","SUZU","Rmxvb3JOYXZp","amF2YV9vdXRlcg==","UG9seWdvbkxhYg==","ZW50cmFuY2VUeQ==","VHlwZQ==","bmF2aVpvbmVz","ZWxMYXllcg==","YWxpYXM=","d2lkdGg=","YXllcg==","ZW50cnl0eXBlcw==","TGlmdEJpekluZg==","bm9kZXR5cGVz","amF2YV9wYWNrYQ==","bmF2aVR5cGU=","ZGF0ZVZlcg==","bGlmdEZsYWc=","Z2lk","bWF4WA==","bW5hbWU=","bWluU2NhbGVMZQ==","Zmxvb3JJZA==","X2NsYXNzbmFtZQ==","TW9kZWxCaXpJbg==","Zmxvb3I=","bmFtZQ==","c2NhbGVMZXZlbA==","RXh0ZXJuYWxNbw==","cGdpZA==","ZmlsZVZlcg==","VEFJUg==","bWlubGV2ZWw=","Rmxvb3JDb25maQ==","R2VuZXJhbEdlbw==","ZHJpdmU=","Ym9vbA==","a2V5","R0VPUE9MWUdPTg==","dG9HaWQ=","ZGVmQ2VuWg==","YnR5cGU=","R0VPUE9JTlRfUw==","cC5wbGF0Zm9ybQ==","TmF2aUZsb29y","ZmxvYXQ=","bmF2aUV4dGVudA==","UE9JQml6SW5mbw==","TGFiZWxCaXpJbg==","TGF5ZXI=","cnVsZQ==","bGlk","Y29tLmZlbmdtYQ==","c2NhbGU=","c2VnbWVudElk","ZGVzYw==","ZGVsTGF5ZXI=","R0VPUE9JTlRfUA==","cm90YXRlQW5nbA==","X0xBQkVM","cG9seWdvbkxheQ==","ZmlsZURhdGU=","R0VPUE9JTlRfTA==","U3RhaXJCaXpJbg==","ZXNjYWxhdG9yTA==","bGlua1NlZw==","QnVmZmVy","TmF2aUV4dGVudA==","Z2Vv","R0VPTElORQ==","bmF2aU5vZGVz","cmVqZWN0cw==","UG9seWdvbkJpeg==","aXNWaXNpYmxl","b25zaGlw","YnVmZmVycw==","bWF4bGV2ZWw=","ZG91Ymxl","R0VPUE9JTlRfRQ==","bmF2aQ==","Rmxvb3JCaXo=","Z1Byb3RvQnVm","T0RFTA==","ZW5hbWU=","bW9kZWxMYXllcg==","a2V5cw==","ZWlk","bGF5ZXJz","QU5PUkFNQQ==","UkRFUg==","R0VPUE9JTlQ=","QnVpbGRpbmc=","bWluWA==","TWFw","aGVpZ2h0","c3RyaW5n","dHlwZQ==","ZGVmYXVsdA==","cG9seWdvbkxhYg==","TmF2aVJlbGF0aQ==","dWludDY0","aWR4cw==","SW5mbw==","X0VYVEVOVA=="],Ir=r,Ar=218;--Ar;)Ir.push(Ir.shift());var xr=Nr(function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.id={nested:{protobuf:{options:{java_package:"com.fengmap.platform.protobuf",java_outer_classname:"FloorConfigProtoBuf"},nested:{Map:{fields:{mid:{rule:"required",type:"string",id:1},fileVer:{rule:"required",type:"int32",id:2},dateVer:{rule:"required",type:"uint64",id:3},mname:{rule:"required",type:"string",id:4},hashCode:{rule:"required",type:"string",id:5},key:{type:"string",id:6},fileDate:{type:"string",id:7},desc:{type:"string",id:8},readOnly:{type:"bool",id:9,options:{default:!1}},buffers:{rule:"repeated",type:"Buffer",id:10},keys:{rule:"repeated",type:"string",id:11}},nested:{Buffer:{fields:{gid:{rule:"required",type:"int32",id:1},fileVer:{rule:"required",type:"int32",id:2},btype:{rule:"required",type:"int32",id:3},len:{rule:"required",type:"uint64",id:4},data:{rule:"required",type:"bytes",id:5}}}}},Scene:{fields:{mid:{rule:"required",type:"string",id:19},fileVer:{rule:"required",type:"int32",id:20},dateVer:{rule:"required",type:"uint64",id:21},mname:{rule:"required",type:"string",id:22},hashCode:{rule:"required",type:"string",id:23},key:{type:"string",id:24},desc:{type:"string",id:25},readOnly:{type:"bool",id:26,options:{default:!1}},x:{type:"float",id:1},y:{type:"float",id:2},z:{type:"float",id:3},minX:{type:"float",id:4},minY:{type:"float",id:5},maxX:{type:"float",id:6},maxY:{type:"float",id:7},defGid:{type:"string",id:8},defCenX:{type:"float",id:9},defCenY:{type:"float",id:10},defCenZ:{type:"float",id:11},height:{type:"float",id:12},rotateAngleX:{type:"float",id:13},rotateAngleY:{type:"float",id:14},rotateAngleZ:{type:"float",id:15},scale:{type:"float",id:16},scaleLevel:{type:"string",id:17},naviType:{type:"int32",id:28},layerGroups:{rule:"repeated",type:"LayerGroup",id:18},buildings:{rule:"repeated",type:"Building",id:27}},nested:{Layer:{fields:{lid:{type:"int32",id:1},lname:{type:"string",id:2},alias:{type:"string",id:3},ltype:{type:"Type",id:4},offsetX:{type:"float",id:5},offsetY:{type:"float",id:6},height:{type:"float",id:7},rotateAngleX:{type:"float",id:8},rotateAngleY:{type:"float",id:9},rotateAngleZ:{type:"float",id:10},minScaleLevel:{type:"float",id:11},maxScaleLevel:{type:"float",id:12},isVisible:{type:"bool",id:13},isSelectable:{type:"bool",id:14},isEditable:{type:"bool",id:15},desc:{type:"string",id:16}},nested:{Type:{values:{GEOPOINT:1,GEOPOINT_ESCALATOR:2,GEOPOINT_LIFT:3,GEOPOINT_STAIR:4,GEOPOINT_PANORAMA:5,GEOPOINT_POI:6,GEOPOINT_STORELABEL:7,GEOPOINT_NAVINODE:8,GEOPOINT_MODEL:9,GEOLINE:20,GEOLINE_NAVISEGMENT:21,GEOLINE_BORDER:22,GEOPOLYGON:30,GEOPOLYGON_EXTENT:31,GEOPOLYGON_STORE:32,GEOPOLYGON_LABEL:33,RASTERATA:40,OVERLAYDATA:50}}}},LayerGroup:{fields:{gid:{type:"int32",id:1},gname:{type:"string",id:2},alias:{type:"string",id:3},height:{type:"float",id:4},desc:{type:"string",id:5},layers:{rule:"repeated",type:"Layer",id:6},floorId:{type:"string",id:7},naviType:{type:"int32",id:8}}},Floor:{fields:{gid:{type:"int32",id:1},x:{type:"float",id:2},y:{type:"float",id:3},offsetX:{type:"float",id:4},offsetY:{type:"float",id:5},angle:{type:"float",id:6},scale:{type:"float",id:7},fids:{rule:"repeated",type:"string",id:8},pgid:{type:"int32",id:9},baseLevel:{type:"bool",id:10},minlevel:{type:"int32",id:11},maxlevel:{type:"int32",id:12},floorId:{type:"string",id:13},idxs:{rule:"repeated",type:"IndexInfo",id:14},pts:{rule:"repeated",type:"double",id:15,options:{packed:!1}}},nested:{IndexInfo:{fields:{idxs:{rule:"repeated",type:"int32",id:1,options:{packed:!1}}}}}},Building:{fields:{bid:{type:"string",id:1},name:{type:"string",id:2},ename:{type:"string",id:3},alias:{type:"string",id:4},x:{type:"float",id:5},y:{type:"float",id:6},mid:{type:"string",id:7},version:{type:"int32",id:8},floors:{rule:"repeated",type:"Floor",id:9},bcode:{type:"int32",id:10}}}}},Gate:{fields:{mid:{rule:"required",type:"string",id:1},floors:{rule:"repeated",type:"NaviFloor",id:2}},nested:{NaviFloor:{fields:{gid:{type:"int32",id:1},floorId:{type:"string",id:2},bid:{type:"string",id:3},mid:{type:"string",id:4},navi:{rule:"repeated",type:"NaviRelationship",id:5},drive:{rule:"repeated",type:"NaviRelationship",id:6},accessible:{rule:"repeated",type:"NaviRelationship",id:7}}},NaviRelationship:{fields:{eid:{rule:"required",type:"int32",id:1},type:{type:"int32",id:2},accessible:{type:"int32",id:3},idxs:{rule:"repeated",type:"IndexInfo",id:4},pts:{rule:"repeated",type:"double",id:5,options:{packed:!1}},flag:{type:"int32",id:6},toBid:{rule:"repeated",type:"string",id:7},toGid:{rule:"repeated",type:"string",id:8}},nested:{IndexInfo:{fields:{idxs:{rule:"repeated",type:"int32",id:1,options:{packed:!1}}}}}}}},FloorGeo:{fields:{mid:{rule:"required",type:"string",id:1},gid:{rule:"required",type:"int32",id:2},height:{type:"float",id:3},extentLayer:{rule:"repeated",type:"GeneralGeoInfo",id:4},modelLayer:{rule:"repeated",type:"GeneralGeoInfo",id:5},labelLayer:{rule:"repeated",type:"GeneralGeoInfo",id:6},poiLayer:{rule:"repeated",type:"GeneralGeoInfo",id:7},polygonLayer:{rule:"repeated",type:"GeneralGeoInfo",id:8},polygonLabelLayer:{rule:"repeated",type:"GeneralGeoInfo",id:9},liftLayer:{rule:"repeated",type:"GeneralGeoInfo",id:10},stairLayer:{rule:"repeated",type:"GeneralGeoInfo",id:11},escalatorLayer:{rule:"repeated",type:"GeneralGeoInfo",id:12},externalModelLayer:{rule:"repeated",type:"GeneralGeoInfo",id:13}},nested:{GeneralGeoInfo:{fields:{eid:{rule:"required",type:"int32",id:1},geo:{type:"string",id:2},height:{type:"float",id:3},area:{type:"float",id:4},idxs:{rule:"repeated",type:"IndexInfo",id:5},pts:{rule:"repeated",type:"double",id:6,options:{packed:!1}},baseheight:{type:"float",id:7}},nested:{IndexInfo:{fields:{idxs:{rule:"repeated",type:"int32",id:1,options:{packed:!1}}}}}}}},FloorBiz:{fields:{mid:{rule:"required",type:"string",id:1},gid:{rule:"required",type:"int32",id:2},extentLayer:{rule:"repeated",type:"ExtentBizInfo",id:3},modelLayer:{rule:"repeated",type:"ModelBizInfo",id:4},labelLayer:{rule:"repeated",type:"LabelBizInfo",id:5},poiLayer:{rule:"repeated",type:"POIBizInfo",id:6},polygonLayer:{rule:"repeated",type:"PolygonBizInfo",id:7},liftLayer:{rule:"repeated",type:"LiftBizInfo",id:8},stairLayer:{rule:"repeated",type:"StairBizInfo",id:9},polygonLabelLayer:{rule:"repeated",type:"PolygonLabelBizInfo",id:10},externalModelLayer:{rule:"repeated",type:"ExternalModelBizInfo",id:11}},nested:{ExtentBizInfo:{fields:{eid:{rule:"required",type:"int32",id:1},fid:{type:"string",id:2},type:{type:"int32",id:3},name:{type:"string",id:4},ename:{type:"string",id:5},minlevel:{type:"int32",id:6},maxlevel:{type:"int32",id:7}}},ModelBizInfo:{fields:{eid:{rule:"required",type:"int32",id:1},fid:{type:"string",id:2},type:{type:"int32",id:3},name:{type:"string",id:4},ename:{type:"string",id:5},minlevel:{type:"int32",id:6},maxlevel:{type:"int32",id:7},pass:{type:"int32",id:8}}},LabelBizInfo:{fields:{eid:{rule:"required",type:"int32",id:1},fid:{type:"string",id:2},type:{type:"int32",id:3},name:{type:"string",id:4},ename:{type:"string",id:5},minlevel:{type:"int32",id:6},maxlevel:{type:"int32",id:7}}},PolygonBizInfo:{fields:{eid:{rule:"required",type:"int32",id:1},fid:{type:"string",id:2},type:{type:"int32",id:3},name:{type:"string",id:4},ename:{type:"string",id:5},minlevel:{type:"int32",id:6},maxlevel:{type:"int32",id:7}}},POIBizInfo:{fields:{eid:{rule:"required",type:"int32",id:1},fid:{type:"string",id:2},type:{type:"int32",id:3},name:{type:"string",id:4},ename:{type:"string",id:5},minlevel:{type:"int32",id:6},maxlevel:{type:"int32",id:7}}},LiftBizInfo:{fields:{eid:{rule:"required",type:"int32",id:1},fid:{type:"string",id:2},type:{type:"int32",id:3},flag:{type:"int32",id:4},floor:{type:"string",id:5},minlevel:{type:"int32",id:6},maxlevel:{type:"int32",id:7}}},StairBizInfo:{fields:{eid:{rule:"required",type:"int32",id:1},fid:{type:"string",id:2},type:{type:"int32",id:3},flag:{type:"int32",id:4},minlevel:{type:"int32",id:5},maxlevel:{type:"int32",id:6}}},PolygonLabelBizInfo:{fields:{eid:{rule:"required",type:"int32",id:1},fid:{type:"string",id:2},type:{type:"int32",id:3},width:{type:"float",id:4},name:{type:"string",id:5},ename:{type:"string",id:6},angle:{type:"float",id:7}}},ExternalModelBizInfo:{fields:{eid:{rule:"required",type:"int32",id:1},fid:{type:"string",id:2},type:{type:"int32",id:3},name:{type:"string",id:4},ename:{type:"string",id:5},minlevel:{type:"int32",id:6},maxlevel:{type:"int32",id:7}}}}},FloorNavi:{fields:{mid:{rule:"required",type:"string",id:1},gid:{rule:"required",type:"int32",id:2},naviNodes:{rule:"repeated",type:"NaviNode",id:3},naviSegments:{rule:"repeated",type:"NaviSegment",id:4},naviZones:{rule:"repeated",type:"NaviZone",id:5},naviModels:{rule:"repeated",type:"NaviModel",id:6},nextFloors:{rule:"repeated",type:"int32",id:7,options:{packed:!1}},naviExtents:{rule:"repeated",type:"NaviExtent",id:8}},nested:{NaviNode:{fields:{nodeId:{type:"int32",id:1},nodeType:{type:"int32",id:2},liftType:{type:"int32",id:3},liftFlag:{type:"int32",id:4},liftEntry:{type:"int32",id:5},liftFloor:{type:"string",id:6},linkSeg:{type:"string",id:7},geo:{type:"string",id:8},entranceType:{type:"int32",id:9},entranceFloor:{type:"string",id:10},doortype:{type:"int32",id:11},idxs:{rule:"repeated",type:"int32",id:12,options:{packed:!1}},pts:{rule:"repeated",type:"double",id:13,options:{packed:!1}},accessible:{type:"int32",id:14,options:{default:0}}}},NaviSegment:{fields:{segmentId:{type:"int32",id:1},snode:{type:"int32",id:2},enode:{type:"int32",id:3},length:{type:"double",id:4},rank:{type:"int32",id:5},name:{type:"string",id:6},entry:{type:"int32",id:7},desc:{type:"string",id:8},geo:{type:"string",id:9},through:{type:"int32",id:10},idxs:{rule:"repeated",type:"int32",id:11,options:{packed:!1}},pts:{rule:"repeated",type:"double",id:12,options:{packed:!1}}}},NaviZone:{fields:{id:{rule:"required",type:"int32",id:1},type:{rule:"required",type:"int32",id:2,options:{default:0}},geo:{type:"string",id:3},rejects:{rule:"repeated",type:"string",id:4},idxs:{rule:"repeated",type:"int32",id:5,options:{packed:!1}},pts:{rule:"repeated",type:"double",id:6,options:{packed:!1}}}},NaviModel:{fields:{modelid:{rule:"required",type:"int32",id:1},doorids:{rule:"repeated",type:"int32",id:2,options:{packed:!1}},nodetypes:{rule:"repeated",type:"int32",id:3,options:{packed:!1}},entrytypes:{rule:"repeated",type:"int32",id:4,options:{packed:!1}}}},NaviExtent:{fields:{id:{rule:"required",type:"int32",id:1},pts:{rule:"repeated",type:"double",id:2,options:{packed:!1}},idxs:{rule:"repeated",type:"IndexInfo",id:3}},nested:{IndexInfo:{fields:{idxs:{rule:"repeated",type:"int32",id:1,options:{packed:!1}}}}}}}}}}}}});function Pr(t){return(Pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Lr(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=Pr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=Pr(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==Pr(t)?t:t+""))(n.key),n)}}function Dr(t,i,r){return i&&Lr(t.prototype,i),r&&Lr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var r=Dr(function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.Vi=null}),Cr=(Object.assign(r.prototype,{Zi:function(){this.Vi||(this.Vi=Tr.a.Root.fromJSON((new("undefined"!=typeof KjWzhWlSj&&KjWzhWlSj.ProtoDef?KjWzhWlSj.ProtoDef:xr)).id))},Wi:function(t){return this.Zi(),this.Vi.lookup("Map").decode(t)},qi:function(t){for(var i=0;i<t.buffers.length;i++){var r=t.buffers[i];if(1==r.btype)return this.Yi(r.data)}return null},zi:function(t){for(var i=0;i<t.buffers.length;i++){var r=t.buffers[i];if(7==r.btype)return this.Xi(r.data)}return null},Hi:function(t,i){for(var r=0;r<t.buffers.length;r++){var n=t.buffers[r];if(2==n.btype&&n.gid==i)return this.Qi(n.data)}return null},Ki:function(t,i){for(var r=0;r<t.buffers.length;r++){var n=t.buffers[r];if(3==n.btype&&n.gid==i)return this.Ji(n.data)}return null},$i:function(t,i){for(var r=0;r<t.buffers.length;r++){var n=t.buffers[r];if(4==n.btype&&n.gid==i)return this.tr(n.data)}return null},ir:function(t,i){for(var r=0;r<t.buffers.length;r++){var n=t.buffers[r];if(5===n.btype&&n.gid===i)return this.tr(n.data)}return null},rr:function(t,i){for(var r=0;r<t.buffers.length;r++){var n=t.buffers[r];if(6===n.btype&&n.gid===i)return this.tr(n.data)}return null},Yi:function(t){this.Zi();var i=this.Vi.lookup("Scene").decode(t);return i.levels=[],i.layerGroups.forEach(function(t){i.levels.push(t.gid)}),i},Xi:function(t){return this.Zi(),this.Vi.lookup("Gate").decode(t)},Qi:function(t){return this.Zi(),this.Vi.lookup("FloorGeo").decode(t)},Ji:function(t){return this.Zi(),this.Vi.lookup("FloorBiz").decode(t)},tr:function(t){return this.Zi(),this.Vi.lookup("FloorNavi").decode(t)}}),r);function Fr(t){return(Fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Br(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=Fr(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=Fr(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==Fr(t)?t:t+""))(n.key),n)}}function Gr(t,i,r){return i&&Br(t.prototype,i),r&&Br(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var Ur,Vr,y,Zr,Wr,r=Gr(function t(){var i;if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");l.a.environment===gr.a.WX?this.nr=new l.a.ProtoReaderStatic:void 0!==wr.a.global().KjWzhWlSj&&wr.a.global().KjWzhWlSj.ProtoReaderStatic?(i=wr.a.global().KjWzhWlSj.ProtoReaderStatic,this.nr=new i):this.nr=new Cr}),qr=(Object.assign(r.prototype,{Wi:function(t){return this.nr.Wi(t)},qi:function(t){return this.nr.qi(t)},zi:function(t){return this.nr.zi(t)},Hi:function(t,i){return this.nr.Hi(t,i)},Ki:function(t,i){return this.nr.Ki(t,i)},$i:function(t,i){return this.nr.$i(t,i)},ir:function(t,i){return this.nr.ir(t,i)},rr:function(t,i){return this.nr.rr(t,i)},Yi:function(t){return this.nr.Yi(t)},Xi:function(t){return this.nr.Xi(t)},Qi:function(t){return this.nr.Qi(t)},Ji:function(t){return this.nr.Ji(t)},tr:function(t){return this.nr.tr(t)}}),r),r="https://console.fengmap.com/api-s/",Yr={domain:r,online:r+"sdk/check",check:r+"sdk/auth/web",download:r+"sdk/auth/obtainMapRoute",downloadTile:r+"sdk/authLayered/obtainMapRoute",collect:r+"sdk/collect",themeUrl:r+"webtheme/",externalModelURL:r+"webmodel/"};function d(t,i){for(var r,n=0,e=0,e=0;e<8;e++)1&i&&(n^=t),r=128&t,t<<=1,r&&(t^=27),i>>=1;return n}function zr(t,i,r){for(var n=0;n<4;n++)t[0+n]^=i[16*r+4*n],t[4+n]^=i[16*r+4*n+1],t[8+n]^=i[16*r+4*n+2],t[12+n]^=i[16*r+4*n+3]}function Xr(t){for(var i,r,n,e=1;e<4;e++)for(r=0;r<e;){for(n=t[4*e+4-1],i=3;0<i;i--)t[4*e+i]=t[4*e+i-1];t[4*e+0]=n,r++}}function Hr(t){for(var i,r,n=0;n<4;n++)for(i=0;i<4;i++)r=(240&t[4*n+i])>>4,t[4*n+i]=Vr[16*r+(15&t[4*n+i])]}function Qr(t){for(var i=0;i<4;i++)t[i]=Ur[16*((240&t[i])>>4)+(15&t[i])]}function Kr(t){return parseInt(t,16)}Ur=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],Vr=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],Wr=[2,Zr=y=0,0,0];var Jr={decryption:function(t,i){for(var r=Array(16),n=0;n<16;n++)r[n]=16*Kr(i.substr(2*n,1))+Kr(i.substr(2*n+1,1));var e=Array(16);for(n=0;n<16;n++)e[n]=16*Kr(t.substr(2*n,1))+Kr(t.substr(2*n+1,1));var o=Array(16);switch(n=[],r.length){default:case 16:y=4,Zr=10;break;case 24:y=6,Zr=12;break;case 32:y=8,Zr=14}for(var s=n=Array(16*(Zr+1)),u=Array(4),a=4*(Zr+1),f=0;f<y;f++)s[4*f+0]=r[4*f+0],s[4*f+1]=r[4*f+1],s[4*f+2]=r[4*f+2],s[4*f+3]=r[4*f+3];for(f=y;f<a;f++){if(u[0]=s[4*(f-1)+0],u[1]=s[4*(f-1)+1],u[2]=s[4*(f-1)+2],u[3]=s[4*(f-1)+3],0==f%y){for(var h=void 0,l=void 0,h=(r=u)[0],l=0;l<3;l++)r[l]=r[l+1];if(r[3]=h,Qr(u),1==(r=f/y))Wr[0]=1;else if(1<r)for(Wr[0]=2,r--;0<r-1;)Wr[0]=d(Wr[0],2),r--;(l=r=u)[0]=r[0]^(h=Wr)[0],l[1]=r[1]^h[1],l[2]=r[2]^h[2],l[3]=r[3]^h[3]}else 6<y&&4==f%y&&Qr(u);s[4*f+0]=s[4*(f-y)+0]^u[0],s[4*f+1]=s[4*(f-y)+1]^u[1],s[4*f+2]=s[4*(f-y)+2]^u[2],s[4*f+3]=s[4*(f-y)+3]^u[3]}for(s=Array(16),u=0;u<4;u++)for(f=0;f<4;f++)s[4*u+f]=e[u+4*f];for(zr(s,n,Zr),e=Zr-1;1<=e;e--)for(Xr(s),Hr(s),zr(s,n,e),u=s,f=[14,9,13,11],a=l=void 0,r=Array(4),h=Array(4),a=0;a<4;a++){for(l=0;l<4;l++)r[l]=u[4*l+a];var l=f,c=r,v=h;for(v[0]=d(l[0],c[0])^d(l[3],c[1])^d(l[2],c[2])^d(l[1],c[3]),v[1]=d(l[1],c[0])^d(l[0],c[1])^d(l[3],c[2])^d(l[2],c[3]),v[2]=d(l[2],c[0])^d(l[1],c[1])^d(l[0],c[2])^d(l[3],c[3]),v[3]=d(l[3],c[0])^d(l[2],c[1])^d(l[1],c[2])^d(l[0],c[3]),l=0;l<4;l++)u[4*l+a]=h[l]}for(Xr(s),Hr(s),zr(s,n,0),u=0;u<4;u++)for(f=0;f<4;f++)o[u+4*f]=s[4*u+f];for(e="",n=0;n<16;++n)e+=s=(s=o[n].toString(16)).length<2?"0"+s:s;return e}};function $r(t,i){var r=(65535&t)+(65535&i);return(t>>16)+(i>>16)+(r>>16)<<16|65535&r}function tn(t,i,r,n,e,o){return $r((i=$r($r(i,t),$r(n,o)))<<e|i>>>32-e,r)}function c(t,i,r,n,e,o,s){return tn(i&r|~i&n,t,i,e,o,s)}function b(t,i,r,n,e,o,s){return tn(i&n|r&~n,t,i,e,o,s)}function p(t,i,r,n,e,o,s){return tn(i^r^n,t,i,e,o,s)}function m(t,i,r,n,e,o,s){return tn(r^(i|~n),t,i,e,o,s)}function rn(t,i){t[i>>5]|=128<<i%32,t[14+(i+64>>>9<<4)]=i;for(var r,n,e,o,s=1732584193,u=-271733879,a=-1732584194,f=271733878,h=0;h<t.length;h+=16)s=c(r=s,n=u,e=a,o=f,t[h],7,-680876936),f=c(f,s,u,a,t[h+1],12,-389564586),a=c(a,f,s,u,t[h+2],17,606105819),u=c(u,a,f,s,t[h+3],22,-1044525330),s=c(s,u,a,f,t[h+4],7,-176418897),f=c(f,s,u,a,t[h+5],12,1200080426),a=c(a,f,s,u,t[h+6],17,-1473231341),u=c(u,a,f,s,t[h+7],22,-45705983),s=c(s,u,a,f,t[h+8],7,1770035416),f=c(f,s,u,a,t[h+9],12,-1958414417),a=c(a,f,s,u,t[h+10],17,-42063),u=c(u,a,f,s,t[h+11],22,-1990404162),s=c(s,u,a,f,t[h+12],7,1804603682),f=c(f,s,u,a,t[h+13],12,-40341101),a=c(a,f,s,u,t[h+14],17,-1502002290),s=b(s,u=c(u,a,f,s,t[h+15],22,1236535329),a,f,t[h+1],5,-165796510),f=b(f,s,u,a,t[h+6],9,-1069501632),a=b(a,f,s,u,t[h+11],14,643717713),u=b(u,a,f,s,t[h],20,-373897302),s=b(s,u,a,f,t[h+5],5,-701558691),f=b(f,s,u,a,t[h+10],9,38016083),a=b(a,f,s,u,t[h+15],14,-660478335),u=b(u,a,f,s,t[h+4],20,-405537848),s=b(s,u,a,f,t[h+9],5,568446438),f=b(f,s,u,a,t[h+14],9,-1019803690),a=b(a,f,s,u,t[h+3],14,-187363961),u=b(u,a,f,s,t[h+8],20,1163531501),s=b(s,u,a,f,t[h+13],5,-1444681467),f=b(f,s,u,a,t[h+2],9,-51403784),a=b(a,f,s,u,t[h+7],14,1735328473),s=p(s,u=b(u,a,f,s,t[h+12],20,-1926607734),a,f,t[h+5],4,-378558),f=p(f,s,u,a,t[h+8],11,-2022574463),a=p(a,f,s,u,t[h+11],16,1839030562),u=p(u,a,f,s,t[h+14],23,-35309556),s=p(s,u,a,f,t[h+1],4,-1530992060),f=p(f,s,u,a,t[h+4],11,1272893353),a=p(a,f,s,u,t[h+7],16,-155497632),u=p(u,a,f,s,t[h+10],23,-1094730640),s=p(s,u,a,f,t[h+13],4,681279174),f=p(f,s,u,a,t[h],11,-358537222),a=p(a,f,s,u,t[h+3],16,-722521979),u=p(u,a,f,s,t[h+6],23,76029189),s=p(s,u,a,f,t[h+9],4,-640364487),f=p(f,s,u,a,t[h+12],11,-421815835),a=p(a,f,s,u,t[h+15],16,530742520),s=m(s,u=p(u,a,f,s,t[h+2],23,-995338651),a,f,t[h],6,-198630844),f=m(f,s,u,a,t[h+7],10,1126891415),a=m(a,f,s,u,t[h+14],15,-1416354905),u=m(u,a,f,s,t[h+5],21,-57434055),s=m(s,u,a,f,t[h+12],6,1700485571),f=m(f,s,u,a,t[h+3],10,-1894986606),a=m(a,f,s,u,t[h+10],15,-1051523),u=m(u,a,f,s,t[h+1],21,-2054922799),s=m(s,u,a,f,t[h+8],6,1873313359),f=m(f,s,u,a,t[h+15],10,-30611744),a=m(a,f,s,u,t[h+6],15,-1560198380),u=m(u,a,f,s,t[h+13],21,1309151649),s=m(s,u,a,f,t[h+4],6,-145523070),f=m(f,s,u,a,t[h+11],10,-1120210379),a=m(a,f,s,u,t[h+2],15,718787259),u=m(u,a,f,s,t[h+9],21,-343485551),s=$r(s,r),u=$r(u,n),a=$r(a,e),f=$r(f,o);return[s,u,a,f]}function nn(t){for(var i="",r=32*t.length,n=0;n<r;n+=8)i+=String.fromCharCode(t[n>>5]>>>n%32&255);return i}function en(t){var i=[];for(i[(t.length>>2)-1]=void 0,n=0;n<i.length;n+=1)i[n]=0;for(var r=8*t.length,n=0;n<r;n+=8)i[n>>5]|=(255&t.charCodeAt(n/8))<<n%32;return i}function on(t){for(var i,r="0123456789abcdef",n="",e=0;e<t.length;e+=1)i=t.charCodeAt(e),n+=r.charAt(i>>>4&15)+r.charAt(15&i);return n}function sn(t){return unescape(encodeURIComponent(t))}function un(t){return nn(rn(en(t=sn(t)),8*t.length))}function an(t,i){var r,t=sn(t),i=sn(i),n=en(t),e=[],o=[];for(e[15]=o[15]=void 0,16<n.length&&(n=rn(n,8*t.length)),r=0;r<16;r+=1)e[r]=909522486^n[r],o[r]=1549556828^n[r];return t=rn(e.concat(en(i)),512+8*i.length),nn(rn(o.concat(t),640))}function fn(t,i,r){return i?r?an(i,t):on(an(i,t)):r?un(t):on(un(t))}var hn={encryption:function(t){return fn(t)}};function ln(t){return(ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cn(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=ln(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=ln(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==ln(t)?t:t+""))(n.key),n)}}function vn(t,i,r){return i&&cn(t.prototype,i),r&&cn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var yn="0.0.0.0",r=vn(function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function")});Object.assign(r.prototype,{er:function(t,i,r,n,e){void 0===l.a.KjWzhWlSj||!l.a.KjWzhWlSj.license||!l.a.KjWzhWlSj.license||"string"==typeof i&&0!=i.length&&(i=Jr.decryption(i,"026685bf295f587b5dffc1f18d5dc27c"),r=hn.encryption(r),i=Jr.decryption(i,r),-1!==t.indexOf(i))?n&&n():e&&e()},sr:function(t,i,r,n){var e;-1!==i.indexOf("")||-1!==i.indexOf("aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa")||void 0===t.mapURL||(e=hn.encryption("fengmap.localhost:"+t.appName),e=Jr.decryption(t.key,e),-1!==i.indexOf(e))?this.er(i,t.license,t.buildingID,function(){r&&r()},function(){n&&n(v.LICENSE_ERROR)}):n&&n(v.NAME_KEY_ERROR)},ur:function(t,i,r){var n=this;void 0!==t.mapURL?i&&i():(t.enableCollect&&this.ar(t),this.hr(function(){new f({method:"POST",url:Yr.check,header:{"X-Requested-With":"XMLHttpRequest","Content-type":"application/json;charset=utf-8"},data:n.lr(t)}).Gi(function(){i&&i()},function(t){r&&r(t)},function(){i&&i()})},function(){i&&i()}))},hr:function(t,i){new f({method:"GET",url:Yr.online}).Gi(function(){t&&t()},function(){i&&i()},function(){i&&i()})},lr:function(t,i){l.a.environment===gr.a.BROWSER&&-1!==(n=(r=wr.a.global().location.host).indexOf(":"))&&(r=r.slice(0,n));var r,n={mapId:t.buildingID,appName:t.appName};return i?n.keyValue=t.key:n.appKey=t.key,i?n.webUrl=r||yn:n.webURL=r||yn,n},ar:function(t){if("undefined"!=typeof navigator&&"undefined"!=typeof document){var i={};-1!==navigator.userAgent.indexOf("Opera")?i.userAgent="Opera":-1!==navigator.userAgent.indexOf("Firefox")?i.userAgent="FF":-1!==navigator.userAgent.indexOf("Chrome")?i.userAgent="Chrome":-1!==navigator.userAgent.indexOf("Safari")&&0===navigator.userAgent.indexOf("Chrome")?i.userAgent="Safari":-1!==navigator.userAgent.indexOf("compatible")&&-1!==navigator.userAgent.indexOf("MSIE")?i.userAgent="IE":-1!==navigator.userAgent.indexOf("Trident")&&(i.userAgent="Edge"),i.product="JS",i.sdkVersion=M+"."+R,i.appName=t.appName,i.appkey=t.key;for(var t=l.a.document.createElement("canvas").getContext("experimental-webgl"),r=t.getExtension("WEBGL_debug_renderer_info"),n=(i.gpu=r?t.getParameter(r.UNMASKED_RENDERER_WEBGL):null,i.os=navigator.platform,!0),e=navigator.userAgent,o=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],s=0;s<o.length;s++)if(0<e.indexOf(o[s])){n=!1;break}i.device=n?"pc":"mobile",new f({method:"POST",url:Yr.collect,header:{"X-Requested-With":"XMLHttpRequest","Content-type":"application/json;charset=utf-8"},data:i}).Gi()}}});var dn=new r;function bn(t){return(bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pn(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=bn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=bn(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==bn(t)?t:t+""))(n.key),n)}}function mn(t,i,r){return i&&pn(t.prototype,i),r&&pn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var r=mn(function t(){var i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=this,n=t;if(!(r instanceof n))throw new TypeError("Cannot call a class as a function");this.cr=i.disposeCallback,this.vr=!1,this.yr=!1,this.dr=void 0!==i.enable&&i.enable,this.name=void 0!==i.name?i.name:"",this.br=new Map,this.pr=i.mapCreateTime}),wn=(Object.assign(r.prototype,{mr:function(){!this.dr||this.yr||this.vr&&0===this.br.size&&(this.cr({mapCreateTime:this.pr}),this.yr=!0)},wr:function(t){this.dr&&(this.vr=t,this.mr())},gr:function(t){this.dr&&(this.br.has(t),this.br.set(t,0))},_r:function(t){this.dr&&this.br.has(t)&&(this.br.delete(t),this.mr())}}),r);function gn(t){return(gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _n(t){return(t=>{if(Array.isArray(t))return jn(t)})(t)||(t=>{if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)})(t)||((t,i)=>{var r;if(t)return"string"==typeof t?jn(t,i):"Map"===(r="Object"===(r={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?jn(t,i):void 0})(t)||(()=>{throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}function jn(t,i){(null==i||i>t.length)&&(i=t.length);for(var r=0,n=Array(i);r<i;r++)n[r]=t[r];return n}function Sn(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=gn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=gn(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==gn(t)?t:t+""))(n.key),n)}}function On(t,i,r){return i&&Sn(t.prototype,i),r&&Sn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var r=On(function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.nr=new qr,this.jr=[],this.Sr=new wn({enable:!0,name:"DataManager"})}),En=(Object.assign(r.prototype,{Ui:function(t){var i=this;this.Sr.cr=t,this.jr.forEach(function(t){200!==t.Bi.status&&i.Sr._r(t.Fi.url),t.Ui()}),this.jr.length=0,this.Sr.wr(!0)},Or:function(t,i,r,n){var e;t.mapURL?(e=t.isPreview?t.isOutdoor?t.tile?t.mapURL+t.buildingID+"/separate/"+t.buildingID+i+".fmap":t.mapURL+t.buildingID+"/"+t.buildingID+i+".fmap":t.tile?t.mapURL+t.mapID+"/"+t.bid+"/"+t.buildingID+"/separate/"+t.buildingID+i+".fmap":t.mapURL+t.mapID+"/"+t.bid+"/"+t.buildingID+"/"+t.buildingID+i+".fmap":t.mapURLAbsolute?t.mapURL+t.buildingID+i+".fmap":t.isOutdoor?t.mapURL+t.buildingID+"/"+t.buildingID+i+".fmap":t.mapURL+t.mapID+"/"+t.bid+"/"+t.buildingID+"/"+t.buildingID+i+".fmap",r&&r(e)):(e={newFlag:"2",keyType:3,isSeparate:!1},t.isOutdoor||(e.bId=t.bid,e.rootMid=t.mapID),i=new f({method:"POST",url:""===i?Yr.download:Yr.downloadTile+"/"+t.buildingID+i+".fmap",header:{"X-Requested-With":"XMLHttpRequest","Content-type":"application/json;charset=utf-8"},data:Object.assign(e,dn.lr(t,!0))}),this.jr.push(i),i.Gi(function(t){r&&r(t.replace('"',"").replace('"',""))},function(t){n&&n(t)},function(t){n&&n(t)}))},Er:function(n,e,o){var s=this;n.enableCollect=!0,dn.ur(n,function(){s.Or(n,"",function(r){var t=new f({method:"GET",responseType:"arraybuffer",url:r});s.jr.push(t),s.Sr.gr(r),t.Gi(function(t){s.Sr._r(r);var t=new Uint8Array(t),i=s.nr.Wi(t);!n.isOutdoor||(t=[],i.keys&&0!==i.keys.length?t.push.apply(t,_n(i.keys)):t.push(i.key),n.isPreview)?e&&e(i):dn.sr(n,t,function(){e&&e(i)},function(t){o&&o(t)})},function(t){o&&o(t===v.PATH_ERROR?v.MAP_ID_URL_ERROR:t),s.Sr._r(r)},function(t){o&&o(t),s.Sr._r(r)})},function(t){o&&o(t)})},function(t){o&&o(t)})},kr:function(n,e,o){var s=this;n.enableCollect=!0,dn.ur(n,function(){s.Or(n,".scene",function(r){s.Sr.gr(r);var t=new f({method:"GET",responseType:"arraybuffer",url:r});s.jr.push(t),t.Gi(function(t){var t=new Uint8Array(t),i=s.nr.Yi(t);s.Sr._r(r),!n.isOutdoor||(t=[],i.keys&&0!==i.keys.length?t.push.apply(t,_n(i.keys)):t.push(i.key),n.isPreview)?e&&e(i):dn.sr(n,t,function(){e&&e(i)},function(t){o&&o(t)})},function(t){o&&o(t),s.Sr._r(r)},function(t){o&&o(t),s.Sr._r(r)})},function(t){o&&o(t)})},function(t){o&&o(t)})},Tr:function(t,r,n){var e=this;this.Or(t,".gate",function(i){e.Sr.gr(i);var t=new f({method:"GET",responseType:"arraybuffer",url:i});e.jr.push(t),t.Gi(function(t){t=new Uint8Array(t),t=e.nr.Xi(t);r&&r(t),e.Sr._r(i)},function(t){n&&n(t),e.Sr._r(i)},function(t){n&&n(t),e.Sr._r(i)})},function(t){n&&n(t)})},Mr:function(t,i,r,n){var e=this;this.Or(t,".floor."+i+".geo",function(i){var t=new f({method:"GET",responseType:"arraybuffer",url:i});e.Sr.gr(i),e.jr.push(t),t.Gi(function(t){t=new Uint8Array(t),t=e.nr.Qi(t);r&&r(t),e.Sr._r(i)},function(t){n&&n(t),e.Sr._r(i)},function(t){n&&n(t),e.Sr._r(i)})},function(t){n&&n(t)})},Rr:function(t,i,r,n){var e=this;this.Or(t,".floor."+i+".biz",function(i){var t=new f({method:"GET",responseType:"arraybuffer",url:i});e.Sr.gr(i),e.jr.push(t),t.Gi(function(t){t=new Uint8Array(t),t=e.nr.Ji(t);r&&r(t),e.Sr._r(i)},function(t){n&&n(t),e.Sr._r(i)},function(t){n&&n(t),e.Sr._r(i)})},function(t){n&&n(t)})},Nr:function(t,i,r,n){var e=this;this.Or(t,i,function(i){var t=new f({method:"GET",responseType:"arraybuffer",url:i});e.Sr.gr(i),e.jr.push(t),t.Gi(function(t){t=new Uint8Array(t),t=e.nr.tr(t);r&&r(t),e.Sr._r(i)},function(t){n&&n(t),e.Sr._r(i)})},function(t){n&&n(t)},function(t){n&&n(t)})},Ir:function(t,i,r,n){this.Nr(t,".floor."+i+".navi",r,n)},Ar:function(t,i,r,n){this.Nr(t,".floor."+i+".drive.navi",r,n)},Pr:function(t,i,r,n){this.Nr(t,".floor."+i+".accessible.navi",r,n)}}),r);function kn(t){for(var i=[],r=t.length,n=0;n<r;n++){for(var e=t[n],o={x:this.Lr(e.x),y:this.Lr(e.y)},s=i.length,u=!1,a=0;a<s;a++){var f=i[a];if(f.x==o.x&&f.y==o.y){u=!0;break}}u||i.push(o)}return i}function Tn(t){return+t.toFixed(2)}function Mn(t){return(Mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Rn(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=Mn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=Mn(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==Mn(t)?t:t+""))(n.key),n)}}function Nn(t,i,r){return i&&Rn(t.prototype,i),r&&Rn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}r=Nn(function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function")});Object.assign(r.prototype,{Dr:function(t,i){for(var r=[],n=0,e=0;e<t.length;e++){var o=t[e].idxs;if("number"==typeof(o=o||t[e]))for(;n<o;)r.push({x:i[n],y:i[n+1]}),n+=2;else for(var s=0;s<o.length;s++)for(var u=o[s];n<u;)r.push({x:i[n],y:i[n+1]}),n+=2}return r},Cr:function(t,i){for(var r=[],n=0,e=0;e<t.length;e++){var o=t[e].idxs;if("number"==typeof(o=o||t[e])){for(var s=[];n<o;)s.push({x:i[n],y:i[n+1]}),n+=2;r.push(s)}else for(var u=0;u<o.length;u++){for(var a=o[u],f=[];n<a;)f.push({x:i[n],y:i[n+1]}),n+=2;r.push(f)}}return r},Fr:function(t,i){for(var r=[],n=[],e=0,o=0;o<t.length;o++){var s=t[o].idxs;if("number"==typeof(s=s||t[o]))for(;e<s;)r.push({x:i[e],y:i[e+1]}),e+=2;else for(var u=0;u<s.length;u++)if(0===u)for(var a=s[u];e<a;)r.push({x:i[e],y:i[e+1]}),e+=2;else{for(var f=[],h=s[u];e<h;)f.push({x:i[e],y:i[e+1]}),e+=2;n.push(f)}}var l=[];return l.push(r),l.push.apply(l,n),l},Br:function(t){return kn(t)},Lr:Tn});var In=new r;function An(t){return(An="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xn(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=An(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=An(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==An(t)?t:t+""))(n.key),n)}}function Pn(t,i,r){return i&&xn(t.prototype,i),r&&xn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var Ln={G1:"MULTIPOLYGON(((",G2:"POINT(",G3:"MULTILINESTRING(("},r=(Ln.GLEN1="MULTIPOLYGON(((".length,Ln.GLEN2="POINT(".length,Ln.GLEN3="MULTILINESTRING((".length,Pn(function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function")}));Object.assign(r.prototype,{Dr:function(t){var i=[];return 0!=t.indexOf(Ln.G2)?[]:(t=t.substring(Ln.GLEN2,t.length-1).split(" "),i.push({x:parseFloat(t[0]),y:parseFloat(t[1])}),i)},Gr:function(t,i){for(var r=0;r<t.length;r++){var n=t[r].split(" ");i.push({x:parseFloat(n[0]),y:parseFloat(n[1])})}},Cr:function(t){return 0!=t.indexOf(Ln.G3)?[]:(t=t.substring(Ln.GLEN3,t.length-2).split(","),this.Gr(t,t=[]),[t])},Fr:function(t){var i=[],r=[];if(0!=t.indexOf(Ln.G1))return[];for(var n=t.substring(Ln.GLEN1,t.length-3).split(/\),\(/),e=0;e<n.length;e++){var o=n[e].split(/,/);if(0==e)this.Gr(o,i);else{for(var s=[],u=0;u<o.length;u++){var a=o[u].split(" ");s.push({x:parseFloat(a[0]),y:parseFloat(a[1])})}r.push(s)}}t=[];return t.push(i),t.push.apply(t,r),t},Br:function(t){return kn(t)},Lr:Tn});var Dn=new r,r={STOP:0,PASS:1,PUSH:2},Cn=(Object.freeze(r),r);function Fn(t,i){var r,n,e,o,s="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(s)return e=!(n=!0),{s:function(){s=s.call(t)},n:function(){var t=s.next();return n=t.done,t},e:function(t){e=!0,r=t},f:function(){try{n||null==s.return||s.return()}finally{if(e)throw r}}};if(Array.isArray(t)||(s=((t,i)=>{var r;if(t)return"string"==typeof t?Bn(t,i):"Map"===(r="Object"===(r={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Bn(t,i):void 0})(t))||i&&t&&"number"==typeof t.length)return s&&(t=s),o=0,{s:i=function(){},n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:i};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Bn(t,i){(null==i||i>t.length)&&(i=t.length);for(var r=0,n=Array(i);r<i;r++)n[r]=t[r];return n}function Gn(t){return(Gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Un(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=Gn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=Gn(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==Gn(t)?t:t+""))(n.key),n)}}var r=(()=>{function i(t){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");this.Ai=_.GROUP,this.Ur=new Map,this.Vr=-1,this.bi=null,Object.assign(this,t)}return t=i,(r=[{key:"getType",value:function(){return this.Ai}},{key:"getBound",value:function(){return this.bi||this.Zr(),this.bi}},{key:"getChildren",value:function(){return this.Ur}}])&&Un(t.prototype,r),n&&Un(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n})(),Vn=(Object.assign(r.prototype,{Ui:function(){var t,i=Fn(this.Ur.values());try{for(i.s();!(t=i.n()).done;){var r=t.value;r.Ui&&r.Ui()}}catch(t){i.e(t)}finally{i.f()}this.Ur.clear()},Wr:function(i){var t=i._support(this);t==Cn.PASS?this.Ur.forEach(function(t){t.Wr(i)}):t==Cn.PUSH&&i.qr.push(this)},Zr:function(){var i=this;this.bi=new Si,0!=this.Ur.size&&this.Ur.forEach(function(t){i.bi.vi(t.getBound())})}}),r);function Zn(t){return(Zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wn(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=Zn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=Zn(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==Zn(t)?t:t+""))(n.key),n)}}var r=(()=>{function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.Vr=-1,this.Ai=_.NONE,this.Yr=null,this.bi=null}return i=t,(r=[{key:"getType",value:function(){return this.Ai}},{key:"getCoordinates",value:function(){return this.Yr}},{key:"getBound",value:function(){return this.bi||this.Zr(),this.bi}}])&&Wn(i.prototype,r),n&&Wn(i,n),Object.defineProperty(i,"prototype",{writable:!1}),i;var i,r,n})(),qn=(Object.assign(r.prototype,{Ui:function(){},Wr:function(t){t._support(this)==Cn.PUSH&&t.qr.push(this)}}),r);function Yn(t){return(Yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zn(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=Yn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=Yn(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==Yn(t)?t:t+""))(n.key),n)}}function Xn(t,i,r){i=Qn(i);var n=t,i=Hn()?Reflect.construct(i,r||[],Qn(t).constructor):i.apply(t,r);if(!i||"object"!=Yn(i)&&"function"!=typeof i){if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(i=n))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return i}function Hn(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Hn=function(){return!!t})()}function Qn(t){return(Qn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Kn(t,i){return(Kn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t})(t,i)}var r=(()=>{function r(t){var i;if(this instanceof r)return(i=Xn(this,r)).Vr=t.eid,i.Ai=_.POINT,Object.assign(i,t),i;throw new TypeError("Cannot call a class as a function")}var t,i,n=r,e=qn;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");return n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&Kn(n,e),n=r,t&&zn(n.prototype,t),i&&zn(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n})(),Jn=(Object.assign(r.prototype,{Zr:function(){this.bi=new Si,this.Yr&&this.bi.yi(this.Yr)},Wr:function(t){t._support(this)==Cn.PUSH&&t.qr.push(this)}}),r);function $n(t){return($n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function te(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=$n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=$n(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==$n(t)?t:t+""))(n.key),n)}}function ie(t,i,r){i=ne(i);var n=t,i=re()?Reflect.construct(i,r||[],ne(t).constructor):i.apply(t,r);if(!i||"object"!=$n(i)&&"function"!=typeof i){if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(i=n))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return i}function re(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(re=function(){return!!t})()}function ne(t){return(ne=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ee(t,i){return(ee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t})(t,i)}var r=(()=>{function r(t){var i;if(this instanceof r)return(i=ie(this,r)).Vr=t.eid,i.Ai=_.POLYGON,Object.assign(i,t),i;throw new TypeError("Cannot call a class as a function")}var t,i=r,n=qn;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");return i.prototype=Object.create(n&&n.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),n&&ee(i,n),i=r,(n=[{key:"getCenter",value:function(){return this._i}}])&&te(i.prototype,n),t&&te(i,t),Object.defineProperty(i,"prototype",{writable:!1}),i})(),oe=(Object.assign(r.prototype,{Zr:function(){var i=this;this.bi=new Si,this.Yr&&this.Yr.forEach(function(t){i.bi.yi(t)})},Wr:function(t){t._support(this)==Cn.PUSH&&t.qr.push(this)}}),r);function se(t){return(se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var ue=["layerGroups"],ae=["layers"];function fe(t,i){if(null==t)return{};var r,n=((t,i)=>{if(null==t)return{};var r,n={};for(r in t)if({}.hasOwnProperty.call(t,r)){if(-1!==i.indexOf(r))continue;n[r]=t[r]}return n})(t,i);if(Object.getOwnPropertySymbols)for(var e=Object.getOwnPropertySymbols(t),o=0;o<e.length;o++)r=e[o],-1===i.indexOf(r)&&{}.propertyIsEnumerable.call(t,r)&&(n[r]=t[r]);return n}function he(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=se(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=se(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==se(t)?t:t+""))(n.key),n)}}function le(t,i,r){return i&&he(t.prototype,i),r&&he(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var r=le(function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.zr=[1,2,3,4],this.Xr=[6,7,9],this.Hr=[31,32],this.Qr=new Map,this.Qr.set(31,_.EXTENTGROUP),this.Qr.set(32,_.MODELGROUP),this.Qr.set(6,_.FACILITYGROUP),this.Qr.set(7,_.LABELGROUP),this.Qr.set(9,_.EXTERNALMODELGROUP),this.Kr=new Map,this.Kr.set(31,["extentLayer",null]),this.Kr.set(32,["modelLayer","labelLayer"]),this.Kr.set(6,["poiLayer",null]),this.Kr.set(7,["labelLayer",null]),this.Kr.set(9,["externalModelLayer",null]),this.nr=new qr}),ce=(Object.assign(r.prototype,{Jr:function(t){var i;return t?(i=t.scene,this.$r(i,t)):null},$r:function(t,r){var n=this,i=t.layerGroups,e=fe(t,ue),o=t.fileVer,s=new Vn(e);return i.forEach(function(t){var i=n.tn(t,r,o);s.Ur.set(t.gid,i)}),s},tn:function(t,i,r){var n=this,e=t.layers,o=fe(t,ae),s=new Vn(o),u=i&&i.floors?i.floors.get(t.gid).geo[0]:null,a=i&&i.floors?i.floors.get(t.gid).biz[0]:null;return e.forEach(function(t){6===t.ltype&&-1!==t.lname.indexOf("storelabel")&&(t.ltype=7);var i=n.rn(t,u,a,r);null!==i&&s.Ur.set(n.Qr.get(t.ltype),i)}),this.nn(s),s},nn:function(t){var i=Array.from(t.Ur);i.sort(function(t,i){return t[0]-i[0]}),t.Ur=new Map(i)},rn:function(t,i,r,n){var e;return-1===this.zr.indexOf(t.ltype)&&this.Kr.get(t.ltype)?(e=new Vn(t),this.sn(e,i,r,n),e&&(e.Ai=this.Qr.get(t.ltype)),e):null},sn:function(t,i,r,n){if(t){var e=this.Kr.get(t.ltype);if(e){var o=i?i[e[0]]:[],s=r?r[e[0]]:[];switch(t.ltype){case 6:this.un(t,o,s,n,_.FACILITY);break;case 7:this.un(t,o,s,n,_.LABEL);break;case 9:this.un(t,o,s,n,_.EXTERNALMODEL);break;case 31:this.an(t,o,s,n,_.EXTENT,null);break;case 32:this.an(t,o,s,n,_.MODEL,i?i[e[1]]:null)}}}},un:function(t,i,r,n,e){for(var o=0;o<i.length;o++){var s=this.hn(i[o],r[o],n);s.Ai=e,t.Ur.set(i[o].eid,s)}},hn:function(t,i,r){i=Object.assign({},i,{area:t.area,eid:t.eid,height:t.height}),i=new Jn(i);return t.coordinates?i.Yr=t.coordinates:(i.Yr=1==r?Dn.Dr(t.geo):In.Dr(t.idxs,t.pts),t.coordinates=i.Yr),i},an:function(t,i,r,n,e,o){for(var s=0;s<i.length;s++){var u=this.ln(i[s],r[s],n,o?o[s]:null);u.Ai=e,t.Ur.set(i[s].eid,u)}},ln:function(t,i,r,n){i=Object.assign({},i,{area:t.area,eid:t.eid,height:t.height,baseheight:t.baseheight}),i=new oe(i);return i.Yr=1===r?Dn.Fr(t.geo):In.Fr(t.idxs,t.pts),n&&(n.coordinates||(n.coordinates=1===r?Dn.Dr(n.geo):In.Dr(n.idxs,n.pts)),i._i=n.coordinates[0]),i}}),r),ve={NONE_RODE_NETWORK:1,WALK_RODE_NETWORK:2,DRIVE_RODE_NETWORK:4,ACCESSIBLE_RODE_NETWORK:8};function ye(t){return(ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function de(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=ye(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=ye(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==ye(t)?t:t+""))(n.key),n)}}var r=(()=>{function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.cn=new Map,this.vn=new Map,this.Fi=new Map,this.yn=new Map,this.dn=new Map,this.bn=new Map,this.pn=[2,3],this.mn=!1,this.nr=new qr,this.wn=new ce,this.gn=new En}return i=t,(r=[{key:"load",value:function(t,i){this._n(t,i)}},{key:"loadWhole",value:function(t,i){this.jn(t,i)}},{key:"getDecode",value:function(t){t=void 0!==t.buildingID?t.buildingID:t.mapID;return this.Sn({buildingID:t})}},{key:"getData",value:function(t){t=void 0!==t.buildingID?t.buildingID:t.mapID;return this.cn.get(t)}},{key:"setCache",value:function(t){this.cn=t[0],this.vn=t[1]}},{key:"getCache",value:function(){return[this.cn,this.vn]}}])&&de(i.prototype,r),n&&de(i,n),Object.defineProperty(i,"prototype",{writable:!1}),i;var i,r,n})(),be=(Object.assign(r.prototype,{Ui:function(t){this.gn.Ui(t),this.On()},On:function(){this.cn.clear(),this.cn=null,this.vn.clear(),this.vn=null,this.Fi.clear(),this.Fi=null,this.yn.clear(),this.yn=null,this.dn.clear(),this.dn=null,this.bn.clear(),this.bn=null,this._delayDisposeCallback&&this._delayDisposeCallback({name:"DataManager"})},En:function(t){this.yn.set(t.buildingID+t.uuid,null),this.dn.set(t.buildingID+t.uuid,null),this.bn.set(t.buildingID+t.uuid,0)},_n:function(u,a){var f=this;this.En(u),this.kr(u,function(i,t){a&&a(i,t);var s=f.kn(u),t=u.loadNavi&&s.buildings&&0<s.buildings.length;f.Tr(u,t,function(t,i){a&&a(t,i);for(var r=void 0!==u.level?u.level:parseInt(s.defGid),n=(f.Tn(u,r,a),u.visibleLevels||s.levels),e=0;e<n.length;e++)n[e]===r||s.levels.indexOf(n[e])<0||f.Tn(u,n[e],a);if(u.preLoad)for(var o=0;o<s.levels.length;o++)s.levels[o]!==r&&-1===n.indexOf(s.levels[o])&&f.Tn(u,s.levels[o],a)},function(t){a&&a(i,t)})},function(t,i){a&&a(t,i)})},Tr:function(r,t,n,e){var o=this;t?(t=this.Mn(r))?n&&n("gate",t):this.gn.Tr(r,function(t){o.vn.get(r.buildingID).gate=t,n&&n("gate",t)},function(t){var i;r.navigationData?((i=o.vn.get(r.buildingID)).gate=r.navigationData,n&&n("gate",i.gate)):e("error",t)}):n&&n("gate",null)},kr:function(i,r,n){var e=this,t=this.kn(i);t?(r&&r("scene",t),i.justDecode||(t=this.cn.get(i.buildingID),r&&r("building",t))):this.gn.kr(i,function(t){i.isOutdoor&&e.Rn(t),e.vn.set(i.buildingID,{scene:t}),r&&r("scene",t),i.justDecode||(t=e.wn.$r(t),e.cn.set(i.buildingID,t),r&&r("building",t))},function(t){n&&n("error",t===v.PATH_ERROR?v.MAP_ID_URL_ERROR:t)})},Rn:function(t){var i=t.fileVer;t.buildings&&1<i&&t.buildings.forEach(function(i){i.floors&&(i.levelChart=[],i.fids=[],i.floors.forEach(function(t){t.Yr=In.Fr(t.idxs,t.pts),t.pgid&&i.levelChart.push(t.pgid,t.gid),t.baseLevel&&(i.minlevel=t.minlevel,i.maxlevel=t.maxlevel),t.fids&&i.fids.push.apply(i.fids,t.fids)}))})},Tn:function(t,i,r,n){var e=this.yn.get(t.buildingID+t.uuid);e||this.yn.set(t.buildingID+t.uuid,e=[]),n?e.unshift(i):e.push(i),this.mn&&1!==e.length||this.Nn(t,r)},Nn:function(n,e){var o,t,s,u=this,a=this.kn(n);a&&(o=this.yn.get(n.buildingID+n.uuid))&&0!==o.length&&((t=this.dn.get(n.buildingID+n.uuid))||this.dn.set(n.buildingID+n.uuid,t=[]),s=o[0],-1!==t.indexOf(s)?(o.splice(o.indexOf(s),1),this.Nn(n,e)):(t.push(s),this.In(n,s,function(t,i){var r=u.bn.get(n.buildingID+n.uuid);"layerGroup"===t&&(e&&e(t,i),u.bn.set(n.buildingID+n.uuid,++r),r===a.layerGroups.length&&e&&e("decode",u.Sn(n)),o.splice(o.indexOf(s),1),u.Nn(n,e)),"layer"===t&&e&&e(t,i),"floor"===t&&(e&&e(t,i),r===a.layerGroups.length)&&e&&e("complete",u.An(n))},function(t,i){e&&e(t,i)})))},In:function(e,o,s,i){var t,u,a,f,h,r,n=this,l=this.kn(e),c=this.xn(l,o);c?(t=c.gname,c=c.naviType||0,u=this.pn[0],a=0,f=new Map,h=e.merge,r=function(i){var r,n,t;u===++a&&(r=f.get("geo"),n=f.get("biz"),h&&h.merge(o,r,n,l.fileVer),s&&s("layerGroup",f),e.justDecode||((t=i.Pn(e,o)).Ur.forEach(function(t){i.wn.sn(t,r,n,l.fileVer),s&&s("layer",t)}),s&&s("floor",t)))},e.loadNavi&&((0!=(c&ve.WALK_RODE_NETWORK)||l.fileVer<3)&&(u++,this.Ir(e,o,t,function(t,i){f.set(t,i),s&&s(t,i),r(n)},function(t){i&&i(t)})),0!=(c&ve.DRIVE_RODE_NETWORK)&&(u++,this.Ar(e,o,t,function(t,i){f.set(t,i),s&&s(t,i),r(n)},function(t){i&&i(t)})),0!=(c&ve.ACCESSIBLE_RODE_NETWORK))&&(u++,this.Pr(e,o,t,function(t,i){f.set(t,i),s&&s(t,i),r(n)},function(t){i&&i(t)})),this.Mr(e,o,t,function(t,i){f.set(t,i),s&&s(t,i),r(n)},function(t){i&&i(t)}),this.Rr(e,o,t,function(t,i){f.set(t,i),s&&s(t,i),r(n)},function(t){i&&i(t)})):i&&i("error",v.DEFAULT_LEVEL_ERROR)},Mr:function(i,r,t,n,e){var o=this,s=this.Ln(i,r,"geo");s?n&&n("geo",s):this.gn.Mr(i,t,function(t){o.Dn(i,r,"geo",t),n&&n("geo",t)},function(t){e&&e("error",t)})},Rr:function(i,r,t,n,e){var o=this,s=this.Ln(i,r,"biz");s?n&&n("biz",s):this.gn.Rr(i,t,function(t){o.Dn(i,r,"biz",t),n&&n("biz",t)},function(t){e&&e("error",t)})},Ir:function(i,r,t,n,e){var o=this,s=this.Ln(i,r,"navi");s?n&&n("navi",s):this.gn.Ir(i,t,function(t){o.Dn(i,r,"navi",t),n&&n("navi",t)},function(t){e&&e("error",t)})},Ar:function(i,r,t,n,e){var o=this,s=this.Ln(i,r,"drive_navi");s?n&&n("drive_navi",s):this.gn.Ar(i,t,function(t){o.Dn(i,r,"drive_navi",t),n&&n("drive_navi",t)},function(t){e&&e("error",t)})},Pr:function(i,r,t,n,e){var o=this,s=this.Ln(i,r,"accessible_navi");s?n&&n("drive_navi",s):this.gn.Pr(i,t,function(t){o.Dn(i,r,"accessible_navi",t),n&&n("accessible_navi",t)},function(t){e&&e("error",t)})},jn:function(t,r){this.Er(t,function(t,i){r&&r(t,i)},function(t,i){r&&r(t,i)})},Er:function(i,r,n){var e=this,o=this.Sn(i);o?r&&r("decode",o):this.gn.Er(i,function(t){e.Cn(i,t),o=e.Sn(i),r&&r("decode",o),i.justDecode||(t=e.wn.Jr(o),e.cn.set(i.buildingID,t),r&&r("complete",t))},function(t){n&&n("error",t)})},An:function(t){if(this.cn)return this.cn.get(t.buildingID)||null},Pn:function(t,i){t=this.cn.get(t.buildingID);return t?t.Ur.get(i):null},Cn:function(t,i){var r={scene:null,floors:new Map},n=this.nr.qi(i);t.isOutdoor&&this.Rn(n),r.scene=n,r.gate=this.nr.zi(i);for(var e=0;e<n.layerGroups.length;e++){var o=n.layerGroups[e],s=this.nr.Hi(i,o.gid),u=this.nr.Ki(i,o.gid),a=this.nr.$i(i,o.gid),f=this.nr.ir(i,o.gid),h=this.nr.rr(i,o.gid),l=(t.merge&&t.merge.merge(o.gid,s,u,n.fileVer),new Map);l.set("geo",s),l.set("biz",u),l.set("navi",a),l.set("drive_navi",f),l.set("accessible_navi",h),r.floors.set(o.gid,l)}this.vn.set(t.buildingID,r)},Sn:function(t){var i=this.vn.get(t.buildingID);if(!i)return null;for(var r=i.scene,i=i.gate,n=new Map,i={scene:r,floors:n,gate:i},e=0;e<r.layerGroups.length;e++){var o=r.layerGroups[e],s=o.gid,u={gid:s,gname:o.gname,level:s,geo:[],biz:[],navi:[],naviDrive:[],naviAccessible:[]},a=(u.geo.push(this.Ln(t,s,"geo")),u.biz.push(this.Ln(t,s,"biz")),this.Ln(t,s,"navi")),a=(a&&u.navi.push(a),this.Ln(t,s,"drive_navi")),a=(a&&u.naviDrive.push(a),this.Ln(t,s,"accessible_navi"));a&&u.naviAccessible.push(a),n.set(o.gid,u)}return i},kn:function(t){t=this.vn.get(t.buildingID);return t?t.scene:null},Mn:function(t){t=this.vn.get(t.buildingID);return t?t.gate:null},Dn:function(t,i,r,n){var e,t=this.vn.get(t.buildingID);t&&((e=t.floors)||(e=new Map,t.floors=e),(t=e.get(i))||(t=new Map,e.set(i,t)),t.set(r,n))},Ln:function(t,i,r){var t=this.vn.get(t.buildingID);return(t=t&&t.floors)&&(t=t.get(i))?t.get(r):null},xn:function(t,i){if(null!=t)for(var r=t.layerGroups,n=0;n<r.length;n++)if(r[n].gid==i)return r[n];return null}}),r),r="srgb-linear",pe="display-p3-linear",me="linear";function we(t){return(we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ge(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=we(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=we(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==we(t)?t:t+""))(n.key),n)}}var n=(()=>{function f(t,i,r,n,e,o,s,u,a){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");f.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==t&&this.set(t,i,r,n,e,o,s,u,a)}return t=f,(i=[{key:"set",value:function(t,i,r,n,e,o,s,u,a){var f=this.elements;return f[0]=t,f[1]=n,f[2]=s,f[3]=i,f[4]=e,f[5]=u,f[6]=r,f[7]=o,f[8]=a,this}},{key:"identity",value:function(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:"copy",value:function(t){var i=this.elements,t=t.elements;return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i[6]=t[6],i[7]=t[7],i[8]=t[8],this}},{key:"extractBasis",value:function(t,i,r){return t.setFromMatrix3Column(this,0),i.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}},{key:"setFromMatrix4",value:function(t){t=t.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}},{key:"multiply",value:function(t){return this.multiplyMatrices(this,t)}},{key:"premultiply",value:function(t){return this.multiplyMatrices(t,this)}},{key:"multiplyMatrices",value:function(t,i){var t=t.elements,i=i.elements,r=this.elements,n=t[0],e=t[3],o=t[6],s=t[1],u=t[4],a=t[7],f=t[2],h=t[5],t=t[8],l=i[0],c=i[3],v=i[6],y=i[1],d=i[4],b=i[7],p=i[2],m=i[5],i=i[8];return r[0]=n*l+e*y+o*p,r[3]=n*c+e*d+o*m,r[6]=n*v+e*b+o*i,r[1]=s*l+u*y+a*p,r[4]=s*c+u*d+a*m,r[7]=s*v+u*b+a*i,r[2]=f*l+h*y+t*p,r[5]=f*c+h*d+t*m,r[8]=f*v+h*b+t*i,this}},{key:"multiplyScalar",value:function(t){var i=this.elements;return i[0]*=t,i[3]*=t,i[6]*=t,i[1]*=t,i[4]*=t,i[7]*=t,i[2]*=t,i[5]*=t,i[8]*=t,this}},{key:"determinant",value:function(){var t=this.elements,i=t[0],r=t[1],n=t[2],e=t[3],o=t[4],s=t[5],u=t[6],a=t[7],t=t[8];return i*o*t-i*s*a-r*e*t+r*s*u+n*e*a-n*o*u}},{key:"invert",value:function(){var t=this.elements,i=t[0],r=t[1],n=t[2],e=t[3],o=t[4],s=t[5],u=t[6],a=t[7],f=t[8],h=f*o-s*a,l=s*u-f*e,c=a*e-o*u,v=i*h+r*l+n*c;return 0==v?this.set(0,0,0,0,0,0,0,0,0):(t[0]=h*(h=1/v),t[1]=(n*a-f*r)*h,t[2]=(s*r-n*o)*h,t[3]=l*h,t[4]=(f*i-n*u)*h,t[5]=(n*e-s*i)*h,t[6]=c*h,t[7]=(r*u-a*i)*h,t[8]=(o*i-r*e)*h,this)}},{key:"transpose",value:function(){var t=this.elements,i=t[1];return t[1]=t[3],t[3]=i,i=t[2],t[2]=t[6],t[6]=i,i=t[5],t[5]=t[7],t[7]=i,this}},{key:"getNormalMatrix",value:function(t){return this.setFromMatrix4(t).invert().transpose()}},{key:"transposeIntoArray",value:function(t){var i=this.elements;return t[0]=i[0],t[1]=i[3],t[2]=i[6],t[3]=i[1],t[4]=i[4],t[5]=i[7],t[6]=i[2],t[7]=i[5],t[8]=i[8],this}},{key:"setUvTransform",value:function(t,i,r,n,e,o,s){var u=Math.cos(e),e=Math.sin(e);return this.set(r*u,r*e,-r*(u*o+e*s)+o+t,-n*e,n*u,-n*(-e*o+u*s)+s+i,0,0,1),this}},{key:"scale",value:function(t,i){return this.premultiply(_e.makeScale(t,i)),this}},{key:"rotate",value:function(t){return this.premultiply(_e.makeRotation(-t)),this}},{key:"translate",value:function(t,i){return this.premultiply(_e.makeTranslation(t,i)),this}},{key:"makeTranslation",value:function(t,i){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,i,0,0,1),this}},{key:"makeRotation",value:function(t){var i=Math.cos(t),t=Math.sin(t);return this.set(i,-t,0,t,i,0,0,0,1),this}},{key:"makeScale",value:function(t,i){return this.set(t,0,0,0,i,0,0,0,1),this}},{key:"equals",value:function(t){for(var i=this.elements,r=t.elements,n=0;n<9;n++)if(i[n]!==r[n])return!1;return!0}},{key:"fromArray",value:function(t){for(var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=0;r<9;r++)this.elements[r]=t[r+i];return this}},{key:"toArray",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=this.elements;return t[i]=r[0],t[i+1]=r[1],t[i+2]=r[2],t[i+3]=r[3],t[i+4]=r[4],t[i+5]=r[5],t[i+6]=r[6],t[i+7]=r[7],t[i+8]=r[8],t}},{key:"clone",value:function(){return(new this.constructor).fromArray(this.elements)}}])&&ge(t.prototype,i),r&&ge(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,i,r})(),_e=new n;function je(t){return(je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Se(t,i,r){return(i=(t=>(t=((t,i)=>{if("object"!=je(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=je(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==je(t)?t:t+""))(i))in t?Object.defineProperty(t,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[i]=r,t}var Oe=(new n).set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),Ee=(new n).set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),ke=Se(Se(Se(Se({},r,{transfer:me,primaries:"rec709",luminanceCoefficients:[.2126,.7152,.0722],toReference:function(t){return t},fromReference:function(t){return t}}),"srgb",{transfer:"srgb",primaries:"rec709",luminanceCoefficients:[.2126,.7152,.0722],toReference:function(t){return t.convertSRGBToLinear()},fromReference:function(t){return t.convertLinearToSRGB()}}),pe,{transfer:me,primaries:"p3",luminanceCoefficients:[.2289,.6917,.0793],toReference:function(t){return t.applyMatrix3(Ee)},fromReference:function(t){return t.applyMatrix3(Oe)}}),"display-p3",{transfer:"srgb",primaries:"p3",luminanceCoefficients:[.2289,.6917,.0793],toReference:function(t){return t.convertSRGBToLinear().applyMatrix3(Ee)},fromReference:function(t){return t.applyMatrix3(Oe).convertLinearToSRGB()}}),Te=new Set([r,pe]),h={enabled:!0,Fn:r,get workingColorSpace(){return this.Fn},set workingColorSpace(t){if(!Te.has(t))throw new Error('Unsupported working color space, "'.concat(t,'".'));this.Fn=t},convert:function(t,i,r){return!1!==this.enabled&&i!==r&&i&&r?(i=ke[i].toReference,(0,ke[r].fromReference)(i(t))):t},fromWorkingColorSpace:function(t,i){return this.convert(t,this.Fn,i)},toWorkingColorSpace:function(t,i){return this.convert(t,i,this.Fn)},getPrimaries:function(t){return ke[t].primaries},getTransfer:function(t){return""===t?me:ke[t].transfer},getLuminanceCoefficients:function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.Fn;return t.fromArray(ke[i].luminanceCoefficients)}};function Me(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function Re(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}var Ne=r;function Ie(t){return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ae(){Ae=function(){return s};var a,s={},t=Object.prototype,f=t.hasOwnProperty,h=Object.defineProperty||function(t,i,r){t[i]=r.value},i="function"==typeof Symbol?Symbol:{},n=i.iterator||"@@iterator",r=i.asyncIterator||"@@asyncIterator",e=i.toStringTag||"@@toStringTag";function o(t,i,r){return Object.defineProperty(t,i,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[i]}try{o({},"")}catch(a){o=function(t,i,r){return t[i]=r}}function u(t,i,r,n){var e,o,s,u,i=i&&i.prototype instanceof p?i:p,i=Object.create(i.prototype),n=new k(n||[]);return h(i,"_invoke",{value:(e=t,o=r,s=n,u=c,function(t,i){if(u===y)throw Error("Generator is already running");if(u===d){if("throw"===t)throw i;return{value:a,done:!0}}for(s.method=t,s.arg=i;;){var r=s.delegate;if(r){r=function t(i,r){var n=r.method,e=i.iterator[n];if(e===a)return r.delegate=null,"throw"===n&&i.iterator.return&&(r.method="return",r.arg=a,t(i,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;n=l(e,i.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,b;e=n.arg;return e?e.done?(r[i.resultName]=e.value,r.next=i.nextLoc,"return"!==r.method&&(r.method="next",r.arg=a),r.delegate=null,b):e:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}(r,s);if(r){if(r===b)continue;return r}}if("next"===s.method)s.sent=s.it=s.arg;else if("throw"===s.method){if(u===c)throw u=d,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);u=y;r=l(e,o,s);if("normal"===r.type){if(u=s.done?d:v,r.arg===b)continue;return{value:r.arg,done:s.done}}"throw"===r.type&&(u=d,s.method="throw",s.arg=r.arg)}})}),i}function l(t,i,r){try{return{type:"normal",arg:t.call(i,r)}}catch(t){return{type:"throw",arg:t}}}s.wrap=u;var c="suspendedStart",v="suspendedYield",y="executing",d="completed",b={};function p(){}function m(){}function w(){}var i={},g=(o(i,n,function(){return this}),Object.getPrototypeOf),g=g&&g(g(T([]))),_=(g&&g!==t&&f.call(g,n)&&(i=g),w.prototype=p.prototype=Object.create(i));function j(t){["next","throw","return"].forEach(function(i){o(t,i,function(t){return this._invoke(i,t)})})}function S(s,u){var i;h(this,"_invoke",{value:function(r,n){function t(){return new u(function(t,i){!function i(t,r,n,e){var o,t=l(s[t],s,r);if("throw"!==t.type)return(r=(o=t.arg).value)&&"object"==Ie(r)&&f.call(r,"__await")?u.resolve(r.rt).then(function(t){i("next",t,n,e)},function(t){i("throw",t,n,e)}):u.resolve(r).then(function(t){o.value=t,n(o)},function(t){return i("throw",t,n,e)});e(t.arg)}(r,n,t,i)})}return i=i?i.then(t,t):t()}})}function O(t){var i={tryLoc:t[0]};1 in t&&(i.catchLoc=t[1]),2 in t&&(i.finallyLoc=t[2],i.afterLoc=t[3]),this.tryEntries.push(i)}function E(t){var i=t.completion||{};i.type="normal",delete i.arg,t.completion=i}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function T(i){if(i||""===i){var r,t=i[n];if(t)return t.call(i);if("function"==typeof i.next)return i;if(!isNaN(i.length))return r=-1,(t=function t(){for(;++r<i.length;)if(f.call(i,r))return t.value=i[r],t.done=!1,t;return t.value=a,t.done=!0,t}).next=t}throw new TypeError(Ie(i)+" is not iterable")}return h(_,"constructor",{value:m.prototype=w,configurable:!0}),h(w,"constructor",{value:m,configurable:!0}),m.displayName=o(w,e,"GeneratorFunction"),s.isGeneratorFunction=function(t){t="function"==typeof t&&t.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},s.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,o(t,e,"GeneratorFunction")),t.prototype=Object.create(_),t},s.awrap=function(t){return{rt:t}},j(S.prototype),o(S.prototype,r,function(){return this}),s.AsyncIterator=S,s.async=function(t,i,r,n,e){void 0===e&&(e=Promise);var o=new S(u(t,i,r,n),e);return s.isGeneratorFunction(i)?o:o.next().then(function(t){return t.done?t.value:o.next()})},j(_),o(_,e,"Generator"),o(_,n,function(){return this}),o(_,"toString",function(){return"[object Generator]"}),s.keys=function(t){var i,r=Object(t),n=[];for(i in r)n.push(i);return n.reverse(),function t(){for(;n.length;){var i=n.pop();if(i in r)return t.value=i,t.done=!1,t}return t.done=!0,t}},s.values=T,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this.it=a,this.done=!1,this.delegate=null,this.method="next",this.arg=a,this.tryEntries.forEach(E),!t)for(var i in this)"t"===i.charAt(0)&&f.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=a)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var n=this;function t(t,i){return o.type="throw",o.arg=r,n.next=t,i&&(n.method="next",n.arg=a),!!i}for(var i=this.tryEntries.length-1;0<=i;--i){var e=this.tryEntries[i],o=e.completion;if("root"===e.tryLoc)return t("end");if(e.tryLoc<=this.prev){var s=f.call(e,"catchLoc"),u=f.call(e,"finallyLoc");if(s&&u){if(this.prev<e.catchLoc)return t(e.catchLoc,!0);if(this.prev<e.finallyLoc)return t(e.finallyLoc)}else if(s){if(this.prev<e.catchLoc)return t(e.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<e.finallyLoc)return t(e.finallyLoc)}}}},abrupt:function(t,i){for(var r=this.tryEntries.length-1;0<=r;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&f.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var e=n;break}}var o=(e=e&&("break"===t||"continue"===t)&&e.tryLoc<=i&&i<=e.finallyLoc?null:e)?e.completion:{};return o.type=t,o.arg=i,e?(this.method="next",this.next=e.finallyLoc,b):this.complete(o)},complete:function(t,i){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&i&&(this.next=i),b},finish:function(t){for(var i=this.tryEntries.length-1;0<=i;--i){var r=this.tryEntries[i];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),E(r),b}},catch:function(t){for(var i=this.tryEntries.length-1;0<=i;--i){var r,n,e=this.tryEntries[i];if(e.tryLoc===t)return"throw"===(r=e.completion).type&&(n=r.arg,E(e)),n}throw Error("illegal catch attempt")},delegateYield:function(t,i,r){return this.delegate={iterator:T(t),resultName:i,nextLoc:r},"next"===this.method&&(this.arg=a),b}},s}function xe(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=Ie(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=Ie(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==Ie(t)?t:t+""))(n.key),n)}}var Pe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Le={h:0,s:0,l:0},De={h:0,s:0,l:0};function Ce(t,i,r){return r<0&&(r+=1),1<r&&--r,r<1/6?t+6*(i-t)*r:r<.5?i:r<2/3?t+6*(i-t)*(2/3-r):t}var Fe=(()=>{function n(t,i,r){if(this instanceof n)return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,i,r);throw new TypeError("Cannot call a class as a function")}return t=n,(i=[{key:"set",value:function(t,i,r){var n;return void 0===i&&void 0===r?(n=t)&&n.isColor?this.copy(n):"number"==typeof n?this.setHex(n):"string"==typeof n&&this.setStyle(n):this.setRGB(t,i,r),this}},{key:"setScalar",value:function(t){return this.r=t,this.g=t,this.b=t,this}},{key:"setHex",value:function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Ne;return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,h.toWorkingColorSpace(this,i),this}},{key:"setRGB",value:function(t,i,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:h.workingColorSpace;return this.r=t,this.g=i,this.b=r,h.toWorkingColorSpace(this,n),this}},{key:"setHSL",value:function(t,i,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:h.workingColorSpace;return t=ei(t,1),i=ni(i,0,1),r=ni(r,0,1),0===i?this.r=this.g=this.b=r:(this.r=Ce(i=2*r-(r=r<=.5?r*(1+i):r+i-r*i),r,t+1/3),this.g=Ce(i,r,t),this.b=Ce(i,r,t-1/3)),h.toWorkingColorSpace(this,n),this}},{key:"setStyle",value:function(i){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Ne;function r(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+i+" will be ignored.")}if(s=/^(\w+)\(([^\)]*)\)/.exec(i)){var n,e=s[1],o=s[2];switch(e){case"rgb":case"rgba":if(n=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(n[4]),this.setRGB(Math.min(255,parseInt(n[1],10))/255,Math.min(255,parseInt(n[2],10))/255,Math.min(255,parseInt(n[3],10))/255,t);if(n=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(n[4]),this.setRGB(Math.min(100,parseInt(n[1],10))/100,Math.min(100,parseInt(n[2],10))/100,Math.min(100,parseInt(n[3],10))/100,t);break;case"hsl":case"hsla":if(n=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(n[4]),this.setHSL(parseFloat(n[1])/360,parseFloat(n[2])/100,parseFloat(n[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+i)}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(i)){var e=s[1],s=e.length;if(3===s)return this.setRGB(parseInt(e.charAt(0),16)/15,parseInt(e.charAt(1),16)/15,parseInt(e.charAt(2),16)/15,t);if(6===s)return this.setHex(parseInt(e,16),t);console.warn("THREE.Color: Invalid hex color "+i)}else if(i&&0<i.length)return this.setColorName(i,t);return this}},{key:"setColorName",value:function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Ne,r=Pe[t.toLowerCase()];return void 0!==r?this.setHex(r,i):console.warn("THREE.Color: Unknown color "+t),this}},{key:"clone",value:function(){return new this.constructor(this.r,this.g,this.b)}},{key:"copy",value:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}},{key:"copySRGBToLinear",value:function(t){return this.r=Me(t.r),this.g=Me(t.g),this.b=Me(t.b),this}},{key:"copyLinearToSRGB",value:function(t){return this.r=Re(t.r),this.g=Re(t.g),this.b=Re(t.b),this}},{key:"convertSRGBToLinear",value:function(){return this.copySRGBToLinear(this),this}},{key:"convertLinearToSRGB",value:function(){return this.copyLinearToSRGB(this),this}},{key:"getHex",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Ne;return h.fromWorkingColorSpace(w.copy(this),t),65536*Math.round(ni(255*w.r,0,255))+256*Math.round(ni(255*w.g,0,255))+Math.round(ni(255*w.b,0,255))}},{key:"getHexString",value:function(){return("000000"+this.getHex(0<arguments.length&&void 0!==arguments[0]?arguments[0]:Ne).toString(16)).slice(-6)}},{key:"getHSL",value:function(t){var i,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:h.workingColorSpace,n=(h.fromWorkingColorSpace(w.copy(this),r),w.r),e=w.g,o=w.b,r=Math.max(n,e,o),s=Math.min(n,e,o),u=(s+r)/2;if(s===r)f=i=0;else{var a=r-s,f=u<=.5?a/(r+s):a/(2-r-s);switch(r){case n:i=(e-o)/a+(e<o?6:0);break;case e:i=(o-n)/a+2;break;case o:i=(n-e)/a+4}i/=6}return t.h=i,t.s=f,t.l=u,t}},{key:"getRGB",value:function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:h.workingColorSpace;return h.fromWorkingColorSpace(w.copy(this),i),t.r=w.r,t.g=w.g,t.b=w.b,t}},{key:"getStyle",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Ne,i=(h.fromWorkingColorSpace(w.copy(this),t),w.r),r=w.g,n=w.b;return t!==Ne?"color(".concat(t," ").concat(i.toFixed(3)," ").concat(r.toFixed(3)," ").concat(n.toFixed(3),")"):"rgb(".concat(Math.round(255*i),",").concat(Math.round(255*r),",").concat(Math.round(255*n),")")}},{key:"offsetHSL",value:function(t,i,r){return this.getHSL(Le),this.setHSL(Le.h+t,Le.s+i,Le.l+r)}},{key:"add",value:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}},{key:"addColors",value:function(t,i){return this.r=t.r+i.r,this.g=t.g+i.g,this.b=t.b+i.b,this}},{key:"addScalar",value:function(t){return this.r+=t,this.g+=t,this.b+=t,this}},{key:"sub",value:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}},{key:"multiply",value:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}},{key:"multiplyScalar",value:function(t){return this.r*=t,this.g*=t,this.b*=t,this}},{key:"lerp",value:function(t,i){return this.r+=(t.r-this.r)*i,this.g+=(t.g-this.g)*i,this.b+=(t.b-this.b)*i,this}},{key:"lerpColors",value:function(t,i,r){return this.r=t.r+(i.r-t.r)*r,this.g=t.g+(i.g-t.g)*r,this.b=t.b+(i.b-t.b)*r,this}},{key:"lerpHSL",value:function(t,i){this.getHSL(Le),t.getHSL(De);var t=oi(Le.h,De.h,i),r=oi(Le.s,De.s,i),i=oi(Le.l,De.l,i);return this.setHSL(t,r,i),this}},{key:"setFromVector3",value:function(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}},{key:"applyMatrix3",value:function(t){var i=this.r,r=this.g,n=this.b,t=t.elements;return this.r=t[0]*i+t[3]*r+t[6]*n,this.g=t[1]*i+t[4]*r+t[7]*n,this.b=t[2]*i+t[5]*r+t[8]*n,this}},{key:"equals",value:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}},{key:"fromArray",value:function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return this.r=t[i],this.g=t[i+1],this.b=t[i+2],this}},{key:"toArray",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return t[i]=this.r,t[i+1]=this.g,t[i+2]=this.b,t}},{key:"fromBufferAttribute",value:function(t,i){return this.r=t.getX(i),this.g=t.getY(i),this.b=t.getZ(i),this}},{key:"toJSON",value:function(){return this.getHex()}},{key:Symbol.iterator,value:Ae().mark(function t(){return Ae().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.r;case 2:return t.next=4,this.g;case 4:return t.next=6,this.b;case 6:case"end":return t.stop()}},t,this)})}])&&xe(t.prototype,i),r&&xe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,i,r})(),w=new Fe;function Be(t){return(Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ge(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=Be(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=Be(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==Be(t)?t:t+""))(n.key),n)}}Fe.NAMES=Pe;var Ue=(()=>{function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function")}return i=t,n=[{key:"round",value:function(t){return 0<t.toFixed(2)?Math.ceil(t.toFixed(2)):Math.floor(t.toFixed(2))}},{key:"generateUUID",value:function(){for(var t=[],i=0;i<256;i++)t[i]=(i<16?"0":"")+i.toString(16);var r=4294967295*Math.random()|0,n=4294967295*Math.random()|0,e=4294967295*Math.random()|0,o=4294967295*Math.random()|0,r=t[255&r]+t[r>>8&255]+t[r>>16&255]+t[r>>24&255]+"-"+t[255&n]+t[n>>8&255]+"-"+t[n>>16&15|64]+t[n>>24&255]+"-"+t[63&e|128]+t[e>>8&255]+"-"+t[e>>16&255]+t[e>>24&255]+t[255&o]+t[o>>8&255]+t[o>>16&255]+t[o>>24&255];return t.length=0,r.toUpperCase()}},{key:"findNearNthPowerOfTwo",value:function(t){t-=1;return(t=(t=(t=(t=(t|=t>>1)|t>>2)|t>>4)|t>>8)|t>>16)<0?1:1+t}},{key:"rgbToArray",value:function(t){var i=new Fe;return i.setStyle(t),[i.r,i.g,i.b]}},{key:"toRgba",value:function(t){var i;return void 0===t?t:"number"!=typeof t?3<=(i=t.split(",")).length?"rgba("+parseInt(i[0])+","+parseInt(i[1])+","+parseInt(i[2])+",1)":t:"rgba("+parseInt(255*new Fe(t).r)+","+parseInt(255*new Fe(t).g)+","+parseInt(255*new Fe(t).b)+",1)"}},{key:"toColor",value:function(t){var i;return"number"==typeof t?t:3<=(i=t.split(",")).length?parseInt(i[0])<<16|parseInt(i[1])<<8|parseInt(i[2]):(console.error("color format error",t),0)}},{key:"cov",value:function(t){for(var i=[],r=[0,0],n=[],e=0;e<t.length;e++)r[0]+=t[e].x,r[1]+=t[e].y;r[0]=r[0]/t.length,r[1]=r[1]/t.length;for(var o=0;o<t.length;o++)n.push([t[o].x-r[0],t[o].y-r[1]]);for(var s=[],u=0;u<n[0].length;u++){for(var a=[],f=0;f<n.length;f++)a.push(n[f][u]);s.push(a)}for(var h=0;h<s.length;h++){for(var l=[],c=0;c<n[0].length;c++){for(var v=0,y=0;y<s[h].length;y++)v+=s[h][y]*n[y][c];v/=t.length-1,l.push(v)}i.push(l)}return i}},{key:"eig",value:function(t){var i=(t[0][0]+t[1][1])/2,r=t[0][0]*t[1][1]-t[1][0]*t[0][1],n=i+Math.sqrt(i*i-r),i=i-Math.sqrt(i*i-r);return 0==t[0][1]&&0==t[1][0]?{eigValue:[n,i],eigVect:[[1,0],[0,1]]}:(r=(n-t[0][0])/t[0][1],t=(i-t[0][0])/t[0][1],{eigValue:[n,i],eigVect:[[1/Math.sqrt(1+r*r),r/Math.sqrt(1+r*r)],[1/Math.sqrt(1+t*t),t/Math.sqrt(1+t*t)]]})}}],(r=null)&&Ge(i.prototype,r),n&&Ge(i,n),Object.defineProperty(i,"prototype",{writable:!1}),i;var i,r,n})();function Ve(t,i){var r,n,e,o,s="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(s)return e=!(n=!0),{s:function(){s=s.call(t)},n:function(){var t=s.next();return n=t.done,t},e:function(t){e=!0,r=t},f:function(){try{n||null==s.return||s.return()}finally{if(e)throw r}}};if(Array.isArray(t)||(s=((t,i)=>{var r;if(t)return"string"==typeof t?Ze(t,i):"Map"===(r="Object"===(r={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ze(t,i):void 0})(t))||i&&t&&"number"==typeof t.length)return s&&(t=s),o=0,{s:i=function(){},n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:i};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ze(t,i){(null==i||i>t.length)&&(i=t.length);for(var r=0,n=Array(i);r<i;r++)n[r]=t[r];return n}function We(t){return(We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qe(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=We(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=We(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==We(t)?t:t+""))(n.key),n)}}var n=(()=>{function n(t,i,r){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");this.Fi=Object.assign({tile:!0,isPreview:!1},t),this.Fi.buildingID=t.mapID,this.Bn=!!t.map,this.Gn=t.map?t.map.getDataManager():new be,this.Ci=[],this.Un={},this.Vn=t.statistics||null,this.Zn=i,this.Wn=r,this.qn=Ue.generateUUID(),this.Yn()}return t=n,(i=[{key:"dispose",value:function(){this.Fi=null,this.Bn||this.Gn.Ui(function(){}),this.Gn=null,this.Zn=null,this.Wn=null}},{key:"query",value:function(t,i){if(this.zn(),null===t.buildings){for(var r=[],n=0;n<this.Ci.length;n++)r.push({buildingID:this.Ci[n].bid});t.buildings=r}var e=[];if(!t.onlyInBuilding){t.buildingID=this.Fi.mapID,null===t.buildingID&&(t.buildingID=this.Fi.mapID);for(var o=this.Xn(t),s=0;s<o.length;s++)o[s].buildingID=null,e.push(o[s])}for(var u=t.buildings,a=0;a<u.length;a++)for(var f=this.Hn(u[a].buildingID),h=(t.buildingID=f,t.levels=u[a].levels,this.Xn(t)),l=0;l<h.length;l++)h[l].buildingID=u[a].buildingID,e.push(h[l]);i&&i(e)}}])&&qe(t.prototype,i),r&&qe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,i,r})(),pe=(Object.assign(n.prototype,{Yn:function(){this.Ci=[],this.Bn&&(t=this.Fi.map.getMapOptions(),this.Fi.mapID=t.mapID,this.Fi.buildingID=t.mapID,this.Fi.appName=t.appName,this.Fi.key=t.key,this.Fi.license=t.license,this.Fi.mapURL=t.mapURL,this.Fi.mapURLAbsolute=t.mapURLAbsolute,this.Fi.buildings=t.buildings,this.Fi.buildingOptions=t.buildingOptions,this.Fi.isPreview="undefined"!=typeof KjWzhWlSj&&!!KjWzhWlSj.ProtoDef,this.Fi.tile=t.tile);var t={mapID:this.Fi.mapID,buildingID:this.Fi.mapID,appName:this.Fi.appName,key:this.Fi.key,buildings:this.Fi.buildings,license:this.Fi.license,mapURL:this.Fi.mapURL,mapURLAbsolute:this.Fi.mapURLAbsolute,merge:this.Fi.merge,tile:this.Fi.tile,preLoad:!0,isPreview:"undefined"!=typeof KjWzhWlSj&&!!KjWzhWlSj.ProtoDef,uuid:this.qn,bid:this.Fi.buildingID||null,isOutdoor:!0};this.Qn(t)},Qn:function(r){var n=this;setTimeout(function(){n.Fi.tile?n.Gn.load(r,function(t,i){n.Kn(t,i,r.isOutdoor),n.Vn&&n.Vn._analyse(t,i,r)}):n.Gn.loadWhole(r,function(t,i){n.Kn(t,i,r.isOutdoor),n.Vn&&n.Vn._analyse(t,i,r)})},0)},zn:function(){if(!(0<this.Ci.length)){var t=this.Fi.mapID,i=this.Gn.getData({buildingID:t});if(i&&i.buildings)for(var r=0;r<i.buildings.length;r++)this.Ci.push(i.buildings[r])}},Kn:function(t,i,r){if("error"==t&&this.Wn&&this.Wn(i),"decode"===t){if(r&&(this.Un[""+i.scene.mid]=!1,i.scene.buildings)&&0<i.scene.buildings.length)for(var n=0;n<i.scene.buildings.length;n++){var e=i.scene.buildings[n],o={mapID:this.Fi.mapID,buildingID:null,appName:this.Fi.appName,key:this.Fi.key,license:this.Fi.license,mapURL:this.Fi.mapURL,mapURLAbsolute:this.Fi.mapURLAbsolute,merge:this.Fi.merge,loadNavi:!0,preLoad:!0,isPreview:"undefined"!=typeof KjWzhWlSj,tile:this.Fi.tile,type:this.Fi.type,bid:null,isOutdoor:!1,uuid:this.qn},o=(o.buildingID=e.mid,o.bid=e.bid,Object.assign({},o));this.Un[""+e.mid]=!1,this.Qn(o)}if(this.Bn&&!this.Fi.tile){var s,u=this.Un[""+i.scene.mid]=!0;for(s in this.Un)this.Un[s]||(u=!1);u&&this.Zn&&this.Zn()}}if("complete"==t){var a,f=this.Un[""+i.mid]=!0;for(a in this.Un)this.Un[a]||(f=!1);f&&this.Zn&&this.Zn()}},Jn:function(t){var i=_.NONE;return 0!=(t.Ai&_.MODEL)&&(i|=_.MODELGROUP),0!=(t.Ai&_.LABEL)&&(i|=_.LABELGROUP),0!=(t.Ai&_.FACILITY)&&(i|=_.FACILITYGROUP),0!=(t.Ai&_.EXTERNALMODEL)&&(i|=_.EXTERNALMODELGROUP),i},$n:function(t){if(Array.isArray(t.Ii))return t.Ii;var i=this.Fi,t=(null!==t.buildingID&&(i={buildingID:t.buildingID,mapID:t.buildingID}),this.Gn.getData(i));if(!t)return[];var r,n=[],e=Ve(t.getChildren());try{for(e.s();!(r=e.n()).done;)n.push(r.value[1].gid)}catch(t){e.e(t)}finally{e.f()}return n},te:function(t,i,r,n){if(0!=i)for(var e=0;e<i;e++){if(!t[e].X(r))return!1;t[e].H(r,n)}return!0},ie:function(t,i,r){return{level:t,type:i.getType(),FID:i.fid,name:i.name,ename:i.ename,eid:i.eid,typeID:i.type,center:void 0!==i.getCenter?Object.assign({z:i.height},i.getCenter()):Object.assign({z:i.height},i.getCoordinates()[0]),distance:r.Tt}},re:function(t){t.sort(function(t,i){return t.level==i.level&&t.type==i.type&&t.distance&&i.distance?t.distance-i.distance:0})},Xn:function(t,i,r){var n=this.Fi,n=(null!==t.buildingID&&(n={buildingID:t.buildingID,mapID:t.buildingID}),this.Gn.getData(n));if(!n)return[];var e=this.$n(t),o=this.Jn(t);if(o===_.NONE)return[];var s,u=t.Li,a=u.length,f=[],h=Ve(n.getChildren());try{for(h.s();!(s=h.n()).done;){var l=s.value,c=l[0];if(-1!==e.indexOf(c)){var v,y=Ve(l[1].getChildren());try{for(y.s();!(v=y.n()).done;){var d=v.value[1];if(0!=(d.getType()&o)){var b,p=Ve(d.getChildren());try{for(p.s();!(b=p.n()).done;){var m=b.value[1],w={Tt:void 0};this.te(u,a,m,w)&&f.push(this.ie(c,m,w))}}catch(t){p.e(t)}finally{p.f()}}}}catch(t){y.e(t)}finally{y.f()}}}}catch(t){h.e(t)}finally{h.f()}return f},Hn:function(t){for(var i=null,r=this.Ci,n=0;n<r.length;n++)if(r[n].bid===t){i=r[n].mid;break}return i}}),n),ft={NaviNodeType_NULL:-1,NaviNodeType_COMMON:0,NaviNodeType_SIDE:1,NaviNodeType_FLOOR:2,NaviNodeType_EXTENT:3,NaviLiftType_NULL:0,NaviLiftType_Lift:1,NaviLiftType_Stair:2,NaviLiftType_Escalator:3,NaviLiftType_Accessible:4,NaviLiftType_Ramp:5,NaviLiftEntry_BOTH:0,NaviLiftEntry_UP:1,NaviLiftEntry_DOWN:2,NaviLiftEntry_FORBID:3,NaviEntranceType_NULL:0,NaviEntranceType_EXIT:1,NaviEntranceType_ENTRANCE:2,NaviEntranceType_ACCESS:3,NaviRoadRank_MAIN:1,NaviRoadRank_MINOR:2,NaviRoadRank_NARROW:3,NaviRoadEntry_BOTH:0,NaviRoadEntry_FORWARD:1,NaviRoadEntry_BACK:2,NaviRoadEntry_FORBID:3,NaviRoadPass_NULL:-1,NaviRoadPass_NOT_THROUGH:0,NaviRoadPass_THROUGH:1,NaviZoneType_NULL:-1,NaviZoneType_PASS_UNRESTRAINT:0,NaviZoneType_PASS_THROUGH:1,NaviZoneType_PASS_NOT_THROUGH:2,NaviZoneType_NO_ENTRY:3,NaviZoneType_CORRIDOR:4,NaviModelPassType_PASS_THROUGH:0,NaviModelPassType_PASS_NOT_THROUGH:1,NaviModelPassType_NOT_PASS:2,NaviModelPassType_DECORATE:3,NaviRoadHinderType_HINDER_GENERAL:0,NaviRoadHinderType_HINDER_HIGH:1,NaviObstructType_MODEL:0,NaviObstructType_EXTENT:1},O={Drive:1,Walk:0},Ye={Entry_BOTH:0,Entry_FORWARD:1,Entry_BACK:2,Entry_FORBID:3};function ze(t){return(ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xe(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=ze(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=ze(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==ze(t)?t:t+""))(n.key),n)}}var r=(()=>{function e(t,i,r,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.ne=t,this.ee=i,this.se=r||[],this.ue=n||[]}return t=e,(i=[{key:"level",get:function(){return this.ne}},{key:"length",get:function(){return this.ee}},{key:"pointList",get:function(){for(var t=[],i=0,r=this.se.length;i<r;i++)t.push({x:this.se[i].x,y:this.se[i].y,level:this.ne});return t}}])&&Xe(t.prototype,i),r&&Xe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,i,r})(),He=(Object.assign(r.prototype,{Ui:function(){this.se=[],this.ue=[]}}),r);function Qe(t){return(Qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ke(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=Qe(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=Qe(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==Qe(t)?t:t+""))(n.key),n)}}var V=(()=>{return t=function t(){var i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,e=this,o=t;if(!(e instanceof o))throw new TypeError("Cannot call a class as a function");Object.defineProperty(this,"isVector3",{value:!0}),this.x=i,this.y=r,this.z=n},(i=[{key:"set",value:function(t,i,r){return void 0===r&&(r=this.z),this.x=t,this.y=i,this.z=r,this}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}},{key:"sub",value:function(t,i){return void 0!==i?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,i)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}},{key:"subVectors",value:function(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this}},{key:"multiplyScalar",value:function(t){return this.x*=t,this.y*=t,this.z*=t,this}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y+this.z*t.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"cross",value:function(t,i){return void 0!==i?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,i)):this.crossVectors(this,t)}},{key:"crossVectors",value:function(t,i){var r=t.x,n=t.y,t=t.z,e=i.x,o=i.y,i=i.z;return this.x=n*i-t*o,this.y=t*e-r*i,this.z=r*o-n*e,this}},{key:"angleTo",value:function(t){var i=Math.sqrt(this.lengthSq()*t.lengthSq());return 0===i?Math.PI/2:(t=this.dot(t)/i,i=Math.max(-1,Math.min(1,t)),Math.acos(i))}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"divideScalar",value:function(t){return this.multiplyScalar(1/t)}}])&&Ke(t.prototype,i),r&&Ke(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,i,r})();function Je(t){return(Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $e(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=Je(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=Je(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==Je(t)?t:t+""))(n.key),n)}}function to(t,i,r){return i&&$e(t.prototype,i),r&&$e(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var n=to(function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.Vr=0,this.ki={},this.Ai=0,this.ae=[],this.fe=[],this.he=0,this.le=[],this.ce=!1,this.ve=!1,this.ye=0,this.de=!1,this.be=[]}),q=(Object.assign(n.prototype,{set pe(t){-1!=t&&(this.Ai|=t)},get pe(){return 3&this.Ai},set me(t){this.Ai|=t<<2},get me(){return this.Ai>>2&7},set we(t){this.Ai|=t<<5},get we(){return this.Ai>>5&3},Yn:function(t){this.Vr=t,this.ki={x:0,y:0},this.Ai=0,this.he=0,this.ce=!1,this.ve=!1},ge:function(t){return this.Vr==t.Vr},_e:function(t){this.Vr=t.Vr,this.ki=Object.assign({},t.ki),this.Ai=t.Ai,this.ae=[];for(var i=0;i<t.ae.length;i++)this.ae[i]=t.ae[i];this.fe=[];for(var r=0;r<t.fe.length;r++)this.fe[r]=t.fe[r];this.he=t.he,this.le=[];for(var n=0;n<t.le.length;n++)this.le[n]=t.le[n];this.ce=t.ce,this.ve=t.ve}}),n);function io(t){return(io="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ro(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=io(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=io(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==io(t)?t:t+""))(n.key),n)}}function no(t,i,r){i=oo(i);var n=t,i=eo()?Reflect.construct(i,r||[],oo(t).constructor):i.apply(t,r);if(!i||"object"!=io(i)&&"function"!=typeof i){if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(i=n))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return i}function eo(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(eo=function(){return!!t})()}function oo(t){return(oo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function so(t,i){return(so=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t})(t,i)}var uo=(()=>{function i(){var t;if(this instanceof i)return(t=no(this,i)).je=0,t.ne=0,t.Se=null,t.ye=0,t.Oe=null,t.me=null,t;throw new TypeError("Cannot call a class as a function")}var t,r,n=i,e=q;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");return n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&so(n,e),n=i,t&&ro(n.prototype,t),r&&ro(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n})();function ao(t){return(ao="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fo(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=ao(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=ao(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==ao(t)?t:t+""))(n.key),n)}}function ho(t,i,r){return i&&fo(t.prototype,i),r&&fo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var r=ho(function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.Vr=0,this.Ee=-1,this.ei={},this.ke=-1,this.oi={},this.ee=0,this.Ai=0,this.Te=[],this.Me=-1,this.Re=!1,this.Ne=0}),x=(Object.assign(r.prototype,{set Ie(t){this.Ai|=t},get Ie(){return 3&this.Ai},set Ae(t){this.Ai|=t<<2},get Ae(){return this.Ai>>2&3},set xe(t){this.Ai|=t<<4},get xe(){return this.Ai>>4&3},set Pe(t){t?this.Ai|=16:this.Ai&=-17},get Pe(){return 16&this.Ai?1:0},Le:function(t){this.Vr=t.Vr,this.Ee=t.Ee,this.ei=Object.assign({},t.ei),this.ke=t.ke,this.oi=Object.assign({},t.oi),this.ee=t.ee,this.Ai=t.Ai,this.Te=[],this.Me=t.Me;for(var i=0;i<t.Te.ee;i++)this.Te[i]=t.Te[i]},De:function(){this.ee=at.distanceOfTwoPoints(this.ei,this.oi)},Ce:function(){var t=this.ei.x-this.oi.x,i=this.ei.y-this.oi.y;this.ee=Math.abs(t)+Math.abs(i)},Fe:function(){var t={};return t.x=(this.ei.x+this.oi.x)/2,t.y=(this.ei.y+this.oi.y)/2,t}}),r);function lo(t){return(lo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function co(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=lo(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=lo(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==lo(t)?t:t+""))(n.key),n)}}var n=(()=>{function e(t,i,r,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.Vr=t,this.ne=i||-1,this.Ai=r,this.Ti=n,this.Be=n&&n.length?n.length-1:0,this.Ge=0,this.Ue=null,this.Ve=null,this.Ze=[],this.We=[],this.qe=null,this.bi=new Si,this.bi.yi(this.Ti)}return t=e,(i=[{key:"_pass",get:function(){return 3&this.Ai},set:function(t){this.Ai|=t}},{key:"_area",get:function(){return null==this.qe&&(this.qe=at.xt(this.Ti,this.Be)),this.qe}},{key:"bound",get:function(){return this.bi}}])&&co(t.prototype,i),r&&co(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,i,r})(),vo=(Object.assign(n.prototype,{Ye:function(t){return!!at.jt(t,this.bi.li,this.bi.ci)&&at.Et(this.Ti,t,this.Be)},Pt:function(t,i){for(var r={},n=0;n<this.Be;n++){var e=this.Ti[n],o=this.Ti[(n+1)%this.Be];if(1==at.Pt(e,o,t,i,r))break}return r}}),n);function yo(t){return(yo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bo(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=yo(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=yo(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==yo(t)?t:t+""))(n.key),n)}}var r=(()=>{function s(t,i,r,n,e,o){if(!(this instanceof s))throw new TypeError("Cannot call a class as a function");this.Vr=t,this.ze="",this.Ti=n,this.Be=n&&n.length?n.length-1:0,this._i=e,this.Xe=o,this.Ai=r,this.ne=i,this.He=[],this.Qe=[],this.Ke=[],this.Ue=null,this.Ve=null,this.Ze=[],this.Je=0,this.Ge=0,this.qe=null,this.$e=!1,this.bi=new Si,this.bi.yi(this.Ti)}return t=s,(i=[{key:"pass",get:function(){return 3&this.Ai},set:function(t){this.Ai|=t}},{key:"area",get:function(){return null==this.qe&&(this.qe=at.xt(this.Ti,this.Be)),this.qe}},{key:"bound",get:function(){return this.bi}}])&&bo(t.prototype,i),r&&bo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,i,r})(),po=(Object.assign(r.prototype,{Ye:function(t){if(this.Xe)for(var i=0;i<this.Xe.length;i++)if(at.Et(t,this.Xe[i],this.Xe[i].length-1))return!1;return at.Et(t,this.Ti,this.Be)},toZone:function(){return new vo(this.Vr,this.ne,this.Ai,this.Ti)}}),r);function mo(t){return(mo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wo(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=mo(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=mo(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==mo(t)?t:t+""))(n.key),n)}}function go(t,i,r){i=jo(i);var n=t,i=_o()?Reflect.construct(i,r||[],jo(t).constructor):i.apply(t,r);if(!i||"object"!=mo(i)&&"function"!=typeof i){if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(i=n))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return i}function _o(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(_o=function(){return!!t})()}function jo(t){return(jo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function So(t,i){return(So=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t})(t,i)}var n=(()=>{function i(){var t;if(this instanceof i)return(t=go(this,i)).ne=0,t.Me=-1,t.io=[],t.Se=null,t;throw new TypeError("Cannot call a class as a function")}var t,r,n=i,e=q;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");return n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&So(n,e),n=i,t&&wo(n.prototype,t),r&&wo(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n})(),Oo=(Object.assign(n.prototype,{ro:function(t,i,r){if(!t)return[];var n=[];r=r||this.io;for(var e=0;e<r.length;e++){var o=r[e];t==o.me&&(i&&(o.ye=o.ye+i),n.push(o))}return n}}),n);function Eo(t){return(Eo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ko(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=Eo(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=Eo(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==Eo(t)?t:t+""))(n.key),n)}}var To=(()=>{function e(t,i,r,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.ne=0,this.Ai=n,this.no=t,this.eo=i,this.oo=[],this.so=[],this.uo=[],this.ao=[],this.fo=new Map,this.ho=new Map,this.co=[],this.vo=new Map,this.yo=new Map,this.do=0,this.bo=0,this.po()}return t=e,(i=[{key:"queryContainIdOfExtent",value:function(t){return this.mo(t)}},{key:"queryContainExtentID",value:function(t){return this.wo(t)}}])&&ko(t.prototype,i),r&&ko(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,i,r})(),P=(Object.assign(To.prototype,{Ui:function(){this.no=null,this.eo=null,this.oo=null,this.so=null,this.uo=null,(this.ao=null)!=this.fo&&(this.fo.clear(),this.fo=null),null!=this.ho&&(this.ho.clear(),this.ho=null),(this.co=null)!=this.vo&&(this.vo.clear(),this.vo=null),null!=this.yo&&(this.yo.clear(),this.yo=null)},_o:function(){this.ao=[];for(var t=0;t<this.so.length;t++){var i=this.so[t].toZone();this.ao.push(i)}for(var r=0;r<this.oo.length;r++){var n=this.so[r].toZone();this.ao.push(n)}},jo:function(t){for(var i=0;i<this.ao.length;i++){var r=this.ao[i];if(r&&r.Vr==t)return r}return null},So:function(t){for(var i=0;i<this.ao.length;i++){var r=this.ao[i];if(r&&1==r.contain(t))return r}return null},mo:function(t){if(0!==this.so.length&&t)for(var i=0,r=this.so.length;i<r;i++){var n=this.so[i];if(n.Ye(t))return n.Vr}return 0},wo:function(t){if(0!==this.so.length&&t)for(var i=0,r=this.so.length;i<r;i++){var n=this.so[i];if(n.Ye(t))return n.Me}return 0},Oo:function(t,i){if(0!=this.uo.length&&t&&i)for(var r=0;r<this.uo.length;r++)if(this.uo[r].isCross(t,i))return!0;return!1},po:function(){this.do=0;for(var t=this.bo=0;t<this.eo.length;)null==this.eo[t]?this.eo.splice(t,1):(this.eo[t].Vr>this.bo&&(this.bo=this.eo[t].Vr),t++);for(var i=0;i<this.no.length;)null==this.no[i]?this.no.splice(i,1):(this.no[i].Vr>this.do&&(this.do=this.no[i].Vr),i++)},Eo:function(t){t=this.vo.get(t);return void 0===t?null:t},ko:function(t){t=this.yo.get(t);return void 0===t?null:t},To:function(t){for(var i=Number.MAX_VALUE,r=null,n=0;n<this.so.length;++n){var e=this.so[n];e.contain(t)&&e.area<i&&(i=cur_area,r=e)}for(var o=0;o<this.oo.size();++o){var s=this.oo[o];s.contain(t)&&s.area<i&&(i=cur_area,r=s)}return r||null},Mo:function(t){for(var i=Number.MAX_VALUE,r=null,n=0;n<this.oo.length;++n){var e=this.oo[n];e.Ye(t)&&e.area<i&&(i=e.area,r=e)}return r||null},Ro:function(){return++this.do},No:function(){return++this.bo},Io:function(t){this.do=t},Ao:function(t){this.bo=t},xo:function(){for(var t=0;t<this.no.length;t++){var i=this.no[t];i&&(i instanceof Oo?this.vo.set(i.Me,t):this.vo.set(i.Vr,t))}},Po:function(){for(var t=0;t<this.eo.length;t++){var i=this.eo[t];i&&this.yo.set(i.Vr,t)}},Lo:function(){for(var e=this,o=(this.ho.clear(),0);o<this.eo.length;o++)(()=>{var i=e.eo[o];if(null==i)return;var t,r,n=i.Ae;ft.NaviRoadEntry_BOTH!=n&&ft.NaviRoadEntry_FORWARD!=n||(t=i.Ee,(r=e.ho.get(t))||e.ho.set(t,r=[]),null==r.find(function(t){return t.Do==i.ke})&&r.push({Do:i.ke,ee:i.ee})),ft.NaviRoadEntry_BOTH!=n&&ft.NaviRoadEntry_BACK!=n||(t=i.ke,(r=e.ho.get(t))||e.ho.set(t,r=[]),null==r.find(function(t){return t.Do==i.Ee})&&r.push({Do:i.Ee,ee:i.ee}))})()},Co:function(t){for(var i=0;i<this.no.length;i++)if(this.no[i].Vr==t)return i;return-1},Fo:function(t){for(var i=0;i<this.eo.length;i++)if(this.eo[i].Vr==t)return i;return-1},Bo:function(t){for(var i=[],r=this.eo,n=0;n<r.length;n++){var e=r[n],o=e.ei,s=[];t.Go([o,e.oi],s)?i.push({road:e,crss:s,index:n}):t.Uo(o)&&i.push({road:e,crss:[],index:n})}return i},Vo:function(t){for(var i=null,r=Number.MAX_VALUE,n=0;n<this.oo.length;n++){var e=this.oo[n];at.Et(t,e.Ti,e.Be)&&r>e.area&&(r=(i=e).area)}return i},Zo:function(t){for(var i=-1,r=0;r<this.ao.length;r++){var n=this.ao[r];if(at.Et(t,n.Ti,n.Be)){i=n.Vr;break}}return i},Wo:function(){var t=this.oo.length,t=parseInt(Math.random()*t);return this.oo[t]},qo:function(){for(var t=0;t<this.co.length;t++)this.co[t]=!1},Yo:function(){for(var t=[],i=0;i<this.no.length;i++){var r=this.no[i];r.me!=ft.NaviLiftType_NULL&&t.push(r)}return t},zo:function(t){for(var i=null,r=0;r<this.so.length;r++)if(t==this.so[r].Vr){i=this.so[r];break}if(!i)return null;for(var n=[],e=0;e<this.no.length;e++){var o=this.no[e];at.Et(o.ki,i.Ti,i.Be)&&n.push(o)}for(var s=[],u=0;u<this.eo.length;u++){var a=this.eo[u];at.Et(a.ei,i.Ti,i.Be)&&s.push(a)}for(var f=[],h=0;h<this.oo.length;h++){var l=this.oo[h];at.Et(l._i,i.Ti,i.Be)&&f.push(l)}var c=new To(n,s,!0,1);return c.oo=f,c.so=[i],c}}),To);function Mo(t){return(Mo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ro(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=Mo(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=Mo(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==Mo(t)?t:t+""))(n.key),n)}}function No(t,i,r){return i&&Ro(t.prototype,i),r&&Ro(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var r=No(function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.Xo=null}),Io=(Object.assign(r.prototype,{Ui:function(){this.Xo=null},Ho:function(t){this.Xo=t},Qo:function(t,i){var r=null;return 0==i?r=Dn.Dr(t):1==i?r=Dn.Cr(t):2==i&&(r=Dn.Fr(t)),{points:r[0],holes:r.slice(1)}},Ko:function(t,i,r){var n=null;return 0==r?n=In.Dr(t,i):1==r?n=In.Cr(t,i):2==r&&(n=In.Fr(t,i)),{points:n[0],holes:n.slice(1)}},Jo:function(t){if(t&&"string"!=typeof t)for(var i in t){var r=t[i];if("vertices"==i||"vertex"==i)for(var n in r)n%2==0&&(r[n]=-r[n]);else"scene_data"==i?(r.x=-r.x,r.defCenX=-r.defCenX):this.Jo(r)}},$o:function(t){var i,r;return""!=t&&t?(i=[],r=[],0<=(t=t).indexOf("|")||0<=t.indexOf("-")||0<=t.indexOf(",")?(r=t.split(/[|,-]/),i.push.apply(i,r)):i.push(t),i):[]},ts:function(t,i,r,n){for(var e={},o=[],s=[],u=[],a=[],f=[],h=this.Xo.fileVer,l=n.naviExtents&&0<n.naviExtents.length?n.naviExtents:i.extentLayer,c=0,v=l.length;c<v;c++){var y=l[c],d=null,d=1===h?this.Qo(y.geo,2):this.Ko(y.idxs,y.pts,2),y={eid:y.id||y.eid,geoArr:d.points,holes:d.holes};s.push(y)}for(var b=0,p=i.labelLayer.length;b<p;b++)e[i.labelLayer[b].eid]=i.labelLayer[b];for(var m=0,w=i.modelLayer.length;m<w;m++){var g=i.modelLayer[m],_=r.modelLayer[m],j={},_=(j.fid=_.fid,j.eid=g.eid,j.pass=_.pass,j._i=(1===h?this.Qo(e[g.eid].geo,0):this.Ko(e[g.eid].idxs,e[g.eid].pts,0)).points,null),_=1===h?this.Qo(g.geo,2):this.Ko(g.idxs,g.pts,2);j.geoArr=_.points,j.holes=_.holes,o.push(j)}if(n&&n.naviNodes)for(var S=0,O=n.naviNodes.length;S<O;S++){var E=n.naviNodes[S];E.geoArr=(1===h?this.Qo(E.geo,0):this.Ko(E.idxs,E.pts,0)).points,E.linkSegArr=this.$o(E.linkSeg),E.liftFloorArr=this.$o(E.liftFloor),u.push(E)}if(n&&n.naviSegments)for(var k=0,T=n.naviSegments.length;k<T;k++){var M=n.naviSegments[k];M.geoArr=(1===h?this.Qo(M.geo,1):this.Ko(M.idxs,M.pts,1)).points,M.m_Id=n.mid,a.push(M)}if(n&&n.naviZones)for(var R=0,N=n.naviZones.length;R<N;R++){var I=n.naviZones[R],A=null,A=1===h?this.Qo(I.geo,2):this.Ko(I.idxs,I.pts,2);I.geoArr=A.points,I.holes=A.holes,I.m_Id=n.mid,f.push(I)}return{level:t,extentLayer:s,modelLayer:o,naviSegments:a,naviNodes:u,naviZones:f}}}),r);function Ao(t){return(Ao="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xo(t,i){var r,n,e,o,s="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(s)return e=!(n=!0),{s:function(){s=s.call(t)},n:function(){var t=s.next();return n=t.done,t},e:function(t){e=!0,r=t},f:function(){try{n||null==s.return||s.return()}finally{if(e)throw r}}};if(Array.isArray(t)||(s=((t,i)=>{var r;if(t)return"string"==typeof t?Po(t,i):"Map"===(r="Object"===(r={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Po(t,i):void 0})(t))||i&&t&&"number"==typeof t.length)return s&&(t=s),o=0,{s:i=function(){},n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:i};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Po(t,i){(null==i||i>t.length)&&(i=t.length);for(var r=0,n=Array(i);r<i;r++)n[r]=t[r];return n}function Lo(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=Ao(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=Ao(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==Ao(t)?t:t+""))(n.key),n)}}function Do(t,i,r){return i&&Lo(t.prototype,i),r&&Lo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var n=Do(function t(i){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.rs=i,this.ns=null,this.es=null,this.ss=-1,this.us=-1,this.hs=j.MODULE_SHORTEST,this.ls=[],this.rs.xo(),this.rs.Po(),this.rs.Lo(),this.cs=5e-4,this.vs=0,this.ys=0}),Co=(Object.assign(n.prototype,{ds:function(t,i){if(null!=this.rs.no&&0!=this.rs.no.length&&this.rs.no[0]instanceof Oo){this.vs=10;for(var n={},r=0;r<this.rs.no.length;r++){var e=this.rs.no[r],o=e.bs.Ti,s=o.length-1,u=this.rs.no[r].Me,s=(n[u]=[1,1,Number.MAX_VALUE],at.Et(t,o,s)&&(n[u][0]=0,t.level==e.ne)&&e.Me,at.Et(i,o,s)&&(n[u][1]=0,i.level==e.ne)&&e.Me,at.zt(o)),e=at.Tt(t,s)+at.Tt(i,s);n[u][2]=e}var a,f=this.rs.ho,h=xo(f.keys());try{for(h.s();!(a=h.n()).done;){var l=a.value;f.get(l).sort(function(t,i){var r=n[t.Do][0]+n[t.Do][1]-(n[i.Do][0]+n[i.Do][1]);return 0==r?n[t.Do][2]-n[i.Do][2]:r})}}catch(t){h.e(t)}finally{h.f()}}},ps:function(t,i,r){this.ws(r),this.ns=t,this.es=i,this.ss=t.Vr,this.us=i.Vr;r=this.rs.Eo(this.ss);return null!=r&&null!=(t=this.rs.Eo(i.Vr))&&((i=[]).push(t),this.gs(this.rs,r,i))?ut.ROUTE_SUCCESS:ut.ROUTE_FAILED_CANNOT_ARRIVE},_s:function(t,i,r){this.ws(r),this.ns=t,this.ss=t.Vr;r=this.rs.Eo(this.ss);if(null==r)return ut.ROUTE_FAILED_CANNOT_ARRIVE;var n,e=[],o=xo(i);try{for(o.s();!(n=o.n()).done;){var s=n.value;if(s&&t.Vr!=s.Vr){var u=this.rs.Eo(s.Vr);if(null==u)return ut.ROUTE_FAILED_CANNOT_ARRIVE;e.push(u)}}}catch(t){o.e(t)}finally{o.f()}return this.gs(this.rs,r,e)?ut.ROUTE_SUCCESS:ut.ROUTE_FAILED_CANNOT_ARRIVE},js:function(t,i,r,n){r&&n&&this.ds(r,n),this.ss=t,this.us=i;r=this.rs.Eo(t);return null!=r&&null!=(n=this.rs.Eo(i))&&((t=[]).push(n),this.gs(this.rs,r,t))?ut.ROUTE_SUCCESS:ut.ROUTE_FAILED_CANNOT_ARRIVE},Ss:function(){var t=[],i=this.rs.Eo(this.us),r=[],i=(r.push(i),[]);return this.Os(r,this.rs.no,i,[]),t.push.apply(t,i),t},Es:function(t){var i,r=new Map,n=xo(t);try{for(n.s();!(i=n.n()).done;){var e=i.value,o=[],s=this.rs.Eo(e.Vr),u=[],a=(u.push(s),[]);this.Os(u,this.rs.no,a,[]),o.push.apply(o,a),r.set(e,o)}}catch(t){n.e(t)}finally{n.f()}return r},Ui:function(){this.rs.Ui(),this.rs=null,this.ns=null,this.es=null},gs:function(t,i,r){if(null==t)return!1;var n=t.no.length;if(i<0||n<=i)return!1;this.ks(r,i);for(var e=0;e<n;++e)t.no[e].ye=Number.MAX_VALUE,t.no[e].de=!1,t.no[e].be=[];t.no[i].ye=0;for(var o=r.length,s=0,u=[],a=(u.push(t.no[i]),this.Ts.bind(this));0<u.length;){var f=null,f=u[0]instanceof Oo?u[0].Me:u[0].Vr,h=(u.splice(0,1),t.Eo(f));if(null!=h){var l=t.no[h];if(!l.de){l.de=!0;var c=r.indexOf(h);if(-1!=c&&++s==o)return!0;if(0!=t.ho.size){var v=t.ho.get(f);if(v)for(var y=0;y<v.length;y++){var d,b,p,m,w=v[y],g=w.Do,g=t.Eo(g);null==g||(w=w.ee,d=t.no[g],b=0,l.be&&0<l.be.length&&(p=t.no[l.be],m=t.no[g],p)&&m&&(p={x:p.ki.x-l.ki.x,y:p.ki.y-l.ki.y,z:0},m={x:m.ki.x-l.ki.x,y:m.ki.y-l.ki.y,z:0},p=at.Wt(p,m),Math.abs(p-90)<5||Math.abs(p-270)<5)&&(b=.5+this.ys),m=this.vs+w+l.ye+b,m=Number(m.toFixed(3)),d.de)||(d.ye>m?(d.ye=m,d.be=[],d.be.push(h),u.push(t.no[g]),u.sort(a)):Math.abs(d.ye-(w+l.ye+b))<1e-12&&-1==d.be.indexOf(h)&&d.be.push(h))}}}}}return!(s<o)},Ts:function(t,i){return t.ye-i.ye},ks:function(t,i){for(var r=t.indexOf(i);-1!=r;)t.splice(r,1),r=t.indexOf(i)},ws:function(t){if(this.hs!=t){for(var i={},r=0;r<this.rs.eo.length;r++){var n=this.rs.eo[r],e=n.Ee,o=n.ke,n=n.Ie;i.hasOwnProperty(e)||(i[e]={}),i[e][o]=n,i.hasOwnProperty(o)||(i[o]={}),i[o][e]=n}if(j.MODULE_SHORTEST==t){var s,u=xo(this.rs.ho.keys());try{for(u.s();!(s=u.n()).done;){var a,f=s.value,h=xo(this.rs.ho.get(f));try{for(h.s();!(a=h.n()).done;){var l=a.value,c=l.Do,v=i[f][c];l.ee=l.ee/v}}catch(t){h.e(t)}finally{h.f()}}}catch(t){u.e(t)}finally{u.f()}}else if(j.MODULE_BEST==t){var y,d=xo(this.rs.ho.keys());try{for(d.s();!(y=d.n()).done;){var b,p=y.value,m=xo(this.rs.ho.get(p));try{for(m.s();!(b=m.n()).done;){var w=b.value,g=w.Do,_=i[p][g];w.ee=w.ee*_}}catch(t){m.e(t)}finally{m.f()}}}catch(t){d.e(t)}finally{d.f()}}this.hs=t}},Ms:function(t,i,r,n){0!=i[t].be.length&&(t=i[t].be[0],r.push(i[t]),n.count++,this.Ms(t,i,r,n))},Os:function(t,i,r,n){for(var e=0;e<t.length;e++){var o=t[e],s=(r.push(i[o]),{count:1});this.Ms(o,i,r,s),n.push(s.count)}}}),n);function Fo(t){return(Fo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bo(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=Fo(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=Fo(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==Fo(t)?t:t+""))(n.key),n)}}function Go(t,i,r){i=Vo(i);var n=t,i=Uo()?Reflect.construct(i,r||[],Vo(t).constructor):i.apply(t,r);if(!i||"object"!=Fo(i)&&"function"!=typeof i){if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(i=n))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return i}function Uo(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Uo=function(){return!!t})()}function Vo(t){return(Vo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Zo(t,i){return(Zo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t})(t,i)}var Wo=(()=>{function i(){var t;if(this instanceof i)return(t=Go(this,i)).Vr=-1,t.Rs=[],t;throw new TypeError("Cannot call a class as a function")}var t,r,n=i,e=po;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");return n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&Zo(n,e),n=i,t&&Bo(n.prototype,t),r&&Bo(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n})();function qo(t){return(qo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yo(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=qo(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=qo(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==qo(t)?t:t+""))(n.key),n)}}function zo(t,i,r){return i&&Yo(t.prototype,i),r&&Yo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var Xo=zo(function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.dt=null,this.ui=null,this.Ns=null,this.Tt=0,this.Is=!1,this.As=ft.NaviObstructType_MODEL});function ht(t){return(t=>{if(Array.isArray(t))return Qo(t)})(t)||(t=>{if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)})(t)||Ho(t)||(()=>{throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}function lt(t,i){var r,n,e,o,s="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(s)return e=!(n=!0),{s:function(){s=s.call(t)},n:function(){var t=s.next();return n=t.done,t},e:function(t){e=!0,r=t},f:function(){try{n||null==s.return||s.return()}finally{if(e)throw r}}};if(Array.isArray(t)||(s=Ho(t))||i&&t&&"number"==typeof t.length)return s&&(t=s),o=0,{s:i=function(){},n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:i};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ho(t,i){var r;if(t)return"string"==typeof t?Qo(t,i):"Map"===(r="Object"===(r={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Qo(t,i):void 0}function Qo(t,i){(null==i||i>t.length)&&(i=t.length);for(var r=0,n=Array(i);r<i;r++)n[r]=t[r];return n}function Ko(t){return(Ko="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jo(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=Ko(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=Ko(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==Ko(t)?t:t+""))(n.key),n)}}var r=(()=>{function i(t){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");this.Vr=null,this.xs=null,this.Ps=null,this.rs=t,this.Ls=new Map,this.Ds=new Map,this.Cs=new Map,this.Fs=new Map,this.Bs=new Map,this.Gs=[],this.Us=Number.INT_MIN,this.Vs=Number.INT_MIN,this.Zs=-1,this.ns=null,this.es=null,this.Ws=[],this.hs=j.MODULE_SHORTEST,this.qs=new Map,this.Ys=new Map,this.zs=new Map,this.Xs=[],this.Hs=[],this.Qs=[],this.Ks=[],this.Js=100,this.$s=-1,this.tu=15,this.iu=.1,this.ru=[],this.nu=[],this.eu=[],this.ou=[],this.su=!1,this.uu=[],this.Ai=null,this.au(),this.fu(),this.hu(),this.lu(),this.cu(),this.de=!1,this.vu=[],this.Ai=null,this.ys=0}return t=i,(r=[{key:"assignedPts",get:function(){return this.nu},set:function(t){this.nu=t}},{key:"obstruct",get:function(){return this.su},set:function(t){this.su=t}},{key:"level",get:function(){return this.ne},set:function(t){this.ne=t}}])&&Jo(t.prototype,r),n&&Jo(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n})(),$o=(Object.assign(r.prototype,{yu:function(t){var i,r=null==t.du?null:t.du;t instanceof q?this.ns=t:(i=new q,this.bu(t,i,r)||this._failedInsertPts.push(t),this.ns=i)},pu:function(t){var i,r=null==t.du?null:t.du;t instanceof q?this.es=t:(i=new q,this.bu(t,i,r)||this._failedInsertPts.push(t),this.es=i)},mu:function(t){var i=this.rs.so[0].Ti;return!!at.Et(t,i,i.length-1)},ps:function(t,i,r){var n=[],r=(this.Us=t instanceof q?this.wu(t.ki):this.wu(t),this.Vs=i instanceof q?this.wu(i.ki):this.wu(i),r&&(this.hs=r),t.process||t instanceof q||(this.gu(this.Us),n.push(this.Us),this.Ks=[]),i.process||i instanceof q||n.includes(this.Vs)||(this.gu(this.Vs),this.Ks=[]),this._u(this.Us)),n=this._u(this.Vs);if(t instanceof q)this.ns=t;else if(t.process)this.ns=t.tmpNode;else if(ut.ROUTE_FAILED_NO_START_ARRIVAL==this.ju(t,r))return ut.ROUTE_FAILED_NO_START_ARRIVAL;if(i instanceof q)this.es=i;else if(i.process)this.es=i.tmpNode;else if(ut.ROUTE_FAILED_NO_DEST_ARRIVAL==this.Su(i,n))return ut.ROUTE_FAILED_NO_DEST_ARRIVAL;return null==this.ns?ut.ROUTE_FAILED_NO_DATA_START:null==this.es?ut.ROUTE_FAILED_NO_DATA_DEST:this.Ou()},_s:function(t,i,r){var n=[],r=(this.Ws=[],this.Us=null==t.ki?this.wu(t):this.wu(t.ki),r&&(this.hs=r),t.process||t instanceof q||(this.gu(this.Us),n.push(this.Us),this.Ks=[]),this._u(this.Us));if(t instanceof q)t.Eu=this.Us,this.ns=t;else{if(!t.process){if(ut.ROUTE_FAILED_NO_START_ARRIVAL==this.ju(t,r))return ut.ROUTE_FAILED_NO_START_ARRIVAL;t.tmpNode.Eu=this.Us}this.ns=t.tmpNode}if(null==this.ns)return ut.ROUTE_FAILED_NO_DATA_START;var e,o=lt(i);try{for(o.s();!(e=o.n()).done;){var s=e.value,u=null==s.ki?this.wu(s):this.wu(s.ki),a=(this.Vs=u,this.Ps=s.Ps,s.process||s instanceof q||n.includes(u)||(this.gu(u),this.Ks=[],n.push(u)),this._u(u));s instanceof q?(s.Eu=u,this.Ws.push(s)):s.process?this.Ws.push(s.tmpNode):ut.ROUTE_FAILED_NO_DEST_ARRIVAL==this.Su(s,a)?this.Ws.push(null):(!0===s.du?s.tmpNode.du=!0:s.tmpNode.ku=!0,s.tmpNode.Eu=u,this.Ws.push(s.tmpNode)),null==this.es&&this.Ws.push(null)}}catch(t){o.e(t)}finally{o.f()}var f,h=new Map,l=this.Ws,r=this.Tu(this.ns,l),c=(h.set(this.ns,r),lt(l));try{for(c.s();!(f=c.n()).done;){var v=f.value,y=[];v.du&&(y=this.Tu(v,l)),h.set(v,y)}}catch(t){c.e(t)}finally{c.f()}return h},Mu:function(){var t;this.ou=[];for(var i=0;i<this.nu.length;i++){var r={x:(r=this.nu[i])[0],y:r[1]},n=this.wu(r),n=this.Ru(n,r);this.ou.push(n)}(t=this.Gs).push.apply(t,ht(this.ou))},Ss:function(){return this.Gs},Es:function(){return this._resultVectorMap},Ui:function(){this.xs=null,this.Ps=null,this.rs.Ui(),this.rs=null,this.Ls.clear(),this.Ls=null;var t,i=lt(this.Ds);try{for(i.s();!(t=i.n()).done;)t.value[1].Ui()}catch(t){i.e(t)}finally{i.f()}this.Ds.clear(),this.Ds=null;var r,n=lt(this.Fs);try{for(n.s();!(r=n.n()).done;)r.value[1].Ui()}catch(t){n.e(t)}finally{n.f()}this.Fs.clear(),this.Fs=null;var e,o=lt(this.Cs);try{for(o.s();!(e=o.n()).done;)e.value[1].Ui()}catch(t){o.e(t)}finally{o.f()}this.Cs.clear(),this.Cs=null;var s,u=lt(this.Bs);try{for(u.s();!(s=u.n()).done;)s.value[1].Ui()}catch(t){u.e(t)}finally{u.f()}this.Bs.clear(),this.Bs=null,this.Gs=[],this.ns=null,this.es=null,this.qs.clear(),this.qs=null,this.Ys.clear(),this.Ys=null,this.zs.clear(),this.Xs=[],this.Hs=[],this.Qs=[],this.Ks=[],this.uu=[],this.su=!1},En:function(){this.Gs=[],this.Nu(-1),this.Nu(this.Us),this.Us=Number.INT_MIN,this.Nu(this.Vs),this.Vs=Number.INT_MIN,this.Iu(),this.ru=[];var t=this.rs.eo.length;this.Zs<-2*t&&(this.Zs=-1);for(var i=0;i<this.Xs.length;i++){var r=this.Xs[i];this.Au(r.Eu,r.Ns,ft.NaviRoadHinderType_HINDER_HIGH)}this.Xs=[],this.Hs=[],this.Qs=[],this.Ks=[]},xu:function(t){if(0<t.length&&(this.su=!0),this.uu=t,this.Cs.clear(),this.Bs.clear(),this.uu){for(var i=0;i<this.uu.length;i++)for(var r=this.uu[i],n=this.Pu(r),e=0;e<n.length;e++){var o=n[e],s=this.Cs.get(o);s||(s=this.Lu(this.Ds.get(o)),this.Cs.set(o,s),this.gu(o),s=this.Cs.get(o)),this.Du(s,r)}var u,a=lt(this.Cs);try{for(a.s();!(u=a.n()).done;){var f=u.value;this.Bs.set(f[0],new Co(f[1]))}}catch(t){a.e(t)}finally{a.f()}}},Du:function(t,i){for(var r=t.Bo(i),n=0;n<r.length;n++){var e,o,s=r[n],u=new x,a=(u.Le(s.road),u.Ae),f=(u.Ae=ft.NaviRoadEntry_FORBID,u.Cu=!0,(t.eo[s.index]=u).Me);1==s.crss.length&&(e=this.Ro(),i.Uo(u.ei)?this.Fu(s.crss[0],e,u.oi,u.ke,a,f,t):this.Fu(u.ei,u.Ee,s.crss[0],e,a,f,t)),2<=s.crss.length&&(e=this.Ro(),o=this.Ro(),this.Fu(u.ei,u.Ee,s.crss[0],e,a,f,t),this.Fu(s.crss[s.crss.length-1],o,u.oi,u.ke,a,f,t))}var h=new Wo;h.Vr=this.Bu(),h.Ti=i.Ti,h.pass=ft.NaviModelPassType_NOT_PASS,t.oo.push(h)},Fu:function(t,i,r,n,e,o,s){t instanceof q?u=t:((u=new q).Vr=i,u.ki=t,s.no.push(u)),r instanceof q?a=r:((a=new q).Vr=n,a.ki=r,s.no.push(a));var u,a,i=new x;i.Vr=this.No(),i.Ee=u.Vr,i.ei=u.ki,i.ke=a.Vr,i.oi=a.ki,i.Ae=e,i.ee=i.De(),i.Me=o,s.eo.push(i)},Bu:function(){return this.Zs--},Gu:function(t){var i={Ns:null};if(1!==this.Ai){var r=this.wu(t),n=this._u(r).Mo(t,-0);if(n&&(i.Ns=n).pass!=ft.NaviModelPassType_NOT_PASS&&(n.pass===ft.NaviModelPassType_PASS_THROUGH||n.pass===ft.NaviModelPassType_PASS_NOT_THROUGH)){if(0<n.He.length)return i;for(var e={},o=[],s=[],u=this._u(r).eo,a=!0,f=0;f<n.Be;f++)for(var h=n.Ti[f],l=n.Ti[f+1],c=0;c<u.length;c++){var v=u[c];1===at.Pt(h,l,v.ei,v.oi,e)&&ft.NaviRoadEntry_FORBID!==v.Ae&&(a=!1,(v={}).x=e.x,v.y=e.y,o.push(v),s.push(u[c]))}if(!a){n.He=[],n.Ke=[],n.Qe=[];for(var y=0;y<o.length;y++){var d=s[y],b=this.Uu(r,o[y],d);b.Vu.push(d.Vr),b.pe=ft.NaviNodeType_COMMON,d.Ae===ft.NaviRoadEntry_BOTH?b.entranceType=ft.NaviEntranceType_ACCESS:at.Et(d.ei,n.Ti,n.Be)?(d.Ae===ft.NaviRoadEntry_FORWARD&&(b.entranceType=ft.NaviEntranceType_EXIT),d.Ae===ft.NaviRoadEntry_BACK&&(b.entranceType=ft.NaviEntranceType_ENTRANCE)):(d.Ae===ft.NaviRoadEntry_FORWARD&&(b.entranceType=ft.NaviEntranceType_ENTRANCE),d.Ae===ft.NaviRoadEntry_BACK&&(b.entranceType=ft.NaviEntranceType_EXIT)),n.He.push(b),n.Ke.push(b.entranceType),n.Qe.push(b.pe)}}}}return i},Zu:function(t){var i,r=null,n=Number.MAX_VALUE,e=lt(t.values());try{for(e.s();!(i=e.n()).done;){var o=i.value;0<o.length&&o[0].Tt<n&&(r=o[0],n=o[0].Tt)}}catch(t){e.e(t)}finally{e.f()}return r},Wu:function(t,i){for(var r=[],n=0;n<i.length;n++){Number.MAX_VALUE;var e=at.Nt(t,i[n].ei,i[n].oi,{});r.push({si:i[n].Vr,ei:i[n].ei,oi:i[n].oi,Tt:e,ui:i[n]})}return r.sort(function(t,i){return t.Tt-i.Tt}),r},qu:function(t,i,r){var n=[],e=[],o=[],s=[],u=[],a=[],f=(a.push(t),a.push(i.ei),a.push(i.oi),[]),h=(f.push(t),1e7/Math.sqrt((i.ei.x-t.x)*(i.ei.x-t.x)+(i.ei.y-t.y)*(i.ei.y-t.y))),h=(f.push({x:t.x+(i.ei.x-t.x)*h,y:t.y+(i.ei.y-t.y)*h}),1e7/Math.sqrt((i.oi.x-t.x)*(i.oi.x-t.x)+(i.oi.y-t.y)*(i.oi.y-t.y)));f.push({x:t.x+(i.oi.x-t.x)*h,y:t.y+(i.oi.y-t.y)*h});for(var l,c,v,y,d,b=0;b<r.length;b++)r[b].si==i.si?(r[b].Tt=at.Nt(t,r[b].ei,r[b].oi,{}),o.push({si:r[b].si,ei:r[b].ei,oi:r[b].oi,Tt:r[b].Tt,ui:r[b].ui})):(d=at.ti(r[b].ei,r[b].oi,a)).isintersect?1==d.type?.01<at.distanceOfTwoPoints(d.start,d.end)&&o.push({si:r[b].si,ei:d.start,oi:d.end,Tt:r[b].Tt,ui:r[b].ui}):2==d.type?("start"==d.outer?(r[b].oi=d.start,r[b].Tt=at.Tt(d.start,t)):"end"==d.outer&&(r[b].ei=d.end,r[b].Tt=at.Tt(d.end,t)),.01<at.distanceOfTwoPoints(d.start,d.end)&&o.push({si:r[b].si,ei:d.start,oi:d.end,Tt:r[b].Tt,ui:r[b].ui}),n.push({si:r[b].si,ei:r[b].ei,oi:r[b].oi,Tt:r[b].Tt,ui:r[b].ui})):3==d.type?("start"==d.outer?(r[b].oi=d.start,r[b].Tt=at.Tt(d.start,t)):"end"==d.outer&&(r[b].ei=d.end,r[b].Tt=at.Tt(d.end,t)),.01<at.distanceOfTwoPoints(d.end,d.start)&&o.push({si:r[b].si,ei:d.start,oi:d.end,Tt:r[b].Tt,ui:r[b].ui}),e.push({si:r[b].si,ei:r[b].ei,oi:r[b].oi,Tt:r[b].Tt,ui:r[b].ui})):4==d.type&&(.01<at.distanceOfTwoPoints(d.start,d.end)&&o.push({si:r[b].si,ei:d.start,oi:d.end,Tt:r[b].Tt,ui:r[b].ui}),at.distanceOfTwoPoints(r[b].ei,d.start)<at.distanceOfTwoPoints(r[b].ei,d.end)?(c={x:d.start.x-t.x,y:d.start.y-t.y},l={x:r[b].ei.x-t.x,y:r[b].ei.y-t.y},0<(c=(c=at.Wt(c,l))<180?c:c-360)?(.01<at.distanceOfTwoPoints(r[b].ei,d.start)&&n.push({si:r[b].si,ei:r[b].ei,oi:d.start,Tt:at.Tt(d.start,t),ui:r[b].ui}),.01<at.distanceOfTwoPoints(r[b].oi,d.end)&&e.push({si:r[b].si,ei:d.end,oi:r[b].oi,Tt:at.Tt(d.end,t),ui:r[b].ui})):(.01<at.distanceOfTwoPoints(r[b].ei,d.start)&&e.push({si:r[b].si,ei:r[b].ei,oi:d.start,Tt:at.Tt(d.start,t),ui:r[b].ui}),.01<at.distanceOfTwoPoints(r[b].oi,d.end)&&n.push({si:r[b].si,ei:d.end,oi:r[b].oi,Tt:at.Tt(d.end,t),ui:r[b].ui}))):(l={x:d.end.x-t.x,y:d.end.y-t.y},c={x:r[b].ei.x-t.x,y:r[b].ei.y-t.y},0<(v=(v=at.Wt(l,c))<180?v:v-360)?(.01<at.distanceOfTwoPoints(r[b].ei,d.end)&&n.push({si:r[b].si,ei:r[b].ei,oi:d.end,Tt:at.Tt(d.end,t),ui:r[b].ui}),.01<at.distanceOfTwoPoints(r[b].oi,d.start)&&e.push({si:r[b].si,ei:d.start,oi:r[b].oi,Tt:at.Tt(d.start,t),ui:r[b].ui})):(.01<at.distanceOfTwoPoints(r[b].ei,d.end)&&e.push({si:r[b].si,ei:r[b].ei,oi:d.end,Tt:at.Tt(d.end,t),ui:r[b].ui}),.01<at.distanceOfTwoPoints(r[b].oi,d.start)&&n.push({si:r[b].si,ei:d.start,oi:r[b].oi,Tt:at.Tt(d.start,t),ui:r[b].ui})))):(v=at.ti(r[b].ei,r[b].oi,f)).isintersect?1==v.type?.01<at.distanceOfTwoPoints(v.start,v.end)&&u.push({si:r[b].si,ei:v.start,oi:v.end,Tt:r[b].Tt,ui:r[b].ui}):2==v.type?("start"==v.outer?(r[b].oi=v.start,r[b].Tt=at.Tt(v.start,t)):"end"==v.outer&&(r[b].ei=v.end,r[b].Tt=at.Tt(v.end,t)),.01<at.distanceOfTwoPoints(v.start,v.end)&&u.push({si:r[b].si,ei:v.start,oi:v.end,Tt:r[b].Tt,ui:r[b].ui}),n.push({si:r[b].si,ei:r[b].ei,oi:r[b].oi,Tt:r[b].Tt,ui:r[b].ui})):3==v.type?("start"==v.outer?(r[b].oi=v.start,r[b].Tt=at.Tt(v.start,t)):"end"==v.outer&&(r[b].ei=v.end,r[b].Tt=at.Tt(v.end,t)),.01<at.distanceOfTwoPoints(v.start,v.end)&&u.push({si:r[b].si,ei:v.start,oi:v.end,Tt:r[b].Tt,ui:r[b].ui}),e.push({si:r[b].si,ei:r[b].ei,oi:r[b].oi,Tt:r[b].Tt,ui:r[b].ui})):4==v.type&&(.01<at.distanceOfTwoPoints(v.start,v.end)&&u.push({si:r[b].si,ei:v.start,oi:v.end,Tt:r[b].Tt,ui:r[b].ui}),at.distanceOfTwoPoints(r[b].ei,v.start)<at.distanceOfTwoPoints(r[b].ei,v.end)?(d={x:v.start.x-t.x,y:v.start.y-t.y},y={x:r[b].ei.x-t.x,y:r[b].ei.y-t.y},0<(d=(d=at.Wt(d,y))<180?d:d-360)?(.01<at.distanceOfTwoPoints(r[b].ei,v.start)&&n.push({si:r[b].si,ei:r[b].ei,oi:v.start,Tt:at.Tt(v.start,t),ui:r[b].ui}),.01<at.distanceOfTwoPoints(r[b].oi,v.end)&&e.push({si:r[b].si,ei:v.end,oi:r[b].oi,Tt:at.Tt(v.end,t),ui:r[b].ui})):(.01<at.distanceOfTwoPoints(r[b].ei,v.start)&&e.push({si:r[b].si,ei:r[b].ei,oi:v.start,Tt:at.Tt(v.start,t),ui:r[b].ui}),.01<at.distanceOfTwoPoints(r[b].oi,v.end)&&n.push({si:r[b].si,ei:v.end,oi:r[b].oi,Tt:at.Tt(v.end,t),ui:r[b].ui}))):(y={x:v.end.x-t.x,y:v.end.y-t.y},d={x:r[b].ei.x-t.x,y:r[b].ei.y-t.y},0<(d=(d=at.Wt(y,d))<180?d:d-360)?(.01<at.distanceOfTwoPoints(r[b].ei,v.end)&&n.push({si:r[b].si,ei:r[b].ei,oi:v.end,Tt:at.Tt(v.end,t),ui:r[b].ui}),.01<at.distanceOfTwoPoints(r[b].oi,v.start)&&e.push({si:r[b].si,ei:v.start,oi:r[b].oi,Tt:at.Tt(v.start,t),ui:r[b].ui})):(.01<at.distanceOfTwoPoints(r[b].ei,v.end)&&e.push({si:r[b].si,ei:r[b].ei,oi:v.end,Tt:at.Tt(v.end,t),ui:r[b].ui}),.01<at.distanceOfTwoPoints(r[b].oi,v.start)&&n.push({si:r[b].si,ei:v.start,oi:r[b].oi,Tt:at.Tt(v.start,t),ui:r[b].ui})))):s.push({si:r[b].si,ei:r[b].ei,oi:r[b].oi,Tt:r[b].Tt,ui:r[b].ui});return{left:n,right:e,inside:o,invalid:u,other:s}},gu:function(t){var i=null;if(this.su){if(void 0===(i=this.Cs.get(t)))return}else i=this.Ds.get(t);var r,n=lt(i.ho.keys());try{for(n.s();!(r=n.n()).done;){var e=r.value;e<0&&i.ho.delete(e)}}catch(t){n.e(t)}finally{n.f()}var o,s=lt(i.vo.keys());try{for(s.s();!(o=s.n()).done;){var u=o.value;u<0&&i.vo.delete(u)}}catch(t){s.e(t)}finally{s.f()}var a,f=lt(i.yo.keys());try{for(f.s();!(a=f.n()).done;){var h=a.value;h<0&&i.yo.delete(h)}}catch(t){f.e(t)}finally{f.f()}for(var l=[],c=0;c<i.no.length&&0<i.no[c].Vr;c++)l.push(i.no[c]);i.no=l;for(var v=[],y=0;y<i.eo.length&&0<i.eo[y].Vr;y++)v.push(i.eo[y]);i.eo=v,(this.su?(this.Cs.delete(t),this.Cs):(this.Ds.delete(t),this.Ds)).set(t,i)},Yu:function(t,D){Number.MAX_VALUE;for(var i=this.Wu(t,D.eo),r=[],n=[],e=i[0],o=[],s=0;s<i.length;s++){if(i[s].Tt<.01)return o.push(i[s]),o;if(!(i[s].si<0)){e=i[s],i.splice(0,s);break}}var u=0,C=0,a={x:null,y:null};at.Ct(t,e.ei,e.oi,a)||(a=at.Tt(t,e.ei)<=at.Tt(t,e.oi)?e.ei:e.oi);for(var f,h,l=0;l<i.length;l++)i[l].si<0||(f=i[l].ei,h=i[l].oi,f=(f=at.Wt({x:a.x-t.x,y:a.y-t.y},{x:f.x-t.x,y:f.y-t.y}))<180?f:f-360,h=(h=at.Wt({x:a.x-t.x,y:a.y-t.y},{x:h.x-t.x,y:h.y-t.y}))<180?h:h-360,(0<f&&0<h?r:(f<0&&h<0||r.push(i[l]),n)).push(i[l]));for(var c=[],v=[];;){var y=this.qu(t,e,r);if(y.inside&&0<y.inside.length){y.inside.sort(function(t,i){return t.Tt-i.Tt});for(var d=0;d<y.inside.length;d++){for(var b,p,m,w,F=[],g=0;g<y.inside.length;g++)d==g||y.inside[g].remain&&0===y.inside[g].remain.length||((b=[]).push(t),b.push(y.inside[d].ei),b.push(y.inside[d].oi),at.ti(y.inside[g].ei,y.inside[g].oi,b).isintersect&&y.inside[g].Tt<y.inside[d].Tt&&(b=(y.inside[g].ei.x-t.x)/Math.sqrt((y.inside[g].ei.x-t.x)*(y.inside[g].ei.x-t.x)+(y.inside[g].ei.y-t.y)*(y.inside[g].ei.y-t.y))*1e7,m=(y.inside[g].ei.y-t.y)/Math.sqrt((y.inside[g].ei.x-t.x)*(y.inside[g].ei.x-t.x)+(y.inside[g].ei.y-t.y)*(y.inside[g].ei.y-t.y))*1e7,b={x:t.x+b,y:t.y+m},m=(y.inside[g].oi.x-t.x)/Math.sqrt((y.inside[g].oi.x-t.x)*(y.inside[g].oi.x-t.x)+(y.inside[g].oi.y-t.y)*(y.inside[g].oi.y-t.y))*1e7,p=(y.inside[g].oi.y-t.y)/Math.sqrt((y.inside[g].oi.x-t.x)*(y.inside[g].oi.x-t.x)+(y.inside[g].oi.y-t.y)*(y.inside[g].oi.y-t.y))*1e7,m={x:t.x+m,y:t.y+p},p={x:null,y:null},at.Pt(t,b,y.inside[d].ei,y.inside[d].oi,b={x:null,y:null}),at.Pt(t,m,y.inside[d].ei,y.inside[d].oi,p),b.x)&&b.y&&p.x&&p.y&&(m=at.distanceOfTwoPoints(b,y.inside[d].ei),w=at.distanceOfTwoPoints(p,y.inside[d].ei),F.push({si:y.inside[d].si,ei:m<w?b:p,oi:m<w?p:b,Tt:y.inside[d].Tt,ui:y.inside[d].ui})));var B=at.ri(y.inside[d],F);y.inside[d].remain=B,c.push.apply(c,ht(B))}}if(r=[],e=null,!(y.left&&0<y.left.length))break;y.left.sort(function(t,i){return t.Tt-i.Tt});for(var _=0;_<y.left.length;_++){var j={x:y.left[_].ei.x-t.x,y:y.left[_].ei.y-t.y},S={x:y.left[_].oi.x-t.x,y:y.left[_].oi.y-t.y},O={x:a.x-t.x,y:a.y-t.y},j=at.Wt(O,j),O=at.Wt(O,S),S=(O=O<180?O:O-360)<(j=j<180?j:j-360)?j:O;if(u<S){e=y.left[_],u=S;break}}if(!e)break;r.push.apply(r,ht(y.left)),r.push.apply(r,ht(y.other))}for(e=i[0];;){var E=this.qu(t,e,n);if(E.inside&&0<E.inside.length){E.inside.sort(function(t,i){return t.Tt-i.Tt});for(var k=0;k<E.inside.length;k++){for(var T,M,R,N,G=[],I=0;I<E.inside.length;I++)k==I||E.inside[I].remain&&0===E.inside[I].remain.length||((T=[]).push(t),T.push(E.inside[k].ei),T.push(E.inside[k].oi),at.ti(E.inside[I].ei,E.inside[I].oi,T).isintersect&&E.inside[I].Tt<E.inside[k].Tt&&(T=(E.inside[I].ei.x-t.x)/Math.sqrt((E.inside[I].ei.x-t.x)*(E.inside[I].ei.x-t.x)+(E.inside[I].ei.y-t.y)*(E.inside[I].ei.y-t.y))*1e7,R=(E.inside[I].ei.y-t.y)/Math.sqrt((E.inside[I].ei.x-t.x)*(E.inside[I].ei.x-t.x)+(E.inside[I].ei.y-t.y)*(E.inside[I].ei.y-t.y))*1e7,T={x:t.x+T,y:t.y+R},R=(E.inside[I].oi.x-t.x)/Math.sqrt((E.inside[I].oi.x-t.x)*(E.inside[I].oi.x-t.x)+(E.inside[I].oi.y-t.y)*(E.inside[I].oi.y-t.y))*1e7,M=(E.inside[I].oi.y-t.y)/Math.sqrt((E.inside[I].oi.x-t.x)*(E.inside[I].oi.x-t.x)+(E.inside[I].oi.y-t.y)*(E.inside[I].oi.y-t.y))*1e7,R={x:t.x+R,y:t.y+M},M={x:null,y:null},at.Pt(t,T,E.inside[k].ei,E.inside[k].oi,T={x:null,y:null}),at.Pt(t,R,E.inside[k].ei,E.inside[k].oi,M),T.x)&&T.y&&M.x&&M.y&&(R=at.distanceOfTwoPoints(T,E.inside[k].ei),N=at.distanceOfTwoPoints(M,E.inside[k].ei),G.push({si:E.inside[k].si,ei:R<N?T:M,oi:R<N?M:T,Tt:E.inside[k].Tt,ui:E.inside[k].ui})));var U=at.ri(E.inside[k],G);E.inside[k].remain=U,v.push.apply(v,ht(U))}}if(n=[],e=null,!(E.right&&0<E.right.length))break;E.right.sort(function(t,i){return t.Tt-i.Tt});for(var A=0;A<E.right.length;A++){var x={x:E.right[A].ei.x-t.x,y:E.right[A].ei.y-t.y},P={x:E.right[A].oi.x-t.x,y:E.right[A].oi.y-t.y},L={x:a.x-t.x,y:a.y-t.y},x=at.Wt(L,x),L=at.Wt(L,P),P=(x=x<180?x:x-360)<(L=L<180?L:L-360)?x:L;if(P<C){e=E.right[A],C=P;break}}if(!e)break;n.push.apply(n,ht(E.right)),n.push.apply(n,ht(E.other))}return c.push.apply(c,v),o.push.apply(o,c),o},zu:function(t,i,r,n,e){for(var o=0;o<r.eo.length;o++){var s=r.eo[o];if(!(s.Vr==n.Vr||s.Vr<0)){var u=at.Pt(t,i,s.ei,s.oi,{});if(u&&.01<at.distanceOfTwoPoints(i,s.ei)&&.01<at.distanceOfTwoPoints(i,s.oi))return{isValid:!1,model:null,extent:null,road:s}}}if(1!=this.Ai)for(var a={},f=0;f<r.oo.length;f++){var h=r.oo[f];if(null!=h&&h!=e&&(ft.NaviModelPassType_DECORATE!=h.pass&&(null==e||e.pass==ft.NaviModelPassType_DECORATE||!at.Et(e._i,h.Ti,h.Ti.length-1))))for(var l=h.Ti.length,c=0;c<l-1;c++){var v=at.Pt(t,i,h.Ti[c],h.Ti[c+1],a);if(v&&!(at.distanceOfTwoPoints(t,a)<.01))return{isValid:!1,model:h,extent:null,road:null}}}for(var y={},d=r.so,b=0;b<d.length;b++){for(var p=d[b],m=d[b].Xe,w=0;w<m.length;w++)for(var g=m[w],_=0;_<g.length-1;_++)if(at.Pt(t,i,g[_],g[_+1],y))return{isValid:!1,model:null,extent:p,road:null};for(var j=d[b].Ti,S=0;S<j.length-1;S++)if(at.Pt(t,i,j[S],j[S+1],y))return{isValid:!1,model:null,extent:p,road:null}}return{isValid:!0,model:null,extent:null,road:null}},Xu:function(s,t,i,r,u,n,e,o){for(var a={ei:u.ui.ei,oi:u.ui.oi,Vr:u.ui.Vr},f={ei:u.ui.ei,oi:u.ui.oi,Vr:u.ui.Vr},h=Object.assign({},i),l=Object.assign({},i),c=!1,v=!1,y=r.model,d=r.model;;){var b=[{x:y.bi.li.x,y:y.bi.li.y},{x:y.bi.li.x,y:y.bi.ci.y},{x:y.bi.ci.x,y:y.bi.ci.y},{x:y.bi.ci.x,y:y.bi.li.y}],b=(b.sort(function(t,i){var r=at.ai(s,t,1e4),n={x:null,y:null},e=at.ai(s,i,1e4),o={x:null,y:null};return at.Pt(r,s,a.ei,a.oi,n)&&at.Pt(e,s,a.ei,a.oi,o)?at.Mt(n,u.ui.ei)-at.Mt(o,u.ui.ei):at.Rt(t,u.ui.ei,u.ui.oi)-at.Rt(i,u.ui.ei,u.ui.oi)}),{x:b[0].x-s.x,y:b[0].y-s.y}),p=Math.sqrt(b.x*b.x+b.y*b.y),m=[{x:d.bi.li.x,y:d.bi.li.y},{x:d.bi.li.x,y:d.bi.ci.y},{x:d.bi.ci.x,y:d.bi.ci.y},{x:d.bi.ci.x,y:d.bi.li.y}],m=(m.sort(function(t,i){var r=at.ai(s,t,1e4),n={x:null,y:null},e=at.ai(s,i,1e4),o={x:null,y:null};return at.Pt(r,s,f.ei,f.oi,n)&&at.Pt(e,s,f.ei,f.oi,o)?at.Mt(n,u.ui.oi)-at.Mt(o,u.ui.oi):at.Rt(t,u.ui.ei,u.ui.oi)-at.Rt(i,u.ui.ei,u.ui.oi)}),{x:m[0].x-s.x,y:m[0].y-s.y}),w=Math.sqrt(m.x*m.x+m.y*m.y),b={x:s.x+b.x/p*1e4,y:s.y+b.y/p*1e4},p={x:s.x+m.x/w*1e4,y:s.y+m.y/w*1e4},m=!0,w=!0;if(!c)if(at.Pt(b,s,a.ei,a.oi,h)){var b=a.ei.x-h.x,g=a.ei.y-h.y,_=Math.sqrt(b*b+g*g),b=(h.x=h.x+b/_*.5,h.y=h.y+g/_*.5,{isValid:!1,model:null,extent:null,road:null});if((b=null!=t&&t.pass==ft.NaviModelPassType_PASS_THROUGH&&0==t.He.length?this.zu(s,h,n,u.ui,t):this.zu(s,h,n,u.ui)).isValid){h.Tt=Number.MAX_VALUE;g={dt:h,ui:u.ui,Tt:e.Tt};if(o.has(u.si)){for(var j=o.get(u.si),S=!1,O=0;O<j.length;O++)if(at.distanceOfTwoPoints(j[O].dt,i)<.01){S=!0;break}S||o.get(u.si).push(g)}else o.set(u.si,[g]);c=!0}else b.model&&1<at.Tt(h,a.ei)?(a.oi=Object.assign({},h),y=b.model):m=!1}else m=!1;if(!v)if(at.Pt(p,s,f.ei,f.oi,l)){_=f.oi.x-l.x,g=f.oi.y-l.y,b=Math.sqrt(_*_+g*g),p=(l.x=l.x+_/b*.5,l.y=l.y+g/b*.5,{isValid:!1,model:null,extent:null,road:null});if((p=null!=t&&t.pass==ft.NaviModelPassType_PASS_THROUGH&&0==t.He.length?this.zu(s,l,n,u.ui,t):this.zu(s,l,n,u.ui)).isValid){l.Tt=Number.MAX_VALUE;b={dt:l,ui:u.ui,Tt:e.Tt};if(o.has(u.si)){for(var E=o.get(u.si),k=!1,T=0;T<E.length;T++)if(at.distanceOfTwoPoints(E[T].dt,i)<.01){k=!0;break}k||o.get(u.si).push(b)}else o.set(u.si,[b]);v=!0}else p.model&&1<at.Tt(l,f.oi)?(f.ei=Object.assign({},l),d=p.model):w=!1}else w=!1;if(c&&v)break;if(!m&&!w)break;if(c&&!w)break;if(v&&!m)break}},Hu:function(t,i){for(var r=this._u(this.Us),n=new Map,e=0;e<i.length;e++){var o=!0,s=new Xo,u=at.Qt(i[e].ei,i[e].oi,t),a=(at.bt(t,u,i[e].ei,i[e].oi).isintersect||(u=at.Tt(t,i[e].ei)<=at.Tt(t,i[e].oi)?i[e].ei:i[e].oi),s.dt=Object.assign({},u),s.ui=Object.assign({},r.eo[r.Fo(i[e].Vr)]),at.Tt(t,u));if(1!=this.Ai)for(var f=0;f<r.oo.length;f++){var h=r.oo[f];if(null!=h&&h!=obstruct&&(ft.NaviModelPassType_DECORATE!=h.pass&&(null==obstruct||obstruct.pass==ft.NaviModelPassType_DECORATE||!at.Et(obstruct._i,h.Ti,h.Ti.length-1))))for(var l=h.Ti.length,c=0;c<l-1;c++){var v=at.bt(t,u,h.Ti[c],h.Ti[c+1]);v.isintersect&&(v=at.Tt(t,v.point))<a&&(a=v,s.Ns=h,s.Tt=Number.MAX_VALUE,s.Is=!1,s.As=ft.NaviObstructType_MODEL,o=!1)}}for(var y,d=r.so,b=0;b<d.length;b++){for(var p=d[b],m=d[b].Xe,w=0;w<m.length;w++)for(var g=m[w],_=0;_<g.length-1;_++){var j=at.Lt(t,u,g[_],g[_+1]);j.isintersect&&(j=at.Tt(t,j.point))<a&&(a=j,s.Ns=p,s.Tt=Number.MAX_VALUE,s.Is=!1,s.As=ft.NaviObstructType_EXTENT,o=!1)}for(var S=d[b].Ti,O=0;O<S.length-1;O++){var E=at.Lt(t,u,S[O],S[O+1]);E.isintersect&&(E=at.Tt(t,E.point))<a&&(a=E,s.Ns=p,s.Tt=Number.MAX_VALUE,s.Is=!1,s.As=ft.NaviObstructType_EXTENT,o=!1)}}o&&((y=n.get(s.ui.Vr))?y.push(s):((y=[]).push(s),n.set(s.ui.Vr,y)))}},ju:function(t,i){for(var r,n=0;n<this.uu.length;n++)if(at.Et(t,this.uu[n].Ti,this.uu[n].Qu))return ut.ROUTE_FAILED_NO_DEST_ARRIVAL;if(1===this.Ai)return(r=this.Ku(t,i)).road?(r=this.Ju(this.Us,r.coords,r.road),this.ns=r,void(t.process||(t.process=!0,t.tmpNode=this.ns))):ut.ROUTE_FAILED_NO_START_ARRIVAL;for(var e=this.Yu(t,i),o=new Map,s=0;s<e.length;s++){var u={x:null,y:null},a=e[s],f=(at.Ct(t,a.ei,a.oi,u)?u.Tt=0:(at.distanceOfTwoPoints(t,a.ei)<at.distanceOfTwoPoints(t,a.oi)?(u.x=a.ei.x,u.y=a.ei.y):(u.x=a.oi.x,u.y=a.oi.y),f=at.Ct(t,a.ui.ei,a.ui.oi,h={x:null,y:null}),u.Tt=f?at.Tt(u,h):Number.MAX_VALUE),at.distanceOfTwoPoints(u,a.ui.ei)<.001?(u.id=a.ui.Ee,u.newNode=!1):at.distanceOfTwoPoints(u,a.ui.oi)<.001?(u.id=a.ui.ke,u.newNode=!1):u.newNode=!0,{isValid:!1,model:null,extent:null,road:null});if((f=null!=this.xs&&this.xs.pass==ft.NaviModelPassType_PASS_THROUGH&&0==this.xs.He.length?this.zu(t,u,i,a.ui,this.xs):this.zu(t,u,i,a.ui)).isValid){var h={dt:u,ui:a.ui,Tt:e[s].Tt};if(o.has(a.si)){for(var D=o.get(a.si),C=!1,l=0;l<D.length;l++)if(at.distanceOfTwoPoints(D[l].dt,u)<.01){C=!0;break}C||o.get(a.si).push(h)}else o.set(a.si,[h])}else f.model&&this.Xu(t,this.xs,u,f,a,i,e[s],o)}var F,c=!0,v=(this.ns=this.Ru(this.Us,t),null==this.xs&&(c=!1),new Map),B=new Map,y=lt(o);try{for(y.s();!(F=y.n()).done;){var G,d=F.value,U=!1,b=lt(d[1]);try{for(b.s();!(G=b.n()).done;){var p=G.value;if(p.dt.newNode&&p.dt.Tt<.01){v.set(d[0],[p]),U=!0;break}}}catch(t){b.e(t)}finally{b.f()}U||B.set(d[0],d[1])}}catch(t){y.e(t)}finally{y.f()}if(null!=(o=0<v.size?v:B)&&0<o.size){var V,c=!1,m=lt(o);try{for(m.s();!(V=m.n()).done;)for(var Z=V.value[1],w=0;w<Z.length;w++)0!=Z[w].ui.Ae&&(c=!0)}catch(t){m.e(t)}finally{m.f()}var W,g=lt(o);try{for(g.s();!(W=g.n()).done;){var _=W.value[1];_.sort(function(t,i){return t.dt.Tt-i.dt.Tt}),_[0].ui;if(_[0].dt.Tt==Number.MAX_VALUE){var q,j=lt(_);try{for(j.s();!(q=j.n()).done;){var S=q.value,Y=this.Ju(this.Us,S.dt,S.ui);this.$u(this.Us,this.ns,Y,S.ui.Ae)}}catch(t){j.e(t)}finally{j.f()}}else{var z=this.Ju(this.Us,_[0].dt,_[0].ui);this.$u(this.Us,this.ns,z,_[0].ui.Ae)}}}catch(t){g.e(t)}finally{g.f()}}if(c&&null!=this.xs&&this.xs.He&&0<this.xs.He.length)for(var O=null,E=this._u(this.Us),k=0;k<this.xs.He.length;k++){var O=this.xs.He[k],X=this.xs.Ke[k];if(X==ft.NaviEntranceType_EXIT||X==ft.NaviEntranceType_ACCESS){for(var H=this.xs.Xe,T=!0,M=0;M<H.length;M++){for(var Q=H[M],R=0;R<Q.length-1;R++)if(at._t(t,O.ki,Q[R],Q[R+1])){T=!1;break}if(0==T)break}var N=[];this.Ys&&this.Ys.get(this.Us)&&N.push.apply(N,ht(this.Ys.get(this.Us))),this.qs&&this.qs.get(this.Us)&&N.push.apply(N,ht(this.qs.get(this.Us)));for(var K=0;K<N.length;K++){for(var J=N[K],$=J.Ti.length,tt={},I=0;I<$-1;I++){var it=at.Pt(t,O.ki,J.Ti[I],J.Ti[I+1],tt);if(it&&!(at.distanceOfTwoPoints(O.ki,tt)<.01)){T=!1;break}}if(!T)break}for(var rt=0;rt<E.oo.length;rt++){var nt={},A=E.oo[rt],x=this.xs;if(null!=A&&A!=x&&!(ft.NaviModelPassType_DECORATE==A.pass||null!=x&&x.pass!=ft.NaviModelPassType_DECORATE&&at.Et(x._i,A.Ti,A.Ti.length-1)&&at.Et(O.ki,A.Ti,A.Ti.length-1)))for(var et=A.Ti.length,P=0;P<et-1;P++){var ot=at.Pt(t,O.ki,A.Ti[P],A.Ti[P+1],nt);if(ot&&!(at.distanceOfTwoPoints(O.ki,nt)<.01)){T=!1;break}}}if(0!=T){for(var st=0;st<E.eo.length;st++){var L=E.eo[st];if(0!=L.Ae)if(at._t(t,O.ki,L.ei,L.oi)&&0<L.Vr&&0==O.Vu.includes(L.Vr)){T=!1;break}}0!=T&&this.$u(this.Us,this.ns,O)}}}t.process||(t.process=!0,t.tmpNode=this.ns)},Su:function(t,i){for(var r,n=0;n<this.uu.length;n++)if(at.Et(t,this.uu[n].Ti,this.uu[n].Qu))return ut.ROUTE_FAILED_NO_DEST_ARRIVAL;if(1===this.Ai)return(r=this.Ku(t,i)).road?(r=this.Ju(this.Vs,r.coords,r.road),t.du&&(r.du=t.du,r.ta=Object.assign({},t)),this.es=r,void(t.process||(t.process=!0,t.tmpNode=this.es))):ut.ROUTE_FAILED_NO_DEST_ARRIVAL;for(var e=this.Yu(t,i),o=new Map,s=0;s<e.length;s++){var u={x:null,y:null},a=e[s],f=(at.Ct(t,a.ei,a.oi,u)?u.Tt=0:(at.distanceOfTwoPoints(t,a.ei)<at.distanceOfTwoPoints(t,a.oi)?(u.x=a.ei.x,u.y=a.ei.y):(u.x=a.oi.x,u.y=a.oi.y),f=at.Ct(t,a.ui.ei,a.ui.oi,h={x:null,y:null}),u.Tt=f?at.Tt(u,h):Number.MAX_VALUE),at.distanceOfTwoPoints(u,a.ui.ei)<.001?(u.id=a.ui.Ee,u.newNode=!1):at.distanceOfTwoPoints(u,a.ui.oi)<.001?(u.id=a.ui.ke,u.newNode=!1):u.newNode=!0,{isValid:!1,model:null,extent:null,road:null});if((f=null!=this.Ps&&this.Ps.pass==ft.NaviModelPassType_PASS_THROUGH&&0==this.Ps.He.length?this.zu(t,u,i,a.ui,this.Ps):this.zu(t,u,i,a.ui)).isValid){var h={dt:u,ui:a.ui};if(o.has(a.si)){for(var D=o.get(a.si),C=!1,l=0;l<D.length;l++)if(at.distanceOfTwoPoints(D[l].dt,u)<.01){C=!0;break}C||o.get(a.si).push(h)}else o.set(a.si,[h])}else f.model&&this.Xu(t,this.Ps,u,f,a,i,e[s],o)}var F,c=!0,v=(this.es=this.Ru(this.Vs,t),t.du&&(this.es.du=t.du,this.es.ta=Object.assign({},t)),null==this.Ps&&(c=!1),new Map),B=new Map,y=lt(o);try{for(y.s();!(F=y.n()).done;){var G,d=F.value,U=!1,b=lt(d[1]);try{for(b.s();!(G=b.n()).done;){var p=G.value;if(p.dt.newNode&&p.dt.Tt<.01){v.set(d[0],[p]),U=!0;break}}}catch(t){b.e(t)}finally{b.f()}U||B.set(d[0],d[1])}}catch(t){y.e(t)}finally{y.f()}if(null!=(o=0<v.size?v:B)&&0<o.size){var V,c=!1,m=lt(o);try{for(m.s();!(V=m.n()).done;)for(var Z=V.value[1],w=0;w<Z.length;w++)0!=Z[w].ui.Ae&&(c=!0)}catch(t){m.e(t)}finally{m.f()}var W,g=lt(o);try{for(g.s();!(W=g.n()).done;){var _=W.value[1];_.sort(function(t,i){return t.dt.Tt-i.dt.Tt}),_[0].ui;if(_[0].dt.Tt==Number.MAX_VALUE){var q,j=lt(_);try{for(j.s();!(q=j.n()).done;){var S=q.value,Y=this.Ju(this.Vs,S.dt,S.ui);this.$u(this.Vs,this.es,Y,S.ui.Ae)}}catch(t){j.e(t)}finally{j.f()}}else{var z=this.Ju(this.Vs,_[0].dt,_[0].ui);this.$u(this.Vs,this.es,z,_[0].ui.Ae)}}}catch(t){g.e(t)}finally{g.f()}}if(c&&null!=this.Ps&&this.Ps.He&&0<this.Ps.He.length)for(var O=null,E=this._u(this.Vs),k=0;k<this.Ps.He.length;k++){var O=this.Ps.He[k],X=this.Ps.Ke[k];if(X==ft.NaviEntranceType_ENTRANCE||X==ft.NaviEntranceType_ACCESS){for(var H=this.Ps.Xe,T=!0,M=0;M<H.length;M++){for(var Q=H[M],R=0;R<Q.length-1;R++)if(at._t(t,O.ki,Q[R],Q[R+1])){T=!1;break}if(0==T)break}var N=[];this.Ys&&this.Ys.get(this.Vs)&&N.push.apply(N,ht(this.Ys.get(this.Vs))),this.qs&&this.qs.get(this.Vs)&&N.push.apply(N,ht(this.qs.get(this.Vs)));for(var K=0;K<N.length;K++){for(var J=N[K],$=J.Ti.length,tt={},I=0;I<$-1;I++){var it=at.Pt(t,O.ki,J.Ti[I],J.Ti[I+1],tt);if(it&&!(at.distanceOfTwoPoints(O.ki,tt)<.01)){T=!1;break}}if(!T)break}if(0!=T){for(var rt=0;rt<E.eo.length;rt++){var A=E.eo[rt];if(0!=A.Ae)if(at._t(t,O.ki,A.ei,A.oi)&&0<A.Vr&&0==O.Vu.includes(A.Vr)){T=!1;break}}for(var nt=0;nt<E.oo.length;nt++){var et={},x=E.oo[nt],P=this.Ps;if(null!=x&&x!=P&&!(ft.NaviModelPassType_DECORATE==x.pass||null!=P&&P.pass!=ft.NaviModelPassType_DECORATE&&at.Et(P._i,x.Ti,x.Ti.length-1)&&at.Et(O.ki,x.Ti,x.Ti.length-1)))for(var ot=x.Ti.length,L=0;L<ot-1;L++){var st=at.Pt(t,O.ki,x.Ti[L],x.Ti[L+1],et);if(st&&!(at.distanceOfTwoPoints(O.ki,et)<.01)){T=!1;break}}}0!=T&&this.$u(this.Vs,this.es,O)}}}t.process||(t.process=!0,t.tmpNode=this.es)},bu:function(t,i,r){var n,e,o=this,s=(t instanceof Array&&2==t.length&&(t={x:t[0],y:t[1]}),null),u=!0,D=this.wu(t),a=this.rs.Vo(t),f=this.rs.Zo(t),s=null!=a&&a.pass==ft.NaviModelPassType_PASS_THROUGH&&0==a.He.length?this.ia(f,t,30,a):this.ia(f,t);if(1===this.Ai)return(h=this.Zu(s))?(n=h.ui,e=null,(e=0==(n=this.ra(f,t,n,[h],a)).length?this.Ju(f,h.dt,h.ui):this.Ju(f,n[0].dt,n[0].ui)).du=void 0!==r&&r,r&&(Object.assign(t,e.ki),e.ki=t),Object.assign(i,e),!0):void 0;var h=this.Ru(f,t);if(h.du=void 0!==r&&r,Object.assign(i,h),null==a&&(u=!1),0<s.size){var l,u=!1,c=lt(s);try{for(c.s();!(l=c.n()).done;)for(var v=l.value[1],y=0;y<v.length;y++)0!=v[y].ui.Ae&&(u=!0)}catch(t){c.e(t)}finally{c.f()}var d,b=!1,p=[],m=lt(s);try{for(m.s();!(d=m.n()).done;){var w,g=d.value[1],C=g[0].ui,_=this.ra(f,t,C,g,a);if(0==_.length){var j,S=lt(g);try{for(S.s();!(j=S.n()).done;){var O=j.value,F=this.Ju(f,O.dt,O.ui);this.$u(f,i,F)}}catch(t){S.e(t)}finally{S.f()}}else Math.abs(_[0].na)>at.ft()?p.push.apply(p,ht(_)):(b=!0,w=this.Ju(f,_[0].dt,_[0].ui),this.$u(f,i,w))}}catch(t){m.e(t)}finally{m.f()}b||p.forEach(function(t){t=o.Ju(f,t.dt,t.ui);o.$u(f,i,t)})}if(a&&a.pass!=ft.NaviModelPassType_NOT_PASS){if(a.pass===ft.NaviModelPassType_PASS_THROUGH||a.pass===ft.NaviModelPassType_PASS_NOT_THROUGH){for(var E={},k=[],T=[],M=this.rs.eo,B=!0,R=0;R<a.Be;R++)for(var G=a.Ti[R],U=a.Ti[R+1],N=0;N<M.length;N++){var I=M[N];1===at.Pt(G,U,I.ei,I.oi,E)&&ft.NaviRoadEntry_FORBID!==I.Ae&&(B=!1,(I={}).x=E.x,I.y=E.y,k.push(I),T.push(M[N]))}if(!B){a.He=[],a.Ke=[],a.Qe=[];for(var A=0;A<k.length;A++){var x=T[A],P=this.Uu(D,k[A],x);P.Vu.push(x.Vr),P.pe=ft.NaviNodeType_COMMON,x.Ae===ft.NaviRoadEntry_BOTH?P.entranceType=ft.NaviEntranceType_ACCESS:at.Et(x.ei,a.Ti,a.Be)?(x.Ae===ft.NaviRoadEntry_FORWARD&&(P.entranceType=ft.NaviEntranceType_EXIT),x.Ae===ft.NaviRoadEntry_BACK&&(P.entranceType=ft.NaviEntranceType_ENTRANCE)):(x.Ae===ft.NaviRoadEntry_FORWARD&&(P.entranceType=ft.NaviEntranceType_ENTRANCE),x.Ae===ft.NaviRoadEntry_BACK&&(P.entranceType=ft.NaviEntranceType_EXIT)),a.He.push(P),a.Ke.push(P.entranceType),a.Qe.push(P.pe)}}}if(u&&null!=a&&a.He&&0<a.He.length){for(var V=!1,L=0;L<a.He.length;L++){var Z=a.He[L],W=a.Ke[L];W!=ft.NaviEntranceType_EXIT&&W!=ft.NaviEntranceType_ACCESS||(this.$u(f,i,Z),V=!0)}if(!V)return!1}return!0}},Ou:function(){var t=this.ea(this.ns.ki),t=(t&&(this.Au(this.Us,t,ft.NaviRoadHinderType_HINDER_GENERAL),this.Xs.push({Eu:this.Us,Ns:t})),this.ea(this.es.ki));if(t&&(this.Au(this.Vs,t,ft.NaviRoadHinderType_HINDER_GENERAL),this.Xs.push({Eu:this.Vs,Ns:t})),this.Gs=[],this.Us===this.Vs){var t=this.oa(this.Us),i=(t.ys=this.ys,t.ps(this.ns,this.es,this.hs));if(i!==ut.ROUTE_SUCCESS)return i;i=t.Ss();this.Gs=[],i.reverse(),(t=this.Gs).push.apply(t,ht(i))}else{if(-1!==this.Us&&-1===this.Vs){var t=this.sa(this.ns.ki,this.Us,ft.NaviEntranceType_EXIT),i=this.Fs.get(this.Us),r=(i.ys=this.ys,i.ps(this.ns,t,this.hs));if(r!=ut.ROUTE_SUCCESS)return r;var n=i.Ss(n),i=this._contain_zoneIdDijkstras.get(-1);if(i.ys=this.ys,(r=i.ps(t,this.es,this.hs))!=ut.ROUTE_SUCCESS)return r;t=i.Ss();n.reverse(),t.reverse(),(r=this.Gs).push.apply(r,ht(n)),(i=this.Gs).push.apply(i,ht(t))}if(-1===this.Us&&-1!==this.Vs){var r=this.sa(this.es.ki,this.Vs,ft.NaviEntranceType_ENTRANCE),n=this.Fs.get(this.Vs),i=(n.ys=this.ys,n.ps(r,this.es,this.hs));if(i!=ut.ROUTE_SUCCESS)return i;t=n.Ss(),n=this.Fs.get(-1);if(n.ys=this.ys,(i=n.ps(this.ns,r,this.hs))!=ut.ROUTE_SUCCESS)return i;r=n.Ss();r.reverse(),t.reverse(),(i=this.Gs).push.apply(i,ht(r)),(n=this.Gs).push.apply(n,ht(t))}if(-1!==this.Us&&-1!==this.Vs){i=this.sa(this.ns.ki,this.Us,ft.NaviEntranceType_EXIT),r=this.Fs.get(this.Us),n=(r.ys=this.ys,r.ps(this.ns,i,this.hs));if(n!=ut.ROUTE_SUCCESS)return n;var e=r.Ss(e),t=this.sa(this.es.ki,this.Vs,ft.NaviEntranceType_ENTRANCE),r=this.Fs(this.Vs);if(r.ys=this.ys,(n=r.ps(t,this.es,this.hs))!=ut.ROUTE_SUCCESS)return n;var o=r.Ss(o),r=this.Fs(-1);if(r.ys=this.ys,(n=r.ps(i,t,this.hs))!=ut.ROUTE_SUCCESS)return n;i=r.Ss();e.reverse(),i.reverse(),o.reverse(),(t=this.Gs).push.apply(t,ht(e)),(n=this.Gs).push.apply(n,ht(i)),(r=this.Gs).push.apply(r,ht(o))}}return ut.ROUTE_SUCCESS},Tu:function(t,i){var r,n=this.ea(t.ki),e=t.Eu,o=(n&&(this.Au(e,n,ft.NaviRoadHinderType_HINDER_GENERAL),this.Xs.push({Eu:this.Us,Ns:n})),lt(i));try{for(o.s();!(r=o.n()).done;){var s,u=r.value;u&&(s=this.ea(u.ki))&&(this.Au(u.Eu,s,ft.NaviRoadHinderType_HINDER_GENERAL),this.Xs.push({Eu:u.Eu,Ns:s}))}}catch(t){o.e(t)}finally{o.f()}this.Gs=[];n=this.oa(e),n.ys=this.ys,e=n._s(t,i,this.hs);if(e!==ut.ROUTE_SUCCESS)return e;var a,t=n.Es(i),f=lt(t);try{for(f.s();!(a=f.n()).done;)a.value[1].reverse()}catch(t){f.e(t)}finally{f.f()}return t},ua:function(t,i,r){for(var n=0;n<i;n++)if(null!=t[n]&&t[n].Vr==r)return n;return-1},wu:function(t){t instanceof uo?t={x:t.ki.x,y:t.ki.y,level:t.ne}:t instanceof q&&(t=t.ki);for(var i=this.rs.ao,r=0;r<i.length;r++){var n=i[r];if(n.Ye(t))return n.Vr}return-1},au:function(){for(var t=this.rs.ao,i=0;i<t.length;i++){var r=t[i],n=this.aa(this.rs,r);this.Ds.set(r.Vr,n)}this.Ds.set(-1,this.rs);var e,o=lt(this.Ds);try{for(o.s();!(e=o.n()).done;){var s=e.value;s[1].po(),this.Fs.set(s[0],new Co(s[1]))}}catch(t){o.e(t)}finally{o.f()}},aa:function(t,i){if(t&&i){for(var r,n=0,e=0,o=t.eo.length,s=t.no.length,u=t.eo,a=t.no,f=0,h=new Int8Array(o),l=0;l<o;l++)u[l]&&u[l].Ae!=ft.NaviRoadEntry_FORBID&&(r=u[l],n=i.contain(r.ei),e=i.contain(r.oi),0==n&&0==e||(f=!0),1==n&&1==e&&(h[l]=1),1==n&&0==e&&(h[l]=2),0==n&&1==e&&(h[l]=3),0==n&&0==e&&(h[l]=4),2==n&&0==e&&(h[l]=6),2==n&&1==e&&(h[l]=7),0==n&&2==e&&(h[l]=8),1==n)&&2==e&&(h[l]=9);if(0==f)return null;for(var c,v,y,d,b,p,m=new Array(s),w=new Array(o),g=0,_=new Int8Array(s),j=h.length,S=0,O=j;S<O;S++)0!=h[S]&&6!=h[S]&&8!=h[S]&&1!=h[S]&&u[S]&&(p=(c=u[S]).Ae,b=[c.Vr],2==h[S]||9==h[S]?(v=null,v=2==h[S]?i.Pt(c.ei,c.oi):Object.assign({},c.oi),(y=new q).Vr=this.Ro(),y.pe=ft.NaviNodeType_COMMON,y.me=ft.NaviLiftType_NULL,y.entranceType=ft.NaviEntranceType_ACCESS,y.ki=Object.assign({},v),(v=new x).setRoad(c),v.Vr=this.No(),b.push(v.Vr),y.segLinks=b,(d=new q).setNode(y),p==ft.NaviRoadEntry_FORWARD?d.entranceType=ft.NaviEntranceType_EXIT:p==ft.NaviRoadEntry_BACK&&(d.entranceType=ft.NaviEntranceType_ENTRANCE),i.We.push(d),g=this.ua(a,s,v.ke),v.oi=Object.assign({},d.ki),v.Te[1]=Object.assign({},d.ki),v.ke=d.Vr,v.De(),w[S]=v,m[g]=d,m[g=this.ua(a,s,v.Ee)]=a[g],m[g].segLinks.splice(m[g].segLinks.indexOf(c.Vr),1,v.Vr),(d=new q).setNode(y),c.Ee=d.Vr,c.ei=Object.assign({},d.ki),c.Te[0]=Object.assign({},d.ki),c.De(),a[g].segLinks.splice(a[g].segLinks.indexOf(c.Vr),1),a.push(d),_[g]=2):3!=h[S]&&7!=h[S]||(v=null,v=3==h[S]?i.Pt(c.ei,c.oi):Object.assign({},c.ei),(y=new q).Vr=this.Ro(),y.pe=ft.NaviNodeType_COMMON,y.me=ft.NaviLiftType_NULL,y.entranceType=ft.NaviEntranceType_ACCESS,y.ki=Object.assign({},v),(d=new x).setRoad(c),d.Vr=this.No(),b.push(d.Vr),y.segLinks=b,(b=new q).setNode(y),p==ft.NaviRoadEntry_FORWARD?b.entranceType=ft.NaviEntranceType_ENTRANCE:p==ft.NaviRoadEntry_BACK&&(b.entranceType=ft.NaviEntranceType_EXIT),i.We.push(b),g=this.ua(a,s,d.Ee),d.ei=Object.assign({},b.ki),d.Te[0]=Object.assign({},b.ki),d.Ee=b.Vr,d.De(),w[S]=d,m[g]=b,m[g=this.ua(a,s,d.ke)]=a[g],m[g].segLinks.splice(m[g].segLinks.indexOf(c.Vr),1,d.Vr),(p=new q).setNode(y),c.ke=p.Vr,c.oi=Object.assign({},p.ki),c.Te[1]=Object.assign({},p.ki),c.De(),a[g].segLinks.splice(a[g].segLinks.indexOf(c.Vr),1),a.push(p),_[g]=2));for(var E,k=0,T=j;k<T;k++)1==h[k]&&(E=u[k])&&(w[k]=E,2!=_[g=this.ua(a,s,E.Ee)]&&(m[g]=a[g],_[g]=1),2!=_[g=this.ua(a,s,E.ke)]&&(m[g]=a[g],_[g]=1),u[k]=null);for(var M=0;M<s;M++)1==_[M]&&(a[M]=null);for(var j=new P(m,w,!0,1),R=[],N=t.oo,I=0;I<N.length;I++){var A=N[I];A&&this.fa(A,i)&&R.push(A)}return(t=j.oo).push.apply(t,R),j}},fu:function(){var t,i=lt(this.Ds);try{for(i.s();!(t=i.n()).done;)for(var r=t.value,n=r[0],e=r[1].oo,o=0;o<e.length;o++){var s,u=e[o];ft.NaviModelPassType_PASS_NOT_THROUGH==u.pass&&((s=this.qs.get(n))||(s=[],this.qs.set(n,s)),s.push(u))}}catch(t){i.e(t)}finally{i.f()}},hu:function(){var t,i=lt(this.Ds);try{for(i.s();!(t=i.n()).done;)for(var r=t.value,n=r[0],e=r[1].oo,o=0;o<e.length;o++){var s,u=e[o];ft.NaviModelPassType_NOT_PASS==u.pass&&((s=this.Ys.get(n))||(s=[],this.Ys.set(n,s)),s.push(u))}}catch(t){i.e(t)}finally{i.f()}},lu:function(){var t,i=lt(this.qs);try{for(i.s();!(t=i.n()).done;)for(var r=t.value,n=r[0],e=r[1],o=this._u(n).eo,s=0;s<e.length;s++){for(var u=e[s],a=0;a<o.length;a++){var f,h=o[a].Fe();at.Et(h,u.Ti,u.Be)&&(o[a].ee=o[a].ee*this.Js,(f=this.zs.get(u.Vr))||(f=[],this.zs.set(u.Vr,f)),f.push(o[a]))}this.Au(n,u,ft.NaviRoadHinderType_HINDER_HIGH)}}catch(t){i.e(t)}finally{i.f()}},cu:function(){var t,i=lt(this.Ys);try{for(i.s();!(t=i.n()).done;)for(var r=t.value,n=r[0],e=r[1],o=this._u(n).eo,s=0;s<e.length;s++)for(var u=e[s],a=0;a<o.length;a++){var f=o[a],h=f.Ae,l=f.Fe();if(at.Et(l,u.Ti,u.Be)){if(f.ee=Number.MAX_VALUE,h==ft.NaviRoadEntry_BOTH||h==ft.NaviRoadEntry_FORWARD){var c=this._u(n).ho.get(f.Ee);if(c)for(var v=0;v<c.length;v++)c[v].Do==f.ke&&(c[v].ee=f.ee)}if(f.Ae==ft.NaviRoadEntry_BOTH||f.Ae==ft.NaviRoadEntry_BACK){var y=this._u(n).ho.get(f.ke);if(y)for(var d=0;d<y.length;d++)y[d].Do==f.Ee&&(y[d].ee=f.ee)}}}}catch(t){i.e(t)}finally{i.f()}},Au:function(t,i,r){var n=this.zs.get(i.Vr);if(n){if(ft.NaviRoadHinderType_HINDER_HIGH==r)for(var e=0;e<n.length;e++){var o=n[e];if(o.De(),o.ee=o.ee*this.Js,o.Ae==ft.NaviRoadEntry_BOTH||o.Ae==ft.NaviRoadEntry_FORWARD){var s=this._u(t).ho.get(o.Ee);if(s)for(var u=0;u<s.length;u++)s[u].Do==o.ke&&(s[u].ee=o.ee)}if(o.Ae==ft.NaviRoadEntry_BOTH||o.Ae==ft.NaviRoadEntry_BACK){var a=this._u(t).ho.get(o.ke);if(a)for(var f=0;f<a.length;f++)a[f].Do==o.Ee&&(a[f].ee=o.ee)}}if(ft.NaviRoadHinderType_HINDER_GENERAL==r)for(var h=0;h<n.length;h++){var l=n[h];if(l.De(),l.Ae==ft.NaviRoadEntry_BOTH||l.Ae==ft.NaviRoadEntry_FORWARD){var c=this._u(t).ho.get(l.Ee);if(c)for(var v=0;v<c.length;v++)c[v].Do==l.ke&&(c[v].ee=l.ee)}if(l.Ae==ft.NaviRoadEntry_BOTH||l.Ae==ft.NaviRoadEntry_BACK){var y=this._u(t).ho.get(l.ke);if(y)for(var d=0;d<y.length;d++)y[d].Do==l.Ee&&(y[d].ee=l.ee)}}}},sa:function(t,i,r){var n=this.rs.jo(i);if(null==n)return null;for(var e=this._u(i).Mo(t,void 0),o=(e.area,Number.MAX_VALUE),s=null,u=0;u<n.We.length;u++){var a,f=n.We[u],h=at.Tt(f.ki,t);f.entranceType!=ft.NaviEntranceType_ACCESS&&f.entranceType!=r||h<o&&((a=this.ha(i,f.ki))==e||a.pass!=ft.NaviModelPassType_PASS_NOT_THROUGH)&&(o=h,s=f)}return s},ha:function(t,i){for(var r=null,t=this._u(t),n=Number.MAX_VALUE,e=Number.MAX_VALUE,o=null,s=t.oo,u=0;u<s.length;u++){var a,f=s[u];(a=at._pointToPolygon2d(f.Ti,i,f.Ti.length-1))<e&&(e=a,o=f),this.iu>a&&(a=f.area)<n&&(n=a,r=f)}return null==r?o:r},fa:function(t,i){return!!t.bound.isCross(i.bound)&&(t=t._i,!!at.Et(t,i.Ti,i.Be))},Ju:function(t,i,r){for(var n=this.ru.find(function(t){return t==r.Ee}),e=this.ru.find(function(t){return t==r.ke}),o=(null==n&&this.ru.push(r.Ee),null==e&&this.ru.push(r.ke),this.Ks),s=null,u=0;u<o.length;u++)if(o[u].la==r){s=o[u];break}if(null==s)(s={}).la=r,o.push(s);else for(;null!=s.ca;)var a=s.ca.la,s=at.St(i,a.ei,a.oi)?s.ca:s.va;r=s.la;var f,h,l,n=new q;return i.id?n.Vr=i.id:n.Vr=this.Bu(),n.ki.x=i.x,n.ki.y=i.y,n.ne=i.level,n.ya=!1!==i.newNode,!n.ya&&1!==this.Ai||((e=new x).Vr=this.Bu(),e.Ee=r.Ee,e.ei=r.ei,e.ke=n.Vr,e.oi=n.ki,e.Te=[r.ei,n.ki],e.Ie=r.Ie,(f=new x).Vr=this.Bu(),f.Ee=n.Vr,f.ei=n.ki,f.ke=r.ke,f.oi=r.oi,f.Te=[n.ki,r.oi],f.Ie=r.Ie,this.Hs.push(e),this.Hs.push(f),(l={}).la=e,(h={}).la=f,s.ca=l,s.va=h,n.tempType=1,e.tempType=1,f.tempType=1,e.De(),f.De(),e.Ae=r.Ae,f.Ae=r.Ae,(l=this._u(t)).no.push(n),l.eo.push(e),l.eo.push(f),(h=this.oa(t).rs).vo.set(n.Vr,l.no.length-1),r.Ae==ft.NaviRoadEntry_BOTH&&((t=[]).push({Do:r.Ee,ee:e.ee}),t.push({Do:r.ke,ee:f.ee}),h.ho.set(n.Vr,t),(t=h.ho.get(r.Ee))||h.ho.set(r.Ee,t=[]),t.push({Do:n.Vr,ee:e.ee}),(t=h.ho.get(r.ke))||h.ho.set(r.ke,t=[]),t.push({Do:n.Vr,ee:f.ee})),r.Ae==ft.NaviRoadEntry_FORWARD&&((l=[]).push({Do:r.ke,ee:f.ee}),h.ho.set(n.Vr,l),(l=h.ho.get(r.Ee))||h.ho.set(r.Ee,l=[]),l.push({Do:n.Vr,ee:e.ee})),r.Ae!=ft.NaviRoadEntry_BACK)||((t=[]).push({Do:r.Ee,ee:e.ee}),h.ho.set(n.Vr,t),(t=h.ho.get(r.ke))||h.ho.set(r.ke,t=[]),t.push({Do:n.Vr,ee:f.ee})),n},da:function(t,i){for(var r=i.length-1;0<=r;r--)if(i[r].Vr&&0<i[r].Vr)return i.splice(r+1,0,t),r+1;return-1},Uu:function(t,i,r,n){var e,o,s;return n?this.Ju(t,i,r):(n=this._u(t),(t=new q).Vr=this.Ro(),t.ki=i,(i=new x).Vr=this.No(),i.Ee=r.Ee,i.ei=r.ei,i.ke=t.Vr,i.oi=t.ki,i.Ie=r.Ie,i.Te=[r.ei,t.ki],(e=new x).Vr=this.No(),e.Ee=t.Vr,e.ei=t.ki,e.ke=r.ke,e.oi=r.oi,e.Ie=r.Ie,e.Te=[t.ki,r.oi],(o=[]).push(i.Vr),o.push(e.Vr),t.segLinks=o,i.De(),e.De(),i.Ae=r.Ae,e.Ae=r.Ae,o=n.no,s=n.eo,o=this.da(t,o),this.da(i,s),this.da(e,s),n.vo.set(t.Vr,o),r.Ae==ft.NaviRoadEntry_BOTH&&((s=[]).push({Do:r.Ee,ee:i.ee}),s.push({Do:r.ke,ee:e.ee}),n.ho.set(t.Vr,s),(s=n.ho.get(r.Ee))||n.ho.set(r.Ee,s=[]),s.push({Do:t.Vr,ee:i.ee}),(s=n.ho.get(r.ke))||n.ho.set(r.ke,s=[]),s.push({Do:t.Vr,ee:e.ee})),r.Ae==ft.NaviRoadEntry_FORWARD&&((o=[]).push({Do:r.ke,ee:e.ee}),n.ho.set(t.Vr,o),(o=n.ho.get(r.Ee))||n.ho.set(r.Ee,o=[]),o.push({Do:t.Vr,ee:i.ee})),r.Ae==ft.NaviRoadEntry_BACK&&((s=[]).push({Do:r.Ee,ee:i.ee}),n.ho.set(t.Vr,s),(s=n.ho.get(r.ke))||n.ho.set(r.ke,s=[]),s.push({Do:t.Vr,ee:e.ee})),t.Vu=[],t.Vu.push(i.Vr),t.Vu.push(e.Vr),t)},ba:function(t){if(null!=t){for(var i=this._u(t),r=i.no.length-1;0<=r;r--){var n=i.no[r];if(null==n||0<=n.Vr)break;i.no.splice(r,1)}for(var e=i.eo.length-1;0<=e;e--){var o=i.eo[e];if(null==o||0<=o.Vr)break;i.eo.splice(e,1)}}},pa:function(t,i){var r=t.get(i);if(r)for(var n=0;n<r.length;n++)r[n].Do<0&&(r.splice(n,1),n--)},ma:function(t,i){for(var r=t.get(i),n=0;n<r.length;n++)this.pa(t,r[n].Do);t.delete(i)},wa:function(t,i,r,n,e){n.Tt=Number.MAX_VALUE,n.Is=!1,n.na=r;for(var o=Number.MAX_VALUE,s={},u=this._u(t),a=Number.MAX_VALUE,f=0;f<u.eo.length;f++){var h,l=u.eo[f];null==l||l.Vr<0||(l.Ae==ft.NaviRoadEntry_FORBID?at.Lt(i,r,l.ei,l.oi,s)&&(h=at.Tt(i,s))<=a&&(a=h):at.Lt(i,r,l.ei,l.oi,s)&&(h=at.Tt(i,s))<o&&(o=h,n.dt=Object.assign({},s),n.Tt=o,n.ui=l,n.Is=!0))}if(n.Tt>=a)return n.Tt=Number.MAX_VALUE,n.Is=!1;if(!n.Is)return!1;if(1!=this.Ai)for(var c={},v=0;v<u.oo.length;v++){var y=u.oo[v];if(null!=y&&y!=e&&(ft.NaviModelPassType_DECORATE!=y.pass&&(null==e||e.pass==ft.NaviModelPassType_DECORATE||!at.Et(e._i,y.Ti,y.Ti.length-1))))for(var d=y.Ti.length,b=0;b<d-1;b++)if(at.Lt(i,r,y.Ti[b],y.Ti[b+1],c)){var p=at.Tt(i,c);if(p<o)return o=p,n.Ns=y,n.Tt=Number.MAX_VALUE,n.Is=!1,n.As=ft.NaviObstructType_MODEL,!1}}for(var m={},w=u.so,g=0;g<w.length;g++){for(var _=w[g],j=w[g].Xe,S=0;S<j.length;S++)for(var O=j[S],E=0;E<O.length-1;E++)if(at.Lt(i,r,O[E],O[E+1],m)){var k=at.Tt(i,m);if(k<o)return o=k,n.Ns=_,n.Tt=Number.MAX_VALUE,n.Is=!1,n.As=ft.NaviObstructType_EXTENT,!1}for(var T=w[g].Ti,M=0;M<T.length-1;M++)if(at.Lt(i,r,T[M],T[M+1],m)){var R=at.Tt(i,m);if(R<o)return o=R,n.Ns=_,n.Tt=Number.MAX_VALUE,n.Is=!1,n.As=ft.NaviObstructType_EXTENT,!1}}return!0},ga:function(t,i){return t.Tt-i.Tt},_a:function(t,i){return i.na-t.na},Nu:function(t){t=this._u(t);if(t){for(var i=t.no,r=t.vo,n=i.length-1;0<=n;n--){var e=i[n];if(null==e||0<=e.Vr)break;r.delete(e.Vr),i.splice(n,1)}for(var o=t.eo,s=t.yo,u=o.length-1;0<=u;u--){var a=o[u];if(null==a||0<=a.Vr)break;s.delete(a.Vr),o.splice(u,1)}}},Iu:function(){this.ja(this.Bs),this.ja(this.Fs)},ja:function(t){var i,r=lt(t);try{for(r.s();!(i=r.n()).done;){var n,e=i.value[1],o=[],s=e.rs.ho,u=lt(s);try{for(u.s();!(n=u.n()).done;){var a=n.value;a[0]<0&&o.push(a[0])}}catch(t){u.e(t)}finally{u.f()}for(var f=0;f<o.length;f++)this.ma(e.rs.ho,o[f]);for(var h=0;h<this.ru.length;h++)this.pa(s,this.ru[h])}}catch(t){r.e(t)}finally{r.f()}},ra:function(t,i,r,n,e){var o=[],s={x:0,y:0};if(at.Ct(i,r.ei,r.oi,s)&&this.Sa(i,s,{},e))(e={}).dt=s,e.Is=!0,e.ui=r,e.na=0,e.Tt=at.Tt(i,s),o.push(e);else{for(var u={x:s.x-i.x,y:s.y-i.y},a=0;a<n.length;a++){var f=n[a],h={x:f.dt.x-i.x,y:f.dt.y-i.y},h=at.Wt(h,u);f.na=270<h?h-360:h}n.sort(this._a);var l,c=null;if(n[n.length-1].na<0)c=n[n.length-1],o.push(c);else for(var v=0;v<n.length;v++)if(0<n[v].na)return c=n[v],0==v?o.push(c):(l=n[v-1],at.Tt(c.dt,r.ei)>at.Tt(l.dt,r.ei)?(o.push(l),o.push(c)):(o.push(c),o.push(l))),o}return o},Oa:function(t,i,r,n,e){for(var o=n||30,s=0;s<360;s+=o){var u=new Xo;this.wa(t,i,s,u,e),1==u.Is&&r.push(u)}r.sort(this.ga)},ia:function(t,i,r,n){var e=new Map,o=[];for(this.Oa(t,i,o,r,n);0!=o.length;){var s=o[0],u=e.get(s.ui.Vr);u?u.push(s):((u=[]).push(s),e.set(s.ui.Vr,u)),o.splice(0,1)}return e},Ru:function(t,i){var r=new q,i=(r.Vr=this.Bu(),r.ki=Object.assign({},i),this._u(t));return i.no.push(r),i.vo.set(r.Vr,i.no.length-1),this.oa(t).rs=i,r},Ea:function(t,i,r){return r?this.Ru(t,i):((r=new q).Vr=this.Ro(),r.ki=Object.assign({},i),t=(i=this._u(t)).no,t=this.da(r,t),i.vo.set(r.Vr,t),r)},Sa:function(t,i,r,n){for(var e,o=this._u(-1),s=0;s<o.oo.length;s++)if(null!=(e=o.oo[s])&&e!=n&&ft.NaviModelPassType_DECORATE!=e.pass)for(var u=e.Ti,a=0;a<u.length-1;a++)if(at.Pt(t,i,u[a],u[a+1],r)){var f=at.Tt(t,r),h=at.Tt(i,r);if(!(f<=at.ft()||h<=at.ft()))return!1}for(var l=o.so,c=0;c<l.length;c++){for(var v=l[c],y=v.Xe,d=0;d<y.length;d++)for(var b=y[d],p=0;p<b.length-1;p++)if(at.Pt(t,i,b[p],b[p+1],r))return!1;for(var m=v.Ti,w=0;w<m.length-1;w++)if(at.Pt(t,i,m[w],m[w+1],r))return!1}return!0},$u:function(t,i,r,n,e,o){for(var s=0;s<this.Qs.length;s++){var u=this.Qs[s],a={};if(1==at.Pt(u.ei,u.oi,i.ki,r.ki,a)&&.001<at.Tt(i.ki,a)&&.001<at.Tt(r.ki,a)){var f,h,l=!0;if(!this.es||i.Vr!=this.es.Vr||u.Ee!=this.ns.Vr&&u.ke!=this.ns.Vr||(f={x:u.oi.x-u.ei.x,y:u.oi.y-u.ei.y},h={x:r.ki.x-i.ki.x,y:r.ki.y-i.ki.y},Math.abs(at.Ut(f,h))<1e-4&&(l=!1)),l)return null;r=this.Ju(this.Us,a,u);break}}void 0===n&&(n=ft.NaviRoadEntry_BOTH),void 0===e&&(e=!0),void 0===o&&(o=!0);var c=new x;c.Ee=i.Vr,c.ei=i.ki,c.ke=r.Vr,c.oi=r.ki,c.Te=[i.ki,r.ki],c.Ie=1,this.ru.push(i.Vr),this.ru.push(r.Vr),c.Vr=e?this.Bu():this.No(),c.Ae=n,c.De(),o&&this.Qs.push(c);this._u(t).eo.push(c);e=this.oa(t);return ft.NaviRoadEntry_BOTH==n&&(o={Do:r.Vr,ee:c.ee},(t=e.rs.ho.get(i.Vr))?t.push(o):((t=[]).push(o),e.rs.ho.set(i.Vr,t)),o={Do:i.Vr,ee:c.ee},(t=e.rs.ho.get(r.Vr))?t.push(o):((t=[]).push(o),e.rs.ho.set(r.Vr,t))),ft.NaviRoadEntry_FORWARD==n&&(o={Do:r.Vr,ee:c.ee},(t=e.rs.ho.get(i.Vr))?t.push(o):((t=[]).push(o),e.rs.ho.set(i.Vr,t))),ft.NaviRoadEntry_BACK==n&&(o={Do:i.Vr,ee:c.ee},(t=e.rs.ho.get(r.Vr))?t.push(o):((t=[]).push(o),e.rs.ho.set(r.Vr,t))),c},ea:function(t){var i=this.wu(t),r=this.qs.get(i);if(r)for(var n=0;n<r.length;n++){var e=r[n];if(at.Et(t,e.Ti,e.Be))return e}return null},_u:function(t){var i=null;return i=(i=this.su?this.Cs.get(t):i)||this.Ds.get(t)},oa:function(t){var i=null;return i=(i=this.su?this.Bs.get(t):i)||this.Fs.get(t)},ka:function(){return this.su?this.Bs:this.Fs},Ro:function(){return this.rs.Ro()},No:function(){return this.rs.No()},Lu:function(t){var i=[],r=(i.push.apply(i,ht(t.no)),[]),i=(r.push.apply(r,ht(t.eo)),new P(i,r,!0,1));return(r=i.oo).push.apply(r,ht(t.oo)),(r=i.so).push.apply(r,ht(t.so)),i},Pu:function(t){for(var i=[-1],r=this.rs.ao,n=0;n<r.length;n++){var e=r[n];t.Ta(e.bi.li,e.bi.ci)&&i.push(e.Vr)}return i},Ku:function(t,i,r){var n=null,e=i.eo;if(!e||e.length<=0)return null;var o=i.mo(t);if(o<=0)return null;var s,u={},n={distance:Number.MAX_VALUE,road:null,coords:{level:t.level}},a=[],f=lt(e);try{for(f.s();!(s=f.n()).done;){var h=s.value;h.Ae===ft.NaviRoadEntry_FORBID&&o===h.Me&&1!=h.Cu&&a.push(h)}}catch(t){f.e(t)}finally{f.f()}var l,c=lt(e);try{for(c.s();!(l=c.n()).done;){var v=l.value;if(v.Ae!==ft.NaviRoadEntry_FORBID&&o===v.Me){var y=!1;if(r){if(!(r.indexOf(v.Ie)<0)){w=at.Nt(t,v.ei,v.oi,u);var d,b=lt(a);try{for(b.s();!(d=b.n()).done;){var p=d.value;if(at.Pt(t,u,p.ei,p.oi,{x:0,y:0})){y=!0;break}}}catch(t){b.e(t)}finally{b.f()}y||w<n.distance&&(n.distance=w,n.road=v,Object.assign(n.coords,u))}}else{var m,w=at.Nt(t,v.ei,v.oi,u),g=lt(a);try{for(g.s();!(m=g.n()).done;){var _=m.value;if(at.Pt(t,u,_.ei,v.oi,{x:0,y:0})){y=!0;break}}}catch(t){g.e(t)}finally{g.f()}y||w<n.distance&&(n.distance=w,n.road=v,Object.assign(n.coords,u))}}}}catch(t){c.e(t)}finally{c.f()}return n}}),r);function ts(t){return(ts="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function is(i,t){var r,n=Object.keys(i);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(i),t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable})),n.push.apply(n,r)),n}function rs(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?is(Object(e),!0).forEach(function(t){var i,r;i=n,r=e[t=t],(t=us(t))in i?Object.defineProperty(i,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[t]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):is(Object(e)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))})}return n}function ns(t,i){var r,n,e,o,s="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(s)return e=!(n=!0),{s:function(){s=s.call(t)},n:function(){var t=s.next();return n=t.done,t},e:function(t){e=!0,r=t},f:function(){try{n||null==s.return||s.return()}finally{if(e)throw r}}};if(Array.isArray(t)||(s=((t,i)=>{var r;if(t)return"string"==typeof t?es(t,i):"Map"===(r="Object"===(r={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?es(t,i):void 0})(t))||i&&t&&"number"==typeof t.length)return s&&(t=s),o=0,{s:i=function(){},n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:i};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function es(t,i){(null==i||i>t.length)&&(i=t.length);for(var r=0,n=Array(i);r<i;r++)n[r]=t[r];return n}function os(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,us(n.key),n)}}function ss(t,i,r){return i&&os(t.prototype,i),r&&os(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function us(t){t=((t,i)=>{if("object"!=ts(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=ts(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string");return"symbol"==ts(t)?t:t+""}var n=ss(function t(i,r){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.Ma=[],this.Ra=new Map,this.Ai=r||null,this.Na(i)}),as=(Object.assign(n.prototype,{Na:function(t){var i,r=ns(t);try{for(r.s();!(i=r.n()).done;)for(var n=i.value,e=n[1],o=e.so,s=0;s<o.length;s++){var u=o[s].Vr,a=e.zo(u),f=o[s].Me,h=new $o(a);h.Vr=f,h.Ai=this.Ai,h.ne=n[0],this.Ma.push(h),this.Ra.set(f,h)}}catch(t){r.e(t)}finally{r.f()}},ee:function(){return this.Ma.length},Ia:function(t){if(t instanceof uo?t={x:t.ki.x,y:t.ki.y,level:t.ne}:t instanceof q&&(t=void 0===t.ne?t.ki:rs(rs({},t.ki),{},{level:t.ne})),this.Ma)for(var i=this.Ma,r=0;r<i.length;r++){var n=i[r];if(t.level==n.ne&&n.mu(t))return n}return null},Aa:function(t){var i,r=ns(this.Ma);try{for(r.s();!(i=r.n()).done;){var n=i.value;if(n.Vr==t)return n}}catch(t){r.e(t)}finally{r.f()}return null}}),n);function fs(t,i){return(t=>{if(Array.isArray(t))return t})(t)||((t,i)=>{var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,e,o,s,u=[],a=!0,f=!1;try{if(o=(r=r.call(t)).next,0===i){if(Object(r)!==r)return;a=!1}else for(;!(a=(n=o.call(r)).done)&&(u.push(n.value),u.length!==i);a=!0);}catch(t){f=!0,e=t}finally{try{if(!a&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(f)throw e}}return u}})(t,i)||cs(t,i)||(()=>{throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}function hs(i,t){var r,n=Object.keys(i);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(i),t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable})),n.push.apply(n,r)),n}function ls(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?hs(Object(e),!0).forEach(function(t){var i,r;i=n,r=e[t=t],(t=bs(t))in i?Object.defineProperty(i,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[t]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):hs(Object(e)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))})}return n}function Y(t){return(t=>{if(Array.isArray(t))return vs(t)})(t)||(t=>{if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)})(t)||cs(t)||(()=>{throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}function z(t,i){var r,n,e,o,s="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(s)return e=!(n=!0),{s:function(){s=s.call(t)},n:function(){var t=s.next();return n=t.done,t},e:function(t){e=!0,r=t},f:function(){try{n||null==s.return||s.return()}finally{if(e)throw r}}};if(Array.isArray(t)||(s=cs(t))||i&&t&&"number"==typeof t.length)return s&&(t=s),o=0,{s:i=function(){},n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:i};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function cs(t,i){var r;if(t)return"string"==typeof t?vs(t,i):"Map"===(r="Object"===(r={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?vs(t,i):void 0}function vs(t,i){(null==i||i>t.length)&&(i=t.length);for(var r=0,n=Array(i);r<i;r++)n[r]=t[r];return n}function ys(t){return(ys="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ds(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,bs(n.key),n)}}function bs(t){t=((t,i)=>{if("object"!=ys(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=ys(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string");return"symbol"==ys(t)?t:t+""}var r=(()=>{function i(t){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");this.Fi=t,this.ei=null,this.oi=null,this.hs=j.MODULE_SHORTEST,this.xa=g.PRIORITY_DEFAULT,this.Pa=new Map,this.La=new Map,this.Da=null,this.Ca=null,this.Fa=[],this.Ba=[],this.Ga=[],this.Ua=[],this.Va=[],this.Za=[],this.qr=[],this.Wa=.1,this.qa=1,this.Ya=10,this.za=.1,this.Xa=1,this.Ha=10,this.Qa=.1,this.Ka=1,this.Ja=10,this.$a=1,this.tf=10,this.Xo=null,this.if=null,this.rf=null,this.nf=null,this.xs=null,this.Ps=null,this.ef=null,this.sf=!1,this.uf=null,this.af=!1,this.ff=[],this.su=!1,this.uu=new Map,this.hf=null,this.Ai=t.type,this.barrierFree=!1,this.lf=!1,this.cf=0,this.vf=0,this.yf=[],this.ys=0,this.df=Number.MAX_VALUE,this.bf=[],this.pf=!1,this.isStartEntrance=!1,this.isEndEntrance=!1}return t=i,(r=[{key:"assginedInfos",get:function(){return this.ff},set:function(t){this.ff=t}},{key:"passPts",set:function(t){this.mf=t}},{key:"failedInsertedPts",get:function(){return this._failedInsertedPts}},{key:"toDoors",get:function(){return this.sf},set:function(t){this.sf=t}},{key:"fromDoor",get:function(){return this.sf},set:function(t){this.sf=t}},{key:"obstruct",get:function(){return this.su},set:function(t){this.su=t}}])&&ds(t.prototype,r),n&&ds(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n})(),ps=(Object.assign(r.prototype,{Yn:function(t){if(t&&t.scene&&t.floors){this.Xo=t.scene,this.if=new Io;t=t.floors;if(0!=t.size){this.wf(t),this.gf(),this.rf=new as(this.Pa,this.Ai),this.rf.Ai=this.Ai;var i,r=z(t);try{for(r.s();!(i=r.n()).done;){var n=i.value,e=n[1].gid;if(null!=e){var o=n[1].naviAccessible;if(o&&o[0]&&0<o[0].naviNodes.length){this.lf=!0;break}}}}catch(t){r.e(t)}finally{r.f()}this.lf&&(this.wf(t),this.gf(),this.nf=new as(this.La,this.Ai),this.nf.Ai=this.Ai)}}},Ui:function(){this.Fi=null,this.Xo=null,this.if&&(this.if.Ui(),this.if=null);var t,i=z(this.Pa);try{for(i.s();!(t=i.n()).done;)t.value[1].Ui()}catch(t){i.e(t)}finally{i.f()}if(this.Pa.clear(),this.Pa=null,this.Da.Ui(),this.Da=null,this.Fa=null,this.Ga=null,this.lf){var r,n=z(this.La);try{for(n.s();!(r=n.n()).done;)r.value[1].Ui()}catch(t){n.e(t)}finally{n.f()}this.La.clear(),this.La=null,this.Ca.Ui(),this.Ca=null,this.Ba=null,this.Ua=null}this.Va=null,this.Za=null,this.qr=null},_f:function(t,i){this.En(),this.isStartEntrance="NaviRelationship"===t.name,this.isEndEntrance="NaviRelationship"===i.name,t.process&&(delete t.process,delete t.tmpNode),i.process&&(delete i.process,delete i.tmpNode);var r=this.jf([t]);if(r.length<1)return ut.ROUTE_FAILED_NO_DATA_START;var r=r[0],n=(t.extentID=r,this.jf([i]));if(n.length<1)return ut.ROUTE_FAILED_NO_DATA_DEST;for(var n=n[0],e=(i.endExtentID=n,this.mf),o=0;o<e.length;o++)e[o].du=!0;var s=this.jf(e),r=this.Sf(r,n,s);if(r.rst!=ut.ROUTE_SUCCESS)return r.rst;for(var u=new Map,a=0;a<s.length;a++)u.has(s[a])?u.get(s[a]).push(e[a]):u.set(s[a],[e[a]]);var n=r.extentPath,f=this.Of(t,i,u,n);if(this.qr=[],f.rst===ut.ROUTE_SUCCESS)for(var h=0;h<f.nodePath.length;h++)this.qr.push({ne:f.nodePath[h].level,qr:f.nodePath[h].path});return f.rst},Of:function(t,i,r,n){this.En(),t.process&&(delete t.process,delete t.tmpNode),i.process&&(delete i.process,delete i.tmpNode);for(var e=[],o=t,s=Object.fromEntries(Y(r.keys()).map(function(t){return[t,!1]})),u=0;u<n.length;u++){var a=o instanceof q?o.ne:o.level,f=[],h=n[u],l=s[h]?[]:r.get(h);if(u==n.length-1)if(null==l||0==l.length){var c=this.Ef(o,i);if(c.rst!=ut.ROUTE_SUCCESS)return{rst:c.rst,nodePath:e};f.push.apply(f,Y(c.nodePath))}else{l.push(i);c=this.kf(o,l);f.push.apply(f,Y(c.path))}else{var v=void 0,y=void 0;if(Array.isArray(l)&&1==l.length){var d=this.Ef(o,l[0]);if(d.rst!=ut.ROUTE_SUCCESS)return{rst:d.rst,nodePath:e};f.push.apply(f,Y(d.nodePath)),y=ls({level:(v=f[f.length-1]).ne},v.ki)}else if(Array.isArray(l)&&1<l.length){d=this.kf(o,l);if(d.rst!=ut.ROUTE_SUCCESS)return{rst:d.rst,nodePath:e};f.push.apply(f,Y(d.path)),y=ls({level:(v=f[f.length-1]).ne},v.ki)}else y=v=o;s[h]=!0;var l=this.Tf(h),h=this.Tf(n[u+1]),b=[],p=[];if(!this.Mf(l,h,v,b,p))return{rst:ut.ROUTE_FAILED_WAYPOINT_CALCULATE_ERROR,nodePath:e};for(var m=null,w=0;w<b.length;w++){var g=this.Ef(y,b[w]);if(g.rst==ut.ROUTE_SUCCESS){f.push.apply(f,Y(g.nodePath)),m=w;break}}if(null==m)return{rst:ut.ROUTE_FAILED_WAYPOINT_CALCULATE_ERROR,nodePath:e};o=p[m]}e.push({level:a,path:f})}return{rst:ut.ROUTE_SUCCESS,nodePath:e}},Rf:function(t,i,r,n){this.En(),this.isStartEntrance="NaviRelationship"===t.name,this.isEndEntrance="NaviRelationship"===i.name,t.process&&(delete t.process,delete t.tmpNode),i.process&&(delete i.process,delete i.tmpNode);var e=null,o=(e=this.lf&&this.barrierFree?this.nf:this.rf).Ia(t);if(!o)return t.process=null,i.process=t.tmpNode=null,i.tmpNode=null,ut.ROUTE_FAILED_NO_DATA_START;var s=o.Gu(t);if(s&&s.Ns&&s.Ns.pass==ft.NaviModelPassType_NOT_PASS)return t.process=null,i.process=t.tmpNode=null,i.tmpNode=null,ut.ROUTE_FAILED_NO_START_ARRIVAL;var u=e.Ia(i);if(!u)return t.process=null,i.process=t.tmpNode=null,i.tmpNode=null,ut.ROUTE_FAILED_NO_DATA_DEST;var a=u.Gu(i);if(a&&a.Ns&&a.Ns.pass==ft.NaviModelPassType_NOT_PASS)return t.process=null,i.process=t.tmpNode=null,i.tmpNode=null,ut.ROUTE_FAILED_NO_DEST_ARRIVAL;this.hs=r,this.ei=t,this.xs=s.Ns,this.oi=i,this.Ps=a.Ns;var f=o.Vr,h=u.Vr,u=s.Ns,s=a.Ns,a=ut.ROUTE_FAILED_CANNOT_ARRIVE;if(this.qr=[],1!==this.Ai&&this.Nf(n),f===h){n=t.level;o.xs=u,o.Ps=s,o.ys=this.ys,(a=o.ps(t,i,r))===ut.ROUTE_SUCCESS&&(u=o.Ss(),this.qr.push({ne:n,qr:u}))}else{this.If(f,h,t,i)!=ut.ROUTE_SUCCESS&&(a=ut.ROUTE_FAILED_OUTLINE),this.Va.reverse();s=this.Af(e,t,i);if(s==ut.ROUTE_SUCCESS)return t.process=null,i.process=t.tmpNode=null,i.tmpNode=null,s;a=s}if(a!=ut.ROUTE_SUCCESS)for(;2<this.xf(f,h,t,i).length;){if(this.Af(e,t,i)===ut.ROUTE_SUCCESS)return this.Pf(),t.process=null,i.process=t.tmpNode=null,i.tmpNode=null,ut.ROUTE_SUCCESS;f===h&&0<this.Va.length&&(h=this.Va[this.Va.length-1].Me)}return this.Pf(),t.process=null,i.process=t.tmpNode=null,i.tmpNode=null,a},xf:function(t,i,r,n){var e=null;if(e=this.lf&&this.barrierFree?this.Ca:this.Da,t===i){var o=this.Fa.length+1,s=new Oo,u=e.rs.Eo(t),u=e.rs.no[u],u=(s.Vr=u.Vr,s.ne=u.ne,s.Me=o,s.bs=u.bs,s.io=u.io,s.he=u.he,s.ae=u.ae,this.Fa.push(s),this.Lf(),new P(this.Fa,this.Ga)),s=(i=o,(e=new Co(u)).rs.ho.get(t));if(s){var a,f=z(s.values());try{for(f.s();!(a=f.n()).done;){var h=a.value;h.Do===i&&(h.ee=Number.MAX_VALUE)}}catch(t){f.e(t)}finally{f.f()}}}else for(var l=0;l<this.yf.length;l++){var c=this.yf[l].from.Me,v=this.yf[l].to.Me,c=e.rs.ho.get(c);if(c){var y,d=z(c.values());try{for(d.s();!(y=d.n()).done;){var b=y.value;b.Do===v&&(b.ee=Number.MAX_VALUE)}}catch(t){d.e(t)}finally{d.f()}}}return this.Da=e,this.If(t,i,r,n)!=ut.ROUTE_SUCCESS&&(this.Va=[]),this.Va.reverse(),this.Va},Pf:function(){var t;this.lf&&this.barrierFree?(this.Df(),this.Lf(),t=new P(this.Ba,this.Ua),this.Ca=new Co(t)):(this.Df(),this.Lf(),t=new P(this.Fa,this.Ga),this.Da=new Co(t)),this.yf=[]},Af:function(t,i,r){this.qr=[];for(var n=[],e=[this.ei],o=ut.ROUTE_FAILED_CANNOT_ARRIVE,s=0;s<this.Va.length-1;s++){var u=[],a=[];if(null==this.Ai||0===this.Ai){if(!this.Cf(this.Va[s],this.Va[s+1],e[e.length-1],u,a))return this.yf.push({from:this.Va[s],to:this.Va[s+1]}),ut.ROUTE_FAILED_CANNOT_ARRIVE}else if(!this.Ff(this.Va[s],this.Va[s+1],e[e.length-1],u,a))return this.yf.push({from:this.Va[s],to:this.Va[s+1]}),ut.ROUTE_FAILED_CANNOT_ARRIVE;for(var f=!1,h=0;h<u.length;h++){var l=u[h].Oe,c=a[h].Oe,v=u[h].ne,y=a[h].ne,d={x:l.ki.x,y:l.ki.y,level:v},b={x:c.ki.x,y:c.ki.y,level:y},d=t.Ia(d),o=0==s?(d.xs=this.xs,d.ys=this.ys,d.ps(i,l,this.hs)):(d.ys=this.ys,d.ps(n[n.length-1],l,this.hs));if(ut.ROUTE_SUCCESS==o){l=d.Ss();if(this.qr.push({ne:v,qr:l}),n.push(c),e.push(c.ki),f=!0,this.Va.length-2==s){d=t.Ia(b);if(d.Ps=this.Ps,d.ys=this.ys,o=d.ps(c,r,this.hs),ut.ROUTE_SUCCESS!=o){this.qr.splice(this.qr.length-1,1),f=!1,e.splice(e.length-1,1),n.splice(n.length-1,1);continue}v=d.Ss();this.qr.push({ne:y,qr:v})}if(ut.ROUTE_SUCCESS==o)break}}if(!f)return this.yf.push({from:this.Va[s],to:this.Va[s+1]}),ut.ROUTE_FAILED_CANNOT_ARRIVE;o!==ut.ROUTE_SUCCESS&&this.yf.push({from:this.Va[s],to:this.Va[s+1]})}return o},Bf:function(){if(this.pf)this.Gf();else{var t=null==(t=this.qr)||null==(t=t[0])||null==(t=t.qr)?void 0:t[0],t=t.du||t.ki.du;if((this.af&&!this.isStartEntrance&&!t||this.sf&&t)&&(this.uf=null,this.xs)&&this.xs.pass!==ft.NaviModelPassType_NOT_PASS&&this.xs.pass!==ft.NaviModelPassType_DECORATE&&0<this.qr.length){for(var i=this.qr[0].qr,r=null,n={x:-1,y:-1},e=0;e<i.length-1;e++){var o=i[e],s=i[e+1];if(at.qt(o.ki,s.ki,this.xs.Ti,n)){r=e;break}}null!=r&&(t=i[0],i.splice(0,r+1),(u=new q).ki=n,(t.du||t.ki.du)&&(u.du=!0,t.du?u.ta=t.ta:u.ta=t.ki),i.unshift(u),this.uf=n)}if(this.sf&&!this.isEndEntrance&&(this.ef=null,this.Ps)&&this.Ps.pass!==ft.NaviModelPassType_NOT_PASS&&this.Ps.pass!==ft.NaviModelPassType_DECORATE&&0<this.qr.length){for(var u,a=this.qr[this.qr.length-1].qr,f=null,h={x:-1,y:-1},l=a.length-1;0<l;l--){var c=a[l],v=a[l-1];if(at.qt(c.ki,v.ki,this.Ps.Ti,h)){f=l;break}}null!=f&&(t=a[a.length-1],a.splice(f,a.length-f),(u=new q).ki=h,(t.du||t.ki.du)&&(u.du=!0,t.du?u.ta=t.ta:u.ta=t.ki),a.push(u),this.ef=h)}}},Uf:function(){this.Bf();for(var t=[],i=0;i<this.qr.length;i++)1<this.qr[i].qr.length&&t.push(this.qr[i]);for(var r=[],n=0;n<t.length;n++){this.Vf(t[n]);for(var e=t[n],o=e.ne,s=e.qr,u=[],a=0,f=0;f<s.length;f++)u.push(s[f].ki),f!=s.length-1&&(a+=at.Tt(s[f].ki,s[f+1].ki));var e=new He;e.ne=o,e.ue=s,e.se=u,e.ee=a,r.push(e),n!=t.length-1&&(o=this.Zf(t[n]),e=this.Wf(t[n+1]),r.push(o),r.push(e))}return r},Vf:function(t){if(null!=t&&t.qr){var i=t.qr,r=i.length;if(r&&!(r<2)){var n=[],e=(n.push(i[0]),i[0]),o=i[r-1];at.Tt(e.ki,o.ki);for(var s=1;s<r-1;s++){var u=i[s];null!=e&&at.Tt(e.ki,u.ki)<.001||null!=o&&at.Tt(o.ki,u.ki)<.001||(n.push(u),e=u)}n.push(o);for(var r=n.length,a=new Array(r),f=0;f<r;f++)a[f]=0;for(var h=1;h<r-1;h++){for(var l=n[h],c=h-1;0!=a[c];)c--;!at.kt(l.ki,n[c].ki,n[h+1].ki)||l.du||(a[h]=1)}for(var v=[],y=0;y<r;y++)0==a[y]&&v.push(n[y]);t.qr=v}}},En:function(){this.Va=[],this.Za=[];var t,i=this.rf.Ra,r=z(i.keys());try{for(r.s();!(t=r.n()).done;){var n=t.value,e=i.get(n);e.En(),e.obstruct=this.su}}catch(t){r.e(t)}finally{r.f()}var o,s=this.rf.Ra,u=z(s.keys());try{for(u.s();!(o=u.n()).done;){var a=o.value,f=s.get(a);f.En(),f.obstruct=this.su}}catch(t){u.e(t)}finally{u.f()}this.bf=[],this.df=Number.MAX_VALUE},qf:function(t,i){var r=null,n=null;if(null==(n=(this.lf&&this.barrierFree?this.nf:this.rf).Ia(t)))return null;for(var n=n.rs,e=[],o=(e.push.apply(e,Y(n.eo)),r={distance:Number.MAX_VALUE,road:null,angle:null,coords:{level:t.level}},{}),s=0;s<e.length;s++){var u,a=e[s];a.Ae===ft.NaviRoadEntry_FORBID||Array.isArray(i)&&0<i.length&&i.indexOf(a.Ie)<0||(u=at.Nt(t,a.ei,a.oi,o))<r.distance&&(r.distance=u,r.road=a,r.angle=this.Yf(a.ei,a.oi),Object.assign(r.coords,o))}return null!=r.road&&(n={id:(n=r.road).Vr,extentID:n.Me,roadEntry:n.Ae,roadRank:n.Ie,startID:n.Ee,startPoint:n.ei,endID:n.ke,endPoint:n.oi},r.road=n),r},zf:function(t){var i=null,r=null;if(null==(r=(this.lf&&this.barrierFree?this.nf:this.rf).Ia(t)))return null;for(var r=r.rs,n=[],e=(n.push.apply(n,Y(r.eo)),i={distance:Number.MAX_VALUE,road:null,angle:null,coords:{level:t.level}},{}),o=0;o<n.length;o++){var s=n[o],u=at.Nt(t,s.ei,s.oi,e);u<i.distance&&(i.distance=u,i.road=s,i.angle=this.Yf(s.ei,s.oi),Object.assign(i.coords,e))}return null!=i.road&&(r={id:(r=i.road).Vr,extentID:r.Me,roadEntry:r.Ae,roadRank:r.Ie,startID:r.Ee,startPoint:r.ei,endID:r.ke,endPoint:r.oi},i.road=r),i},Yf:function(t,i){var r=new V(0,0,1),t=new V(t.x,0,t.y),i=new V(i.x,0,i.y).clone().sub(t).normalize(),t=i.angleTo(r)*at.lt();return 0<i.clone().cross(r).y?360-t:t},wf:function(t){this.lf?this.La=new Map:this.Pa=new Map,this.if.Ho(this.Xo);var i,r=z(t);try{for(r.s();!(i=r.n()).done;){var n=i.value,e=n[1].gid;if(null!=e){var o=n[1].geo[0],s=n[1].biz[0],u=null;if(1==this.Ai?0<n[1].naviDrive.length&&(u=n[1].naviDrive[0]):this.lf?0<n[1].naviAccessible.length&&(u=n[1].naviAccessible[0]):0<n[1].navi.length&&(u=n[1].navi[0]),u){var a=this.if.ts(e,o,s,u);if(0!=a.naviNodes.length&&0!=a.naviSegments.length){var f=new Map,h=this.Xf(a,f),l=this.Hf(a),c=this.Qf(a),v=this.Kf(a),y=this.Jf(a),d=(this.$f(y,h,u,f),new P(h,l,!0,1));d.ne=e,0!=v.length&&(d.so=v),0!=c.length&&(d.ao=c),0!=y.length&&(d.oo=y);for(var b=0;b<l.length;b++)l[b].Me=d.mo(l[b].ei);(0==this.lf?this.Pa:this.La).set(a.level,d)}}}}}catch(t){r.e(t)}finally{r.f()}},Xf:function(r,n){var e,o=[];for(e in r.naviNodes)(()=>{var t=r.naviNodes[e];if(null==t.nodeId)return;var i=new q;i.Vr=t.nodeId,i.ki={x:parseFloat(t.geoArr.x.toFixed(3)),y:parseFloat(t.geoArr.y.toFixed(3))},i.pe=t.nodeType,i.me=t.liftType,i.he=t.liftFlag,i.we=t.liftEntry,t.accessible&&(i.th=t.accessible),t.linkSegArr.forEach(function(t){i.fe.push(parseInt(t))}),t.liftFloorArr.forEach(function(t){i.ae.push(parseInt(t))}),o.push(i),n.set(t.nodeId,e)})();return o},Hf:function(t){var i,r=[];for(i in t.naviSegments){var n,e=t.naviSegments[i],o=e.geoArr;o&&((n=new x).Vr=e.segmentId,n.Ee=e.snode,n.ei={x:parseFloat(o[0].x.toFixed(3)),y:parseFloat(o[0].y.toFixed(3))},n.ke=e.enode,n.oi={x:parseFloat(o[1].x.toFixed(3)),y:parseFloat(o[1].y.toFixed(3))},n.ee=e.length,n.Ae=e.entry,n.Ie=e.rank,r.push(n))}return r},Kf:function(t){for(var i=[],r=0,n=t.extentLayer.length;r<n;r++){var e=t.extentLayer[r],o=(o=e.geoArr)||[],o=new po(e.eid,t.gid,0,o,e._i,e.holes);o.fid=e.fid,i.push(o)}return i},Jf:function(t){for(var i=[],r=0,n=t.modelLayer.length;r<n;r++){var e=t.modelLayer[r],o=(o=e.geoArr)||[],o=new po(e.eid,t.gid,0,o,e._i,e.holes);o.fid=e.fid,o.pass=e.pass,i.push(o)}return i},Qf:function(t){for(var i=[],r=0,n=t.naviZones.length;r<n;r++){var e=t.naviZones[r],e=new vo(e.Vr,t.gid,e.type,e.geoArr);i.push(e)}return i},$f:function(t,i,r,n){for(var e=new Map,o=0;o<t.length;o++)e.set(t[o].Vr,o);for(var s=0;s<r.naviModels.length;s++)for(var u=r.naviModels[s],a=u.modelid,f=t[e.get(a)],h=0;h<u.doorids.length;h++){var l=u.doorids[h],l=i[n.get(l)],l=(f.He.push(l),u.nodetypes[h]),c=u.entrytypes[h];f.Qe.push(l),f.Ke.push(c)}},gf:function(){var t;this.lf?(this.Df(),this.Lf(),t=new P(this.Ba,this.Ua),this.Ca=new Co(t)):(this.Df(),this.Lf(),t=new P(this.Fa,this.Ga),this.Da=new Co(t))},Df:function(){var t,i=0,r=0,n=z(this.lf?(this.Ba=[],this.La):(this.Fa=[],this.Pa));try{for(n.s();!(t=n.n()).done;)for(var e=t.value,o=e[1],s=o.so,u=0;u<s.length;u++){var a=s[u],f=new Oo;f.Vr=a.Vr,f.ne=e[0],f.Me=++i,a.Me=f.Me,f.bs=a;for(var h=0;h<o.no.length;h++){var l,c,v=o.no[h];v.me!=ft.NaviLiftType_NULL&&at.Et(v.ki,a.Ti,a.Be)&&(l=new uo,c=o.So(v.ki),l.Se=c,l._e(v),l.je=++r,l.ne=e[0],l.Oe=v,l.we=v.we,l.me=v.me,l.he=v.he,l.Me=f.Me,this.lf?1===v.th&&(l.th=v.th,f.io.push(l)):(1===v.th&&(l.th=v.th),f.io.push(l)))}(this.lf?this.Ba:this.Fa).push(f)}}catch(t){n.e(t)}finally{n.f()}},Lf:function(){for(var t=null,i=0,t=this.lf?this.Ba:this.Fa,r=[],n=0;n<t.length;n++)for(var e=t[n],o=0;o<t.length;o++){var s,u,a=t[o];n!=o&&(u=void 0,null!=(u=null==this.Ai||0==this.Ai?this.ih(e,a):this.rh(e,a)))&&(u*=0==(s=Math.abs(e.ne-a.ne))?1:s,(s=new x).Ee=e.Me,s.ke=a.Me,s.ee=u,s.Ae=ft.NaviRoadEntry_FORWARD,s.Vr=i,i+=1,r.push(s))}this.lf?this.Ua=r:this.Ga=r},ih:function(t,i){for(var r=Number.MAX_VALUE,n=!1,e=t.ne,o=i.ne,s=e<o?ft.NaviLiftEntry_DOWN:ft.NaviLiftEntry_UP,u=0;u<t.io.length;u++){var a=t.io[u],f=a.we;if(f!=ft.NaviLiftEntry_FORBID&&f!=s){var h=a.me;if(g.PRIORITY_LIFTONLY==this.xa){if(ft.NaviLiftType_Lift!=h)continue}else if(g.PRIORITY_ESCALATORONLY==this.xa){if(ft.NaviLiftType_Escalator!=h)continue}else if(g.PRIORITY_STAIRONLY==this.xa){if(ft.NaviLiftType_Stair!=h)continue}else if(g.PRIORITY_ACCESSIBLEONLY==this.xa&&ft.NaviLiftType_Accessible!=h)continue;if(h==ft.NaviLiftType_Stair||-1!=a.ae.indexOf(o))for(var l=0;l<i.io.length;l++){var c=i.io[l];if(null!=c&&a.he==c.he)if(g.PRIORITY_LIFTFIRST==this.xa||g.PRIORITY_DEFAULT==this.xa){if(ft.NaviLiftType_Lift==h||ft.NaviLiftType_Accessible==h)return this.Wa;if(ft.NaviLiftType_Escalator==h){c=this.Xa;c<r&&(r=c),n=!0;break}if(ft.NaviLiftType_Stair==h){c=this.Ja;c<r&&(r=c),n=!0;break}}else if(g.PRIORITY_ESCALATORFIRST==this.xa){if(ft.NaviLiftType_Lift==h||ft.NaviLiftType_Accessible==h){c=this.qa;c<r&&(r=c),n=!0;break}if(ft.NaviLiftType_Escalator==h)return this.za;if(ft.NaviLiftType_Stair==h){c=this.Ja;c<r&&(r=c),n=!0;break}}else if(g.PRIORITY_STAIRFIRST==this.xa){if(ft.NaviLiftType_Lift==h){c=this.qa;c<r&&(r=c),n=!0;break}if(ft.NaviLiftType_Escalator==h||ft.NaviLiftType_Accessible==h){c=this.Ha;c<r&&(r=c),n=!0;break}if(ft.NaviLiftType_Stair==h)return this.Qa}else{if(g.PRIORITY_LIFTFIRST1==this.xa||g.PRIORITY_STAIRFIRST1==this.xa||g.PRIORITY_ESCALATORFIRST1==this.xa)return this.$a;if(g.PRIORITY_LIFTONLY==this.xa||g.PRIORITY_ESCALATORONLY==this.xa||g.PRIORITY_STAIRONLY==this.xa||g.PRIORITY_ACCESSIBLEONLY==this.xa)return this.$a}}}}return n?r:null},rh:function(t,i){for(var r=Number.MAX_VALUE,n=!1,e=t.ne<i.ne?ft.NaviLiftEntry_DOWN:ft.NaviLiftEntry_UP,o=0;o<t.io.length;o++){var s=t.io[o],u=s.we;if(u!=ft.NaviLiftEntry_FORBID&&u!=e){for(var a=0;a<i.io.length;a++){var f=i.io[a];if(s.he==f.he){r=this.tf,n=!0;break}}if(n)break}}return n?r:null},Nf:function(t){this.xa!==t&&(this.xa=t,this.barrierFree?(this.Lf(),t=new P(this.Ba,this.Ua),this.Ca=new Co(t)):(this.Lf(),t=new P(this.Fa,this.Ga),this.Da=new Co(t)))},Wf:function(t){var i=t.qr,r=new He;return r.ne=t.ne,r.ue.push(i[0]),r.se.push(i[0].ki),r.ee=0,r},Zf:function(t){var i=t.qr,r=new He;return r.ne=t.ne,r.ue.push(i[i.length-1]),r.se.push(i[i.length-1].ki),r.ee=0,r},nh:function(t,i){for(var r=null,r=this.lf&&this.barrierFree?this.Ba:this.Fa,n=0;n<r.length;n++)if(null!=t&&r[n].ne==t&&r[n].Vr==i)return r[n];return null},Tf:function(t){for(var i=null,r=null,r=this.lf&&this.barrierFree?this.Ba:this.Fa,n=0;n<r.length;n++)if(r[n].Me==t)return i=r[n];return i},If:function(t,i,r,n){var e,o=null,t=(o=this.lf&&this.barrierFree?this.Ca:this.Da).js(t,i,r,n);if(t==ut.ROUTE_SUCCESS){e=o.Ss(),this.Va=[];for(var s=0;s<e.length;s++)this.Va.push(e[s])}return t},Cf:function(r,t,i,n,e){var o=null,o=(this.lf&&this.barrierFree?(o=this.nf.Ia(i),this.hf=(o||this.nf.Ra.get(r.ne)).rs.So(i)):(o=this.rf.Ia(i),this.hf=(o||this.rf.Ra.get(r.ne)).rs.So(i)),Math.abs(r.ne-t.ne)),s=[];function u(t,i){t=r.ro(t,i,a);s.push.apply(s,Y(t))}var a=[];if(0==this.lf&&1==this.barrierFree)for(var f=0;f<r.io.length;f++)1==r.io[f].th&&a.push(r.io[f]);else a=r.io;for(var h,l,c=0;c<a.length;c++){var v=a[c];v.ye=at.Tt(v.ki,this.oi)+at.Tt(v.ki,i)}1===this.Ai?s=a:(h=(h=r.bs.bi.size).x+h.y,g.PRIORITY_LIFTONLY!==this.xa&&g.PRIORITY_ESCALATORONLY!==this.xa&&g.PRIORITY_STAIRONLY!==this.xa&&g.PRIORITY_ACCESSIBLEONLY!==this.xa||(l=null,g.PRIORITY_LIFTONLY===this.xa&&(l=ft.NaviLiftType_Lift),g.PRIORITY_ESCALATORONLY===this.xa&&(l=ft.NaviLiftType_Escalator),g.PRIORITY_STAIRONLY===this.xa&&(l=ft.NaviLiftType_Stair),g.PRIORITY_ACCESSIBLEONLY===this.xa&&(l=ft.NaviLiftType_Accessible),s=r.ro(l,null,a)),g.PRIORITY_LIFTFIRST!==this.xa&&g.PRIORITY_ESCALATORFIRST!==this.xa&&g.PRIORITY_STAIRFIRST!==this.xa&&g.PRIORITY_DEFAULT!==this.xa||(g.PRIORITY_LIFTFIRST!==this.xa&&g.PRIORITY_DEFAULT!==this.xa||(u(ft.NaviLiftType_Lift,-15*o),u(ft.NaviLiftType_Escalator,-8*o),u(ft.NaviLiftType_Stair,0)),g.PRIORITY_ESCALATORFIRST===this.xa&&(u(ft.NaviLiftType_Lift,-8*o),u(ft.NaviLiftType_Escalator,-15*o),u(ft.NaviLiftType_Stair,0)),g.PRIORITY_STAIRFIRST===this.xa&&(u(ft.NaviLiftType_Lift,-8*o),u(ft.NaviLiftType_Escalator,0),u(ft.NaviLiftType_Stair,-15*o))),g.PRIORITY_LIFTFIRST1!==this.xa&&g.PRIORITY_ESCALATORFIRST1!==this.xa&&g.PRIORITY_STAIRFIRST1!==this.xa||(g.PRIORITY_LIFTFIRST1===this.xa&&(u(ft.NaviLiftType_Lift,-h),u(ft.NaviLiftType_Escalator,0),u(ft.NaviLiftType_Stair,0)),g.PRIORITY_ESCALATORFIRST1===this.xa&&(u(ft.NaviLiftType_Lift,0),u(ft.NaviLiftType_Escalator,-h),u(ft.NaviLiftType_Stair,0)),g.PRIORITY_STAIRFIRST1===this.xa&&(u(ft.NaviLiftType_Lift,0),u(ft.NaviLiftType_Escalator,0),u(ft.NaviLiftType_Stair,-h))));var y=this;s.sort(function(t,i){if(t.zone!==i.zone){if(t.zone===y.hf)return-1;if(i.zone===y.hf)return 1}return t.ye-i.ye});for(var d=0;d<s.length;d++){var b=s[d];if(!(1===b.we&&t.ne<r.ne)&&(!(2===b.we&&t.ne>r.ne)&&3!==b.we))for(var p=0;p<t.io.length;p++){var m=t.io[p];if(b.he===m.he){n.push(b),e.push(m);break}}}return 0!==n.length},Ff:function(t,i,r,n,e){this.hf=this.rf.Ra.get(t.ne).rs.So(r);for(var o=[],s=t.io,u=0;u<s.length;u++){var a=s[u];a.ye=at.Tt(a.ki,this.oi)+at.Tt(a.ki,r)}var o=t.ro(ft.NaviLiftType_Ramp),f=this;o.sort(function(t,i){if(t.zone!==i.zone){if(t.zone===f.hf)return-1;if(i.zone===f.hf)return 1}return t.ye-i.ye});for(var h=0;h<o.length;h++){var l=o[h];if(!(1===l.we&&i.ne<t.ne)&&(!(2===l.we&&i.ne>t.ne)&&3!==l.we))for(var c=0;c<i.io.length;c++){var v=i.io[c];if(l.he===v.he){n.push(l),e.push(v);break}}}return 0!==n.length},jf:function(t){var i=[],r=null;if(r=this.barrierFree?this.nf:this.rf){var n,e=z(t);try{for(e.s();!(n=e.n()).done;){var o=n.value,s=r.Ia(o),u=null==s?void 0:s.Vr;u&&i.push(u)}}catch(t){e.e(t)}finally{e.f()}}return i},Sf:function(t,i,r){var n=null,r=Array.from(new Set(r)),e=r.indexOf(t),e=(-1!=e&&r.splice(e,1),r.indexOf(i));if(-1!=e&&r.splice(e,1),r.length<=0){if(n={rst:ut.ROUTE_FAILED_OUTLINE,extentPath:[]},t==i)return n.extentPath.push(t),n.rst=ut.ROUTE_SUCCESS,n;if(n.rst=this.If(t,i),n.rst!=ut.ROUTE_SUCCESS)return n;this.Va.reverse();for(var o=0;o<this.Va.length;o++)n.extentPath.push(this.Va[o].Me)}else n=this.eh(t,i,r);return n},oh:function(t){var i=0;if(!(null==t||t.length<=0))for(var r=this.Da.rs.ho,n=1;n<t.length;n++)for(var e=t[n].Vr,o=t[n-1].Vr,s=r.get(o),u=0;u<s.length;u++)if(s[u].Do==e){i+=s[u].ee;break}return i},eh:function(t,i,r){for(var n={rst:null,extentPath:[]},e=[],o=t;0<r.length;){for(var s,u,a=Number.MAX_VALUE,f=null,h=null,l=0;l<r.length;l++)this.Da.js(o,r[l])==ut.ROUTE_SUCCESS&&((s=this.Da.Ss()).reverse(),(u=this.oh(s))<a)&&(a=u,f=l,h=s);if(null==f)return n;o=r[f],h.splice(h.length-1,1),e.push.apply(e,Y(h)),r.splice(f,1)}if(n.rst=this.Da.js(o,i),n.rst==ut.ROUTE_SUCCESS){t=this.Da.Ss();t.reverse(),e.push.apply(e,Y(t));for(var c=0;c<e.length;c++)n.extentPath.push(e[c].Me)}return n},sh:function(t,i,r){var n=[],e=[];return this.Mf(t,i,r,n,e)?[n,e]:[]},uh:function(t,i,r,n){this.En(),t.process&&(delete t.process,delete t.tmpNode),i.process&&(delete i.process,delete i.tmpNode);for(var e=[],o=t,s=Object.fromEntries(Y(r.keys()).map(function(t){return[t,!1]})),u=0;u<n.length;u++){var a=o instanceof q?o.ne:o.level,f=[],h=n[u],l=s[h]?[]:r.get(h);if(u==n.length-1)if(null==l||0==l.length){var c=this.Ef(o,i);if(c.rst!=ut.ROUTE_SUCCESS)return{rst:c.rst,nodePath:e};f.push.apply(f,Y(c.nodePath))}else{l.push(i);c=this.kf(o,l);f.push.apply(f,Y(c.path))}else{var v=void 0,y=void 0;if(Array.isArray(l)&&1==l.length){var d=this.Ef(o,l[0]);if(d.rst!=ut.ROUTE_SUCCESS)return{rst:d.rst,nodePath:e};f.push.apply(f,Y(d.nodePath)),y=ls({level:(v=f[f.length-1]).ne},v.ki)}else if(Array.isArray(l)&&1<l.length){d=this.kf(o,l);if(d.rst!=ut.ROUTE_SUCCESS)return{rst:d.rst,nodePath:e};f.push.apply(f,Y(d.path)),y=ls({level:(v=f[f.length-1]).ne},v.ki)}else y=v=o;s[h]=!0;var l=this.Tf(h),h=this.Tf(n[u+1]),b=[],p=[];if(!this.Mf(l,h,v,b,p))return{rst:ut.ROUTE_FAILED_WAYPOINT_CALCULATE_ERROR,nodePath:e};for(var m=null,w=0;w<b.length;w++){var g=this.Ef(y,b[w]);if(g.rst==ut.ROUTE_SUCCESS){f.push.apply(f,Y(g.nodePath)),m=w;break}}if(null==m)return{rst:ut.ROUTE_FAILED_WAYPOINT_CALCULATE_ERROR,nodePath:e};o=p[m]}e.push({level:a,path:f})}return{rst:ut.ROUTE_SUCCESS,nodePath:e}},Gf:function(){for(var t=null,t=this.lf&&this.barrierFree?this.nf:this.rf,i=0;i<this.qr.length;i++){var r=this.qr[i].qr;if(!(r.length<=1)&&(this.af||this.sf)){for(var n=[],e=0,o=0;o<r.length;o++)if(r[o].du||o==r.length-1){var s=r[e],u=r[o],a=r.slice(e,o+1),f=s.du||s.ki.du;if(this.af&&!s.me&&(0!==i||!this.isStartEntrance)&&!f||this.sf&&f){var h=t.Ia(s.ki).Gu(s.ki).Ns;if(this.uf=null,h&&h.pass!==ft.NaviModelPassType_NOT_PASS&&h.pass!==ft.NaviModelPassType_DECORATE){for(var l=null,c={x:-1,y:-1},v=0;v<a.length-1;v++){var y=a[v],d=a[v+1];if(at.qt(y.ki,d.ki,h.Ti,c)){l=v;break}}null!=l&&(f=a[0],a.splice(0,l+1),(p=new q).Vr=s.Vr,p.ki=c,(f.du||f.ki.du)&&(p.du=!0,f.du?p.ta=f.ta:p.ta=f.ki),a.unshift(p),0==i)&&0==e&&(this.uf=c)}}s=u.du||u.ki.du;if(this.sf&&!u.me&&(i!==this.qr.length-1||!this.isEndEntrance)&&!s||this.sf&&s){var b=t.Ia(u.ki).Gu(u.ki).Ns;if(this.ef=null,b&&b.pass!==ft.NaviModelPassType_NOT_PASS&&b.pass!==ft.NaviModelPassType_DECORATE){for(var p,m=null,w={x:-1,y:-1},g=a.length-1;0<g;g--){var _=a[g],j=a[g-1];if(at.qt(_.ki,j.ki,b.Ti,w)){m=g;break}}null!=m&&(f=a[a.length-1],a.splice(m,a.length-m),(p=new q).Vr=u.Vr,p.ki=w,(f.du||f.ki.du)&&(p.du=!0,f.du?p.ta=f.ta:p.ta=f.ki),a.push(p),i==this.qr.length-1)&&o==r.length-1&&(this.ef=w)}}e=o,n.push.apply(n,Y(a))}this.qr[i].qr=n}}},Ef:function(t,i){this.En(),t.process&&(delete t.process,delete t.tmpNode),i.process&&(delete i.process,delete i.tmpNode),this.qr=[];var r=null,n=Number.MAX_VALUE,e=[],o=(r=this.lf&&this.barrierFree?this.nf:this.rf).Ia(t);if(!o)return ut.ROUTE_FAILED_NO_DATA_START;var s=r.Ia(i);if(!s)return ut.ROUTE_FAILED_NO_DATA_DEST;o.En(),s.En();var u=o.Gu(t);if(u&&u.Ns&&u.Ns.pass==ft.NaviModelPassType_NOT_PASS)return{rst:ut.ROUTE_FAILED_NO_START_ARRIVAL,dist:n,nodePath:e};var a=s.Gu(i);if(a&&a.Ns&&a.Ns.pass==ft.NaviModelPassType_NOT_PASS)return{rst:ut.ROUTE_FAILED_NO_DEST_ARRIVAL,dist:n,nodePath:e};this.ei=t,this.xs=u.Ns,this.oi=i,this.Ps=a.Ns;var f=o.Vr,h=s.Vr,s=u.Ns,u=a.Ns,a=ut.ROUTE_FAILED_CANNOT_ARRIVE;if(this.qr=[],f===h){var l=t.level;o.xs=s,o.Ps=u,o.ys=this.ys,(a=o.ps(t,i,this.hs))===ut.ROUTE_SUCCESS&&(s=o.Ss(),this.qr.push({ne:l,qr:s}))}else{this.If(f,h,t,i)!=ut.ROUTE_SUCCESS&&(a=ut.ROUTE_FAILED_OUTLINE),this.Va.reverse();u=this.Af(r,t,i);if(u==ut.ROUTE_SUCCESS){for(var c=this.ah(),v=0;v<e.length;v++)c.push.apply(c,Y(e[v].ue));return{rst:u,dist:n=this.fh(c),nodePath:c,naviResult:e}}a=u}if(a!=ut.ROUTE_SUCCESS)for(;2<this.xf(f,h,t,i).length;){if(this.Af(r,t,i)===ut.ROUTE_SUCCESS){for(var y=this.ah(),d=0;d<e.length;d++)y.push.apply(y,Y(e[d].ue));return n=this.fh(y),this.Pf(),{rst:ut.ROUTE_SUCCESS,dist:n,nodePath:y,naviResult:e}}f===h&&0<this.Va.length&&(h=this.Va[this.Va.length-1].Me)}o=this.ah(),n=this.fh(o);return this.Pf(),{rst:a,dist:n,nodePath:o}},ah:function(){for(var t=[],i=0;i<this.qr.length;i++)t.push.apply(t,Y(this.qr[i].qr));return t},kf:function(t,i){this.En(),t.process&&(delete t.process,delete t.tmpNode);var r,n=z(i);try{for(n.s();!(r=n.n()).done;){var e=r.value;e.process&&(delete e.process,delete e.tmpNode)}}catch(t){n.e(t)}finally{n.f()}var o=[],s=null,u=Number.MAX_VALUE,a=(s=this.lf&&this.barrierFree?this.nf:this.rf).Ia(t);if(!a)return{rst:ut.ROUTE_FAILED_NO_DATA_START};var f=a.Gu(t);if(f&&f.Ns&&f.Ns.pass==ft.NaviModelPassType_NOT_PASS)return{rst:ut.ROUTE_FAILED_NO_START_ARRIVAL,dist:u,nodePath:[]};for(var h=new Map,l=0;l<i.length;l++){var c,v=i[l],y=s.Ia(v);y?(c=y.Gu(v),v.Ps=c.Ns,c&&c.Ns&&c.Ns.pass==ft.NaviModelPassType_NOT_PASS?o.push({point:v,path:null}):h.has(y.Vr)?h.get(y.Vr).endPoints.push(v):h.set(y.Vr,{dijk:y,endReachable:c,endPoints:[v]})):o.push({point:v,path:null})}var d,b=[],p=z(h);try{for(p.s();!(d=p.n()).done;){var m=fs(d.value,2),w=(m[0],m[1]),g=w.dijk,D=w.endPoints,C=a.Vr,F=g.Vr;t instanceof q||f.Ns;if(C===F){t.level;var _,j=a,S=(j.xs=t instanceof q?null:f.Ns,j.ys=this.ys,j._s(t,D,this.hs)),O=new Map,E=null,k=new Map,T=z(S);try{for(T.s();!(_=T.n()).done;){var M,R=fs(_.value,2),N=R[0],B=R[1],I=[],A=(Number.MAX_VALUE,k.set(N.Vr,N),z(B));try{for(A.s();!(M=A.n()).done;){var x=fs(M.value,2),G=x[0],U=x[1],V=this.fh(U);I.push({id:G.Vr,length:V})}}catch(t){A.e(t)}finally{A.f()}N.ku&&(E=N),O.set(N.Vr,{visited:!1,dist:Number.MAX_VALUE,adjs:I})}}catch(t){T.e(t)}finally{T.f()}for(var P=this.hh(O,j.ns,E),L=0;L<P.length-1;L++){var Z=k.get(P[L]),W=k.get(P[L+1]);b.push.apply(b,Y(S.get(Z).get(W))),L!=P.length-2&&b.splice(-1,1)}}}}catch(t){p.e(t)}finally{p.f()}return{rst:ut.ROUTE_SUCCESS,level:t.level,path:b}},hh:function(t,i){t.get(i.Vr).dist=0;var r=[];return r.push(i.Vr),this.lh(t,i.Vr,0,r),this.bf},lh:function(t,i,r,n){if(n.length>=t.size)r<this.df&&(this.df=r,this.bf=Y(n));else if(!(r>this.df)){var e,o=z(t.get(i).adjs);try{for(o.s();!(e=o.n()).done;){var s=e.value;if(s.id!==i&&-1===n.indexOf(s.id)){if(n.push(s.id),(r+=s.length)>this.df)return;this.lh(t,s.id,r,n),n.pop(),r-=s.length}}}catch(t){o.e(t)}finally{o.f()}}},yh:function(t,i,r,n,e){var o;if(r>=t.size-1)n<this.df&&(this.df=n,Object.assign(this.bf,[]),(o=this.bf).push.apply(o,Y(e)));else if(!(n>this.df)){var s,u=z(t.get(i).adjs);try{for(u.s();!(s=u.n()).done;){var a=s.value;if(a.id!=i&&-1===e.indexOf(a.id)){if(e.push(a.id),(n+=a.length)>=this.df)return;this.lh(t,a.id,r+1,n,e),e.pop(),n-=a.length}}}catch(t){u.e(t)}finally{u.f()}}},dh:function(t,i,r){var n=t.Ia(r.ki).Gu(r.ki).Ns;if(this.sf&&(this.ef=null,n)&&0<i.length){for(var e=null,o={x:-1,y:-1},s=i.length-1;0<s;s--){var u=i[s];if(at.qt(u.ki,i[s-1].ki,n.Ti,o)){e=s;break}}null!=e&&(t=i[i.length-1],i.splice(e,i.length-e),(r=new q).Vr=-1,r.ki=o,(t.du||t.ki.du)&&(r.du=!0,t.du?r.ta=t.ta:r.ta=t.ki),i.push(r),this.ef=o)}return i},fh:function(t){var i=0;if(!(null==t||t.length<=1))for(var r=1;r<t.length;r++)i+=at.Tt(t[r].ki,t[r-1].ki);return i},Mf:function(r,t,i,n,e){var o=Math.abs(r.ne-t.ne),s=[];function u(t,i){t=r.ro(t,i,a);s.push.apply(s,Y(t))}var a=[];if(0==this.lf&&1==this.barrierFree)for(var f=0;f<r.io.length;f++)1==r.io[f].th&&a.push(r.io[f]);else a=r.io;for(var h,l,c=0;c<a.length;c++){var v=i instanceof q?i.ki:i,y=a[c];y.ye=at.Tt(v,y.ki)}1===this.Ai?s=a:(h=(h=r.bs.bi.size).x+h.y,g.PRIORITY_LIFTONLY!==this.xa&&g.PRIORITY_ESCALATORONLY!==this.xa&&g.PRIORITY_STAIRONLY!==this.xa&&g.PRIORITY_ACCESSIBLEONLY!==this.xa||(l=null,g.PRIORITY_LIFTONLY===this.xa&&(l=ft.NaviLiftType_Lift),g.PRIORITY_ESCALATORONLY===this.xa&&(l=ft.NaviLiftType_Escalator),g.PRIORITY_STAIRONLY===this.xa&&(l=ft.NaviLiftType_Stair),g.PRIORITY_ACCESSIBLEONLY===this.xa&&(l=ft.NaviLiftType_Accessible),s=r.ro(l,null,a)),g.PRIORITY_LIFTFIRST!==this.xa&&g.PRIORITY_ESCALATORFIRST!==this.xa&&g.PRIORITY_STAIRFIRST!==this.xa&&g.PRIORITY_DEFAULT!==this.xa||(g.PRIORITY_LIFTFIRST!==this.xa&&g.PRIORITY_DEFAULT!==this.xa||(u(ft.NaviLiftType_Lift,-15*o),u(ft.NaviLiftType_Escalator,-8*o),u(ft.NaviLiftType_Stair,0)),g.PRIORITY_ESCALATORFIRST===this.xa&&(u(ft.NaviLiftType_Lift,-8*o),u(ft.NaviLiftType_Escalator,-15*o),u(ft.NaviLiftType_Stair,0)),g.PRIORITY_STAIRFIRST===this.xa&&(u(ft.NaviLiftType_Lift,-8*o),u(ft.NaviLiftType_Escalator,0),u(ft.NaviLiftType_Stair,-15*o))),g.PRIORITY_LIFTFIRST1!==this.xa&&g.PRIORITY_ESCALATORFIRST1!==this.xa&&g.PRIORITY_STAIRFIRST1!==this.xa||(g.PRIORITY_LIFTFIRST1===this.xa&&(u(ft.NaviLiftType_Lift,-h),u(ft.NaviLiftType_Escalator,0),u(ft.NaviLiftType_Stair,0)),g.PRIORITY_ESCALATORFIRST1===this.xa&&(u(ft.NaviLiftType_Lift,0),u(ft.NaviLiftType_Escalator,-h),u(ft.NaviLiftType_Stair,0)),g.PRIORITY_STAIRFIRST1===this.xa&&(u(ft.NaviLiftType_Lift,0),u(ft.NaviLiftType_Escalator,0),u(ft.NaviLiftType_Stair,-h))));var d=this;s.sort(function(t,i){if(t.zone!==i.zone){if(t.zone===d.hf)return-1;if(i.zone===d.hf)return 1}return t.ye-i.ye});for(var b=0;b<s.length;b++){var p=s[b];if(!(1===p.we&&t.ne<r.ne)&&!(2===p.we&&t.ne>r.ne))for(var m=0;m<t.io.length;m++){var w=t.io[m];if(p.he===w.he){n.push(p),e.push(w);break}}}return 0!==n.length},bh:function(r,t){t.sort(function(t,i){return at.Mt(r,t)-at.Mt(r,i)})},ph:function(t,i){var r=null;if(!(i.length<1)){var n=(r=i[0]).index;if(!(i.length<2)&&3<=i.length){for(var e,o=Number.MAX_VALUE,s=-1,u=0;u<t.length;u++)u!=n&&(e=at.Tt(t[n],t[u]))<o&&(o=e,s=u);s!=i[1].index&&(r=i[1])}}return r},xu:function(t){0<t.length&&(this.su=!0);var i=new Map;if(void 0!==t&&0===t.length){var r,n=this.rf.Ra,e=this.rf.Ra,o=z(this.uu.keys());try{for(o.s();!(r=o.n()).done;){var s,u=r.value,a=z(n.keys());try{for(a.s();!(s=a.n()).done;){var f=s.value,h=n.get(f);h.level===u&&h.xu([])}}catch(t){a.e(t)}finally{a.f()}var l,c=z(e.keys());try{for(c.s();!(l=c.n()).done;){var v=l.value,y=e.get(v);y.level===u&&y.xu([])}}catch(t){c.e(t)}finally{c.f()}}}catch(t){o.e(t)}finally{o.f()}this.uu.clear()}else{for(var d=0;d<t.length;d++){var b=t[d],p=i.get(b.ne);p||i.set(b.ne,p=[]),p.push(b)}var m,w=this.rf.Ra,g=this.rf.Ra,_=z(i.keys());try{for(_.s();!(m=_.n()).done;){var j=m.value,S=this.uu.get(j);if(!S||this.mh(i.get(j),S)){var O,E=z(w.keys());try{for(E.s();!(O=E.n()).done;){var k=O.value,T=w.get(k);T.level===j&&(T.xu(i.get(j)),this.uu.set(j,i.get(j)),0)}}catch(t){E.e(t)}finally{E.f()}var M,R=z(g.keys());try{for(R.s();!(M=R.n()).done;){var N=M.value,I=g.get(N);I.level===j&&(I.xu(i.get(j)),this.uu.set(j,i.get(j)),0)}}catch(t){R.e(t)}finally{R.f()}}}}catch(t){_.e(t)}finally{_.f()}}},wh:function(){var t,i=this.rf.Ra,r=z(this.uu.keys());try{for(r.s();!(t=r.n()).done;){var n,e=t.value,o=z(i.keys());try{for(o.s();!(n=o.n()).done;){var s=n.value,u=i.get(s);u.level===e&&u.wh()}}catch(t){o.e(t)}finally{o.f()}}}catch(t){r.e(t)}finally{r.f()}this.uu.clear()},mh:function(t,i){if(t.length!=i.length)return!0;for(var r=0;r<t.length;r++){for(var n=!1,e=0;e<i.length;e++)i[e].gh(t[r])&&(n=!0);if(!n)return!0}return!1},Mu:function(){for(var t in this.ff){var i,r=parseInt(t),n=void 0,e=z((n=(this.lf&&this.barrierFree?this.rf:this.nf).Ra).keys());try{for(e.s();!(i=e.n()).done;){var o=i.value;n.get(o).ne===r&&(dij.assignedPts=this.ff[r],dij.Mu(),this.qr.push({ne:r,qr:dij.Ss()}))}}catch(t){e.e(t)}finally{e.f()}}}}),r),ms={zh:{straight:"",still_go_straight:"",back_to:"",turn_right:"",turn_left:"",right_front:" ",left_front:" ",turn_right_rear:"",turn_left_rear:"",up:"",down:"",up_to:"",down_to:"",drive_up:"",drive_down:"",meter:"",pass:"",arrived:"",front:"",stair:"",stair_pure:"",escalator_pure:"",lift_pure:"",ramp_pure:"",take:"",along:"",take_stair:"",along_ramp:"",front_pure:"",right_front_pure:"",right_pure:"",right_back_pure:"",back_pure:"",left_back_pure:"",left_pure:"",left_front_pure:"",east:"",west:"",south:"",north:"",southeast:"",northeast:"",southwest:"",northwest:"",face_to:"",start:"",dest:"",enter:"",outdoor:"",entrance:"",exit:"",reach:"",finish:""},en:{straight:"go straight",still_go_straight:"go straight",back_to:"turn back",turn_right:"turn right",turn_left:"turn left",right_front:"go straight right front ",left_front:"go straight left front ",turn_right_rear:"turn right rear",turn_left_rear:"turn left rear",up:"up",down:"up",up_to:"up to",down_to:"down to",drive_up:"drive up",drive_down:"drive down",meter:"meter",pass:"pass",arrived:"arrived",front:"front",stair:"stair",stair_pure:"stair",escalator_pure:"escalator",lift_pure:"lift",ramp_pure:"ramp",take:"take",along:"along",take_stair:"take stair",along_ramp:"along ramp",front_pure:"front",right_front_pure:"right front",right_pure:"right",right_back_pure:"right back",back_pure:"back",left_back_pure:"left back",left_pure:"left",left_front_pure:"left front",east:"east",west:"west",south:"south",north:"north",southeast:"southeast",northeast:"northeast",southwest:"southwest",northwest:"northwest",face_to:"face to",start:"start",dest:"dest",enter:"enter",outdoor:"outdoor",entrance:"entrance",exit:"exit",reach:"reach",finish:"the destination is on your"}};function ws(t){return(ws="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gs(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=ws(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=ws(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==ws(t)?t:t+""))(n.key),n)}}function _s(t,i,r){return i&&gs(t.prototype,i),r&&gs(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var n=_s(function t(i){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this._h=i.data||null,this.jh=i.directionAssert||10,this.Sh=i.combineAsset||5,this.Oh=i.combineDistance||.1,this.Eh=i.language||u.ZH,this.Ai=i.type||O.Walk,this.kh=["north","northeast","east","southeast","south","southwest","west","northwest","north"],this.Th=["front_pure","right_front_pure","right_pure","right_back_pure","back_pure","left_back_pure","left_pure","left_front_pure","front_pure"],this.Mh=["still_go_straight","right_front","turn_right","turn_right_rear","back_to","turn_left_rear","turn_left","left_front","still_go_straight"],this.Rh=0,this.Nh=[],this.Ih=!1,this.Ah=0,this.xh=i.reqDest,this.Ph=null,Object.assign(this,i)}),js=(Object.assign(n.prototype,{Lh:function(t){for(var i=[],r=0;r<t.length;r++)i=i.concat(t[r].ue);return i},Dh:function(t,i){var r=Math.PI/4,t=t/r,n=parseInt(t),t=t%1*r;return n%2==0?i<t&&(n+=1):r-i<=t&&(n+=1),n},Ch:function(t,i){var r=i.angleTo(t);return r=new V(i.x,i.z,i.y).cross(new V(t.x,t.z,t.y)).z<0?2*Math.PI-r:r},kn:function(){var t={center:{x:0,y:0,z:0}};return this._h&&(t.center.x=this._h.scene.defCenX,t.center.y=this._h.scene.defCenY,t.center.z=this._h.scene.defCenZ),t},Fh:function(t,i){var r=0;return i.level&&(r=this.Pn(i.level).height),new V(i.x-t.x,t.y+r,-i.y+t.y)},Bh:function(t){t=ms[this.Eh][t];return t||""},Pn:function(t){var i=null;if(!this._h)return null;for(var r=this._h.scene,i={level:t,height:0,gname:"",desc:""},n=0;n<r.layerGroups.length;n++){var e=r.layerGroups[n];if(e.gid===t){i.height=e.height,i.gname=e.gname,i.desc=e.desc;break}}return i},Gh:function(t){if(-1!=t)switch(t){case 2:return" "+this.Bh("stair_pure");case 3:return" "+this.Bh("escalator_pure");case 1:return" "+this.Bh("lift_pure");case 5:return" "+this.Bh("ramp_pure");default:return""}return this.Bh("stair")},Uh:function(t,i){var r,n,e,o;return i==t.length-1?{index:t[t.length-1].index}:(e=n=new V(0,0,1),0!=i&&((e=t[i].clone().sub(t[i-1]).normalize()).y=0,e.z*=-1),(o=t[i+1].clone().sub(t[i])).y=0,r=o.length(),(o=o.normalize()).z*=-1,n=this.Dh(this.Ch(n,o),22.5*at.ht()),e=this.Ch(e,o),{relField:o=this.Dh(e,this.jh*at.ht()),relDesc:this.Bh(this.Th[o]),relAngle:e*at.lt(),absField:n,absDesc:this.Bh(this.kh[n]),distance:r,index:t[i].index})},Vh:function(t,i,r){for(var n=this,e=this.kn().center,o=t.map(function(t,i){t=n.Fh(e,t);return t.index=i,t}),s=[],u=0;u<o.length;u++){var a=this.Uh(o,u);a.point=t[u],0!==i[u].me&&(a.isLift=!0),!0===i[u].du&&(a.du=!0),a.level=r,s.push(a)}for(var f=[s[0]],h=1;h<s.length;h++)s[h].isLift?f.push(s[h]):1==h&&s[0].distance<=this.Oh?(s[0].distance+=s[h].distance,s[0].relDesc=s[h].relDesc,s[0].relAngle=s[h].relAngle,s[0].absField=s[h].absField,s[0].absDesc=s[h].absDesc):(0===s[h].distance&&(f[f.length-1].distance+=s[h].distance),0===s[h].distance||s[h].distance<=this.Oh&&(s[h].relAngle<=this.Sh||360-s[h].relAngle<=this.Sh)&&!s[h].du||(s[h].relAngle<=this.Sh||360-s[h].relAngle<=this.Sh)&&!s[h].du?f[f.length-1].distance+=s[h].distance:f.push(s[h]));return f},Zh:function(t,i){var r=[],n=0;if(i.forEach(function(t){(t.du||t.ki.du)&&r.push(n),n++}),0!=r.length)for(;0!=r.length;){for(var e=0;e<t.length-1;e++)if(t[e].index<=r[0]&&t[e+1].index>=r[0]){t[e+1].du=!0;break}r.splice(0,1)}},Wh:function(t){var i="",t=this.Pn(t);return i=null==t||""+(i=this.Eh==u.ZH?t.desc:t.gname.toUpperCase())!="null"&&""+i!=""&&""+i!="undefined"?i:t.gname.toUpperCase()},qh:function(t,i,r,n,e,o){var s,u=t[i],a=t[i+1],f=null,h=this.Bh(this.Mh[a.relField]),l=(this.Ih=i==t.length-3&&a.distance<this.Rh,h&&!this.Ih||(n?(this.Ih=!1,h||(f=this.Yh(t[i+1].point,e),e=this.Gh(f),s=null,l=this.Wh(n),h=this.Ai==O.Drive?(s=r<n?this.Bh("drive_up"):this.Bh("drive_down"),this.Bh("along")+e+" "+s+" "+l):(s=r<n?this.Bh("up_to"):this.Bh("down_to"),this.Bh("take")+e+" "+s+" "+l))):(this.Ih&&(this.Ah=a.distance),o||(h=this.Bh("arrived"),this.Ai==O.Drive&&(r=new V(t[t.length-2].point.x,0,t[t.length-2].point.y),e=new V(t[t.length-1].point.x,0,t[t.length-1].point.y),s=new V(this.xh.x,0,this.xh.y),l=e.clone().sub(r),o=s.clone().sub(r),e=!1,(s=at.Qt(t[t.length-2].point,t[t.length-1].point,this.xh))&&1<at.Tt(s,t[t.length-1].point)+at.Tt(s,t[t.length-2].point)-l.length()&&(e=!0),r=o.angleTo(l)*at.lt(),s=o.clone().cross(l).y,o=null,r<1&&e?o="front_pure":0<s?o=e?"left_front_pure":"left_pure":s<0&&(o=e?"right_front_pure":"right_pure"),this.Ph=this.Bh(o))))),null),l=0==i?2==t.length?this.Bh("face_to")+" "+u.absDesc+" "+this.Bh("straight")+" "+Math.ceil(u.distance)+" "+this.Bh("meter")+" "+h:this.Bh("face_to")+" "+u.absDesc+" "+this.Bh("straight")+" "+Math.ceil(u.distance)+" "+this.Bh("meter")+" "+this.Bh(this.Mh[t[i+1].relField]):this.Bh("straight")+" "+Math.ceil(u.distance+(this.Ih&&!n?a.distance:0))+" "+this.Bh("meter")+" "+h;return("arrived"==h||h==this.Bh("arrived")&&this.Ai==O.Drive&&this.Ph)&&(l=l+", "+this.Bh("finish")+" "+this.Ph,"zh"==this.Eh)&&(l+=""),[l=a.du?(l+=" ")+this.Bh("pass"):l,f]},Xh:function(t,i,r,n,e){var o=t[i],s=t[i+1];return this.Bh(this.Mh[t[i+1].relField])&&!this.Ih||(n?(t=r<n?this.Bh("up"):this.Bh("down"),s.relDesc=t):s.relDesc=e?this.Bh("front_pure"):this.Bh("dest")),{startPoint:o.point,startLevel:o.level,startIndex:o.index,endPoint:s.point,endLevel:s.level,endIndex:s.index,startDirection:o.absDesc,endDirection:s.relDesc,distance:o.distance+(this.Ih&&!n?s.distance:0)}},Yh:function(t,i){for(var r,n=Number.MAX_SAFE_INTEGER,e=-1,o=0;o<i.length;o++)i[o]&&(r=Math.pow(i[o].ki.x-t.x,2)+Math.pow(i[o].ki.y-t.y,2))<n&&0!==i[o].me&&(n=r,e=i[o].me);return e},Hh:function(t){for(var i,r=t.Qh,n=t.Kh,e=t.result,o=[],s=[],u=[],a=null,f=0,h=[],l=!(this.Nh=[]),c=null,v=null,t=t.buildingName||this.Bh("outdoor"),y=this.Lh(e),d=0;d<e.length;d++){if(i=(w=e[d]).level,a=null,d<e.length-1)for(var b=d;b<e.length;b++)if(e[b].level!=i){a=e[b].level;break}var p,m,w,g=this.Vh(p=w.pointList,w.ue,i);if(this.Zh(g,w.ue),1<g.length&&(this.Nh=this.Nh.concat(g)),1==g.length)(a||l)&&(l?s.length&&(d==e.length-1&&(n?(o[o.length-1]+=" "+this.Bh("arrived"),s[s.length-1].endDirection=this.Bh("dest")):s[s.length-1].endDirection=this.Bh("front_pure")),s[s.length-1].endPoint=p[0],s[s.length-1].endLevel=i):c!=i&&null!=c||(w=null,m=this.Wh(a),v=this.Ai===O.Drive?(w=i<a?this.Bh("drive_up"):this.Bh("drive_down"),this.Bh("along_ramp")+" "+w+" "+m):(w=i<a?this.Bh("up_to"):this.Bh("down_to"),this.Bh("take_stair")+" "+w+" "+m),o.push(v),s.push({startPoint:p[0],startDirection:i<a?this.Bh("up"):this.Bh("down"),startLevel:i})),l=!l);else for(var c=i,_=0;_<g.length-1&&!this.Ih;_++){var j=this.qh(g,_,i,a,y,n),S=j[0],j=j[1];j&&u.push(j),o.push(S),s.push(this.Xh(g,_,i,a,n))}1<g.length&&(w=g.reduce(function(t,i){return t+(i.distance||0)},0),h.push({level:i,distance:w}),f+=w)}return r&&0<o.length&&(o[0]=this.Bh("enter")+" "+t+" "+o[0]),n&&0<o.length&&(t===this.Bh("outdoor")?o[o.length-1]=o[o.length-1]+this.Bh("reach")+" "+n+" "+this.Bh("entrance"):o[o.length-1]=o[o.length-1]+this.Bh("reach")+" "+t+" "+this.Bh("exit")),[o,s,f,h,this.Ah,u]}}),n);function Ss(t){return(Ss="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function T(t,i){var r,n,e,o,s="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(s)return e=!(n=!0),{s:function(){s=s.call(t)},n:function(){var t=s.next();return n=t.done,t},e:function(t){e=!0,r=t},f:function(){try{n||null==s.return||s.return()}finally{if(e)throw r}}};if(Array.isArray(t)||(s=Es(t))||i&&t&&"number"==typeof t.length)return s&&(t=s),o=0,{s:i=function(){},n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:i};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Os(t){return(t=>{if(Array.isArray(t))return ks(t)})(t)||(t=>{if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)})(t)||Es(t)||(()=>{throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}function Es(t,i){var r;if(t)return"string"==typeof t?ks(t,i):"Map"===(r="Object"===(r={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ks(t,i):void 0}function ks(t,i){(null==i||i>t.length)&&(i=t.length);for(var r=0,n=Array(i);r<i;r++)n[r]=t[r];return n}function Ts(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=Ss(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=Ss(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==Ss(t)?t:t+""))(n.key),n)}}function Ms(t,i,r){return i&&Ts(t.prototype,i),r&&Ts(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var r=Ms(function t(i){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.Jh=i.gate,this.$h=i.bidToOutline,this.tl=i.bidToOutlineAccess,this.il={},this.rl={},this.nl=-1,this.el=-1,this.ol=[],this.sl=[],this.ul=new Map,this.al=new Map,this.fl=[],this.hl=new Map,this.ll=[],this.cl=new Map,this.vl=new Map,this.yl=new Map,this.Ee=null,this.ke=null,this.dl=null,this.bl=null,this.Ai=i.type,this.pl=i.barrierFree,this.ml=!1,this.wl=null,this.gl=10,this._l=2,this.jl()}),Rs=(Object.assign(r.prototype,{jl:function(){this.Jh&&(this.Sl(),this.Ol(),this.El(this.ol,this.vl),this.El(this.sl,this.yl))},Sl:function(){for(var t=0;t<this.Jh.length;t++){var i=null,r=null,i=null==this.Ai||0===this.Ai?(r=this.Jh[t].accessible,this.Jh[t].navi):this.Jh[t].drive,n=""==this.Jh[t].bid?null:this.Jh[t].bid,e=this.Jh[t].gid,i=this.kl(i,e,n),r=this.kl(r,e,n);(e=this.fl).push.apply(e,Os(i)),(e=this.ll).push.apply(e,Os(r)),null==this.il[n]&&(this.il[n]=[]),(e=this.il[n]).push.apply(e,Os(i)),null==this.rl[n]&&(this.rl[n]=[]),(e=this.rl[n]).push.apply(e,Os(r))}for(var o=0;o<this.fl.length;o++)this.fl[o].Vr=o,this.hl.set(o,this.fl[o]);for(var s=0;s<this.ll.length;s++)this.ll[s].Vr=s,this.cl.set(s,this.ll[s])},kl:function(t,i,r){if(null==t)return[];for(var n=[],e=0;e<t.length;e++){var o=t[e];o.level=i,o.bid=r,n.push(o)}return n},Ol:function(){this.ol=this.Tl(this.hl);this.sl=this.Tl(this.cl,!0);for(var t=0;t<this.ol.length;t++)this.ol[t].Vr=t,this.ul.set(t,this.ol[t]);for(var i=0;i<this.sl.length;i++)this.sl[i].Vr=i,this.al.set(i,this.sl[i])},Tl:function(t,i){for(var r=[],n=Array.from(t.keys()),e=0;e<n.length;e++)for(var o=e+1;o<n.length;o++){var s,u=n[e],a=n[o],f=t.get(u),h=t.get(a);t.get(u).flag==t.get(a).flag&&(s=this.Ml(f,h),r.push(s)),t.get(u).bid==t.get(a).bid&&this.Rl(f,h,i)&&(s=this.Ml(f,h),r.push(s))}return r},Ml:function(t,i){var r,n,e,o=0,s={};return s.startPoint=t.Vr,s.endPoint=i.Vr,s.Vr=null,t.bid==i.bid?(r={x:t.pts[0],y:t.pts[1]},n={x:i.pts[0],y:i.pts[1]},e=Math.abs(t.level-i.level)*this.gl,0<=t.Vr&&0<=i.Vr?this._l=4:this._l=2,o=0!=e?at.distance(r,n)+e*this._l:void 0!==t.extentID&&void 0!==i.extentID&&t.extentID!==i.extentID?at.distance(r,n)*this._l:at.distance(r,n),s.dist=Number(o.toFixed(5))):s.dist=o,s},Rl:function(t,i,r){var n=t.bid,e=this.Nl(t),o=this.Nl(i);return(t.extentID=e)==(i.extentID=o)||(r?this.tl:this.$h).get(n).js(e,o)===ut.ROUTE_SUCCESS},Nl:function(t){for(var i,r=null==(i=this.$h.get(t.bid).rs)?void 0:i.no,n=0;n<r.length;n++){var e=r[n].bs,o=r[n].ne;if(t.level===o){o={x:t.pts[0],y:t.pts[1]};if(e.Ye(o))return e.Me}}return 0},Il:function(t){this.Ee=this.nl;var i=t.buildingID||null,r=[],n={type:null,pts:[t.x,t.y],bid:i,level:t.level,Vr:this.Ee,du:t.du},e=[];if(null==(e=(this.pl?this.rl:this.il)[i])||0==e.length)return!1;for(var o,s=0;s<e.length;s++)this.Rl(n,e[s])&&(o=this.Ml(n,e[s]))&&(o.Vr=this.el,r.push(o),(this.pl?(this.sl.push(o),this.al):(this.ol.push(o),this.ul)).set(this.el,o),--this.el);return this.pl?(this.ll.push(n),this.cl.set(this.Ee,n),this.El(r,this.yl)):(this.fl.push(n),this.hl.set(this.Ee,n),this.El(r,this.vl)),--this.nl,!0},Al:function(t){this.ke=this.nl;var i=t.buildingID||null,r=[],n={type:null,pts:[t.x,t.y],bid:i,level:t.level,Vr:this.ke,du:t.du},e=[];if(null==(e=(this.pl?this.rl:this.il)[i])||0==e.length)return!1;this.fl.push(n),this.hl.set(this.ke,n);for(var o,s=0;s<e.length;s++)this.Rl(n,e[s])&&(o=this.Ml(n,e[s]))&&(o.Vr=this.el,r.push(o),(this.pl?(this.sl.push(o),this.al):(this.ol.push(o),this.ul)).set(this.el,o),--this.el);return this.pl?(this.ll.push(n),this.cl.set(this.ke,n),this.El(r,this.yl)):(this.fl.push(n),this.hl.set(this.ke,n),this.El(r,this.vl)),--this.nl,!0},El:function(t,i){for(var r=0;r<t.length;r++){var n=t[r],e=n.startPoint,o=n.endPoint;i.has(e)||i.set(e,new Map),i.get(e).set(o,n.dist),i.has(o)||i.set(o,new Map),i.get(o).set(e,n.dist)}return i},xl:function(t,i,r){var n=null,e=null;if(this.pl){if(!this.yl.has(t))return!1;for(var o=0;o<i.length;o++)if(!this.yl.has(i[o]))return!1;n=this.cl,e=this.yl}else{if(!this.vl.has(t))return!1;for(var s=0;s<i.length;s++)if(!this.vl.has(i[s]))return!1;n=this.hl,e=this.vl}this.ks(i,t);var u,a=i.length,f=0,h=T(n.keys());try{for(h.s();!(u=h.n()).done;){var l=u.value;if(n.get(l).ye=l==t?0:Number.MAX_VALUE,n.get(l).de=!1,n.get(l).be=[],r instanceof Array)for(var c=0;c<r.length;c++){if(l!=r[c]&&n.get(l).flag===n.get(r[c]).flag){-1==r.indexOf(l)&&r.push(l);break}if(r.length>=n.size)return!1}}}catch(t){h.e(t)}finally{h.f()}var v=[];for(v.push(t);0<v.length;){var y=v[0],d=(v.splice(0,1),n.get(y));if(!d.de){d.de=!0;var b=i.indexOf(y);if(-1!=b&&++f==a)return!0;var p=e.get(y);if(p){var m,w=T(p.keys());try{for(w.s();!(m=w.n()).done;){var g=m.value,_=d.ye+p.get(g),j=n.get(g);r instanceof Array&&r.includes(g)||j.de||j.ye>_&&(j.ye=_,j.be=[],j.be.push(y),v.push(g))}}catch(t){w.e(t)}finally{w.f()}v.sort(function(t,i){return n.get(t).ye-n.get(i).ye})}}}return!(f<a)},ks:function(t,i){for(var r=t.indexOf(i);-1!=r;)t.splice(r,1),r=t.indexOf(i)},ps:function(){if(this.pl){if(!this.yl.has(this.Ee))return ut.ROUTE_FAILED_CANNOT_CALCULATE;if(!this.yl.has(this.ke))return ut.ROUTE_FAILED_CANNOT_CALCULATE}else{if(!this.vl.has(this.Ee))return ut.ROUTE_FAILED_CANNOT_CALCULATE;if(!this.vl.has(this.ke))return ut.ROUTE_FAILED_CANNOT_CALCULATE}var t=[];return t.push(this.ke),this.xl(this.Ee,t)?ut.ROUTE_SUCCESS:ut.ROUTE_FAILED_CANNOT_ARRIVE},Ss:function(){var t=[],i=[];i.push(this.ke),this.Os(i,t);for(var r=0;r<t.length;r++)t[r].paths.reverse();return t},Os:function(t,i){for(var r=0;r<t.length;r++){var n={paths:[],distance:0};n.paths.push(t[r]),this.Ms(t[r],n),i.push(n)}},Ms:function(t,i){var r=null,n=null;if(this.pl){if(0==this.cl.get(t).be.length)return;r=this.cl.get(t).be[0],n=this.cl.get(t).ye}else{if(0==this.hl.get(t).be.length)return;r=this.hl.get(t).be[0],n=this.hl.get(t).ye}null!=r&&(i.paths.push(r),i.distance+=n),this.Ms(r,i)},Pl:function(t){var i,r=new Map,n=T(t.keys());try{for(n.s();!(i=n.n()).done;){for(var e=i.value,o=at.zt(t.get(e)),s=(o.bid=e,0),u=0;u<t.get(e).length;u++)s+=t.get(e)[u].level;s=Math.floor(s/t.get(e).length),o.level=s,1<t.get(e).length&&(o.Ll=!0),r.set(e,o)}}catch(t){n.e(t)}finally{n.f()}return r},Dl:function(t){var i,r=null,n=null,e=[],o=T(t.keys());try{for(o.s();!(i=o.n()).done;){var s=i.value,u=this.Cl(t.get(s));if(!u)return null;u.bid==this.dl?r=u:u.bid==this.bl?n=u:e.push(u)}}catch(t){o.e(t)}finally{o.f()}return null!=r&&e.unshift(r),null!=n&&e.push(n),e},Cl:function(t){var i=t.bid||null,r=[],n={type:null,pts:[t.x,t.y],bid:t.bid,level:t.level,Vr:this.nl,du:t.du,Ll:t.Ll},e=(n.extentID=this.Nl(n),[]);if(!(e=(this.pl?this.rl:this.il)[i])||0==e.length)return null;for(var o,s=0;s<e.length;s++)(n.Ll||this.Rl(n,e[s]))&&(o=this.Ml(n,e[s]))&&(o.Vr=this.el,r.push(o),(this.pl?(this.sl.push(o),this.al):(this.ol.push(o),this.ul)).set(this.el,o),--this.el);return this.pl?(this.ll.push(n),this.cl.set(this.nl,n),this.El(r,this.yl)):(this.fl.push(n),this.hl.set(this.nl,n),this.El(r,this.vl)),--this.nl,n},Fl:function(){if(!this.Jh||0===this.Jh.length)return null;var t=null;if(this.ml){var i=this.Pl(this.wl),r=this.Dl(i);if(!r||0===r.length)return null;for(var n=[],e=null,o=null,s=0;s<r.length;s++)r[s].bid!==this.dl&&r[s].bid!==this.bl?n.push(r[s].Vr):(null===e&&r[s].bid===this.dl&&(e=r[s].Vr),null===o&&r[s].bid===this.bl&&(o=r[s].Vr));var i=[e],u=[];this.Bl(e,n,i,u),this.Bl(i[i.length-1],[o],i,u),null!=(i=u[u.length-1])&&i.paths.push(o),t=this.Gl(u)}return t},Gl:function(t){for(var i=[],r=-1,n=[],e=0;e<t.length;e++)for(var o,s=t[e].paths,u=null,a=0;a<s.length;a++)(0<=s[a]||0===a||a===s.length-1)&&(o=s[a],u=this.hl.get(o),-1==r&&(r=u.bid),u.bid==r?n.push(u):(i.push(n),n=[u]),r=u.bid),e==t.length-1&&a==s.length-1&&u&&i.push(n);for(var f=0;f<i.length;f++){var h=i[f].length;if(h<2)return null;2<h&&(i[f]=[i[f][0],i[f][h-1]])}return i},Bl:function(t,i,r,n){if(0!=i.length){for(var e,o=null,s=Number.MAX_VALUE,u=null,a=0,f=0;f<i.length;f++)this.xl(t,[i[f]])&&(this.Ms(i[f],e={paths:[],distance:0}),e.distance<s)&&(s=e.distance,o=i[f],u=e,a=f);o&&(r.push(o),u.paths.reverse(),n.push(u),i.splice(a,1),this.Bl(o,i,r,n))}},En:function(){this.fl=this.fl.filter(function(t){return 0<=t.Vr}),this.ll=this.ll.filter(function(t){return 0<=t.Vr}),this.ol=this.ol.filter(function(t){return 0<=t.Vr}),this.sl=this.sl.filter(function(t){return 0<=t.Vr});var t,i=T(this.hl.keys());try{for(i.s();!(t=i.n()).done;){var r=t.value;r<0&&this.hl.delete(r)}}catch(t){i.e(t)}finally{i.f()}var n,e=T(this.cl.keys());try{for(e.s();!(n=e.n()).done;){var o=n.value;o<0&&this.cl.delete(o)}}catch(t){e.e(t)}finally{e.f()}var s,u=T(this.ul.keys());try{for(u.s();!(s=u.n()).done;){var a=s.value;a<0&&this.ul.delete(a)}}catch(t){u.e(t)}finally{u.f()}var f,h=T(this.al.keys());try{for(h.s();!(f=h.n()).done;){var l=f.value;l<0&&this.al.delete(l)}}catch(t){h.e(t)}finally{h.f()}var c,v=T(this.vl.keys());try{for(v.s();!(c=v.n()).done;){var y=c.value;if(y<0)this.vl.delete(y);else{var d,b=T(this.vl.get(y).keys());try{for(b.s();!(d=b.n()).done;){var p=d.value;p<0&&this.vl.get(y).delete(p)}}catch(t){b.e(t)}finally{b.f()}}}}catch(t){v.e(t)}finally{v.f()}var m,w=T(this.yl.keys());try{for(w.s();!(m=w.n()).done;){var g=m.value;if(g<0)this.yl.delete(g);else{var _,j=T(this.yl.get(g).keys());try{for(j.s();!(_=j.n()).done;){var S=_.value;S<0&&this.yl.get(g).delete(S)}}catch(t){j.e(t)}finally{j.f()}}}}catch(t){w.e(t)}finally{w.f()}this.nl=-1,this.el=-1}}),r);function Ns(t){return(Ns="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function S(t){return(t=>{if(Array.isArray(t))return xs(t)})(t)||(t=>{if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)})(t)||As(t)||(()=>{throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}function Is(t,i){var r,n,e,o,s="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(s)return e=!(n=!0),{s:function(){s=s.call(t)},n:function(){var t=s.next();return n=t.done,t},e:function(t){e=!0,r=t},f:function(){try{n||null==s.return||s.return()}finally{if(e)throw r}}};if(Array.isArray(t)||(s=As(t))||i&&t&&"number"==typeof t.length)return s&&(t=s),o=0,{s:i=function(){},n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:i};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function As(t,i){var r;if(t)return"string"==typeof t?xs(t,i):"Map"===(r="Object"===(r={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?xs(t,i):void 0}function xs(t,i){(null==i||i>t.length)&&(i=t.length);for(var r=0,n=Array(i);r<i;r++)n[r]=t[r];return n}function Ps(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=Ns(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=Ns(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==Ns(t)?t:t+""))(n.key),n)}}function Ls(t,i,r){return i&&Ps(t.prototype,i),r&&Ps(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var n=Ls(function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.Fi=null,this.ei=null,this.oi=null,this.hs=null,this.xa=null,this.Ai=null,this.Pa=new Map,this.Ul=new Map,this.qr=ut.ROUTE_FAILED_CANNOT_ARRIVE,this.Vl=[],this.Zl=null,this.Wl=[],this.ef=null,this.ff=[],this.toDoors=!1,this.fromDoor=!1,this.barrierFree=!1,this.mf=[],this.ql=null,this.turnCost=0}),Ds=(Object.assign(n.prototype,{Yn:function(t){this.Fi=t,this.Ai=t.type,this.ql=t.bid||null;var i,r=new Map,n=Is(this.Ul.keys());try{for(n.s();!(i=n.n()).done;){var e=i.value;r.set(e,this.Ul.get(e).Da)}}catch(t){n.e(t)}finally{n.f()}var o,s=new Map,u=Is(this.Ul.keys());try{for(u.s();!(o=u.n()).done;){var a=o.value;s.set(a,this.Ul.get(a).Ca)}}catch(t){u.e(t)}finally{u.f()}t={gate:this.Fi.gate,bidToOutline:r,bidToOutlineAccess:s,type:this.Ai,barrierFree:this.barrierFree};this.Yl=new Rs(t)},Rf:function(t,i,r,n){this.En(),t.buildingID=void 0!==t.buildingID?t.buildingID:this.ql,i.buildingID=void 0!==i.buildingID?i.buildingID:this.ql,this.ei=t,this.oi=i,this.hs=r,this.xa=n;var e=[];if(this.ei.buildingID==this.oi.buildingID){var o=[[{pts:[t.x,t.y],bid:t.buildingID||null,level:t.level},{pts:[i.x,i.y],bid:i.buildingID||null,level:i.level}]];if(this.qr=this.zl(o),this.qr==ut.ROUTE_SUCCESS||this.qr==ut.ROUTE_FAILED_NO_START_ARRIVAL||this.qr==ut.ROUTE_FAILED_NO_DEST_ARRIVAL)return this.qr;if(null==this.Yl)return this.qr}if(0==(o=this.Xl(t,i)).length)this.qr=ut.ROUTE_FAILED_ENTRANCE;else{for(var s=0;s<o.length;s++)e.push(o[s][0].bid);r=this.zl(o);this.qr=r}return this.qr},En:function(){this.qr=ut.ROUTE_FAILED_CANNOT_ARRIVE,this.Vl=[],this.Zl=null,this.Wl=[]},Xl:function(t,i){var r=[];if(this.Hl(t,i)===ut.ROUTE_SUCCESS)for(var n=this.Ql()[0],e=[],o=0;o<n.length-1;o++){var s=n[o],u=n[o+1];0===e.length&&e.push(s),s.bid===u.bid?(e.push(u),o==n.length-2&&r.push(e)):(r.push(e),e=[])}for(var a=0;a<r.length;a++)2<r[a].length&&(r[a]=[r[a][0],r[a][r[a].length-1]]);return r},zl:function(t){var i,r=new Map,n=new Map;null!=(i=this.Yl)&&i.il&&(n=this.Yl.il);for(var e=0;e<t.length;){if(t[e].length<=1)return ut.ROUTE_FAILED_CANNOT_ARRIVE;for(var o=0;o<t[e].length-1;o++){var s=t[e][o].Vr,u=t[e][o+1].Vr,a=t[e][o].bid,f=this.Kl(t[e][o],t[e][o+1],a);if(f===ut.ROUTE_SUCCESS){var h=this.Jl(a);if(this.Wl.push({bid:a,result:h}),o+1===t[e].length-1){e+=1;break}}else{h=n[a];if(1==t.length)return f;if(e==t.length-1||f===ut.ROUTE_FAILED_NO_START_ARRIVAL){var l=t[e-1][0].Vr,c=u,v=(r[a]=r[a]||[],r[a].push(s),r[a]);if(v.length===h.length)return f;l=this.$l(l,[c],v);if(l.length<=1)return f;t.splice(e,1),t.splice(e-1,1),t.splice.apply(t,[e-1,0].concat(S(l))),e-=1,this.Wl.pop();break}c=s,v=t[e+1][t[e+1].length-1].Vr,l=(r[a]=r[a]||[],r[a].push(u),r[a]);if(l.length===h.length)return f;var y=this.$l(c,[v],l);if(!(1<y.length)){if(e<1)return f;var d=t[e-1][0].Vr,s=(r[a]=[],r[a].push(s),r[a]);if(s.length===h.length)return f;a=this.$l(d,[u],s);if(a.length<=1)return f;t.splice(e,1),t.splice(e-1,1),t.splice.apply(t,[e-1,0].concat(S(a))),e-=1,this.Wl.pop();break}t.splice(e+1,1),t.splice(e,1),t.splice.apply(t,[e,0].concat(S(y)))}}}return ut.ROUTE_SUCCESS},$l:function(t,i,r){var n=[],e=[],o=[],s=[];if(this.Yl.xl(t,i,r)){this.Yl.Os(i,n);for(var u=0;u<n.length;u++)n[u].paths.reverse();for(var a=0;a<n.length;a++){for(var f=[],h=0;h<n[a].paths.length;h++)this.barrierFree?f.push(this.Yl.cl.get(n[a].paths[h])):f.push(this.Yl.hl.get(n[a].paths[h]));e.push(f)}for(var l=e[0],c=0;c<l.length-1;c++){var v=l[c],y=l[c+1];if(0===o.length&&o.push(v),v.bid===y.bid)o.push(y),c==l.length-2&&s.push(o);else{if(o.length<2)return[];s.push(o),o=[]}}}return s},Kl:function(t,i,r){var n={},e=(void 0!==t.pts?(n.x=t.pts[0],n.y=t.pts[1]):(n.x=t.x,n.y=t.y),n.level=t.level,n.du=t.du,{}),r=(void 0!==i.pts?(e.x=i.pts[0],e.y=i.pts[1]):(e.x=i.x,e.y=i.y),e.level=i.level,e.du=i.du,this.Ul.get(r=void 0===r?null:r));if(t&&t.constructor&&"NaviRelationship"===t.constructor.name){t=r.zf(n);if(t&&t.road){if(t.road.roadEntry===ft.NaviRoadEntry_FORBID)return ut.ROUTE_FAILED_NO_START_ARRIVAL;(n=t.coords).name="NaviRelationship"}}if(i&&i.constructor&&"NaviRelationship"===i.constructor.name){t=r.zf(e);if(t&&t.road){if(t.road.roadEntry===ft.NaviRoadEntry_FORBID)return ut.ROUTE_FAILED_NO_DEST_ARRIVAL;(e=t.coords).name="NaviRelationship"}}return r.barrierFree=this.barrierFree,r.sf=this.toDoors,r.af=this.fromDoor,r.ys=this.turnCost,r.Rf(n,e,this.hs,this.xa)},tc:function(){return this.Wl},ic:function(t){for(var i=[],r=0;r<t.length;r++){var n=this.Jl(t[r]);i.push({bid:t[r],result:n})}return i},Jl:function(t){var t=this.Ul.get(t=void 0===t?null:t),i=t.Uf();return this.ef=t.ef,i},Hl:function(t,i){var r=ut.ROUTE_FAILED_CANNOT_ARRIVE;return this.Yl.En(),this.Yl.pl=this.barrierFree,r=this.Yl.Il(t)&&this.Yl.Al(i)?this.Yl.ps():r},Ql:function(){for(var t=this.Yl.Ss(),i=[],r=0;r<t.length;r++){for(var n=[],e=0;e<t[r].paths.length;e++)this.barrierFree?n.push(this.Yl.cl.get(t[r].paths[e])):n.push(this.Yl.hl.get(t[r].paths[e]));i.push(n)}return i},qf:function(t,i){var r=void 0!==t.buildingID?t.buildingID:this.ql,r=this.Ul.get(r).qf(t,i);return r&&void 0!==t.buildingID&&(r.coords.buildingID=t.buildingID),r},xu:function(t){var i=new Map;if(void 0!==t&&0===t.length){var r,n=Is(this.Ul.keys());try{for(n.s();!(r=n.n()).done;){var e=r.value;this.Ul.get(e).xu([])}}catch(t){n.e(t)}finally{n.f()}}else{for(var o=0;o<t.length;o++){var s=t[o],u=i.get(s.ql);u||i.set(s.ql,u=[]),u.push(s)}var a,f=Is(i.keys());try{for(f.s();!(a=f.n()).done;){var h=a.value;this.Ul.get(h).xu(t)}}catch(t){f.e(t)}finally{f.f()}}},Mu:function(){for(var t in this.ff){var i=parseInt(t),i=this.Ul.get(i),t=(i.ff=this.ff[t],i.Mu(),i.Uf());(i=this.Wl).push.apply(i,S(t))}},_f:function(t,i,r,n){this.ei=t,this.oi=i,this.hs=r,this.xa=n;for(var e=!1,o=0;o<this.mf.length;o++)this.mf[o].du=!0,this.mf[o].order?e=!0:e&&(this.mf[o].order=Number.MAX_VALUE);e&&this.mf.sort(function(t,i){return t.order-i.order}),this.mf.unshift(t),this.mf.push(i);for(var s=0;s<this.mf.length;s++)this.mf[s].buildingID=void 0!==this.mf[s].buildingID?this.mf[s].buildingID:this.ql;return e?this.rc(this.mf):(r=null,1<(n=this.nc(this.mf)).size&&this.Yl&&(this.Yl.wl=n,this.Yl.ml=!0,this.Yl.dl=t.buildingID,this.Yl.bl=i.buildingID,r=this.Yl.Fl()),this.ec(t,i,r,this.mf))},nc:function(t){for(var i=new Map,r=0;r<t.length;r++){var n=t[r].buildingID||null;i.has(n)||i.set(n,[]),i.get(n).push(t[r])}return i},ec:function(t,i,r,n){var e=new Map,o=new Map,s=(null!=(w=this.Yl)&&w.il&&(o=this.Yl.il),[]),u=null;if(n.shift(),n.pop(),r&&0!==r.length)for(var a=this.nc(n),f=0;f<r.length;){var h,l=r[f][0],c=l.Vr,v=r[f][1],y=v.Vr,d=l.bid;if(0==f?a.has(d)?(h=a.get(d),u=this.oc(t,v,d,h),a.delete(d)):u=this.Kl(t,v,d):f==r.length-1?a.has(d)?(h=a.get(d),u=this.oc(l,i,d,h),a.delete(d)):u=this.Kl(l,i,d):a.has(d)?(b=a.get(d),u=this.oc(l,v,d,b),a.delete(d)):u=this.Kl(l,v,d),u===ut.ROUTE_SUCCESS){var b=this.Jl(d);s.push({bid:d,result:b}),f+=1}else{if(1==r.length)return u;l=o[d];if(f==r.length-1||u===ut.ROUTE_FAILED_NO_START_ARRIVAL){var v=c,p=y,m=(e[d]=e[d]||[],e[d].push(c),e[d]);if(m.length===l.length)return u;v=this.$l(v,[p],m);if(v.length<=1)return u;r.splice(f,1),r.splice(f-1,1),r.splice.apply(r,[f-1,0].concat(S(v))),f-=1,s.pop()}else{p=c,m=r[f+1][r[f+1].length-1].Vr,v=(e[d]=e[d]||[],e[d].push(y),e[d]);if(v.length===l.length)return resultInBid;v=this.$l(p,[m],v);if(1<v.length)r.splice(f+1,1),r.splice(f,1),r.splice.apply(r,[f,0].concat(S(v)));else{if(f<1)return u;v=r[f-1][0].Vr,c=(e[d]=[],e[d].push(c),e[d]);if(c.length===l.length)return u;d=this.$l(v,[y],c);if(d.length<=1)return u;r.splice(f,1),r.splice(f-1,1),r.splice.apply(r,[f-1,0].concat(S(d))),f-=1,s.pop()}}}}else{var w=t.buildingID||null,u=this.oc(t,i,w,n),n=this.Jl(w);s.push({bid:w,result:n})}return this.Wl=s,this.qr=u},rc:function(t){for(var i,r=[],n=null,e=null,o=0;o<t.length-1;o++)if(t[o].buildingID==t[o+1].buildingID){var s=t[o].buildingID;if((n=this.toDoors&&0<o?(c=(e=r[r.length-1]).result[e.result.length-1].se,(v=t[o]).x=c[c.length-1].x,v.y=c[c.length-1].y,this.Kl(v,t[o+1],s)):this.Kl(t[o],t[o+1],s))!=ut.ROUTE_SUCCESS)return n;if(i={bid:s,result:this.Jl(s)},0<r.length){if(i.bid===r[r.length-1].bid)for(var u,a=r[r.length-1].result.length,f=r[r.length-1].result[a-1],h=!0,l=0;l<i.result.length;l++)f.ne==i.result[l].ne&&1<i.result[l].ue.length&&h?(r[r.length-1].result[a-1].ee+=i.result[l].ee,i.result[l].ue.shift(),i.result[l].se.shift(),(u=r[r.length-1].result[a-1].ue).push.apply(u,S(i.result[l].ue)),(u=r[r.length-1].result[a-1].se).push.apply(u,S(i.result[l].se))):(h=h&&!1,r[r.length-1].result.push(i.result[l]))}else r.push(i)}else{var c,v,y=null,y=this.toDoors&&0<o?(c=(e=r[r.length-1]).result[e.result.length-1].se,(v=t[o]).x=c[c.length-1].x,v.y=c[c.length-1].y,this.Xl(v,this.mf[o+1])):this.Xl(this.mf[o],this.mf[o+1]);if((n=this.zl(y))!=ut.ROUTE_SUCCESS)return n;for(var d=[],b=0;b<y.length;b++)d.push(y[b][0].bid);i=this.ic(d),r.push.apply(r,S(i))}return this.Wl=r,this.qr=n},oc:function(t,i,r,n){var e={},o=(void 0!==t.pts?(e.x=t.pts[0],e.y=t.pts[1]):(e.x=t.x,e.y=t.y),e.level=t.level,{}),r=(void 0!==i.pts?(o.x=i.pts[0],o.y=i.pts[1]):(o.x=i.x,o.y=i.y),o.level=i.level,this.Ul.get(r));if(t&&t.constructor&&"NaviRelationship"===t.constructor.name){t=r.zf(e);if(t&&t.road){if(t.road.roadEntry===ft.NaviRoadEntry_FORBID)return s=ut.ROUTE_FAILED_NO_START_ARRIVAL;(e=t.coords).name="NaviRelationship"}}if(i&&i.constructor&&"NaviRelationship"===i.constructor.name){t=r.zf(o);if(t&&t.road){if(t.road.roadEntry===ft.NaviRoadEntry_FORBID)return s=ut.ROUTE_FAILED_NO_DEST_ARRIVAL;(o=t.coords).name="NaviRelationship"}}r.mf=n,r.pf=0<n.length,r.barrierFree=this.barrierFree,r.af=this.fromDoor,r.sf=this.toDoors,r.hs=this.hs,r.xa=this.xa;var s=r._f(e,o);return r.mf=null,s},Ui:function(){this.Fi=null,this.Wl=null,this.Vl=null,this.Zl=null;var t,i=Is(this.Ul.keys());try{for(i.s();!(t=i.n()).done;){var r=t.value;this.Ul.get(r).Ui()}}catch(t){i.e(t)}finally{i.f()}}}),n);function Cs(t){return(Cs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Z(t,i){var r,n,e,o,s="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(s)return e=!(n=!0),{s:function(){s=s.call(t)},n:function(){var t=s.next();return n=t.done,t},e:function(t){e=!0,r=t},f:function(){try{n||null==s.return||s.return()}finally{if(e)throw r}}};if(Array.isArray(t)||(s=Bs(t))||i&&t&&"number"==typeof t.length)return s&&(t=s),o=0,{s:i=function(){},n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:i};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Fs(t){return(t=>{if(Array.isArray(t))return Gs(t)})(t)||(t=>{if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)})(t)||Bs(t)||(()=>{throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}function Bs(t,i){var r;if(t)return"string"==typeof t?Gs(t,i):"Map"===(r="Object"===(r={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Gs(t,i):void 0}function Gs(t,i){(null==i||i>t.length)&&(i=t.length);for(var r=0,n=Array(i);r<i;r++)n[r]=t[r];return n}function Us(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=Cs(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=Cs(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==Cs(t)?t:t+""))(n.key),n)}}var r=(()=>{function n(t,i,r){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");this.Fi=Object.assign({tile:!0,isPreview:!1},t),this.sc=new Map,this.uc=null,this.ac=[],this.fc=[],this.hc=[],this.isExistAccess=!0,this.isExistNavi=!0,this.isExistDrive=!0,this.load_cnt=0,this.Yl=null,this.lc=void 0!==t.mapID?t.mapID:null,this.cc=null,this.Bn=!!t.map,this.Gn=t.map?t.map.getDataManager():new be,this.vc=1,this.yc={radius:.5,dash:{size:4,gap:2}},this.Zn=i,this.Wn=r,this.Ai=t.type,this.dc=new Map,this.bc=new Map,this.qn=Ue.generateUUID(),this.mc=null,this.Yn()}return t=n,(i=[{key:"setObstructions",value:function(t){this.uc&&this.uc.xu(t)}},{key:"route",value:function(t,i,r){this.uc.fromDoor=void 0!==t.fromDoor&&t.fromDoor,this.uc.toDoors=void 0!==t.toDoors&&t.toDoors,this.uc.obstruct=void 0===t.obstruct||t.obstruct,this.uc.barrierFree=void 0!==t.barrierFree&&t.barrierFree,this.uc.turnCost=void 0!==t.turnCost?t.turnCost:0;var n=ut.ROUTE_FAILED_CANNOT_ARRIVE;if((n=t.viapoints&&0<t.viapoints.length?(this.uc.mf=t.viapoints,this.uc._f(t.start,t.dest,t.mode||j.MODULE_SHORTEST,t.priority||g.PRIORITY_DEFAULT)):this.uc.Rf(t.start,t.dest,t.mode||j.MODULE_SHORTEST,t.priority||g.PRIORITY_DEFAULT))===ut.ROUTE_SUCCESS){this.ac=this.uc.tc();var e=null,o=null;this.fc=[];for(var s=0;s<this.ac.length;s++)0<s&&(e=this.Fi.bidToName.get(this.ac[s-1].bid)?this.Fi.bidToName.get(this.ac[s-1].bid):"outdoor"),s<this.ac.length-1&&(o=this.Fi.bidToName.get(this.ac[s+1].bid)?this.Fi.bidToName.get(this.ac[s+1].bid):"outdoor"),this.ac[s].Qh=e,this.ac[s].Kh=o,o=e=null,this.ac[s].buildingName=this.Fi.bidToName.get(this.ac[s].bid),this.fc.push([this.wc(this.ac[s],{language:u.ZH}),this.wc(this.ac[s],{language:u.EN})]);this.cc=this.uc.ef,i&&i(this.ie())}else r&&r(n)}},{key:"dispose",value:function(){this.gc=null,this.ac=[],this.fc=[],this.uc&&(this.uc.Ui(),this.uc=null)}},{key:"pathConstraint",value:function(t,i){return this.uc?this.uc.qf(t,i):null}},{key:"getNaviGraph",value:function(t){var i=t.buildingID,t=t.level;return null!=i?null!=t?this.uc.Pa.get(i).get(t):this.uc.Pa.get(i):null!=t?this.uc.Pa.get(null).get(t):Fs(this.uc.Pa.values())}},{key:"query",value:function(t,i,r,n){var e=[],o=null,o=r?this.uc.Ul.get(r):this.uc.Ul.get(null),s=n?o.La:o.Pa;if(s){if(null==t){var u,a=Z(s.keys());try{for(a.s();!(u=a.n()).done;){var f=u.value;e.push({level:f,roadRanks:i,roadVector:s.get(f).eo.slice(0)})}}catch(t){a.e(t)}finally{a.f()}}else if(null==i)e.push({level:t,roadRanks:i,roadVector:s.get(t).eo.slice(0)});else{for(var h=[],l=s.get(t).eo,c=0;c<i.length;c++)for(var v=0;v<l.length;v++)l[v].Ie===i[c]&&h.push(l[v]);e.push({level:t,roadRanks:i,roadVector:h})}for(var y=0;y<e.length;y++)for(var d=0;d<e[y].roadVector.length;d++)e[y].roadVector[d]=Object.assign({},this._c(e[y].roadVector[d])),r&&(e[y].roadVector[d].buildingID=r)}return e}},{key:"intersectionRoadsByCircle",value:function(t,i,r){var n;if(!r||!r.roadVector||r.roadVector.length<=0)return null;var e,o=null==r.roadVector[0].buildingID?null:r.roadVector[0].buildingID,s={center:t,radius:i,points:[]},u=t.x-i,a=t.x+i,f=t.y-i,h=t.y+i,l=[],c=new Map,v=Z(r.roadVector);try{for(v.s();!(e=v.n()).done;){var y,d=e.value,b=at.Xt(t,i,d.startPoint,d.endPoint);if(!(b.length<1)){var p=d.roadEntry,m=d.endId;if(at.distance(d.endPoint,t)>i&&((p=p===ft.Entry_FORWARD?Ye.Entry_BACK:p)===ft.Entry_BACK&&(p=Ye.Entry_FORWARD),m=d.startId),p===Ye.Entry_FORWARD||p===Ye.Entry_BOTH){var w,g=Z(b);try{for(g.s();!(w=g.n()).done;){var _=w.value;_.direction=p,_.jc=m}}catch(t){g.e(t)}finally{g.f()}(y=s.points).push.apply(y,Fs(b)),d.startPoint.x>=u&&d.startPoint.x<=a&&d.startPoint.y>=f&&d.startPoint.y<=h&&l.push(d.startId),d.endPoint.x>=u&&d.endPoint.x<=a&&d.endPoint.y>=f&&d.endPoint.y<=h&&l.push(d.endId)}}}}catch(t){v.e(t)}finally{v.f()}for(var r=r.level,j=(null==(n=this.uc.Ul)?void 0:n.get(o)).Pa.get(r).ho,S=0,O=l;S<O.length;S++){var E=O[S];c.set(E,j.get(E))}var k,T=Z(s.points);try{for(T.s();!(k=T.n()).done;){var M=k.value;M.branch=this.Sc(c,M.jc,t.nodeID)}}catch(t){T.e(t)}finally{T.f()}return s}},{key:"queryNode",value:function(t){var i=t.buildingID?this.uc.Ul.get(t.buildingID):this.uc.Ul.get(null);if(null!=i){var r=(i=(t.barrierFree?i.La:i.Pa).get(t.level)).mo(t.point);if(!(r<=0))for(var n=i.eo,e=new Set,o=0;o<n.length;o++)if(r===n[o].Me){if(!e.has(n[o].Ee)&&at.Ht(t.point,n[o].ei))return t.nodeID=n[o].Ee,t;if(!e.has(n[o].ke)&&at.Ht(t.point,n[o].oi))return t.nodeID=n[o].ke,t;e.add(n[o].Ee),e.add(n[o].ke)}}return null}},{key:"constraintTrack",value:function(t){var i=[];if(!(null==t||t.length<=0)){for(var r=new Map,n=0;n<t.length;n++){var e=void 0===t[n].coords.buildingID?null:t[n].coords.buildingID;r.has(e)?r.get(e).push(t[n]):r.set(e,[t[n]])}if(!(r.size<=0)){var o,s=Z(r.keys());try{for(s.s();!(o=s.n()).done;){for(var u=o.value,a=r.get(u),f=new Set,h=new Set,l=0;l<a.length;l++)f.add(a[l].coords.level),h.add(a[l].road.roadRank);if(f.size<=0)return i;var c=Array.from(f),v=Array.from(h);this.Oc(c,v,u)}}catch(t){s.e(t)}finally{s.f()}for(var y=t.length-1,d=0;d<y;d++){var b=this.Ec(t[d],t[d+1]);i.push(t[d].coords),i.push.apply(i,Fs(b)),d+1==y&&i.push(t[d+1].coords)}}}return i}}])&&Us(t.prototype,i),r&&Us(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,i,r})(),Vs=(Object.assign(r.prototype,{Yn:function(){this.Bn&&(t=this.Fi.map.getMapOptions(),this.Fi.mapID=t.mapID,this.Fi.appName=t.appName,this.Fi.key=t.key,this.Fi.license=t.license,this.Fi.mapURL=t.mapURL,this.Fi.mapURLAbsolute=t.mapURLAbsolute,this.Fi.navigationData=t.navigationData,this.Fi.buildingOptions=t.buildingOptions,this.Fi.type=this.Ai);var t={buildingID:this.Fi.mapID,appName:this.Fi.appName,key:this.Fi.key,license:this.Fi.license,mapURL:this.Fi.mapURL,mapURLAbsolute:this.Fi.mapURLAbsolute,buildingOptions:this.Fi.buildingOptions,navigationData:this.Fi.navigationData,merge:this.Fi.merge,loadNavi:!0,justDecode:!0,preLoad:!0,isPreview:"undefined"!=typeof KjWzhWlSj&&!!KjWzhWlSj.ProtoDef,tile:this.Fi.tile,type:this.Fi.type,bid:this.Fi.buildingID||null,gate:null,isOutdoor:!0,uuid:this.qn};this.lc||(this.lc=this.Fi.mapID),this.sc.set(t.bid,t),this.Fi.bidToMid=new Map,this.Fi.bidToName=new Map,this.Fi.bidToMid.set(t.bid,this.lc),this.uc=new Ds,this.Qn(t)},Qn:function(r){var n=this;setTimeout(function(){r.tile?n.Gn.load(r,function(t,i){n.Kn(t,i,r)}):n.Gn.loadWhole(r,function(t,i){n.Kn(t,i,r)})},0)},Kn:function(t,i,r){if("error"===t)this.isExistAccess=!1,this.isExistNavi=!1,this.isExistDrive=!1;else if("scene"===t&&i.naviType&&"undefined"!=i.naviType&&0!=i.naviType){this.isExistAccess=!0,this.isExistNavi=!0,this.isExistDrive=!0;var n=i.naviType;1===n?(this.isExistAccess=!1,this.isExistNavi=!1,this.isExistDrive=!1):(8<=n&&(n-=8),this.isExistAccess=!1,4<=n?n-=4:this.Ai===O.Drive&&(this.isExistDrive=!1),n<=0&&!this.isExistAccess&&this.Ai===O.Walk&&(this.isExistNavi=!1)),this.load_cnt++,this.isExistAccess||this.isExistNavi||this.Ai!==O.Walk?this.isExistDrive||this.Ai!==O.Drive||this.hc.push({buildingID:r.buildingID,error:"NONE_DRIVE_RODE_NETWORK",data:I.NONE_DRIVE_RODE_NETWORK}):this.hc.push({buildingID:r.buildingID,error:"NONE_WALK_RODE_NETWORK",data:I.NONE_WALK_RODE_NETWORK})}else if("decode"===t){n=new ps(r);n.Yn(i),this.uc.Ul.set(r.bid,n),this.uc.Pa.set(r.bid,n.Pa),i.gate&&(this.mc=i.gate.floors);for(var e=0;e<(null==(o=i.scene.buildings)?void 0:o.length);e++){var o=i.scene.buildings[e],s={mapID:this.Fi.mapID,buildingID:null,appName:this.Fi.appName,key:this.Fi.key,license:this.Fi.license,mapURL:this.Fi.mapURL,mapURLAbsolute:this.Fi.mapURLAbsolute,merge:this.Fi.merge,loadNavi:!0,justDecode:!0,preLoad:!0,isPreview:"undefined"!=typeof KjWzhWlSj,tile:this.Fi.tile,type:this.Fi.type,bid:null,isOutdoor:!1,uuid:this.qn},s=(s.buildingID=o.mid,s.bid=o.bid,Object.assign({},s));this.sc.set(o.bid,s),this.Fi.bidToMid.set(o.bid,o.mid),this.Fi.bidToName.set(o.bid,o.name),this.Qn(s)}this.uc.Ul.size===this.Fi.bidToMid.size&&(null!=this.mc&&this.uc.Yn(Object.assign(this.Fi,{gate:this.mc})),0!==this.load_cnt&&this.hc.length>=this.load_cnt?this.Wn&&this.Wn({result:this.hc}):(this.hc={state:t,error:"0",data:null},this.Zn&&this.Zn()))}},ie:function(){for(var t={buildings:[],distance:0,subs:[],viapoints:[]},i=0;i<this.ac.length;i++){var r,n={buildingID:null,buildingName:null,levels:[],distance:0},e=this.ac[i].bid,o=this.ac[i].buildingName,s=this.kc(this.ac[i],this.fc[i],e),u=(n.levels=s.levels,n.distance=s.distance,t.distance+=n.distance,i!==this.ac.length-1&&s.subs[s.subs.length-1]&&(s.subs[s.subs.length-1].transfer=N.TRANSFER_ENTRANCE),n.buildingID=e==this.lc?null:e,n.buildingName=o||null,Z(s.subs));try{for(u.s();!(r=u.n()).done;){var a=r.value;a.buildingID=n.buildingID,a.buildingName=n.buildingName}}catch(t){u.e(t)}finally{u.f()}t.buildings.push(n),(e=t.subs).push.apply(e,Fs(s.subs)),(o=t.viapoints).push.apply(o,Fs(s.viapoints))}return t},kc:function(t,i,r){if(0==t.length||0==i.length)return null;for(var n={viapoints:[],subs:[],levels:[],distance:0},e=i[0].descriptions,o=i[0].descriptionsData,s=i[1].descriptions,u=i[1].descriptionsData,a=i[0].ladderList,f=0,h=[],l=!1,c=[],v=0;v<o.length;v++){var y={instruction:{zh:null,en:null},waypoint:{points:null,direction:{zh:null,en:null}},viapoint:null,levels:null,distance:Number.NaN,buildingID:null},d=e[v],b=o[v],p=s[v],m=u[v],d=(y.instruction.zh=d,y.instruction.en=p,y.levels=[b.startLevel,b.endLevel],y.distance=void 0!==b.distance?b.distance:0,y.waypoint.direction.zh=[b.startDirection,b.endDirection||b.startDirection],y.waypoint.direction.en=[m.startDirection,m.endDirection||m.startDirection],y.levels[0]!=y.levels[1]?(l=!0,h.push.apply(h,Fs(y.levels)),y.transfer=a[f],f+=1):0!=h.length&&h.slice(-1)[0]==y.levels[0]&&!l||(h.push(y.levels[0]),l=!1),this.Tc([b.startIndex,b.endIndex],h,t.result));y.waypoint.points=d.points,d.via&&-1==c.indexOf(d.via)&&(y.viapoint=Object.assign({},d.via),n.viapoints.push(Object.assign({},d.via)),c.push(d.via)),n.distance+=y.distance,y.buildingID=r,n.subs.push(y)}for(var w=0;w<h.length;w++)0!=n.levels.length&&n.levels.slice(-1)[0]==h[w]||n.levels.push(h[w]);return n.door=this.cc,n},Tc:function(t,i,r){for(var n=[],e=[],o=null,s=[],u=0;u<r.length;u++){var a=r[u];if(s.push(a.ne),i.toString()==s.toString()){var f=i[i.length-1],h=a.se,l=a.ue;if(void 0===t[0]||void 0===t[1])n.push(Object.assign({level:a.ne},a.se[0])),e.push(a.ue[0]),a=r[u-1],n.unshift(Object.assign({level:a.ne},a.se[0])),e.unshift(a.ue[0]);else for(var c=t[0];c<=t[1];c++)n.push({x:h[c].x,y:h[c].y,level:f}),e.push(l[c]);break}}return e.forEach(function(t){t.du&&delete(o=t.ta).du}),{points:n,via:o}},wc:function(t,i){var r=t.bid;return this.Mc(t.result)?(r=new js(Object.assign({data:this.Gn.getDecode(this.sc.get(r)),directionAssert:10,combineAsset:10,language:u.ZH},i)).Hh(t),i=this.Rc(r[5]),{descriptions:r[0],descriptionsData:r[1],distance:r[2],distances:r[3],ladderList:i}):{}},Rc:function(t){for(var i=0;i<t.length;i++)switch(t[i]){case 1:t[i]=N.TRANSFER_LIFT;break;case 2:t[i]=N.TRANSFER_STAIR;break;case 3:t[i]=N.TRANSFER_ESCALATOR;break;case 4:t[i]=N.TRANSFER_ACCESSIBLE;break;case 5:t[i]=N.TRANSFER_RAMP;break;default:return}return t},Nc:function(t){this.uc.ff=t,this.uc.Mu(),this.ac=this._navi.Uf()},Ic:function(){return this.ac},Ac:function(t){var i=t||this.ac;if(!this.Mc(i))return[];var r,n=[];for(r in i)i[r].getPointList&&n.push.apply(n,Fs(i[r].pointList));return n},xc:function(t){var i=t||this.ac;if(!this.Mc(i))return[];for(var r=[],n=0;n<i.length;n++){for(var e=i[n],o=e.level,s=e.pointList,u={level:o,points:[]},a=0;a<s.length;a++)u.points.push(Object.assign({},s[a]));r.push(u)}return r},Pc:function(t){t=t||this.ac;if(!this.Mc(t))return 0;var i=this.Ac(t);if(0==i.length)return 0;for(var r=0,n=0;n<i.length-1;n++)r+=at.Tt(i[n],i[n+1]);return r},Lc:function(t){var i=t||this.ac;if(!this.Mc(i))return[];var r,n=[];for(r in i)!i[r].level||0!=r&&n[n.length-1]==i[r].level||n.push(i[r].level);return n},Dc:function(t,i){var r=i||this.ac;if(!this.Mc(r))return[];var n,e=[];for(n in r)r[n].level&&r[n].level==t&&(e=e.concat(r[n].pointList));return e},Mc:function(t){if(!Array.isArray(t))return!1;if(0==t.length)return!1;for(var i=0;i<t.length;i++)if(!(t[i]instanceof He))return!1;return!0},Cc:function(e,t){if(0===e.length)return null;null==t&&(t={});for(var i=Object.assign({},this.yc),o=(t&&t.style&&Object.assign(i,t.style),1===this.Ai&&(i.color="#002FA7"),t&&t.height?t.height:this.vc),s=[],u=0;u<e.length;u++)(()=>{var t=(i=e[u]).pointList;if(0===t.length)return;var i=i.level,r=[],n=(t.forEach(function(t){var i=parseFloat(""+t.x),t=parseFloat(""+t.y);r.push({x:i,y:t,z:o})}),t.length<2&&(n=parseFloat(""+t[0].x),t=parseFloat(""+t[0].y),r.push({x:n,y:t,z:o})),new fengmap.FMSegment);n.level=i,n.points=r,s.push(n)})();i=new fengmap.FMLineMarker(Object.assign({segments:s},i));return i.passed=t&&t.passed?t.passed:this._linePassed,i},_c:function(t){return{id:t.Vr,startPoint:{x:t.ei.x,y:t.ei.y},endPoint:{x:t.oi.x,y:t.oi.y},startId:t.Ee,endId:t.ke,roadRank:t.Ie,roadEntry:t.Ae}},Sc:function(t,i,r){if(0==t.length||null==t.get(i)||null==t.get(r))return!1;var n,e=new Map,o=Z(t.keys());try{for(o.s();!(n=o.n()).done;){var s=n.value;e.set(s,!1)}}catch(t){o.e(t)}finally{o.f()}for(var u=[i];0<u.length;){var a=u[0];if(e.get(a))u.splice(0,1);else{if(e.set(a,!0),u.splice(0,1),a==r)return!1;var f=t.get(a);if(!f||2<f.length)return!0;for(var h=0;h<f.length;h++)u.push(f[h].Do)}}return!0},Ec:function(t,i){var r=[];if(t.coords.buildingID==i.coords.buildingID&&t.coords.level==i.coords.level){var n=null==t.buildingID?null:t.buildingID,e=t.coords.level,o=this.dc.get(n).get(e),s=t.road.id,u=i.road.id,a=o.get(s),o=o.get(u),f=t.coords.buildingID,h=null==this.bc.get(f)?[]:this.bc.get(f),n=f?this.uc.Ul.get(n):this.uc.Ul.get(null);if(a!=o){for(var l=null,c=0;c<h.length;c++)if(h[c].level==e&&null!=h[c].ptsBwteenRoad){l=h[c].ptsBwteenRoad;break}if(null!=l&&null!=l.get(s)&&null!=l.get(s).get(u))r=l.get(s).get(u);else{var v,y=n.rf.Ra,d=Z(y.keys());try{for(d.s();!(v=d.n()).done;){var b=v.value,p=y.get(b);if(p.level===e&&(null!=(r=this.Fc(t,i,p))&&0<r.length))break}}catch(t){d.e(t)}finally{d.f()}null==l?((l=new Map).set(s,new Map),l.get(s).set(u,r),h.push({level:e,ptsBwteenRoad:l}),this.bc.set(f,h)):(null==l.get(s)&&l.set(s,new Map),l.get(s).set(u,r))}}}return r},Oc:function(t,i,r,n){var e,o=new Map;if(null==(e=(r=null==r?null:r)?this.uc.Ul.get(r):this.uc.Ul.get(null)))return null;for(var s=n?e.La:e.Pa,u=0;u<t.length;u++){var a=t[u],f=s.get(a).eo,h=[],l=void 0;if(null!=i&&0<i.length){for(var c=0;c<i.length;c++)for(var v=0;v<f.length;v++)f[v].Ie===i[c]&&h.push(f[v]);l=this.Bc(h)}else l=this.Bc(f);o.set(a,l)}this.dc.set(r,o)},Bc:function(t){for(var i=new Map,r=new Map,n=0,e=0;e<t.length;e++)r.set(t[e].Vr,[0,0]),i.set(t[e].Vr,-1);for(var o=0;o<t.length;o++){var s=t[o];if(1!=r.get(s.Vr)[0]||1!=r.get(s.Vr)[1]){for(var u=s.Ee,a=s.ke,f=new V(s.oi.x-s.ei.x,s.oi.y-s.ei.y),h=o+1;h<t.length;h++){var l=t[h];if(s.Ie==l.Ie){var c=l.Ee,v=l.ke,y=i.get(s.Vr),d=i.get(l.Vr),b=void 0,b=-1==y&&-1==d?-1:-1!=y&&(-1==d||y<=d)?y:d,p=new V(l.oi.x-l.ei.x,l.oi.y-l.ei.y);if(0==r.get(s.Vr)[0]){if(u==c){if(f.multiplyScalar(-1).angleTo(p)*at.lt()<=5){if(b=-1==b?++n:b,i.set(s.Vr,b),i.set(l.Vr,b),r.get(s.Vr)[0]=1,-(r.get(l.Vr)[0]=1)!=d&&d!=b){var m,w=Z(i.keys());try{for(w.s();!(m=w.n()).done;){var g=m.value;i.get(g)==d&&i.set(g,b)}}catch(t){w.e(t)}finally{w.f()}}if(-1!=y&&y!=b){var _,j=Z(i.keys());try{for(j.s();!(_=j.n()).done;){var S=_.value;i.get(S)==y&&i.set(S,b)}}catch(t){j.e(t)}finally{j.f()}}}continue}if(u==v){if(f.multiplyScalar(-1).angleTo(p.multiplyScalar(-1))*at.lt()<=5){if(b=-1==b?++n:b,i.set(s.Vr,b),i.set(l.Vr,b),r.get(s.Vr)[0]=1,-(r.get(l.Vr)[1]=1)!=d&&d!=b){var O,E=Z(i.keys());try{for(E.s();!(O=E.n()).done;){var k=O.value;i.get(k)==d&&i.set(k,b)}}catch(t){E.e(t)}finally{E.f()}}if(-1!=y&&y!=b){var T,M=Z(i.keys());try{for(M.s();!(T=M.n()).done;){var R=T.value;i.get(R)==y&&i.set(R,b)}}catch(t){M.e(t)}finally{M.f()}}}continue}}if(0==r.get(s.Vr)[1])if(a==c){if(f.angleTo(p)*at.lt()<=5){if(b=-1==b?++n:b,i.set(s.Vr,b),i.set(l.Vr,b),r.get(s.Vr)[1]=1,-(r.get(l.Vr)[0]=1)!=d&&d!=b){var N,I=Z(i.keys());try{for(I.s();!(N=I.n()).done;){var A=N.value;i.get(A)==d&&i.set(A,b)}}catch(t){I.e(t)}finally{I.f()}}if(-1!=y&&y!=b){var D,x=Z(i.keys());try{for(x.s();!(D=x.n()).done;){var C=D.value;i.get(C)==y&&i.set(C,b)}}catch(t){x.e(t)}finally{x.f()}}}}else if(a==v)if(f.angleTo(p.multiplyScalar(-1))*at.lt()<=5){if(b=-1==b?++n:b,i.set(s.Vr,b),i.set(l.Vr,b),r.get(s.Vr)[1]=1,-(r.get(l.Vr)[1]=1)!=d&&d!=b){var F,P=Z(i.keys());try{for(P.s();!(F=P.n()).done;){var B=F.value;i.get(B)==d&&i.set(B,b)}}catch(t){P.e(t)}finally{P.f()}}if(-1!=y&&y!=b){var G,L=Z(i.keys());try{for(L.s();!(G=L.n()).done;){var U=G.value;i.get(U)==y&&i.set(U,b)}}catch(t){L.e(t)}finally{L.f()}}}}}-1==i.get(s.Vr)&&i.set(s.Vr,++n)}}return i},Fc:function(t,i,r){var n=[],e=t.coords,t=t.road,o=i.coords,i=i.road,s=r.wu(e),u=r.wu(o);if(null!=t&&null!=i&&e.level==o.level&&t.extentID==i.extentID&&s==u){var u=null,a=null,f=e.level,a=at.Mt(o,t.startPoint)<=at.Mt(o,t.endPoint)?(u=t.startPoint,t.startID):(u=t.endPoint,t.endID),e=null,e=at.Mt(u,i.startPoint)<=at.Mt(u,i.endPoint)?(i.startPoint,i.startID):(i.endPoint,i.endID),o=r.rs,t=o.Co(a),u=[o.Co(e)],i=r.oa(s);if(null!=i)if(i.gs(o,t,u)){i.us=e;for(var h=i.Ss(),l=h.length-1;0<=l;l--)n.push(Object.assign({level:f},h[l].ki))}}return n}}),r);function Zs(t){return(Zs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ws(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=Zs(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=Zs(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==Zs(t)?t:t+""))(n.key),n)}}function qs(t,i,r){i=zs(i);var n=t,i=Ys()?Reflect.construct(i,r||[],zs(t).constructor):i.apply(t,r);if(!i||"object"!=Zs(i)&&"function"!=typeof i){if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(i=n))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return i}function Ys(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Ys=function(){return!!t})()}function zs(t){return(zs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Xs(t,i){return(Xs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t})(t,i)}n=(()=>{function n(t,i,r){if(this instanceof n)return qs(this,n,[t,i,r]);throw new TypeError("Cannot call a class as a function")}var t,i,r=n,e=Vs;if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");return r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&Xs(r,e),r=n,t&&Ws(r.prototype,t),i&&Ws(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r})();function Hs(t){return(Hs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qs(t){return(t=>{if(Array.isArray(t))return Ks(t)})(t)||(t=>{if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)})(t)||((t,i)=>{var r;if(t)return"string"==typeof t?Ks(t,i):"Map"===(r="Object"===(r={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ks(t,i):void 0})(t)||(()=>{throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}function Ks(t,i){(null==i||i>t.length)&&(i=t.length);for(var r=0,n=Array(i);r<i;r++)n[r]=t[r];return n}function Js(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=Hs(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=Hs(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==Hs(t)?t:t+""))(n.key),n)}}function $s(t,i,r){return i&&Js(t.prototype,i),r&&Js(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}r=$s(function t(i){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.ql=void 0!==i.buildingID?i.buildingID:null,this.ne=void 0!==i.level?i.level:null,this.Ti=void 0!==i.points?i.points:null,this.Qu=-1,this.bi=null,this.Yn()}),Object.assign(r.prototype,{Yn:function(){this.Ti&&(this.bi=new Si,this.bi.yi(this.Ti),this.Qu=this.Ti.length,this.Ti[0].x==this.Ti[this.Qu-1].x&&this.Ti[0].y==this.Ti[this.Qu-1].y?this.Qu--:this.Ti.push(this.Ti[0]))},Ta:function(t,i){return at.gt(t,i,this.bi.li,this.bi.ci)},Uo:function(t){return!!at.jt(t,this.bi.min,this.bi.max)&&at.Et(t,this.Ti,this.Qu)},Gc:function(t){var i=0;return this.Uo(t[0])&&(i|=1),this.Uo(t[1])&&(i|=2),i},Go:function(t,i){if(!at.gt(t[0],t[1],this.bi.min,this.bi.max))return!1;for(var r,n,e=!1,o=0;o<this.Qu;o++){var s={};1==at.Pt(t[0],t[1],this.Ti[o],this.Ti[o+1],s)&&(e=!0,i.push(s))}return t[0].x!=t[1].x?(r=t[0].x<t[1].x,i.sort(function(t,i){return r?t.x-i.x:i.x-t.x})):(n=t[0].y<t[1].y,i.sort(function(t,i){return n?t.y-i.y:i.y-t.y})),e},Uc:function(t,i){for(var r=[],n=(r.push(t[0]),r.push.apply(r,Qs(i)),r.push(t[1]),[]),e=0;e<r.length-1;e++)n.push([r[e],r[e+1]]);return n},gh:function(t){if(this.ql!=t.bid||this.ne!=t.ne)return!1;if(this.Ti.length!=t.Ti.length)return!1;for(var i=0;i<this.Ti.length;i++){if(this.Ti[i].x!=t.Ti[i].x)return!1;if(this.Ti[i].y!=t.Ti[i].y)return!1}return!0}});function tu(t){return(tu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function iu(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=tu(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=tu(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==tu(t)?t:t+""))(n.key),n)}}function ru(t,i,r){i=eu(i);var n=t,i=nu()?Reflect.construct(i,r||[],eu(t).constructor):i.apply(t,r);if(!i||"object"!=tu(i)&&"function"!=typeof i){if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(i=n))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return i}function nu(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(nu=function(){return!!t})()}function eu(t){return(eu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ou(t,i){return(ou=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t})(t,i)}var su=(()=>{function n(t,i,r){if(this instanceof n)return t.type=O.Drive,ru(this,n,[t,i,r]);throw new TypeError("Cannot call a class as a function")}var t,i=n,r=Vs;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return i.prototype=Object.create(r&&r.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),r&&ou(i,r),i=n,(r=[{key:"route",value:function(t,i,r){this.uc.obstruct=void 0===t.obstruct||t.obstruct,this.uc.turnCost=void 0!==t.turnCost?t.turnCost:0;var n=ut.ROUTE_FAILED_CANNOT_ARRIVE;if((n=t.viapoints&&0<t.viapoints.length?(this.uc.mf=t.viapoints,this.uc._f(t.start,t.dest,t.mode||j.MODULE_SHORTEST)):this.uc.Rf(t.start,t.dest,t.mode||j.MODULE_SHORTEST,t.priority||g.PRIORITY_DEFAULT))===ut.ROUTE_SUCCESS){this.ac=this.uc.tc();var e=null,o=null;this.fc=[];for(var s=0;s<this.ac.length;s++)0<s&&(e=this.Fi.bidToName.get(this.ac[s-1].bid)?this.Fi.bidToName.get(this.ac[s-1].bid):"outdoor"),s<this.ac.length-1&&(o=this.Fi.bidToName.get(this.ac[s+1].bid)?this.Fi.bidToName.get(this.ac[s+1].bid):"outdoor"),this.ac[s].Qh=e,this.ac[s].Kh=o,o=e=null,this.ac[s].buildingName=this.Fi.bidToName.get(this.ac[s].bid),this.fc.push([this.wc(this.ac[s],{language:u.ZH,type:O.Drive,reqDest:t.dest}),this.wc(this.ac[s],{language:u.EN,type:O.Drive,reqDest:t.dest})]);this.cc=this.uc.ef,i&&i(this.ie())}else r&&r(n)}}])&&iu(i.prototype,r),t&&iu(i,t),Object.defineProperty(i,"prototype",{writable:!1}),i})();function uu(t){return(uu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function au(t,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=uu(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0===r)return("string"===i?String:Number)(t);if("object"!=uu(r=r.call(t,i||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==uu(t)?t:t+""))(n.key),n)}}function fu(t,i,r){i=lu(i);var n=t,i=hu()?Reflect.construct(i,r||[],lu(t).constructor):i.apply(t,r);if(!i||"object"!=uu(i)&&"function"!=typeof i){if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");if(void 0===(i=n))throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return i}function hu(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(hu=function(){return!!t})()}function lu(t){return(lu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function cu(t,i){return(cu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t})(t,i)}var vu,yu=(()=>{function n(t,i,r){if(this instanceof n)return t.type=O.Walk,fu(this,n,[t,i,r]);throw new TypeError("Cannot call a class as a function")}var t,i=n,r=Vs;if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");return i.prototype=Object.create(r&&r.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),r&&cu(i,r),i=n,(r=[{key:"route",value:function(t,i,r){this.uc.fromDoor=void 0!==t.fromDoor&&t.fromDoor,this.uc.toDoors=void 0!==t.toDoors&&t.toDoors,this.uc.obstruct=void 0===t.obstruct||t.obstruct,this.uc.barrierFree=void 0!==t.barrierFree&&t.barrierFree,this.uc.turnCost=void 0!==t.turnCost?t.turnCost:0;var n=ut.ROUTE_FAILED_CANNOT_ARRIVE;if((n=t.viapoints&&0<t.viapoints.length?(this.uc.mf=t.viapoints,this.uc._f(t.start,t.dest,t.mode||j.MODULE_SHORTEST,t.priority||g.PRIORITY_DEFAULT)):this.uc.Rf(t.start,t.dest,t.mode||j.MODULE_SHORTEST,t.priority||g.PRIORITY_DEFAULT))===ut.ROUTE_SUCCESS){this.ac=this.uc.tc();var e=null,o=null;this.fc=[];for(var s=0;s<this.ac.length;s++)0<s&&(e=this.Fi.bidToName.get(this.ac[s-1].bid)?this.Fi.bidToName.get(this.ac[s-1].bid):"outdoor"),s<this.ac.length-1&&(o=this.Fi.bidToName.get(this.ac[s+1].bid)?this.Fi.bidToName.get(this.ac[s+1].bid):"outdoor"),this.ac[s].Qh=e,this.ac[s].Kh=o,o=e=null,this.ac[s].buildingName=this.Fi.bidToName.get(this.ac[s].bid),this.fc.push([this.wc(this.ac[s],{language:u.ZH}),this.wc(this.ac[s],{language:u.EN})]);this.cc=this.uc.ef,i&&i(this.ie())}else r&&r(n)}}])&&au(i.prototype,r),t&&au(i,t),Object.defineProperty(i,"prototype",{writable:!1}),i})(),t=t(30),du={VERSION:M,BUILD:R,XMLHttpRequest:t.a,FMType:s,FMNaviMode:j,FMNaviPriority:g,FMRouteResult:ut,FMLanguageType:u,FMNaviTransfer:N,FMRoadNetworkResult:I,FMSearchRequest:i,FMSearchAnalyser:pe,FMNaviAnalyser:n,FMNaviObstruction:r,FMNaviDriveAnalyser:su,FMNaviWalkAnalyser:yu},t=wr.a.global(),bu=void 0!==t?t.fengmap:{};for(vu in void 0===bu&&(bu={}),du)bu[vu]=du[vu];void 0!==t&&(t.fengmap=bu);o.default=bu}]).default});