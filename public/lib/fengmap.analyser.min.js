/**Released Version v3.1.7,BUILD 62,Time 1719469149425. Fengmap Javascript SDK , see: https://www.fengmap.com for details**/
!function(t,r){"object"==typeof exports&&"object"==typeof module?module.exports=r(require("fs")):"function"==typeof define&&define.amd?define(["fs"],r):"object"==typeof exports?exports.fengmap=r(require("fs")):t.fengmap=r(t.fs)}(this,function(__WEBPACK_EXTERNAL_MODULE__49__){return function(i){var n={};function e(t){var r;return(n[t]||(r=n[t]={i:t,l:!1,exports:{}},i[t].call(r.exports,r,r.exports,e),r.l=!0,r)).exports}return e.m=i,e.c=n,e.d=function(t,r,i){e.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:i})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"u",{value:!0})},e.t=function(r,t){if(1&t&&(r=e(r)),8&t)return r;if(4&t&&"object"==typeof r&&r&&r.u)return r;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:r}),2&t&&"string"!=typeof r)for(var n in r)e.d(i,n,function(t){return r[t]}.bind(null,n));return i},e.n=function(t){var r=t&&t.u?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},e.p="",e(e.s=52)}([function(t,r,i){"use strict";i.d(r,"a",function(){return n});var r=i(2),n={document:"undefined"!=typeof document?document:{},window:"undefined"!=typeof window?window:{},environment:r.a.BROWSER,XMLHttpRequest:"undefined"!=typeof XMLHttpRequest?XMLHttpRequest:{}}},function(t,r,i){"use strict";var n,e,o=t.exports=i(4),s=i(18),u=(o.codegen=i(42),o.fetch=i(43),o.path=i(44),o.fs=o.inquire("fs"),o.toArray=function(t){if(t){for(var r=Object.keys(t),i=new Array(r.length),n=0;n<r.length;)i[n]=t[r[n++]];return i}return[]},o.toObject=function(t){for(var r={},i=0;i<t.length;){var n=t[i++],e=t[i++];void 0!==e&&(r[n]=e)}return r},/\\/g),a=/"/g,f=(o.isReserved=function(t){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(t)},o.safeProp=function(t){return!/^[$\w_]+$/.test(t)||o.isReserved(t)?'["'+t.replace(u,"\\\\").replace(a,'\\"')+'"]':"."+t},o.ucFirst=function(t){return t.charAt(0).toUpperCase()+t.substring(1)},/_([a-z])/g),h=(o.camelCase=function(t){return t.substring(0,1)+t.substring(1).replace(f,function(t,r){return r.toUpperCase()})},o.compareFieldsById=function(t,r){return t.id-r.id},o.decorateType=function(t,r){return t.$type?(r&&t.$type.name!==r&&(o.decorateRoot.remove(t.$type),t.$type.name=r,o.decorateRoot.add(t.$type)),t.$type):(r=new(n=n||i(20))(r||t.name),o.decorateRoot.add(r),r.ctor=t,Object.defineProperty(t,"$type",{value:r,enumerable:!1}),Object.defineProperty(t.prototype,"$type",{value:r,enumerable:!1}),r)},0);o.decorateEnum=function(t){var r;return t.$type||(r=new(e=e||i(5))("Enum"+h++,t),o.decorateRoot.add(r),Object.defineProperty(t,"$type",{value:r,enumerable:!1}),r)},o.setProperty=function(t,r,i){if("object"!=typeof t)throw TypeError("dst must be an object");if(r)return function t(r,i,n){var e=i.shift();return"__proto__"!==e&&"prototype"!==e&&(0<i.length?r[e]=t(r[e]||{},i,n):((i=r[e])&&(n=[].concat(i).concat(n)),r[e]=n)),r}(t,r=r.split("."),i);throw TypeError("path must be specified")},Object.defineProperty(o,"decorateRoot",{get:function(){return s.decorated||(s.decorated=new(i(28)))}})},function(t,r,i){"use strict";var n={BROWSER:0,WX:1};Object.freeze(n),r.a=n},function(t,r,i){"use strict";!function(s){var u=i(2),a=i(0);function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){t=function(t,r){if("object"!=e(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===r?String:Number)(t);i=i.call(t,r||"default");if("object"!=e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==e(t)?t:String(t)}(n.key),n)}}var h=null,t=function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function")}var r,i,n,e;function o(){return e.apply(this,arguments)}return r=t,i=null,n=[{key:"global",value:(e=function(){if("undefined"!=typeof self&&null!==self&&0!==Object.keys(self).length)return self;if("undefined"!=typeof window&&null!==window&&0!==Object.keys(window).length)return window;if(null!=s&&0!==Object.keys(s).length)return s;var t;if("undefined"!=typeof my)return h||(t=my.getAppIdSync(),h={location:{host:t.appId+".hybrid.alipay-eco.com"}}),h;if(a.a.environment==u.a.WX)return{};throw new Error("unable to locate global object")},o.toString=function(){return e.toString()},o)}],i&&f(r.prototype,i),n&&f(r,n),Object.defineProperty(r,"prototype",{writable:!1}),t}();r.a=t}.call(this,i(11))},function(t,i,o){"use strict";!function(t){var n=i;function e(t,r,i){for(var n=Object.keys(r),e=0;e<n.length;++e)void 0!==t[n[e]]&&i||(t[n[e]]=r[n[e]]);return t}function r(t){function i(t,r){if(!(this instanceof i))return new i(t,r);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,i):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),r&&e(this,r)}return(i.prototype=Object.create(Error.prototype)).constructor=i,Object.defineProperty(i.prototype,"name",{get:function(){return t}}),i.prototype.toString=function(){return this.name+": "+this.message},i}n.asPromise=o(15),n.base64=o(33),n.EventEmitter=o(34),n.float=o(35),n.inquire=o(16),n.utf8=o(36),n.pool=o(37),n.LongBits=o(38),n.isNode=Boolean(void 0!==t&&t&&t.process&&t.process.versions&&t.process.versions.node),n.global=n.isNode&&t||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},n.isString=function(t){return"string"==typeof t||t instanceof String},n.isObject=function(t){return t&&"object"==typeof t},n.isset=n.isSet=function(t,r){var i=t[r];return!(null==i||!t.hasOwnProperty(r))&&("object"!=typeof i||0<(Array.isArray(i)?i:Object.keys(i)).length)},n.Buffer=function(){try{var t=n.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(t){return null}}(),n.v=null,n._=null,n.newBuffer=function(t){return"number"==typeof t?n.Buffer?n._(t):new n.Array(t):n.Buffer?n.v(t):"undefined"==typeof Uint8Array?t:new Uint8Array(t)},n.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(t){return t?n.LongBits.from(t).toHash():n.LongBits.zeroHash},n.longFromHash=function(t,r){t=n.LongBits.fromHash(t);return n.Long?n.Long.fromBits(t.lo,t.hi,r):t.toNumber(Boolean(r))},n.merge=e,n.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)},n.newError=r,n.ProtocolError=r("ProtocolError"),n.oneOfGetter=function(t){for(var i={},r=0;r<t.length;++r)i[t[r]]=1;return function(){for(var t=Object.keys(this),r=t.length-1;-1<r;--r)if(1===i[t[r]]&&void 0!==this[t[r]]&&null!==this[t[r]])return t[r]}},n.oneOfSetter=function(i){return function(t){for(var r=0;r<i.length;++r)i[r]!==t&&delete this[i[r]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n.j=function(){var i=n.Buffer;i?(n.v=i.from!==Uint8Array.from&&i.from||function(t,r){return new i(t,r)},n._=i.allocUnsafe||function(t){return new i(t)}):n.v=n._=null}}.call(this,o(11))},function(t,r,i){"use strict";t.exports=o;var u=i(6),n=(((o.prototype=Object.create(u.prototype)).constructor=o).className="Enum",i(8)),e=i(1);function o(t,r,i,n,e){if(u.call(this,t,i),r&&"object"!=typeof r)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=n,this.comments=e||{},this.reserved=void 0,r)for(var o=Object.keys(r),s=0;s<o.length;++s)"number"==typeof r[o[s]]&&(this.valuesById[this.values[o[s]]=r[o[s]]]=o[s])}o.fromJSON=function(t,r){t=new o(t,r.values,r.options,r.comment,r.comments);return t.reserved=r.reserved,t},o.prototype.toJSON=function(t){t=!!t&&Boolean(t.keepComments);return e.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",t?this.comment:void 0,"comments",t?this.comments:void 0])},o.prototype.add=function(t,r,i){if(!e.isString(t))throw TypeError("name must be a string");if(!e.isInteger(r))throw TypeError("id must be an integer");if(void 0!==this.values[t])throw Error("duplicate name '"+t+"' in "+this);if(this.isReservedId(r))throw Error("id "+r+" is reserved in "+this);if(this.isReservedName(t))throw Error("name '"+t+"' is reserved in "+this);if(void 0!==this.valuesById[r]){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+r+" in "+this);this.values[t]=r}else this.valuesById[this.values[t]=r]=t;return this.comments[t]=i||null,this},o.prototype.remove=function(t){if(!e.isString(t))throw TypeError("name must be a string");var r=this.values[t];if(null==r)throw Error("name '"+t+"' does not exist in "+this);return delete this.valuesById[r],delete this.values[t],delete this.comments[t],this},o.prototype.isReservedId=function(t){return n.isReservedId(this.reserved,t)},o.prototype.isReservedName=function(t){return n.isReservedName(this.reserved,t)}},function(t,r,i){"use strict";(t.exports=e).className="ReflectionObject";var n,s=i(1);function e(t,r){if(!s.isString(t))throw TypeError("name must be a string");if(r&&!s.isObject(r))throw TypeError("options must be an object");this.options=r,this.parsedOptions=null,this.name=t,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(e.prototype,{root:{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t}},fullName:{get:function(){for(var t=[this.name],r=this.parent;r;)t.unshift(r.name),r=r.parent;return t.join(".")}}}),e.prototype.toJSON=function(){throw Error()},e.prototype.onAdd=function(t){this.parent&&this.parent!==t&&this.parent.remove(this),this.parent=t,this.resolved=!1;t=t.root;t instanceof n&&t.S(this)},e.prototype.onRemove=function(t){t=t.root;t instanceof n&&t.O(this),this.parent=null,this.resolved=!1},e.prototype.resolve=function(){return this.resolved||this.root instanceof n&&(this.resolved=!0),this},e.prototype.getOption=function(t){if(this.options)return this.options[t]},e.prototype.setOption=function(t,r,i){return i&&this.options&&void 0!==this.options[t]||((this.options||(this.options={}))[t]=r),this},e.prototype.setParsedOption=function(r,t,i){this.parsedOptions||(this.parsedOptions=[]);var n,e,o=this.parsedOptions;return i?(n=o.find(function(t){return Object.prototype.hasOwnProperty.call(t,r)}))?(e=n[r],s.setProperty(e,i,t)):((n={})[r]=s.setProperty({},i,t),o.push(n)):((e={})[r]=t,o.push(e)),this},e.prototype.setOptions=function(t,r){if(t)for(var i=Object.keys(t),n=0;n<i.length;++n)this.setOption(i[n],t[i[n]],r);return this},e.prototype.toString=function(){var t=this.constructor.className,r=this.fullName;return r.length?t+" "+r:t},e.j=function(t){n=t}},function(t,r,i){"use strict";t.exports=s;var n,u=i(6),e=(((s.prototype=Object.create(u.prototype)).constructor=s).className="Field",i(5)),a=i(9),f=i(1),h=/^required|optional|repeated$/;function s(t,r,i,n,e,o,s){if(f.isObject(n)?(s=e,o=n,n=e=void 0):f.isObject(e)&&(s=o,o=e,e=void 0),u.call(this,t,o),!f.isInteger(r)||r<0)throw TypeError("id must be a non-negative integer");if(!f.isString(i))throw TypeError("type must be a string");if(void 0!==n&&!h.test(n=n.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(void 0!==e&&!f.isString(e))throw TypeError("extend must be a string");this.rule=(n="proto3_optional"===n?"optional":n)&&"optional"!==n?n:void 0,this.type=i,this.id=r,this.extend=e||void 0,this.required="required"===n,this.optional=!this.required,this.repeated="repeated"===n,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!f.Long&&void 0!==a.long[i],this.bytes="bytes"===i,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this.T=null,this.comment=s}s.fromJSON=function(t,r){return new s(t,r.id,r.type,r.rule,r.extend,r.options,r.comment)},Object.defineProperty(s.prototype,"packed",{get:function(){return null===this.T&&(this.T=!1!==this.getOption("packed")),this.T}}),s.prototype.setOption=function(t,r,i){return"packed"===t&&(this.T=null),u.prototype.setOption.call(this,t,r,i)},s.prototype.toJSON=function(t){t=!!t&&Boolean(t.keepComments);return f.toObject(["rule","optional"!==this.rule&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},s.prototype.resolve=function(){var t;return this.resolved?this:(void 0===(this.typeDefault=a.defaults[this.type])&&(this.resolvedType=(this.declaringField||this).parent.lookupTypeOrEnum(this.type),this.resolvedType instanceof n?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof e)&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault]),this.options&&(!0!==this.options.packed&&(void 0===this.options.packed||!this.resolvedType||this.resolvedType instanceof e)||delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long?(this.typeDefault=f.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault)):this.bytes&&"string"==typeof this.typeDefault&&(f.base64.test(this.typeDefault)?f.base64.decode(this.typeDefault,t=f.newBuffer(f.base64.length(this.typeDefault)),0):f.utf8.write(this.typeDefault,t=f.newBuffer(f.utf8.length(this.typeDefault)),0),this.typeDefault=t),this.map?this.defaultValue=f.emptyObject:this.repeated?this.defaultValue=f.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof n&&(this.parent.ctor.prototype[this.name]=this.defaultValue),u.prototype.resolve.call(this))},s.d=function(i,n,e,o){return"function"==typeof n?n=f.decorateType(n).name:n&&"object"==typeof n&&(n=f.decorateEnum(n).name),function(t,r){f.decorateType(t.constructor).add(new s(r,i,n,e,{default:o}))}},s.j=function(t){n=t}},function(t,r,i){"use strict";t.exports=l;var e,o,s,n=i(6),u=(((l.prototype=Object.create(n.prototype)).constructor=l).className="Namespace",i(7)),a=i(10),f=i(1);function h(t,r){if(t&&t.length){for(var i={},n=0;n<t.length;++n)i[t[n].name]=t[n].toJSON(r);return i}}function l(t,r){n.call(this,t,r),this.nested=void 0,this.R=null}function c(t){return t.R=null,t}l.fromJSON=function(t,r){return new l(t,r.options).addJSON(r.nested)},l.arrayToJSON=h,l.isReservedId=function(t,r){if(t)for(var i=0;i<t.length;++i)if("string"!=typeof t[i]&&t[i][0]<=r&&t[i][1]>r)return!0;return!1},l.isReservedName=function(t,r){if(t)for(var i=0;i<t.length;++i)if(t[i]===r)return!0;return!1},Object.defineProperty(l.prototype,"nestedArray",{get:function(){return this.R||(this.R=f.toArray(this.nested))}}),l.prototype.toJSON=function(t){return f.toObject(["options",this.options,"nested",h(this.nestedArray,t)])},l.prototype.addJSON=function(t){if(t)for(var r,i=Object.keys(t),n=0;n<i.length;++n)r=t[i[n]],this.add((void 0!==r.fields?e:void 0!==r.values?s:void 0!==r.methods?o:void 0!==r.id?u:l).fromJSON(i[n],r));return this},l.prototype.get=function(t){return this.nested&&this.nested[t]||null},l.prototype.getEnum=function(t){if(this.nested&&this.nested[t]instanceof s)return this.nested[t].values;throw Error("no such enum: "+t)},l.prototype.add=function(t){if(!(t instanceof u&&void 0!==t.extend||t instanceof e||t instanceof s||t instanceof o||t instanceof l||t instanceof a))throw TypeError("object must be a valid nested object");if(this.nested){var r=this.get(t.name);if(r){if(!(r instanceof l&&t instanceof l)||r instanceof e||r instanceof o)throw Error("duplicate name '"+t.name+"' in "+this);for(var i=r.nestedArray,n=0;n<i.length;++n)t.add(i[n]);this.remove(r),this.nested||(this.nested={}),t.setOptions(r.options,!0)}}else this.nested={};return(this.nested[t.name]=t).onAdd(this),c(this)},l.prototype.remove=function(t){if(!(t instanceof n))throw TypeError("object must be a ReflectionObject");if(t.parent!==this)throw Error(t+" is not a member of "+this);return delete this.nested[t.name],Object.keys(this.nested).length||(this.nested=void 0),t.onRemove(this),c(this)},l.prototype.define=function(t,r){if(f.isString(t))t=t.split(".");else if(!Array.isArray(t))throw TypeError("illegal path");if(t&&t.length&&""===t[0])throw Error("path must be relative");for(var i=this;0<t.length;){var n=t.shift();if(i.nested&&i.nested[n]){if(!((i=i.nested[n])instanceof l))throw Error("path conflicts with non-namespace objects")}else i.add(i=new l(n))}return r&&i.addJSON(r),i},l.prototype.resolveAll=function(){for(var t=this.nestedArray,r=0;r<t.length;)t[r]instanceof l?t[r++].resolveAll():t[r++].resolve();return this.resolve()},l.prototype.lookup=function(t,r,i){if("boolean"==typeof r?(i=r,r=void 0):r&&!Array.isArray(r)&&(r=[r]),f.isString(t)&&t.length){if("."===t)return this.root;t=t.split(".")}else if(!t.length)return this;if(""===t[0])return this.root.lookup(t.slice(1),r);var n=this.get(t[0]);if(n){if(1===t.length){if(!r||-1<r.indexOf(n.constructor))return n}else if(n instanceof l&&(n=n.lookup(t.slice(1),r,!0)))return n}else for(var e=0;e<this.nestedArray.length;++e)if(this.R[e]instanceof l&&(n=this.R[e].lookup(t,r,!0)))return n;return null===this.parent||i?null:this.parent.lookup(t,r)},l.prototype.lookupType=function(t){var r=this.lookup(t,[e]);if(r)return r;throw Error("no such type: "+t)},l.prototype.lookupEnum=function(t){var r=this.lookup(t,[s]);if(r)return r;throw Error("no such Enum '"+t+"' in "+this)},l.prototype.lookupTypeOrEnum=function(t){var r=this.lookup(t,[e,s]);if(r)return r;throw Error("no such Type or Enum '"+t+"' in "+this)},l.prototype.lookupService=function(t){var r=this.lookup(t,[o]);if(r)return r;throw Error("no such Service '"+t+"' in "+this)},l.j=function(t,r,i){e=t,o=r,s=i}},function(t,r,i){"use strict";var i=i(1),e=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function n(t,r){var i=0,n={};for(r|=0;i<t.length;)n[e[i+r]]=t[i++];return n}r.basic=n([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),r.defaults=n([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",i.emptyArray,null]),r.long=n([0,0,0,1,1],7),r.mapKey=n([0,0,0,5,5,0,0,0,1,1,0,2],2),r.packed=n([1,5,0,0,0,5,5,0,0,0,1,1,0])},function(t,r,i){"use strict";t.exports=s;var e=i(6),n=(((s.prototype=Object.create(e.prototype)).constructor=s).className="OneOf",i(7)),o=i(1);function s(t,r,i,n){if(Array.isArray(r)||(i=r,r=void 0),e.call(this,t,i),void 0!==r&&!Array.isArray(r))throw TypeError("fieldNames must be an Array");this.oneof=r||[],this.fieldsArray=[],this.comment=n}function u(t){if(t.parent)for(var r=0;r<t.fieldsArray.length;++r)t.fieldsArray[r].parent||t.parent.add(t.fieldsArray[r])}s.fromJSON=function(t,r){return new s(t,r.oneof,r.options,r.comment)},s.prototype.toJSON=function(t){t=!!t&&Boolean(t.keepComments);return o.toObject(["options",this.options,"oneof",this.oneof,"comment",t?this.comment:void 0])},s.prototype.add=function(t){if(t instanceof n)return t.parent&&t.parent!==this.parent&&t.parent.remove(t),this.oneof.push(t.name),this.fieldsArray.push(t),u(t.partOf=this),this;throw TypeError("field must be a Field")},s.prototype.remove=function(t){if(!(t instanceof n))throw TypeError("field must be a Field");var r=this.fieldsArray.indexOf(t);if(r<0)throw Error(t+" is not a member of "+this);return this.fieldsArray.splice(r,1),-1<(r=this.oneof.indexOf(t.name))&&this.oneof.splice(r,1),t.partOf=null,this},s.prototype.onAdd=function(t){e.prototype.onAdd.call(this,t);for(var r=0;r<this.oneof.length;++r){var i=t.get(this.oneof[r]);i&&!i.partOf&&(i.partOf=this).fieldsArray.push(i)}u(this)},s.prototype.onRemove=function(t){for(var r,i=0;i<this.fieldsArray.length;++i)(r=this.fieldsArray[i]).parent&&r.parent.remove(r);e.prototype.onRemove.call(this,t)},s.d=function(){for(var i=new Array(arguments.length),t=0;t<arguments.length;)i[t]=arguments[t++];return function(t,r){o.decorateType(t.constructor).add(new s(r,i)),Object.defineProperty(t,r,{get:o.oneOfGetter(i),set:o.oneOfSetter(i)})}}},function(t,r){var i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,r,i){"use strict";t.exports=l;var n,e=i(4),o=e.LongBits,s=e.base64,u=e.utf8;function a(t,r,i){this.fn=t,this.len=r,this.next=void 0,this.val=i}function f(){}function h(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function l(){this.len=0,this.head=new a(f,0,0),this.tail=this.head,this.states=null}function c(){return e.Buffer?function(){return(l.create=function(){return new n})()}:function(){return new l}}function v(t,r,i){r[i]=255&t}function y(t,r){this.len=t,this.next=void 0,this.val=r}function d(t,r,i){for(;t.hi;)r[i++]=127&t.lo|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;127<t.lo;)r[i++]=127&t.lo|128,t.lo=t.lo>>>7;r[i++]=t.lo}function b(t,r,i){r[i]=255&t,r[i+1]=t>>>8&255,r[i+2]=t>>>16&255,r[i+3]=t>>>24}l.create=c(),l.alloc=function(t){return new e.Array(t)},e.Array!==Array&&(l.alloc=e.pool(l.alloc,e.Array.prototype.subarray)),l.prototype.M=function(t,r,i){return this.tail=this.tail.next=new a(t,r,i),this.len+=r,this},(y.prototype=Object.create(a.prototype)).fn=function(t,r,i){for(;127<t;)r[i++]=127&t|128,t>>>=7;r[i]=t},l.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new y((t>>>=0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this},l.prototype.int32=function(t){return t<0?this.M(d,10,o.fromNumber(t)):this.uint32(t)},l.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)},l.prototype.int64=l.prototype.uint64=function(t){t=o.from(t);return this.M(d,t.length(),t)},l.prototype.sint64=function(t){t=o.from(t).zzEncode();return this.M(d,t.length(),t)},l.prototype.bool=function(t){return this.M(v,1,t?1:0)},l.prototype.sfixed32=l.prototype.fixed32=function(t){return this.M(b,4,t>>>0)},l.prototype.sfixed64=l.prototype.fixed64=function(t){t=o.from(t);return this.M(b,4,t.lo).M(b,4,t.hi)},l.prototype.float=function(t){return this.M(e.float.writeFloatLE,4,t)},l.prototype.double=function(t){return this.M(e.float.writeDoubleLE,8,t)};var p=e.Array.prototype.set?function(t,r,i){r.set(t,i)}:function(t,r,i){for(var n=0;n<t.length;++n)r[i+n]=t[n]};l.prototype.bytes=function(t){var r,i=t.length>>>0;return i?(e.isString(t)&&(r=l.alloc(i=s.length(t)),s.decode(t,r,0),t=r),this.uint32(i).M(p,i,t)):this.M(v,1,0)},l.prototype.string=function(t){var r=u.length(t);return r?this.uint32(r).M(u.write,r,t):this.M(v,1,0)},l.prototype.fork=function(){return this.states=new h(this),this.head=this.tail=new a(f,0,0),this.len=0,this},l.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new a(f,0,0),this.len=0),this},l.prototype.ldelim=function(){var t=this.head,r=this.tail,i=this.len;return this.reset().uint32(i),i&&(this.tail.next=t.next,this.tail=r,this.len+=i),this},l.prototype.finish=function(){for(var t=this.head.next,r=this.constructor.alloc(this.len),i=0;t;)t.fn(t.val,r,i),i+=t.len,t=t.next;return r},l.j=function(t){n=t,l.create=c(),n.j()}},function(t,r,i){"use strict";t.exports=a;var n,e=i(4),o=e.LongBits,s=e.utf8;function u(t,r){return RangeError("index out of range: "+t.pos+" + "+(r||1)+" > "+t.len)}function a(t){this.buf=t,this.pos=0,this.len=t.length}function f(){return e.Buffer?function(t){return(a.create=function(t){return e.Buffer.isBuffer(t)?new n(t):l(t)})(t)}:l}var h,l="undefined"!=typeof Uint8Array?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new a(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new a(t);throw Error("illegal buffer")};function c(){var t=new o(0,0),r=0;if(!(4<this.len-this.pos)){for(;r<3;++r){if(this.pos>=this.len)throw u(this);if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*r)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(127&this.buf[this.pos++])<<7*r)>>>0,t}for(;r<4;++r)if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*r)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return t;if(r=0,4<this.len-this.pos){for(;r<5;++r)if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*r+3)>>>0,this.buf[this.pos++]<128)return t}else for(;r<5;++r){if(this.pos>=this.len)throw u(this);if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*r+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}function v(t,r){return(t[r-4]|t[r-3]<<8|t[r-2]<<16|t[r-1]<<24)>>>0}function y(){if(this.pos+8>this.len)throw u(this,8);return new o(v(this.buf,this.pos+=4),v(this.buf,this.pos+=4))}a.create=f(),a.prototype.N=e.Array.prototype.subarray||e.Array.prototype.slice,a.prototype.uint32=(h=4294967295,function(){if(h=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(h=(h|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(h=(h|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(h=(h|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(h=(h|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)||!((this.pos+=5)>this.len))return h;throw this.pos=this.len,u(this,10)}),a.prototype.int32=function(){return 0|this.uint32()},a.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(1&t)|0},a.prototype.bool=function(){return 0!==this.uint32()},a.prototype.fixed32=function(){if(this.pos+4>this.len)throw u(this,4);return v(this.buf,this.pos+=4)},a.prototype.sfixed32=function(){if(this.pos+4>this.len)throw u(this,4);return 0|v(this.buf,this.pos+=4)},a.prototype.float=function(){if(this.pos+4>this.len)throw u(this,4);var t=e.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t},a.prototype.double=function(){if(this.pos+8>this.len)throw u(this,4);var t=e.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t},a.prototype.bytes=function(){var t=this.uint32(),r=this.pos,i=this.pos+t;if(i>this.len)throw u(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(r,i):r===i?new this.buf.constructor(0):this.N.call(this.buf,r,i)},a.prototype.string=function(){var t=this.bytes();return s.read(t,0,t.length)},a.prototype.skip=function(t){if("number"==typeof t){if(this.pos+t>this.len)throw u(this,t);this.pos+=t}else do{if(this.pos>=this.len)throw u(this)}while(128&this.buf[this.pos++]);return this},a.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(t=7&this.uint32());)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this},a.j=function(t){n=t,a.create=f(),n.j();var r=e.Long?"toLong":"toNumber";e.merge(a.prototype,{int64:function(){return c.call(this)[r](!1)},uint64:function(){return c.call(this)[r](!0)},sint64:function(){return c.call(this).zzDecode()[r](!1)},fixed64:function(){return y.call(this)[r](!0)},sfixed64:function(){return y.call(this)[r](!1)}})}},function(t,r,i){"use strict";t.exports=e;var n=i(4);function e(t){if(t)for(var r=Object.keys(t),i=0;i<r.length;++i)this[r[i]]=t[r[i]]}e.create=function(t){return this.$type.create(t)},e.encode=function(t,r){return this.$type.encode(t,r)},e.encodeDelimited=function(t,r){return this.$type.encodeDelimited(t,r)},e.decode=function(t){return this.$type.decode(t)},e.decodeDelimited=function(t){return this.$type.decodeDelimited(t)},e.verify=function(t){return this.$type.verify(t)},e.fromObject=function(t){return this.$type.fromObject(t)},e.toObject=function(t,r){return this.$type.toObject(t,r)},e.prototype.toJSON=function(){return this.$type.toObject(this,n.toJSONOptions)}},function(t,r,i){"use strict";t.exports=function(t,r){var i=new Array(arguments.length-1),o=0,n=2,s=!0;for(;n<arguments.length;)i[o++]=arguments[n++];return new Promise(function(n,e){i[o]=function(t){if(s)if(s=!1,t)e(t);else{for(var r=new Array(arguments.length-1),i=0;i<r.length;)r[i++]=arguments[i];n.apply(null,r)}};try{t.apply(r||null,i)}catch(t){s&&(s=!1,e(t))}})}},function(module,exports,__webpack_require__){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},function(t,r,i){"use strict";r.Service=i(41)},function(t,r,i){"use strict";t.exports={}},function(t,r,i){"use strict";t.exports=function(t){for(var r,i=l.codegen(["m","w"],t.name+"$encode")("if(!w)")("w=Writer.create()"),n=t.fieldsArray.slice().sort(l.compareFieldsById),e=0;e<n.length;++e){var o=n[e].resolve(),s=t.k.indexOf(o),u=o.resolvedType instanceof f?"int32":o.type,a=h.basic[u];r="m"+l.safeProp(o.name),o.map?(i("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",r,o.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",r)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(o.id<<3|2)>>>0,8|h.mapKey[o.keyType],o.keyType),void 0===a?i("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",s,r):i(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|a,u,r),i("}")("}")):o.repeated?(i("if(%s!=null&&%s.length){",r,r),o.packed&&void 0!==h.packed[u]?i("w.uint32(%i).fork()",(o.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",r)("w.%s(%s[i])",u,r)("w.ldelim()"):(i("for(var i=0;i<%s.length;++i)",r),void 0===a?c(i,o,s,r+"[i]"):i("w.uint32(%i).%s(%s[i])",(o.id<<3|a)>>>0,u,r)),i("}")):(o.optional&&i("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",r,o.name),void 0===a?c(i,o,s,r):i("w.uint32(%i).%s(%s)",(o.id<<3|a)>>>0,u,r))}return i("return w")};var f=i(5),h=i(9),l=i(1);function c(t,r,i,n){r.resolvedType.group?t("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",i,n,(r.id<<3|3)>>>0,(r.id<<3|4)>>>0):t("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",i,n,(r.id<<3|2)>>>0)}},function(t,r,i){"use strict";t.exports=w;var s=i(8),u=(((w.prototype=Object.create(s.prototype)).constructor=w).className="Type",i(5)),a=i(10),f=i(7),h=i(21),l=i(22),e=i(14),o=i(13),c=i(12),v=i(1),y=i(19),d=i(24),b=i(25),p=i(26),m=i(27);function w(t,r){s.call(this,t,r),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this.I=null,this.k=null,this.A=null,this.P=null}function n(t){return t.I=t.k=t.A=null,delete t.encode,delete t.decode,delete t.verify,t}Object.defineProperties(w.prototype,{fieldsById:{get:function(){if(!this.I){this.I={};for(var t=Object.keys(this.fields),r=0;r<t.length;++r){var i=this.fields[t[r]],n=i.id;if(this.I[n])throw Error("duplicate id "+n+" in "+this);this.I[n]=i}}return this.I}},fieldsArray:{get:function(){return this.k||(this.k=v.toArray(this.fields))}},oneofsArray:{get:function(){return this.A||(this.A=v.toArray(this.oneofs))}},ctor:{get:function(){return this.P||(this.ctor=w.generateConstructor(this)())},set:function(t){for(var r=t.prototype,i=(r instanceof e||((t.prototype=new e).constructor=t,v.merge(t.prototype,r)),t.$type=t.prototype.$type=this,v.merge(t,e,!0),this.P=t,0);i<this.fieldsArray.length;++i)this.k[i].resolve();for(var n={},i=0;i<this.oneofsArray.length;++i)n[this.A[i].resolve().name]={get:v.oneOfGetter(this.A[i].oneof),set:v.oneOfSetter(this.A[i].oneof)};i&&Object.defineProperties(t.prototype,n)}}}),w.generateConstructor=function(t){for(var r,i=v.codegen(["p"],t.name),n=0;n<t.fieldsArray.length;++n)(r=t.k[n]).map?i("this%s={}",v.safeProp(r.name)):r.repeated&&i("this%s=[]",v.safeProp(r.name));return i("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},w.fromJSON=function(t,r){for(var i=new w(t,r.options),n=(i.extensions=r.extensions,i.reserved=r.reserved,Object.keys(r.fields)),e=0;e<n.length;++e)i.add((void 0!==r.fields[n[e]].keyType?h:f).fromJSON(n[e],r.fields[n[e]]));if(r.oneofs)for(n=Object.keys(r.oneofs),e=0;e<n.length;++e)i.add(a.fromJSON(n[e],r.oneofs[n[e]]));if(r.nested)for(n=Object.keys(r.nested),e=0;e<n.length;++e){var o=r.nested[n[e]];i.add((void 0!==o.id?f:void 0!==o.fields?w:void 0!==o.values?u:void 0!==o.methods?l:s).fromJSON(n[e],o))}return r.extensions&&r.extensions.length&&(i.extensions=r.extensions),r.reserved&&r.reserved.length&&(i.reserved=r.reserved),r.group&&(i.group=!0),r.comment&&(i.comment=r.comment),i},w.prototype.toJSON=function(t){var r=s.prototype.toJSON.call(this,t),i=!!t&&Boolean(t.keepComments);return v.toObject(["options",r&&r.options||void 0,"oneofs",s.arrayToJSON(this.oneofsArray,t),"fields",s.arrayToJSON(this.fieldsArray.filter(function(t){return!t.declaringField}),t)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",r&&r.nested||void 0,"comment",i?this.comment:void 0])},w.prototype.resolveAll=function(){for(var t=this.fieldsArray,r=0;r<t.length;)t[r++].resolve();for(var i=this.oneofsArray,r=0;r<i.length;)i[r++].resolve();return s.prototype.resolveAll.call(this)},w.prototype.get=function(t){return this.fields[t]||this.oneofs&&this.oneofs[t]||this.nested&&this.nested[t]||null},w.prototype.add=function(t){if(this.get(t.name))throw Error("duplicate name '"+t.name+"' in "+this);if(t instanceof f&&void 0===t.extend){if((this.I||this.fieldsById)[t.id])throw Error("duplicate id "+t.id+" in "+this);if(this.isReservedId(t.id))throw Error("id "+t.id+" is reserved in "+this);if(this.isReservedName(t.name))throw Error("name '"+t.name+"' is reserved in "+this);return t.parent&&t.parent.remove(t),(this.fields[t.name]=t).message=this,t.onAdd(this),n(this)}return t instanceof a?(this.oneofs||(this.oneofs={}),(this.oneofs[t.name]=t).onAdd(this),n(this)):s.prototype.add.call(this,t)},w.prototype.remove=function(t){if(t instanceof f&&void 0===t.extend){if(this.fields&&this.fields[t.name]===t)return delete this.fields[t.name],t.parent=null,t.onRemove(this),n(this);throw Error(t+" is not a member of "+this)}if(t instanceof a){if(this.oneofs&&this.oneofs[t.name]===t)return delete this.oneofs[t.name],t.parent=null,t.onRemove(this),n(this);throw Error(t+" is not a member of "+this)}return s.prototype.remove.call(this,t)},w.prototype.isReservedId=function(t){return s.isReservedId(this.reserved,t)},w.prototype.isReservedName=function(t){return s.isReservedName(this.reserved,t)},w.prototype.create=function(t){return new this.ctor(t)},w.prototype.setup=function(){for(var t=this.fullName,r=[],i=0;i<this.fieldsArray.length;++i)r.push(this.k[i].resolve().resolvedType);this.encode=y(this)({Writer:c,types:r,util:v}),this.decode=d(this)({Reader:o,types:r,util:v}),this.verify=b(this)({types:r,util:v}),this.fromObject=p.fromObject(this)({types:r,util:v}),this.toObject=p.toObject(this)({types:r,util:v});var n,t=m[t];return t&&((n=Object.create(this)).fromObject=this.fromObject,this.fromObject=t.fromObject.bind(n),n.toObject=this.toObject,this.toObject=t.toObject.bind(n)),this},w.prototype.encode=function(t,r){return this.setup().encode(t,r)},w.prototype.encodeDelimited=function(t,r){return this.encode(t,r&&r.len?r.fork():r).ldelim()},w.prototype.decode=function(t,r){return this.setup().decode(t,r)},w.prototype.decodeDelimited=function(t){return t instanceof o||(t=o.create(t)),this.decode(t,t.uint32())},w.prototype.verify=function(t){return this.setup().verify(t)},w.prototype.fromObject=function(t){return this.setup().fromObject(t)},w.prototype.toObject=function(t,r){return this.setup().toObject(t,r)},w.d=function(r){return function(t){v.decorateType(t,r)}}},function(t,r,i){"use strict";t.exports=o;var s=i(7),n=(((o.prototype=Object.create(s.prototype)).constructor=o).className="MapField",i(9)),u=i(1);function o(t,r,i,n,e,o){if(s.call(this,t,r,n,void 0,void 0,e,o),!u.isString(i))throw TypeError("keyType must be a string");this.keyType=i,this.resolvedKeyType=null,this.map=!0}o.fromJSON=function(t,r){return new o(t,r.id,r.keyType,r.type,r.options,r.comment)},o.prototype.toJSON=function(t){t=!!t&&Boolean(t.keepComments);return u.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},o.prototype.resolve=function(){if(this.resolved)return this;if(void 0===n.mapKey[this.keyType])throw Error("invalid key type: "+this.keyType);return s.prototype.resolve.call(this)},o.d=function(i,n,e){return"function"==typeof e?e=u.decorateType(e).name:e&&"object"==typeof e&&(e=u.decorateEnum(e).name),function(t,r){u.decorateType(t.constructor).add(new o(r,i,n,e))}}},function(t,r,i){"use strict";t.exports=s;var n=i(8),o=(((s.prototype=Object.create(n.prototype)).constructor=s).className="Service",i(23)),u=i(1),a=i(17);function s(t,r){n.call(this,t,r),this.methods={},this.L=null}function e(t){return t.L=null,t}s.fromJSON=function(t,r){var i=new s(t,r.options);if(r.methods)for(var n=Object.keys(r.methods),e=0;e<n.length;++e)i.add(o.fromJSON(n[e],r.methods[n[e]]));return r.nested&&i.addJSON(r.nested),i.comment=r.comment,i},s.prototype.toJSON=function(t){var r=n.prototype.toJSON.call(this,t),i=!!t&&Boolean(t.keepComments);return u.toObject(["options",r&&r.options||void 0,"methods",n.arrayToJSON(this.methodsArray,t)||{},"nested",r&&r.nested||void 0,"comment",i?this.comment:void 0])},Object.defineProperty(s.prototype,"methodsArray",{get:function(){return this.L||(this.L=u.toArray(this.methods))}}),s.prototype.get=function(t){return this.methods[t]||n.prototype.get.call(this,t)},s.prototype.resolveAll=function(){for(var t=this.methodsArray,r=0;r<t.length;++r)t[r].resolve();return n.prototype.resolve.call(this)},s.prototype.add=function(t){if(this.get(t.name))throw Error("duplicate name '"+t.name+"' in "+this);return t instanceof o?e((this.methods[t.name]=t).parent=this):n.prototype.add.call(this,t)},s.prototype.remove=function(t){if(t instanceof o){if(this.methods[t.name]!==t)throw Error(t+" is not a member of "+this);return delete this.methods[t.name],t.parent=null,e(this)}return n.prototype.remove.call(this,t)},s.prototype.create=function(t,r,i){for(var n,e=new a.Service(t,r,i),o=0;o<this.methodsArray.length;++o){var s=u.lcFirst((n=this.L[o]).resolve().name).replace(/[^$\w_]/g,"");e[s]=u.codegen(["r","c"],u.isReserved(s)?s+"_":s)("return this.rpcCall(m,q,s,r,c)")({m:n,q:n.resolvedRequestType.ctor,s:n.resolvedResponseType.ctor})}return e}},function(t,r,i){"use strict";t.exports=n;var f=i(6),h=(((n.prototype=Object.create(f.prototype)).constructor=n).className="Method",i(1));function n(t,r,i,n,e,o,s,u,a){if(h.isObject(e)?(s=e,e=o=void 0):h.isObject(o)&&(s=o,o=void 0),void 0!==r&&!h.isString(r))throw TypeError("type must be a string");if(!h.isString(i))throw TypeError("requestType must be a string");if(!h.isString(n))throw TypeError("responseType must be a string");f.call(this,t,s),this.type=r||"rpc",this.requestType=i,this.requestStream=!!e||void 0,this.responseType=n,this.responseStream=!!o||void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=u,this.parsedOptions=a}n.fromJSON=function(t,r){return new n(t,r.type,r.requestType,r.responseType,r.requestStream,r.responseStream,r.options,r.comment,r.parsedOptions)},n.prototype.toJSON=function(t){t=!!t&&Boolean(t.keepComments);return h.toObject(["type","rpc"!==this.type&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",t?this.comment:void 0,"parsedOptions",this.parsedOptions])},n.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),f.prototype.resolve.call(this))}},function(t,r,i){"use strict";t.exports=function(t){var r=f.codegen(["r","l"],t.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(t.fieldsArray.filter(function(t){return t.map}).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");t.group&&r("if((t&7)===4)")("break");r("switch(t>>>3){");for(var i=0;i<t.fieldsArray.length;++i){var n=t.k[i].resolve(),e=n.resolvedType instanceof u?"int32":n.type,o="m"+f.safeProp(n.name);r("case %i:",n.id),n.map?(r("if(%s===util.emptyObject)",o)("%s={}",o)("var c2 = r.uint32()+r.pos"),void 0!==a.defaults[n.keyType]?r("k=%j",a.defaults[n.keyType]):r("k=null"),void 0!==a.defaults[e]?r("value=%j",a.defaults[e]):r("value=null"),r("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",n.keyType)("case 2:"),void 0===a.basic[e]?r("value=types[%i].decode(r,r.uint32())",i):r("value=r.%s()",e),r("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),void 0!==a.long[n.keyType]?r('%s[typeof k==="object"?util.longToHash(k):k]=value',o):r("%s[k]=value",o)):n.repeated?(r("if(!(%s&&%s.length))",o,o)("%s=[]",o),void 0!==a.packed[e]&&r("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",o,e)("}else"),void 0===a.basic[e]?r(n.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",o,i):r("%s.push(r.%s())",o,e)):void 0===a.basic[e]?r(n.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",o,i):r("%s=r.%s()",o,e),r("break")}for(r("default:")("r.skipType(t&7)")("break")("}")("}"),i=0;i<t.k.length;++i){var s=t.k[i];s.required&&r("if(!m.hasOwnProperty(%j))",s.name)("throw util.ProtocolError(%j,{instance:m})","missing required '"+s.name+"'")}return r("return m")};var u=i(5),a=i(9),f=i(1)},function(t,r,i){"use strict";t.exports=function(t){var r=a.codegen(["m"],t.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),i=t.oneofsArray,n={};i.length&&r("var p={}");for(var e=0;e<t.fieldsArray.length;++e){var o,s=t.k[e].resolve(),u="m"+a.safeProp(s.name);s.optional&&r("if(%s!=null&&m.hasOwnProperty(%j)){",u,s.name),s.map?(r("if(!util.isObject(%s))",u)("return%j",f(s,"object"))("var k=Object.keys(%s)",u)("for(var i=0;i<k.length;++i){"),function(t,r,i){switch(r.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":t("if(!util.key32Re.test(%s))",i)("return%j",f(r,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":t("if(!util.key64Re.test(%s))",i)("return%j",f(r,"integer|Long key"));break;case"bool":t("if(!util.key2Re.test(%s))",i)("return%j",f(r,"boolean key"))}}(r,s,"k[i]"),h(r,s,e,u+"[k[i]]")("}")):s.repeated?(r("if(!Array.isArray(%s))",u)("return%j",f(s,"array"))("for(var i=0;i<%s.length;++i){",u),h(r,s,e,u+"[i]")("}")):(s.partOf&&(o=a.safeProp(s.partOf.name),1===n[s.partOf.name]&&r("if(p%s===1)",o)("return%j",s.partOf.name+": multiple values"),n[s.partOf.name]=1,r("p%s=1",o)),h(r,s,e,u)),s.optional&&r("}")}return r("return null")};var s=i(5),a=i(1);function f(t,r){return t.name+": "+r+(t.repeated&&"array"!==r?"[]":t.map&&"object"!==r?"{k:"+t.keyType+"}":"")+" expected"}function h(t,r,i,n){if(r.resolvedType)if(r.resolvedType instanceof s){t("switch(%s){",n)("default:")("return%j",f(r,"enum value"));for(var e=Object.keys(r.resolvedType.values),o=0;o<e.length;++o)t("case %i:",r.resolvedType.values[e[o]]);t("break")("}")}else t("{")("var e=types[%i].verify(%s);",i,n)("if(e)")("return%j+e",r.name+".")("}");else switch(r.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":t("if(!util.isInteger(%s))",n)("return%j",f(r,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":t("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",n,n,n,n)("return%j",f(r,"integer|Long"));break;case"float":case"double":t('if(typeof %s!=="number")',n)("return%j",f(r,"number"));break;case"bool":t('if(typeof %s!=="boolean")',n)("return%j",f(r,"boolean"));break;case"string":t("if(!util.isString(%s))",n)("return%j",f(r,"string"));break;case"bytes":t('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',n,n,n)("return%j",f(r,"buffer"))}return t}},function(t,r,i){"use strict";var c=i(5),v=i(1);function s(t,r,i,n){if(r.resolvedType)if(r.resolvedType instanceof c){t("switch(d%s){",n);for(var e=r.resolvedType.values,o=Object.keys(e),s=0;s<o.length;++s)r.repeated&&e[o[s]]===r.typeDefault&&t("default:"),t("case%j:",o[s])("case %i:",e[o[s]])("m%s=%j",n,e[o[s]])("break");t("}")}else t('if(typeof d%s!=="object")',n)("throw TypeError(%j)",r.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",n,i,n);else{var u=!1;switch(r.type){case"double":case"float":t("m%s=Number(d%s)",n,n);break;case"uint32":case"fixed32":t("m%s=d%s>>>0",n,n);break;case"int32":case"sint32":case"sfixed32":t("m%s=d%s|0",n,n);break;case"uint64":u=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":t("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",n,n,u)('else if(typeof d%s==="string")',n)("m%s=parseInt(d%s,10)",n,n)('else if(typeof d%s==="number")',n)("m%s=d%s",n,n)('else if(typeof d%s==="object")',n)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",n,n,n,u?"true":"");break;case"bytes":t('if(typeof d%s==="string")',n)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",n,n,n)("else if(d%s.length)",n)("m%s=d%s",n,n);break;case"string":t("m%s=String(d%s)",n,n);break;case"bool":t("m%s=Boolean(d%s)",n,n)}}return t}function y(t,r,i,n){if(r.resolvedType)r.resolvedType instanceof c?t("d%s=o.enums===String?types[%i].values[m%s]:m%s",n,i,n,n):t("d%s=types[%i].toObject(m%s,o)",n,i,n);else{var e=!1;switch(r.type){case"double":case"float":t("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",n,n,n,n);break;case"uint64":e=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":t('if(typeof m%s==="number")',n)("d%s=o.longs===String?String(m%s):m%s",n,n,n)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",n,n,n,n,e?"true":"",n);break;case"bytes":t("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",n,n,n,n,n);break;default:t("d%s=m%s",n,n)}}return t}r.fromObject=function(t){var r=t.fieldsArray,i=v.codegen(["d"],t.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!r.length)return i("return new this.ctor");i("var m=new this.ctor");for(var n=0;n<r.length;++n){var e=r[n].resolve(),o=v.safeProp(e.name);e.map?(i("if(d%s){",o)('if(typeof d%s!=="object")',o)("throw TypeError(%j)",e.fullName+": object expected")("m%s={}",o)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",o),s(i,e,n,o+"[ks[i]]")("}")("}")):e.repeated?(i("if(d%s){",o)("if(!Array.isArray(d%s))",o)("throw TypeError(%j)",e.fullName+": array expected")("m%s=[]",o)("for(var i=0;i<d%s.length;++i){",o),s(i,e,n,o+"[i]")("}")("}")):(e.resolvedType instanceof c||i("if(d%s!=null){",o),s(i,e,n,o),e.resolvedType instanceof c||i("}"))}return i("return m")},r.toObject=function(t){var r=t.fieldsArray.slice().sort(v.compareFieldsById);if(!r.length)return v.codegen()("return {}");for(var i=v.codegen(["m","o"],t.name+"$toObject")("if(!o)")("o={}")("var d={}"),n=[],e=[],o=[],s=0;s<r.length;++s)r[s].partOf||(r[s].resolve().repeated?n:r[s].map?e:o).push(r[s]);if(n.length){for(i("if(o.arrays||o.defaults){"),s=0;s<n.length;++s)i("d%s=[]",v.safeProp(n[s].name));i("}")}if(e.length){for(i("if(o.objects||o.defaults){"),s=0;s<e.length;++s)i("d%s={}",v.safeProp(e[s].name));i("}")}if(o.length){for(i("if(o.defaults){"),s=0;s<o.length;++s){var u,a=o[s],f=v.safeProp(a.name);a.resolvedType instanceof c?i("d%s=o.enums===String?%j:%j",f,a.resolvedType.valuesById[a.typeDefault],a.typeDefault):a.long?i("if(util.Long){")("var n=new util.Long(%i,%i,%j)",a.typeDefault.low,a.typeDefault.high,a.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",f)("}else")("d%s=o.longs===String?%j:%i",f,a.typeDefault.toString(),a.typeDefault.toNumber()):a.bytes?(u="["+Array.prototype.slice.call(a.typeDefault).join(",")+"]",i("if(o.bytes===String)d%s=%j",f,String.fromCharCode.apply(String,a.typeDefault))("else{")("d%s=%s",f,u)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",f,f)("}")):i("d%s=%j",f,a.typeDefault)}i("}")}for(var h=!1,s=0;s<r.length;++s){var a=r[s],l=t.k.indexOf(a),f=v.safeProp(a.name);a.map?(h||(h=!0,i("var ks2")),i("if(m%s&&(ks2=Object.keys(m%s)).length){",f,f)("d%s={}",f)("for(var j=0;j<ks2.length;++j){"),y(i,a,l,f+"[ks2[j]]")("}")):a.repeated?(i("if(m%s&&m%s.length){",f,f)("d%s=[]",f)("for(var j=0;j<m%s.length;++j){",f),y(i,a,l,f+"[j]")("}")):(i("if(m%s!=null&&m.hasOwnProperty(%j)){",f,a.name),y(i,a,l,f),a.partOf&&i("if(o.oneofs)")("d%s=%j",v.safeProp(a.partOf.name),a.name)),i("}")}return i("return d")}},function(t,r,i){"use strict";var s=i(14);r[".google.protobuf.Any"]={fromObject:function(t){if(t&&t["@type"]){var r,i=t["@type"].substring(t["@type"].lastIndexOf("/")+1),i=this.lookup(i);if(i)return-1===(r="."===t["@type"].charAt(0)?t["@type"].substr(1):t["@type"]).indexOf("/")&&(r="/"+r),this.create({type_url:r,value:i.encode(i.fromObject(t)).finish()})}return this.fromObject(t)},toObject:function(t,r){var i,n,e="",o="";return!((t=r&&r.json&&t.type_url&&t.value&&(o=t.type_url.substring(t.type_url.lastIndexOf("/")+1),e=t.type_url.substring(0,t.type_url.lastIndexOf("/")+1),i=this.lookup(o))?i.decode(t.value):t)instanceof this.ctor)&&t instanceof s?(i=t.$type.toObject(t,r),n="."===t.$type.fullName[0]?t.$type.fullName.substr(1):t.$type.fullName,i["@type"]=o=(e=""===e?"type.googleapis.com/":e)+n,i):this.toObject(t,r)}}},function(t,r,i){"use strict";t.exports=a;var n,v,y,e=i(8),o=(((a.prototype=Object.create(e.prototype)).constructor=a).className="Root",i(7)),s=i(5),u=i(10),d=i(1);function a(t){e.call(this,"",t),this.deferred=[],this.files=[]}function b(){}a.fromJSON=function(t,r){return r=r||new a,t.options&&r.setOptions(t.options),r.addJSON(t.nested)},a.prototype.resolvePath=d.path.resolve,a.prototype.fetch=d.fetch,a.prototype.load=function t(r,o,e){"function"==typeof o&&(e=o,o=void 0);var s=this;if(!e)return d.asPromise(t,s,r,o);var u=e===b;function a(t,r){if(e){var i=e;if(e=null,u)throw t;i(t,r)}}function f(t){var r=t.lastIndexOf("google/protobuf/");if(-1<r){t=t.substring(r);if(t in y)return t}return null}function h(t,r){try{if(d.isString(r)&&"{"===r.charAt(0)&&(r=JSON.parse(r)),d.isString(r)){v.filename=t;var i,n=v(r,s,o),e=0;if(n.imports)for(;e<n.imports.length;++e)(i=f(n.imports[e])||s.resolvePath(t,n.imports[e]))&&l(i);if(n.weakImports)for(e=0;e<n.weakImports.length;++e)(i=f(n.weakImports[e])||s.resolvePath(t,n.weakImports[e]))&&l(i,!0)}else s.setOptions(r.options).addJSON(r.nested)}catch(t){a(t)}u||c||a(null,s)}function l(i,n){if(!(-1<s.files.indexOf(i)))if(s.files.push(i),i in y)u?h(i,y[i]):(++c,setTimeout(function(){--c,h(i,y[i])}));else if(u){var t;try{t=d.fs.readFileSync(i).toString("utf8")}catch(t){return void(n||a(t))}h(i,t)}else++c,s.fetch(i,function(t,r){--c,e&&(t?n?c||a(null,s):a(t):h(i,r))})}var c=0;d.isString(r)&&(r=[r]);for(var i,n=0;n<r.length;++n)(i=s.resolvePath("",r[n]))&&l(i);if(u)return s;c||a(null,s)},a.prototype.loadSync=function(t,r){if(d.isNode)return this.load(t,r,b);throw Error("not supported")},a.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(t){return"'extend "+t.extend+"' in "+t.parent.fullName}).join(", "));return e.prototype.resolveAll.call(this)};var f=/^[A-Z]/;function h(t,r){var i,n=r.parent.lookup(r.extend);if(n)return((i=new o(r.fullName,r.id,r.type,r.rule,void 0,r.options)).declaringField=r).extensionField=i,n.add(i),1}a.prototype.S=function(t){if(t instanceof o)void 0===t.extend||t.extensionField||h(0,t)||this.deferred.push(t);else if(t instanceof s)f.test(t.name)&&(t.parent[t.name]=t.values);else if(!(t instanceof u)){if(t instanceof n)for(var r=0;r<this.deferred.length;)h(0,this.deferred[r])?this.deferred.splice(r,1):++r;for(var i=0;i<t.nestedArray.length;++i)this.S(t.R[i]);f.test(t.name)&&(t.parent[t.name]=t)}},a.prototype.O=function(t){var r;if(t instanceof o)void 0!==t.extend&&(t.extensionField?(t.extensionField.parent.remove(t.extensionField),t.extensionField=null):-1<(r=this.deferred.indexOf(t))&&this.deferred.splice(r,1));else if(t instanceof s)f.test(t.name)&&delete t.parent[t.name];else if(t instanceof e){for(var i=0;i<t.nestedArray.length;++i)this.O(t.R[i]);f.test(t.name)&&delete t.parent[t.name]}},a.j=function(t,r,i){n=t,v=r,y=i}},function(t,r,i){"use strict";t.exports=i(31)},function(t,r,i){"use strict";!function(o){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){t=function(t,r){if("object"!=e(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===r?String:Number)(t);i=i.call(t,r||"default");if("object"!=e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==e(t)?t:String(t)}(n.key),n)}}var u=i(49),t=(i(50),function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.D=null,this.B=400,this.F=null,this.G=null,this.C=new Map}var r,i,n;return r=t,(i=[{key:"url",get:function(){return this.D}},{key:"status",get:function(){return this.B}},{key:"responseType",get:function(){return this.F},set:function(t){this.F=t}},{key:"response",get:function(){return this.G}},{key:"open",value:function(t,r){"GET"==t&&(this.D=r)}},{key:"addEventListener",value:function(t,r){var i=this.C.get(t);i||this.C.set(t,i=[]),i.push(r)}},{key:"send",value:function(){var r=this,t=this.D,i=u.createReadStream(t),n=[],e=0;this.G=null,i.on("readable",function(){var t=i.read();null!=t&&(n.push(t),e+=t.length,r.G?r.G=o.concat([r.G,new o(t)],e):r.G=new o(t))}),i.on("end",function(){r.B=200,r.U("load")}),i.on("error",function(t){r.B=400,r.U("error",t)})}}])&&s(r.prototype,i),n&&s(r,n),Object.defineProperty(r,"prototype",{writable:!1}),t}());Object.assign(t.prototype,{U:function(t,r){if(0!=this.C.size){var i=this.C.get(t);if(i)for(var n=0;n<i.length;n++)i[n]&&i[n](r)}}}),r.a=t}.call(this,i(45).Buffer)},function(t,r,i){"use strict";var n=t.exports=i(32);n.build="light",n.load=function(t,r,i){return(r="function"==typeof r?(i=r,new n.Root):r||new n.Root).load(t,i)},n.loadSync=function(t,r){return(r=r||new n.Root).loadSync(t)},n.encoder=i(19),n.decoder=i(24),n.verifier=i(25),n.converter=i(26),n.ReflectionObject=i(6),n.Namespace=i(8),n.Root=i(28),n.Enum=i(5),n.Type=i(20),n.Field=i(7),n.OneOf=i(10),n.MapField=i(21),n.Service=i(22),n.Method=i(23),n.Message=i(14),n.wrappers=i(27),n.types=i(9),n.util=i(1),n.ReflectionObject.j(n.Root),n.Namespace.j(n.Type,n.Service,n.Enum),n.Root.j(n.Type),n.Field.j(n.Type)},function(t,r,i){"use strict";var n=r;function e(){n.util.j(),n.Writer.j(n.BufferWriter),n.Reader.j(n.BufferReader)}n.build="minimal",n.Writer=i(12),n.BufferWriter=i(39),n.Reader=i(13),n.BufferReader=i(40),n.util=i(4),n.rpc=i(17),n.roots=i(18),n.configure=e,e()},function(t,r,i){"use strict";r.length=function(t){var r=t.length;if(!r)return 0;for(var i=0;1<--r%4&&"="===t.charAt(r);)++i;return Math.ceil(3*t.length)/4-i};for(var f=new Array(64),a=new Array(123),n=0;n<64;)a[f[n]=n<26?n+65:n<52?n+71:n<62?n-4:n-59|43]=n++;r.encode=function(t,r,i){for(var n,e=null,o=[],s=0,u=0;r<i;){var a=t[r++];switch(u){case 0:o[s++]=f[a>>2],n=(3&a)<<4,u=1;break;case 1:o[s++]=f[n|a>>4],n=(15&a)<<2,u=2;break;case 2:o[s++]=f[n|a>>6],o[s++]=f[63&a],u=0}8191<s&&((e=e||[]).push(String.fromCharCode.apply(String,o)),s=0)}return u&&(o[s++]=f[n],o[s++]=61,1===u)&&(o[s++]=61),e?(s&&e.push(String.fromCharCode.apply(String,o.slice(0,s))),e.join("")):String.fromCharCode.apply(String,o.slice(0,s))};var h="invalid encoding";r.decode=function(t,r,i){for(var n,e=i,o=0,s=0;s<t.length;){var u=t.charCodeAt(s++);if(61===u&&1<o)break;if(void 0===(u=a[u]))throw Error(h);switch(o){case 0:n=u,o=1;break;case 1:r[i++]=n<<2|(48&u)>>4,n=u,o=2;break;case 2:r[i++]=(15&n)<<4|(60&u)>>2,n=u,o=3;break;case 3:r[i++]=(3&n)<<6|u,o=0}}if(1===o)throw Error(h);return i-e},r.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}},function(t,r,i){"use strict";function n(){this.C={}}(t.exports=n).prototype.on=function(t,r,i){return(this.C[t]||(this.C[t]=[])).push({fn:r,ctx:i||this}),this},n.prototype.off=function(t,r){if(void 0===t)this.C={};else if(void 0===r)this.C[t]=[];else for(var i=this.C[t],n=0;n<i.length;)i[n].fn===r?i.splice(n,1):++n;return this},n.prototype.emit=function(t){var r=this.C[t];if(r){for(var i=[],n=1;n<arguments.length;)i.push(arguments[n++]);for(n=0;n<r.length;)r[n].fn.apply(r[n++].ctx,i)}return this}},function(t,r,i){"use strict";function n(t){function r(t,r,i,n){var e=r<0?1:0;0===(r=e?-r:r)?t(0<1/r?0:2147483648,i,n):isNaN(r)?t(2143289344,i,n):t(34028234663852886e22<r?(e<<31|2139095040)>>>0:r<11754943508222875e-54?(e<<31|Math.round(r/1401298464324817e-60))>>>0:(e<<31|(t=Math.floor(Math.log(r)/Math.LN2))+127<<23|8388607&Math.round(r*Math.pow(2,-t)*8388608))>>>0,i,n)}function i(t,r,i){t=t(r,i),r=2*(t>>31)+1,i=t>>>23&255,t&=8388607;return 255==i?t?NaN:1/0*r:0==i?1401298464324817e-60*r*t:r*Math.pow(2,i-150)*(8388608+t)}function n(t,r,i){u[0]=t,r[i]=a[0],r[i+1]=a[1],r[i+2]=a[2],r[i+3]=a[3]}function e(t,r,i){u[0]=t,r[i]=a[3],r[i+1]=a[2],r[i+2]=a[1],r[i+3]=a[0]}function o(t,r){return a[0]=t[r],a[1]=t[r+1],a[2]=t[r+2],a[3]=t[r+3],u[0]}function s(t,r){return a[3]=t[r],a[2]=t[r+1],a[1]=t[r+2],a[0]=t[r+3],u[0]}var u,a,f,h,l;function c(t,r,i,n,e,o){var s,u,a=n<0?1:0;0===(n=a?-n:n)?(t(0,e,o+r),t(0<1/n?0:2147483648,e,o+i)):isNaN(n)?(t(0,e,o+r),t(2146959360,e,o+i)):17976931348623157e292<n?(t(0,e,o+r),t((a<<31|2146435072)>>>0,e,o+i)):n<22250738585072014e-324?(t((s=n/5e-324)>>>0,e,o+r),t((a<<31|s/4294967296)>>>0,e,o+i)):(1024===(u=Math.floor(Math.log(n)/Math.LN2))&&(u=1023),t(4503599627370496*(s=n*Math.pow(2,-u))>>>0,e,o+r),t((a<<31|u+1023<<20|1048576*s&1048575)>>>0,e,o+i))}function v(t,r,i,n,e){r=t(n,e+r),t=t(n,e+i),n=2*(t>>31)+1,e=t>>>20&2047,i=4294967296*(1048575&t)+r;return 2047==e?i?NaN:1/0*n:0==e?5e-324*n*i:n*Math.pow(2,e-1075)*(i+4503599627370496)}function y(t,r,i){f[0]=t,r[i]=h[0],r[i+1]=h[1],r[i+2]=h[2],r[i+3]=h[3],r[i+4]=h[4],r[i+5]=h[5],r[i+6]=h[6],r[i+7]=h[7]}function d(t,r,i){f[0]=t,r[i]=h[7],r[i+1]=h[6],r[i+2]=h[5],r[i+3]=h[4],r[i+4]=h[3],r[i+5]=h[2],r[i+6]=h[1],r[i+7]=h[0]}function b(t,r){return h[0]=t[r],h[1]=t[r+1],h[2]=t[r+2],h[3]=t[r+3],h[4]=t[r+4],h[5]=t[r+5],h[6]=t[r+6],h[7]=t[r+7],f[0]}function p(t,r){return h[7]=t[r],h[6]=t[r+1],h[5]=t[r+2],h[4]=t[r+3],h[3]=t[r+4],h[2]=t[r+5],h[1]=t[r+6],h[0]=t[r+7],f[0]}return"undefined"!=typeof Float32Array?(u=new Float32Array([-0]),a=new Uint8Array(u.buffer),l=128===a[3],t.writeFloatLE=l?n:e,t.writeFloatBE=l?e:n,t.readFloatLE=l?o:s,t.readFloatBE=l?s:o):(t.writeFloatLE=r.bind(null,m),t.writeFloatBE=r.bind(null,w),t.readFloatLE=i.bind(null,g),t.readFloatBE=i.bind(null,_)),"undefined"!=typeof Float64Array?(f=new Float64Array([-0]),h=new Uint8Array(f.buffer),l=128===h[7],t.writeDoubleLE=l?y:d,t.writeDoubleBE=l?d:y,t.readDoubleLE=l?b:p,t.readDoubleBE=l?p:b):(t.writeDoubleLE=c.bind(null,m,0,4),t.writeDoubleBE=c.bind(null,w,4,0),t.readDoubleLE=v.bind(null,g,0,4),t.readDoubleBE=v.bind(null,_,4,0)),t}function m(t,r,i){r[i]=255&t,r[i+1]=t>>>8&255,r[i+2]=t>>>16&255,r[i+3]=t>>>24}function w(t,r,i){r[i]=t>>>24,r[i+1]=t>>>16&255,r[i+2]=t>>>8&255,r[i+3]=255&t}function g(t,r){return(t[r]|t[r+1]<<8|t[r+2]<<16|t[r+3]<<24)>>>0}function _(t,r){return(t[r]<<24|t[r+1]<<16|t[r+2]<<8|t[r+3])>>>0}t.exports=n(n)},function(t,r,i){"use strict";r.length=function(t){for(var r,i=0,n=0;n<t.length;++n)(r=t.charCodeAt(n))<128?i+=1:r<2048?i+=2:55296==(64512&r)&&56320==(64512&t.charCodeAt(n+1))?(++n,i+=4):i+=3;return i},r.read=function(t,r,i){if(i-r<1)return"";for(var n,e=null,o=[],s=0;r<i;)(n=t[r++])<128?o[s++]=n:191<n&&n<224?o[s++]=(31&n)<<6|63&t[r++]:239<n&&n<365?(n=((7&n)<<18|(63&t[r++])<<12|(63&t[r++])<<6|63&t[r++])-65536,o[s++]=55296+(n>>10),o[s++]=56320+(1023&n)):o[s++]=(15&n)<<12|(63&t[r++])<<6|63&t[r++],8191<s&&((e=e||[]).push(String.fromCharCode.apply(String,o)),s=0);return e?(s&&e.push(String.fromCharCode.apply(String,o.slice(0,s))),e.join("")):String.fromCharCode.apply(String,o.slice(0,s))},r.write=function(t,r,i){for(var n,e,o=i,s=0;s<t.length;++s)(n=t.charCodeAt(s))<128?r[i++]=n:(n<2048?r[i++]=n>>6|192:(55296==(64512&n)&&56320==(64512&(e=t.charCodeAt(s+1)))?(++s,r[i++]=(n=65536+((1023&n)<<10)+(1023&e))>>18|240,r[i++]=n>>12&63|128):r[i++]=n>>12|224,r[i++]=n>>6&63|128),r[i++]=63&n|128);return i-o}},function(t,r,i){"use strict";t.exports=function(r,i,t){var n=t||8192,e=n>>>1,o=null,s=n;return function(t){if(t<1||e<t)return r(t);n<s+t&&(o=r(n),s=0);t=i.call(o,s,s+=t);return 7&s&&(s=1+(7|s)),t}}},function(t,r,i){"use strict";t.exports=e;var n=i(4);function e(t,r){this.lo=t>>>0,this.hi=r>>>0}var o=e.zero=new e(0,0),s=(o.toNumber=function(){return 0},o.zzEncode=o.zzDecode=function(){return this},o.length=function(){return 1},e.zeroHash="\0\0\0\0\0\0\0\0",e.fromNumber=function(t){var r,i;return 0===t?o:(i=(t=(r=t<0)?-t:t)>>>0,t=(t-i)/4294967296>>>0,r&&(t=~t>>>0,i=~i>>>0,4294967295<++i)&&(i=0,4294967295<++t)&&(t=0),new e(i,t))},e.from=function(t){if("number"==typeof t)return e.fromNumber(t);if(n.isString(t)){if(!n.Long)return e.fromNumber(parseInt(t,10));t=n.Long.fromString(t)}return t.low||t.high?new e(t.low>>>0,t.high>>>0):o},e.prototype.toNumber=function(t){var r;return!t&&this.hi>>>31?(t=1+~this.lo>>>0,r=~this.hi>>>0,-(t+4294967296*(r=t?r:r+1>>>0))):this.lo+4294967296*this.hi},e.prototype.toLong=function(t){return n.Long?new n.Long(0|this.lo,0|this.hi,Boolean(t)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(t)}},String.prototype.charCodeAt);e.fromHash=function(t){return"\0\0\0\0\0\0\0\0"===t?o:new e((s.call(t,0)|s.call(t,1)<<8|s.call(t,2)<<16|s.call(t,3)<<24)>>>0,(s.call(t,4)|s.call(t,5)<<8|s.call(t,6)<<16|s.call(t,7)<<24)>>>0)},e.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},e.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this},e.prototype.zzDecode=function(){var t=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this},e.prototype.length=function(){var t=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,i=this.hi>>>24;return 0==i?0==r?t<16384?t<128?1:2:t<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:i<128?9:10}},function(t,r,i){"use strict";t.exports=o;var n=i(12),e=((o.prototype=Object.create(n.prototype)).constructor=o,i(4));function o(){n.call(this)}function s(t,r,i){t.length<40?e.utf8.write(t,r,i):r.utf8Write?r.utf8Write(t,i):r.write(t,i)}o.j=function(){o.alloc=e._,o.writeBytesBuffer=e.Buffer&&e.Buffer.prototype instanceof Uint8Array&&"set"===e.Buffer.prototype.set.name?function(t,r,i){r.set(t,i)}:function(t,r,i){if(t.copy)t.copy(r,i,0,t.length);else for(var n=0;n<t.length;)r[i++]=t[n++]}},o.prototype.bytes=function(t){var r=(t=e.isString(t)?e.v(t,"base64"):t).length>>>0;return this.uint32(r),r&&this.M(o.writeBytesBuffer,r,t),this},o.prototype.string=function(t){var r=e.Buffer.byteLength(t);return this.uint32(r),r&&this.M(s,r,t),this},o.j()},function(t,r,i){"use strict";t.exports=o;var n=i(13),e=((o.prototype=Object.create(n.prototype)).constructor=o,i(4));function o(t){n.call(this,t)}o.j=function(){e.Buffer&&(o.prototype.N=e.Buffer.prototype.slice)},o.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))},o.j()},function(t,r,i){"use strict";t.exports=n;var u=i(4);function n(t,r,i){if("function"!=typeof t)throw TypeError("rpcImpl must be a function");u.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(r),this.responseDelimited=Boolean(i)}((n.prototype=Object.create(u.EventEmitter.prototype)).constructor=n).prototype.rpcCall=function t(i,r,n,e,o){if(!e)throw TypeError("request must be specified");var s=this;if(!o)return u.asPromise(t,s,i,r,n,e);if(s.rpcImpl)try{return s.rpcImpl(i,r[s.requestDelimited?"encodeDelimited":"encode"](e).finish(),function(t,r){if(t)return s.emit("error",t,i),o(t);if(null!==r){if(!(r instanceof n))try{r=n[s.responseDelimited?"decodeDelimited":"decode"](r)}catch(t){return s.emit("error",t,i),o(t)}return s.emit("data",r,i),o(null,r)}s.end(!0)})}catch(t){s.emit("error",t,i),setTimeout(function(){o(t)},0)}else setTimeout(function(){o(Error("already ended"))},0)},n.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},function(t,r,i){"use strict";function n(r,i){"string"==typeof r&&(i=r,r=void 0);var a=[];function f(t){if("string"!=typeof t){var r="return "+h();if(t){for(var i=Object.keys(t),n=new Array(i.length+1),e=new Array(i.length),o=0;o<i.length;)n[o]=i[o],e[o]=t[i[o++]];return n[o]=r,Function.apply(null,n).apply(null,e)}return Function(r)()}for(var s=new Array(arguments.length-1),u=0;u<s.length;)s[u]=arguments[++u];if(u=0,t=t.replace(/%([%dfijs])/g,function(t,r){var i=s[u++];switch(r){case"d":case"f":return String(Number(i));case"i":return String(Math.floor(i));case"j":return JSON.stringify(i);case"s":return String(i)}return"%"}),u!==s.length)throw Error("parameter count mismatch");return a.push(t),f}function h(t){return"function "+(t||i||"")+"("+(r&&r.join(",")||"")+"){\n  "+a.join("\n  ")+"\n}"}return f.toString=h,f}(t.exports=n).verbose=!1},function(t,r,i){"use strict";t.exports=u;var o=i(15),s=i(16)("fs");function u(i,n,e){return n="function"==typeof n?(e=n,{}):n||{},e?!n.xhr&&s&&s.readFile?s.readFile(i,function(t,r){return t&&"undefined"!=typeof XMLHttpRequest?u.xhr(i,n,e):t?e(t):e(null,n.binary?r:r.toString("utf8"))}):u.xhr(i,n,e):o(u,this,i,n)}u.xhr=function(t,i,n){var e=new XMLHttpRequest;e.onreadystatechange=function(){if(4===e.readyState){if(0!==e.status&&200!==e.status)return n(Error("status "+e.status));if(i.binary){if(!(t=e.response))for(var t=[],r=0;r<e.responseText.length;++r)t.push(255&e.responseText.charCodeAt(r));return n(null,"undefined"!=typeof Uint8Array?new Uint8Array(t):t)}return n(null,e.responseText)}},i.binary&&("overrideMimeType"in e&&e.overrideMimeType("text/plain; charset=x-user-defined"),e.responseType="arraybuffer"),e.open("GET",t),e.send()}},function(t,r,i){"use strict";var e=r.isAbsolute=function(t){return/^(?:\/|\w+:)/.test(t)},n=r.normalize=function(t){var r=(t=t.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),i=e(t),t="";i&&(t=r.shift()+"/");for(var n=0;n<r.length;)".."===r[n]?0<n&&".."!==r[n-1]?r.splice(--n,2):i?r.splice(n,1):++n:"."===r[n]?r.splice(n,1):++n;return t+r.join("/")};r.resolve=function(t,r,i){return i||(r=n(r)),!e(r)&&(t=(t=i?t:n(t)).replace(/(?:\/|^)[^/]+$/,"")).length?n(t+"/"+r):r}},function(t,A,P){"use strict";!function(t){var O=P(46),o=P(47),u=P(48);function i(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,r){if(i()<r)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(r)).__proto__=l.prototype:(t=null===t?new l(r):t).length=r,t}function l(t,r,i){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(t,r,i);if("number"!=typeof t)return n(this,t,r,i);if("string"==typeof r)throw new Error("If encoding is specified then the first argument must be a string");return s(this,t)}function n(t,r,i,n){if("number"==typeof r)throw new TypeError('"value" argument must not be a number');if("undefined"!=typeof ArrayBuffer&&r instanceof ArrayBuffer){var e=t,o=r,s=i;if(o.byteLength,s<0||o.byteLength<s)throw new RangeError("'offset' is out of bounds");if(o.byteLength<s+(n||0))throw new RangeError("'length' is out of bounds");return o=void 0===s&&void 0===n?new Uint8Array(o):void 0===n?new Uint8Array(o,s):new Uint8Array(o,s,n),l.TYPED_ARRAY_SUPPORT?(e=o).__proto__=l.prototype:e=f(e,o),e}if("string"!=typeof r){s=t,n=r;if(l.isBuffer(n))return o=0|h(n.length),0!==(s=a(s,o)).length&&n.copy(s,0,0,o),s;if(n){if("undefined"!=typeof ArrayBuffer&&n.buffer instanceof ArrayBuffer||"length"in n)return"number"!=typeof n.length||function(t){return t!=t}(n.length)?a(s,0):f(s,n);if("Buffer"===n.type&&u(n.data))return f(s,n.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}e=t,n=r,t=i;if(l.isEncoding(t="string"==typeof t&&""!==t?t:"utf8"))return r=0|c(n,t),e=(n=(e=a(e,r)).write(n,t))!==r?e.slice(0,n):e;throw new TypeError('"encoding" must be a valid string encoding')}function e(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function s(t,r){if(e(r),t=a(t,r<0?0:0|h(r)),!l.TYPED_ARRAY_SUPPORT)for(var i=0;i<r;++i)t[i]=0;return t}function f(t,r){var i=r.length<0?0:0|h(r.length);t=a(t,i);for(var n=0;n<i;n+=1)t[n]=255&r[n];return t}function h(t){if(t>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|t}function c(t,r){if(l.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;var i=(t="string"!=typeof t?""+t:t).length;if(0===i)return 0;for(var n=!1;;)switch(r){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return N(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return k(t).length;default:if(n)return N(t).length;r=(""+r).toLowerCase(),n=!0}}function r(t,r,i){var n,e=!1;if((r=void 0===r||r<0?0:r)>this.length)return"";if((i=void 0===i||i>this.length?this.length:i)<=0)return"";if((i>>>=0)<=(r>>>=0))return"";for(t=t||"utf8";;)switch(t){case"hex":var o=this,s=r,u=i,a=o.length;(!u||u<0||a<u)&&(u=a);for(var f="",h=s=!s||s<0?0:s;h<u;++h)f+=function(t){return t<16?"0"+t.toString(16):t.toString(16)}(o[h]);return f;case"utf8":case"utf-8":return E(this,r,i);case"ascii":var l=this,a=r,c=i,v="";c=Math.min(l.length,c);for(var y=a;y<c;++y)v+=String.fromCharCode(127&l[y]);return v;case"latin1":case"binary":var d=this,s=r,b=i,p="";b=Math.min(d.length,b);for(var m=s;m<b;++m)p+=String.fromCharCode(d[m]);return p;case"base64":return w=this,n=i,0===(g=r)&&n===w.length?O.fromByteArray(w):O.fromByteArray(w.slice(g,n));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var w=r,g=i,_=this.slice(w,g),j="",S=0;S<_.length;S+=2)j+=String.fromCharCode(_[S]+256*_[S+1]);return j;default:if(e)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),e=!0}}function v(t,r,i){var n=t[r];t[r]=t[i],t[i]=n}function y(t,r,i,n,e){if(0===t.length)return-1;if("string"==typeof i?(n=i,i=0):2147483647<i?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,(i=(i=isNaN(i)?e?0:t.length-1:i)<0?t.length+i:i)>=t.length){if(e)return-1;i=t.length-1}else if(i<0){if(!e)return-1;i=0}if("string"==typeof r&&(r=l.from(r,n)),l.isBuffer(r))return 0===r.length?-1:d(t,r,i,n,e);if("number"==typeof r)return r&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?(e?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(t,r,i):d(t,[r],i,n,e);throw new TypeError("val must be string, number or Buffer")}function d(t,r,i,n,e){var o=1,s=t.length,u=r.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||r.length<2)return-1;s/=o=2,u/=2,i/=2}function a(t,r){return 1===o?t[r]:t.readUInt16BE(r*o)}if(e)for(var f=-1,h=i;h<s;h++)if(a(t,h)===a(r,-1===f?0:h-f)){if(h-(f=-1===f?h:f)+1===u)return f*o}else-1!==f&&(h-=h-f),f=-1;else for(h=i=s<i+u?s-u:i;0<=h;h--){for(var l=!0,c=0;c<u;c++)if(a(t,h+c)!==a(r,c)){l=!1;break}if(l)return h}return-1}function b(t,r,i,n){return I(function(t){for(var r=[],i=0;i<t.length;++i)r.push(255&t.charCodeAt(i));return r}(r),t,i,n)}function p(t,r,i,n){return I(function(t,r){for(var i,n,e=[],o=0;o<t.length&&!((r-=2)<0);++o)i=t.charCodeAt(o),n=i>>8,e.push(i%256),e.push(n);return e}(r,t.length-i),t,i,n)}function E(t,r,i){i=Math.min(t.length,i);for(var n=[],e=r;e<i;){var o,s,u,a,f=t[e],h=null,l=239<f?4:223<f?3:191<f?2:1;if(e+l<=i)switch(l){case 1:f<128&&(h=f);break;case 2:128==(192&(o=t[e+1]))&&127<(a=(31&f)<<6|63&o)&&(h=a);break;case 3:o=t[e+1],s=t[e+2],128==(192&o)&&128==(192&s)&&2047<(a=(15&f)<<12|(63&o)<<6|63&s)&&(a<55296||57343<a)&&(h=a);break;case 4:o=t[e+1],s=t[e+2],u=t[e+3],128==(192&o)&&128==(192&s)&&128==(192&u)&&65535<(a=(15&f)<<18|(63&o)<<12|(63&s)<<6|63&u)&&a<1114112&&(h=a)}null===h?(h=65533,l=1):65535<h&&(n.push((h-=65536)>>>10&1023|55296),h=56320|1023&h),n.push(h),e+=l}var c=n,v=c.length;if(v<=m)return String.fromCharCode.apply(String,c);for(var y="",d=0;d<v;)y+=String.fromCharCode.apply(String,c.slice(d,d+=m));return y}A.Buffer=l,A.SlowBuffer=function(t){+t!=t&&(t=0);return l.alloc(+t)},A.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),A.kMaxLength=i(),l.poolSize=8192,l.Z=function(t){return t.__proto__=l.prototype,t},l.from=function(t,r,i){return n(null,t,r,i)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol)&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0}),l.alloc=function(t,r,i){return n=null,r=r,i=i,e(t=t),!(t<=0)&&void 0!==r?"string"==typeof i?a(n,t).fill(r,i):a(n,t).fill(r):a(n,t);var n},l.allocUnsafe=function(t){return s(null,t)},l.allocUnsafeSlow=function(t){return s(null,t)},l.isBuffer=function(t){return!(null==t||!t.W)},l.compare=function(t,r){if(!l.isBuffer(t)||!l.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(t===r)return 0;for(var i=t.length,n=r.length,e=0,o=Math.min(i,n);e<o;++e)if(t[e]!==r[e]){i=t[e],n=r[e];break}return i<n?-1:n<i?1:0},l.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(t,r){if(!u(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return l.alloc(0);if(void 0===r)for(e=r=0;e<t.length;++e)r+=t[e].length;for(var i=l.allocUnsafe(r),n=0,e=0;e<t.length;++e){var o=t[e];if(!l.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,n),n+=o.length}return i},l.byteLength=c,l.prototype.W=!0,l.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<t;r+=2)v(this,r,r+1);return this},l.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<t;r+=4)v(this,r,r+3),v(this,r+1,r+2);return this},l.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<t;r+=8)v(this,r,r+7),v(this,r+1,r+6),v(this,r+2,r+5),v(this,r+3,r+4);return this},l.prototype.toString=function(){var t=0|this.length;return 0==t?"":0===arguments.length?E(this,0,t):r.apply(this,arguments)},l.prototype.equals=function(t){if(l.isBuffer(t))return this===t||0===l.compare(this,t);throw new TypeError("Argument must be a Buffer")},l.prototype.inspect=function(){var t="",r=A.INSPECT_MAX_BYTES;return 0<this.length&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r)&&(t+=" ... "),"<Buffer "+t+">"},l.prototype.compare=function(t,r,i,n,e){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===i&&(i=t?t.length:0),void 0===n&&(n=0),void 0===e&&(e=this.length),(r=void 0===r?0:r)<0||i>t.length||n<0||e>this.length)throw new RangeError("out of range index");if(e<=n&&i<=r)return 0;if(e<=n)return-1;if(i<=r)return 1;if(this===t)return 0;for(var o=(e>>>=0)-(n>>>=0),s=(i>>>=0)-(r>>>=0),u=Math.min(o,s),a=this.slice(n,e),f=t.slice(r,i),h=0;h<u;++h)if(a[h]!==f[h]){o=a[h],s=f[h];break}return o<s?-1:s<o?1:0},l.prototype.includes=function(t,r,i){return-1!==this.indexOf(t,r,i)},l.prototype.indexOf=function(t,r,i){return y(this,t,r,i,!0)},l.prototype.lastIndexOf=function(t,r,i){return y(this,t,r,i,!1)},l.prototype.write=function(t,r,i,n){if(void 0===r)n="utf8",i=this.length,r=0;else if(void 0===i&&"string"==typeof r)n=r,i=this.length,r=0;else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r|=0,isFinite(i)?(i|=0,void 0===n&&(n="utf8")):(n=i,i=void 0)}var e=this.length-r;if((void 0===i||e<i)&&(i=e),0<t.length&&(i<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");n=n||"utf8";for(var o,s,u,a=!1;;)switch(n){case"hex":var f=this,h=t,l=r,c=i,v=(l=Number(l)||0,f.length-l);if((!c||v<(c=Number(c)))&&(c=v),(v=h.length)%2!=0)throw new TypeError("Invalid hex string");v/2<c&&(c=v/2);for(var y=0;y<c;++y){var d=parseInt(h.substr(2*y,2),16);if(isNaN(d))return y;f[l+y]=d}return y;case"utf8":case"utf-8":return v=r,u=i,I(N(t,(s=this).length-v),s,v,u);case"ascii":return b(this,t,r,i);case"latin1":case"binary":return b(this,t,r,i);case"base64":return s=this,u=r,o=i,I(k(t),s,u,o);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return p(this,t,r,i);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var m=4096;function w(t,r,i){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(i<t+r)throw new RangeError("Trying to access beyond buffer length")}function g(t,r,i,n,e,o){if(!l.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e<r||r<o)throw new RangeError('"value" argument is out of bounds');if(i+n>t.length)throw new RangeError("Index out of range")}function _(t,r,i,n){r<0&&(r=65535+r+1);for(var e=0,o=Math.min(t.length-i,2);e<o;++e)t[i+e]=(r&255<<8*(n?e:1-e))>>>8*(n?e:1-e)}function j(t,r,i,n){r<0&&(r=4294967295+r+1);for(var e=0,o=Math.min(t.length-i,4);e<o;++e)t[i+e]=r>>>8*(n?e:3-e)&255}function S(t,r,i,n){if(i+n>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function T(t,r,i,n,e){return e||S(t,0,i,4),o.write(t,r,i,n,23,4),i+4}function R(t,r,i,n,e){return e||S(t,0,i,8),o.write(t,r,i,n,52,8),i+8}l.prototype.slice=function(t,r){var i=this.length;if((t=~~t)<0?(t+=i)<0&&(t=0):i<t&&(t=i),(r=void 0===r?i:~~r)<0?(r+=i)<0&&(r=0):i<r&&(r=i),r<t&&(r=t),l.TYPED_ARRAY_SUPPORT)(e=this.subarray(t,r)).__proto__=l.prototype;else for(var n=r-t,e=new l(n,void 0),o=0;o<n;++o)e[o]=this[o+t];return e},l.prototype.readUIntLE=function(t,r,i){t|=0,r|=0,i||w(t,r,this.length);for(var n=this[t],e=1,o=0;++o<r&&(e*=256);)n+=this[t+o]*e;return n},l.prototype.readUIntBE=function(t,r,i){t|=0,r|=0,i||w(t,r,this.length);for(var n=this[t+--r],e=1;0<r&&(e*=256);)n+=this[t+--r]*e;return n},l.prototype.readUInt8=function(t,r){return r||w(t,1,this.length),this[t]},l.prototype.readUInt16LE=function(t,r){return r||w(t,2,this.length),this[t]|this[t+1]<<8},l.prototype.readUInt16BE=function(t,r){return r||w(t,2,this.length),this[t]<<8|this[t+1]},l.prototype.readUInt32LE=function(t,r){return r||w(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},l.prototype.readUInt32BE=function(t,r){return r||w(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},l.prototype.readIntLE=function(t,r,i){t|=0,r|=0,i||w(t,r,this.length);for(var n=this[t],e=1,o=0;++o<r&&(e*=256);)n+=this[t+o]*e;return(e*=128)<=n&&(n-=Math.pow(2,8*r)),n},l.prototype.readIntBE=function(t,r,i){t|=0,r|=0,i||w(t,r,this.length);for(var n=r,e=1,o=this[t+--n];0<n&&(e*=256);)o+=this[t+--n]*e;return(e*=128)<=o&&(o-=Math.pow(2,8*r)),o},l.prototype.readInt8=function(t,r){return r||w(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},l.prototype.readInt16LE=function(t,r){r||w(t,2,this.length);r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt16BE=function(t,r){r||w(t,2,this.length);r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt32LE=function(t,r){return r||w(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},l.prototype.readInt32BE=function(t,r){return r||w(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},l.prototype.readFloatLE=function(t,r){return r||w(t,4,this.length),o.read(this,t,!0,23,4)},l.prototype.readFloatBE=function(t,r){return r||w(t,4,this.length),o.read(this,t,!1,23,4)},l.prototype.readDoubleLE=function(t,r){return r||w(t,8,this.length),o.read(this,t,!0,52,8)},l.prototype.readDoubleBE=function(t,r){return r||w(t,8,this.length),o.read(this,t,!1,52,8)},l.prototype.writeUIntLE=function(t,r,i,n){t=+t,r|=0,i|=0,n||g(this,t,r,i,Math.pow(2,8*i)-1,0);var e=1,o=0;for(this[r]=255&t;++o<i&&(e*=256);)this[r+o]=t/e&255;return r+i},l.prototype.writeUIntBE=function(t,r,i,n){t=+t,r|=0,i|=0,n||g(this,t,r,i,Math.pow(2,8*i)-1,0);var e=i-1,o=1;for(this[r+e]=255&t;0<=--e&&(o*=256);)this[r+e]=t/o&255;return r+i},l.prototype.writeUInt8=function(t,r,i){return t=+t,r|=0,i||g(this,t,r,1,255,0),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[r]=255&t,r+1},l.prototype.writeUInt16LE=function(t,r,i){return t=+t,r|=0,i||g(this,t,r,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):_(this,t,r,!0),r+2},l.prototype.writeUInt16BE=function(t,r,i){return t=+t,r|=0,i||g(this,t,r,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):_(this,t,r,!1),r+2},l.prototype.writeUInt32LE=function(t,r,i){return t=+t,r|=0,i||g(this,t,r,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=255&t):j(this,t,r,!0),r+4},l.prototype.writeUInt32BE=function(t,r,i){return t=+t,r|=0,i||g(this,t,r,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):j(this,t,r,!1),r+4},l.prototype.writeIntLE=function(t,r,i,n){t=+t,r|=0,n||g(this,t,r,i,(n=Math.pow(2,8*i-1))-1,-n);var e=0,o=1,s=0;for(this[r]=255&t;++e<i&&(o*=256);)t<0&&0===s&&0!==this[r+e-1]&&(s=1),this[r+e]=(t/o>>0)-s&255;return r+i},l.prototype.writeIntBE=function(t,r,i,n){t=+t,r|=0,n||g(this,t,r,i,(n=Math.pow(2,8*i-1))-1,-n);var e=i-1,o=1,s=0;for(this[r+e]=255&t;0<=--e&&(o*=256);)t<0&&0===s&&0!==this[r+e+1]&&(s=1),this[r+e]=(t/o>>0)-s&255;return r+i},l.prototype.writeInt8=function(t,r,i){return t=+t,r|=0,i||g(this,t,r,1,127,-128),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[r]=255&(t=t<0?255+t+1:t),r+1},l.prototype.writeInt16LE=function(t,r,i){return t=+t,r|=0,i||g(this,t,r,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):_(this,t,r,!0),r+2},l.prototype.writeInt16BE=function(t,r,i){return t=+t,r|=0,i||g(this,t,r,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):_(this,t,r,!1),r+2},l.prototype.writeInt32LE=function(t,r,i){return t=+t,r|=0,i||g(this,t,r,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24):j(this,t,r,!0),r+4},l.prototype.writeInt32BE=function(t,r,i){return t=+t,r|=0,i||g(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),l.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):j(this,t,r,!1),r+4},l.prototype.writeFloatLE=function(t,r,i){return T(this,t,r,!0,i)},l.prototype.writeFloatBE=function(t,r,i){return T(this,t,r,!1,i)},l.prototype.writeDoubleLE=function(t,r,i){return R(this,t,r,!0,i)},l.prototype.writeDoubleBE=function(t,r,i){return R(this,t,r,!1,i)},l.prototype.copy=function(t,r,i,n){if(i=i||0,n||0===n||(n=this.length),r>=t.length&&(r=t.length),(n=0<n&&n<i?i:n)===i)return 0;if(0===t.length||0===this.length)return 0;if((r=r||0)<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length);var e,o=(n=t.length-r<n-i?t.length-r+i:n)-i;if(this===t&&i<r&&r<n)for(e=o-1;0<=e;--e)t[e+r]=this[e+i];else if(o<1e3||!l.TYPED_ARRAY_SUPPORT)for(e=0;e<o;++e)t[e+r]=this[e+i];else Uint8Array.prototype.set.call(t,this.subarray(i,i+o),r);return o},l.prototype.fill=function(t,r,i,n){if("string"==typeof t){var e;if("string"==typeof r?(n=r,r=0,i=this.length):"string"==typeof i&&(n=i,i=this.length),1===t.length&&(e=t.charCodeAt(0))<256&&(t=e),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!l.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(r<0||this.length<r||this.length<i)throw new RangeError("Out of range index");if(!(i<=r))if(r>>>=0,i=void 0===i?this.length:i>>>0,"number"==typeof(t=t||0))for(u=r;u<i;++u)this[u]=t;else for(var o=l.isBuffer(t)?t:N(new l(t,n).toString()),s=o.length,u=0;u<i-r;++u)this[u+r]=o[u%s];return this};var M=/[^+\/0-9A-Za-z-_]/g;function N(t,r){r=r||1/0;for(var i,n=t.length,e=null,o=[],s=0;s<n;++s){if(55295<(i=t.charCodeAt(s))&&i<57344){if(!e){if(56319<i){-1<(r-=3)&&o.push(239,191,189);continue}if(s+1===n){-1<(r-=3)&&o.push(239,191,189);continue}e=i;continue}if(i<56320){-1<(r-=3)&&o.push(239,191,189),e=i;continue}i=65536+(e-55296<<10|i-56320)}else e&&-1<(r-=3)&&o.push(239,191,189);if(e=null,i<128){if(--r<0)break;o.push(i)}else if(i<2048){if((r-=2)<0)break;o.push(i>>6|192,63&i|128)}else if(i<65536){if((r-=3)<0)break;o.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((r-=4)<0)break;o.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return o}function k(t){return O.toByteArray(function(t){var r;if((t=((r=t).trim?r.trim():r.replace(/^\s+|\s+$/g,"")).replace(M,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function I(t,r,i,n){for(var e=0;e<n&&!(e+i>=r.length||e>=t.length);++e)r[e+i]=t[e];return e}}.call(this,P(11))},function(t,r,i){"use strict";r.byteLength=function(t){var t=h(t),r=t[0],t=t[1];return 3*(r+t)/4-t},r.toByteArray=function(t){var r,i,n=h(t),e=n[0],n=n[1],o=new f(function(t,r){return 3*(t+r)/4-r}(e,n)),s=0,u=0<n?e-4:e;for(i=0;i<u;i+=4)r=a[t.charCodeAt(i)]<<18|a[t.charCodeAt(i+1)]<<12|a[t.charCodeAt(i+2)]<<6|a[t.charCodeAt(i+3)],o[s++]=r>>16&255,o[s++]=r>>8&255,o[s++]=255&r;2===n&&(r=a[t.charCodeAt(i)]<<2|a[t.charCodeAt(i+1)]>>4,o[s++]=255&r);1===n&&(r=a[t.charCodeAt(i)]<<10|a[t.charCodeAt(i+1)]<<4|a[t.charCodeAt(i+2)]>>2,o[s++]=r>>8&255,o[s++]=255&r);return o},r.fromByteArray=function(t){for(var r,i=t.length,n=i%3,e=[],o=0,s=i-n;o<s;o+=16383)e.push(function(t,r,i){for(var n,e=[],o=r;o<i;o+=3)n=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),e.push(function(t){return u[t>>18&63]+u[t>>12&63]+u[t>>6&63]+u[63&t]}(n));return e.join("")}(t,o,s<o+16383?s:o+16383));1==n?(r=t[i-1],e.push(u[r>>2]+u[r<<4&63]+"==")):2==n&&(r=(t[i-2]<<8)+t[i-1],e.push(u[r>>10]+u[r>>4&63]+u[r<<2&63]+"="));return e.join("")};for(var u=[],a=[],f="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,o=n.length;e<o;++e)u[e]=n[e],a[n.charCodeAt(e)]=e;function h(t){var r=t.length;if(0<r%4)throw new Error("Invalid string. Length must be a multiple of 4");t=t.indexOf("="),r=(t=-1===t?r:t)===r?0:4-t%4;return[t,r]}a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63},function(t,r){r.read=function(t,r,i,n,e){var o,s,u=8*e-n-1,a=(1<<u)-1,f=a>>1,h=-7,l=i?e-1:0,c=i?-1:1,e=t[r+l];for(l+=c,o=e&(1<<-h)-1,e>>=-h,h+=u;0<h;o=256*o+t[r+l],l+=c,h-=8);for(s=o&(1<<-h)-1,o>>=-h,h+=n;0<h;s=256*s+t[r+l],l+=c,h-=8);if(0===o)o=1-f;else{if(o===a)return s?NaN:1/0*(e?-1:1);s+=Math.pow(2,n),o-=f}return(e?-1:1)*s*Math.pow(2,o-n)},r.write=function(t,r,i,n,e,o){var s,u,a=8*o-e-1,f=(1<<a)-1,h=f>>1,l=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,c=n?0:o-1,v=n?1:-1,o=r<0||0===r&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(u=isNaN(r)?1:0,s=f):(s=Math.floor(Math.log(r)/Math.LN2),r*(n=Math.pow(2,-s))<1&&(s--,n*=2),2<=(r+=1<=s+h?l/n:l*Math.pow(2,1-h))*n&&(s++,n/=2),f<=s+h?(u=0,s=f):1<=s+h?(u=(r*n-1)*Math.pow(2,e),s+=h):(u=r*Math.pow(2,h-1)*Math.pow(2,e),s=0));8<=e;t[i+c]=255&u,c+=v,u/=256,e-=8);for(s=s<<e|u,a+=e;0<a;t[i+c]=255&s,c+=v,s/=256,a-=8);t[i+c-v]|=128*o}},function(t,r){var i={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==i.call(t)}},function(t,r){t.exports=__WEBPACK_EXTERNAL_MODULE__49__},function(t,f,r){!function(e){function o(t,r){for(var i=0,n=t.length-1;0<=n;n--){var e=t[n];"."===e?t.splice(n,1):".."===e?(t.splice(n,1),i++):i&&(t.splice(n,1),i--)}if(r)for(;i--;)t.unshift("..");return t}function s(t,r){if(t.filter)return t.filter(r);for(var i=[],n=0;n<t.length;n++)r(t[n],n,t)&&i.push(t[n]);return i}f.resolve=function(){for(var t="",r=!1,i=arguments.length-1;-1<=i&&!r;i--){var n=0<=i?arguments[i]:e.cwd();if("string"!=typeof n)throw new TypeError("Arguments to path.resolve must be strings");n&&(t=n+"/"+t,r="/"===n.charAt(0))}return(r?"/":"")+(t=o(s(t.split("/"),function(t){return!!t}),!r).join("/"))||"."},f.normalize=function(t){var r=f.isAbsolute(t),i="/"===n(t,-1);return(t=(t=o(s(t.split("/"),function(t){return!!t}),!r).join("/"))||r?t:".")&&i&&(t+="/"),(r?"/":"")+t},f.isAbsolute=function(t){return"/"===t.charAt(0)},f.join=function(){var t=Array.prototype.slice.call(arguments,0);return f.normalize(s(t,function(t,r){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},f.relative=function(t,r){function i(t){for(var r=0;r<t.length&&""===t[r];r++);for(var i=t.length-1;0<=i&&""===t[i];i--);return i<r?[]:t.slice(r,i-r+1)}t=f.resolve(t).substr(1),r=f.resolve(r).substr(1);for(var n=i(t.split("/")),e=i(r.split("/")),o=Math.min(n.length,e.length),s=o,u=0;u<o;u++)if(n[u]!==e[u]){s=u;break}for(var a=[],u=s;u<n.length;u++)a.push("..");return(a=a.concat(e.slice(s))).join("/")},f.sep="/",f.delimiter=":",f.dirname=function(t){if("string"!=typeof t&&(t+=""),0===t.length)return".";for(var r=47===t.charCodeAt(0),i=-1,n=!0,e=t.length-1;1<=e;--e)if(47===t.charCodeAt(e)){if(!n){i=e;break}}else n=!1;return-1===i?r?"/":".":r&&1===i?"/":t.slice(0,i)},f.basename=function(t,r){t=function(t){"string"!=typeof t&&(t+="");for(var r=0,i=-1,n=!0,e=t.length-1;0<=e;--e)if(47===t.charCodeAt(e)){if(!n){r=e+1;break}}else-1===i&&(n=!1,i=e+1);return-1===i?"":t.slice(r,i)}(t);return t=r&&t.substr(-1*r.length)===r?t.substr(0,t.length-r.length):t},f.extname=function(t){"string"!=typeof t&&(t+="");for(var r=-1,i=0,n=-1,e=!0,o=0,s=t.length-1;0<=s;--s){var u=t.charCodeAt(s);if(47===u){if(e)continue;i=s+1;break}-1===n&&(e=!1,n=s+1),46===u?-1===r?r=s:1!==o&&(o=1):-1!==r&&(o=-1)}return-1===r||-1===n||0===o||1===o&&r===n-1&&r===i+1?"":t.slice(r,n)};var n="b"==="ab".substr(-1)?function(t,r,i){return t.substr(r,i)}:function(t,r,i){return r<0&&(r=t.length+r),t.substr(r,i)}}.call(this,r(51))},function(t,r){var i,n,t=t.exports={};function e(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}try{i="function"==typeof setTimeout?setTimeout:e}catch(t){i=e}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(t){n=o}function s(r){if(i===setTimeout)return setTimeout(r,0);if((i===e||!i)&&setTimeout)return(i=setTimeout)(r,0);try{return i(r,0)}catch(t){try{return i.call(null,r,0)}catch(t){return i.call(this,r,0)}}}var u,a=[],f=!1,h=-1;function l(){f&&u&&(f=!1,u.length?a=u.concat(a):h=-1,a.length)&&c()}function c(){if(!f){for(var t=s(l),r=(f=!0,a.length);r;){for(u=a,a=[];++h<r;)u&&u[h].run();h=-1,r=a.length}u=null,f=!1,!function(r){if(n===clearTimeout)return clearTimeout(r);if((n===o||!n)&&clearTimeout)return(n=clearTimeout)(r);try{n(r)}catch(t){try{return n.call(null,r)}catch(t){return n.call(this,r)}}}(t)}}function v(t,r){this.fun=t,this.array=r}function y(){}t.nextTick=function(t){var r=new Array(arguments.length-1);if(1<arguments.length)for(var i=1;i<arguments.length;i++)r[i-1]=arguments[i];a.push(new v(t,r)),1!==a.length||f||s(c)},v.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=y,t.addListener=y,t.once=y,t.off=y,t.removeListener=y,t.removeAllListeners=y,t.emit=y,t.prependListener=y,t.prependOnceListener=y,t.listeners=function(t){return[]},t.binding=function(t){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(t){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},function(s,_,t){"use strict";t.r(_);var R="v3.1.7",M=62,r={NONE:0,EXTRUDE_MARKER:2,FM3DTILE_LAYER:4,IMAGE_MARKER:8,LOCATION_MARKER:16,POLYGON_MARKER:32,TEXT_MARKER:64,LINE_MARKER:128,LINE3D_MARKER:256,HEAT_MAP_MARKER:512,EXTENT:1024,EXTERNAL_MODEL:2048,MODEL:4096,FACILITY:8192,LABEL:16384,DYNAMIC_MODEL_MARKER:32768,DOM_MARKER:65536,SPHERE_MARKER:1<<17,CAD_LAYER:1<<18,EXTENT_LAYER:1<<20,EXTERNAL_MODEL_LAYER:1<<21,MODEL_LAYER:1<<22,FACILITY_LAYER:1<<23,LABEL_LAYER:1<<24,MARKER_GROUP:1<<25,FLOW_LINE_LAYER:1<<27,FLOW_LINE_MARKER:1<<27,FIRE_MARKER:1<<28,WALL_MARKER:1<<29,TUBE_MARKER:1<<30},N=(r.LAYER_NODE_TYPE=new Map,r.LAYER_NODE_TYPE.set(r.EXTENT_LAYER,r.EXTENT),r.LAYER_NODE_TYPE.set(r.EXTERNAL_MODEL_LAYER,r.EXTERNAL_MODEL),r.LAYER_NODE_TYPE.set(r.MODEL_LAYER,r.MODEL),r.LAYER_NODE_TYPE.set(r.FACILITY_LAYER,r.FACILITY),r.LAYER_NODE_TYPE.set(r.LABEL_LAYER,r.LABEL),r.LAYER_NODE_TYPE.set(r.DOM_MARKER,r.DOM_MARKER),r.LAYER_NODE_TYPE.set(r.DYNAMIC_MODEL_MARKER,r.DYNAMIC_MODEL_MARKER),r.LAYER_NODE_TYPE.set(r.EXTRUDE_MARKER,r.EXTRUDE_MARKER),r.LAYER_NODE_TYPE.set(r.HEAT_MAP_MARKER,r.HEAT_MAP_MARKER),r.LAYER_NODE_TYPE.set(r.LINE_MARKER,r.LINE_MARKER),r.LAYER_NODE_TYPE.set(r.LOCATION_MARKER,r.LOCATION_MARKER),r.LAYER_NODE_TYPE.set(r.POLYGON_MARKER,r.POLYGON_MARKER),r.LAYER_NODE_TYPE.set(r.TEXT_MARKER,r.TEXT_MARKER),r.LAYER_NODE_TYPE.set(r.IMAGE_MARKER,r.IMAGE_MARKER),r.LAYER_NODE_TYPE.set(r.FLOW_LINE_LAYER,r.FLOW_LINE_MARKER),r.LAYER_NODE_TYPE.set(r.FIRE_MARKER,r.FIRE_MARKER),r.LAYER_NODE_TYPE.set(r.WALL_MARKER,r.WALL_MARKER),r.LAYER_NODE_TYPE.set(r.TUBE_MARKER,r.TUBE_MARKER),r.LAYER_NODE_TYPE.set(r.LINE3D_MARKER,r.LINE3D_MARKER),r.LAYER_NODE_TYPE.set(r.SPHERE_MARKER,r.SPHERE_MARKER),r.LAYER_NODE_TYPE.set(r.CAD_LAYER,r.CAD_LAYER),r),j={MODULE_SHORTEST:1,MODULE_BEST:2},w={PRIORITY_DEFAULT:1,PRIORITY_LIFTFIRST:2,PRIORITY_ESCALATORFIRST:3,PRIORITY_STAIRFIRST:4,PRIORITY_LIFTONLY:5,PRIORITY_ESCALATORONLY:6,PRIORITY_STAIRONLY:7,PRIORITY_ACCESSIBLEONLY:8,PRIORITY_LIFTFIRST1:9,PRIORITY_ESCALATORFIRST1:10,PRIORITY_STAIRFIRST1:11},tt={ROUTE_SUCCESS:1,ROUTE_FAILED_NO_DATA_START:2,ROUTE_FAILED_NO_DATA_DEST:3,ROUTE_FAILED_CANNOT_ARRIVE:4,ROUTE_FAILED_WAYPOINT_CALCULATE_ERROR:5,ROUTE_FAILED_NO_START_ARRIVAL:6,ROUTE_FAILED_NO_DEST_ARRIVAL:7,ROUTE_FAILED_OUTLINE:8,ROUTE_FAILED_ENTRANCE:9},u={ZH:"zh",EN:"en"},I={TRANSFER_LIFT:1,TRANSFER_STAIR:2,TRANSFER_ESCALATOR:3,TRANSFER_ACCESSIBLE:4,TRANSFER_RAMP:5,TRANSFER_ENTRANCE:6},D={NONE_RODE_NETWORK:1,NONE_WALK_RODE_NETWORK:2,NONE_DRIVE_RODE_NETWORK:4};function B(t){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function F(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){t=function(t,r){if("object"!=B(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===r?String:Number)(t);i=i.call(t,r||"default");if("object"!=B(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==B(t)?t:String(t)}(n.key),n)}}function G(t,r,i){return r&&F(t.prototype,r),i&&F(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}var r=G(function t(r,i){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.V=r,this.Y=i}),C=(Object.assign(r.prototype,{X:function(t){return!1},H:function(t,r){}}),r);function U(t){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function V(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){t=function(t,r){if("object"!=U(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===r?String:Number)(t);i=i.call(t,r||"default");if("object"!=U(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==U(t)?t:String(t)}(n.key),n)}}function q(t,r,i){r=z(r);var n=t,r=Y()?Reflect.construct(r,i||[],z(t).constructor):r.apply(t,i);if(r&&("object"===U(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");t=n;if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}function Y(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Y=function(){return!!t})()}function z(t){return(z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function X(t,r){return(X=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t})(t,r)}var r=function(){var t,r,i=e,n=C;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");function e(t,r){if(this instanceof e)return q(this,e,[t,r]);throw new TypeError("Cannot call a class as a function")}return i.prototype=Object.create(n&&n.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),n&&X(i,n),i=e,t&&V(i.prototype,t),r&&V(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(),H=(Object.assign(r.prototype,{X:function(t){return this.Y==t.fid}}),r);function Q(t){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function K(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){t=function(t,r){if("object"!=Q(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===r?String:Number)(t);i=i.call(t,r||"default");if("object"!=Q(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==Q(t)?t:String(t)}(n.key),n)}}function J(t,r,i){r=ot(r);var n=t,r=$()?Reflect.construct(r,i||[],ot(t).constructor):r.apply(t,i);if(r&&("object"===Q(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");t=n;if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}function $(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return($=function(){return!!t})()}function ot(t){return(ot=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function st(t,r){return(st=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t})(t,r)}var r=function(){var t,r,i=e,n=C;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");function e(t,r){if(this instanceof e)return(t=J(this,e,[t,r])).K=null,"object"==Q(t.Y)?(t.J=t.Y.text,t.$=t.Y.fuzzy,t.tt=void 0===t.Y.matchCase||t.Y.matchCase):(t.J=t.Y,t.tt=!0),t;throw new TypeError("Cannot call a class as a function")}return i.prototype=Object.create(n&&n.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),n&&st(i,n),i=e,t&&K(i.prototype,t),r&&K(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(),ut=(Object.assign(r.prototype,{X:function(t){var r=null;if(r="ename"===this.K?t.ename:t.name)if(this.$){if(this.tt){if(-1!=r.indexOf(this.J))return!0}else if(-1!=r.toLocaleLowerCase().indexOf(this.J.toLocaleLowerCase()))return!0}else if(this.tt){if(this.J==r)return!0}else if(this.J.toLocaleLowerCase()==r.toLocaleLowerCase())return!0;return!1}}),r);function at(t){return(at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ft(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){t=function(t,r){if("object"!=at(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===r?String:Number)(t);i=i.call(t,r||"default");if("object"!=at(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==at(t)?t:String(t)}(n.key),n)}}function ht(t,r,i){r=ct(r);var n=t,r=lt()?Reflect.construct(r,i||[],ct(t).constructor):r.apply(t,i);if(r&&("object"===at(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");t=n;if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}function lt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(lt=function(){return!!t})()}function ct(t){return(ct=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vt(t,r){return(vt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t})(t,r)}var yt=function(){var t,r,i=e,n=ut;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");function e(t,r){if(this instanceof e)return(t=ht(this,e,[t,r])).K="name",t;throw new TypeError("Cannot call a class as a function")}return i.prototype=Object.create(n&&n.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),n&&vt(i,n),i=e,t&&ft(i.prototype,t),r&&ft(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}();function dt(t){return(dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bt(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){t=function(t,r){if("object"!=dt(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===r?String:Number)(t);i=i.call(t,r||"default");if("object"!=dt(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==dt(t)?t:String(t)}(n.key),n)}}function pt(t,r,i){r=wt(r);var n=t,r=mt()?Reflect.construct(r,i||[],wt(t).constructor):r.apply(t,i);if(r&&("object"===dt(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");t=n;if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}function mt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(mt=function(){return!!t})()}function wt(t){return(wt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function gt(t,r){return(gt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t})(t,r)}var _t=function(){var t,r,i=e,n=ut;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");function e(t,r){if(this instanceof e)return(t=pt(this,e,[t,r])).K="ename",t;throw new TypeError("Cannot call a class as a function")}return i.prototype=Object.create(n&&n.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),n&&gt(i,n),i=e,t&&bt(i.prototype,t),r&&bt(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}();function jt(t){return(jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function St(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){t=function(t,r){if("object"!=jt(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===r?String:Number)(t);i=i.call(t,r||"default");if("object"!=jt(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==jt(t)?t:String(t)}(n.key),n)}}function Ot(t,r,i){r=Tt(r);var n=t,r=Et()?Reflect.construct(r,i||[],Tt(t).constructor):r.apply(t,i);if(r&&("object"===jt(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");t=n;if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}function Et(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Et=function(){return!!t})()}function Tt(t){return(Tt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Rt(t,r){return(Rt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t})(t,r)}var r=function(){var t,r,i=e,n=C;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");function e(t,r){if(this instanceof e)return(t=Ot(this,e,[t])).Y=Array.isArray(r)?r:[r],t;throw new TypeError("Cannot call a class as a function")}return i.prototype=Object.create(n&&n.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),n&&Rt(i,n),i=e,t&&St(i.prototype,t),r&&St(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(),Mt=(Object.assign(r.prototype,{X:function(t){return-1!=this.Y.indexOf(t.type)}}),r);function Nt(t){return(Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kt(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){t=function(t,r){if("object"!=Nt(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===r?String:Number)(t);i=i.call(t,r||"default");if("object"!=Nt(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==Nt(t)?t:String(t)}(n.key),n)}}function It(t,r,i){r=Pt(r);var n=t,r=At()?Reflect.construct(r,i||[],Pt(t).constructor):r.apply(t,i);if(r&&("object"===Nt(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");t=n;if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}function At(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(At=function(){return!!t})()}function Pt(t){return(Pt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function xt(t,r){return(xt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t})(t,r)}var r=function(){var t,r,i=e,n=C;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");function e(t,r){if(this instanceof e)return"object"==Nt((t=It(this,e,[t,r])).Y)?(t.J=t.Y.text,t.$=void 0===t.Y.fuzzy||t.Y.fuzzy,t.tt=void 0===t.Y.matchCase||t.Y.matchCase):(t.J=t.Y,t.$=!0,t.tt=!0),t;throw new TypeError("Cannot call a class as a function")}return i.prototype=Object.create(n&&n.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),n&&xt(i,n),i=e,t&&kt(i.prototype,t),r&&kt(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(),Lt=(Object.assign(r.prototype,{X:function(t){if(this.$){if(this.tt){if(t.name&&-1!=t.name.indexOf(this.J)||t.ename&&-1!=t.ename.indexOf(this.J))return!0}else if(t.name&&-1!=t.name.toLocaleLowerCase().indexOf(this.J.toLocaleLowerCase())||t.ename&&-1!=t.ename.toLocaleLowerCase().indexOf(this.J.toLocaleLowerCase()))return!0}else if(this.tt){if(t.name&&t.name==this.J||t.ename&&t.ename==this.J)return!0}else if(t.name&&t.name.toLocaleLowerCase()==this.J.toLocaleLowerCase()||t.ename&&t.ename.toLocaleLowerCase()==this.J.toLocaleLowerCase())return!0;return!1}}),r),r={NONE:0,POINT:1,LINE:2,POLYGON:4,MULTIPOINT:8,MULTILINE:16,MULTIPOLYGON:32,GROUP:64,EXTENT:1024,EXTERNALMODEL:2048,MODEL:4096,FACILITY:8192,LABEL:16384,EXTENTGROUP:1<<20,EXTERNALMODELGROUP:1<<21,MODELGROUP:1<<22,FACILITYGROUP:1<<23,LABELGROUP:1<<24},g=(Object.freeze(r),r),Dt=function(t,r,i){i=i||2;var n,e,o,s,u,a=r&&r.length,f=a?r[0]*i:t.length,h=Bt(t,0,f,i,!0),l=[];if(h&&h.next!==h.prev){if(a&&(h=function(t,r,i,n){var e,o,s,u,a=[];for(e=0,o=r.length;e<o;e++)u=r[e]*n,s=e<o-1?r[e+1]*n:t.length,(u=Bt(t,u,s,n,!1))===u.next&&(u.steiner=!0),a.push(function(t){var r=t,i=t;for(;(r.x<i.x||r.x===i.x&&r.y<i.y)&&(i=r),r=r.next,r!==t;);return i}(u));for(a.sort(Ct),e=0;e<a.length;e++)!function(t,r){(r=function(t,r){var i,n=r,e=t.x,o=t.y,s=-1/0;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var u=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(u<=e&&s<u){if((s=u)===e){if(o===n.y)return n;if(o===n.next.y)return n.next}i=n.x<n.next.x?n:n.next}}}while(n=n.next,n!==r);if(!i)return null;if(e!==s){var a,f=i,h=i.x,l=i.y,c=1/0;for(n=i;e>=n.x&&n.x>=h&&e!==n.x&&Zt(o<l?e:s,o,h,l,o<l?s:e,o,n.x,n.y)&&(a=Math.abs(o-n.y)/(e-n.x),zt(n,t))&&(a<c||a===c&&(n.x>i.x||n.x===i.x&&function(t,r){return E(t.prev,t,r.prev)<0&&E(r.next,t,t.next)<0}(i,n)))&&(i=n,c=a),(n=n.next)!==f;);}return i}(t,r))&&(t=Xt(r,t),Ft(r,r.next),Ft(t,t.next))}(a[e],i),i=Ft(i,i.next);return i}(t,r,h,i)),t.length>80*i){for(var c=n=t[0],v=e=t[1],y=i;y<f;y+=i)(o=t[y])<c&&(c=o),(s=t[y+1])<v&&(v=s),n<o&&(n=o),e<s&&(e=s);u=0!==(u=Math.max(n-c,e-v))?1/u:0}Gt(h,l,i,c,v,u)}return l};function Bt(t,r,i,n,e){var o,s;if(e===0<function(t,r,i,n){for(var e=0,o=r,s=i-n;o<i;o+=n)e+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return e}(t,r,i,n))for(o=r;o<i;o+=n)s=Ht(o,t[o],t[o+1],s);else for(o=i-n;r<=o;o-=n)s=Ht(o,t[o],t[o+1],s);return s&&Wt(s,s.next)&&(Qt(s),s=s.next),s}function Ft(t,r){if(!t)return t;r=r||t;var i,n=t;do{if(i=!1,n.steiner||!Wt(n,n.next)&&0!==E(n.prev,n,n.next))n=n.next;else{if(Qt(n),(n=r=n.prev)===n.next)break;i=!0}}while(i||n!==r);return r}function Gt(t,r,i,n,e,o,s){if(t){if(!s&&o){for(var u=t,a=n,f=e,h=o,l=u;null===l.z&&(l.z=Ut(l.x,l.y,a,f,h)),l.prevZ=l.prev,l.nextZ=l.next,(l=l.next)!==u;);l.prevZ.nextZ=null,l.prevZ=null;var c,v,y,d,b,p,m,w,g=l,_=1;do{for(v=g,b=g=null,p=0;v;){for(p++,y=v,c=m=0;c<_&&(m++,y=y.nextZ);c++);for(w=_;0<m||0<w&&y;)0!==m&&(0===w||!y||v.z<=y.z)?(v=(d=v).nextZ,m--):(y=(d=y).nextZ,w--),b?b.nextZ=d:g=d,d.prevZ=b,b=d;v=y}}while(b.nextZ=null,_*=2,1<p)}for(var j,S,O=t;t.prev!==t.next;)if(j=t.prev,S=t.next,o?function(t,r,i,n){var e=t.prev,o=t,s=t.next;if(0<=E(e,o,s))return;var u=(e.x<o.x?e.x<s.x?e:s:o.x<s.x?o:s).x,a=(e.y<o.y?e.y<s.y?e:s:o.y<s.y?o:s).y,f=(e.x>o.x?e.x>s.x?e:s:o.x>s.x?o:s).x,h=(e.y>o.y?e.y>s.y?e:s:o.y>s.y?o:s).y,l=Ut(u,a,r,i,n),c=Ut(f,h,r,i,n),v=t.prevZ,y=t.nextZ;for(;v&&v.z>=l&&y&&y.z<=c;){if(v!==t.prev&&v!==t.next&&Zt(e.x,e.y,o.x,o.y,s.x,s.y,v.x,v.y)&&0<=E(v.prev,v,v.next))return;if(v=v.prevZ,y!==t.prev&&y!==t.next&&Zt(e.x,e.y,o.x,o.y,s.x,s.y,y.x,y.y)&&0<=E(y.prev,y,y.next))return;y=y.nextZ}for(;v&&v.z>=l;){if(v!==t.prev&&v!==t.next&&Zt(e.x,e.y,o.x,o.y,s.x,s.y,v.x,v.y)&&0<=E(v.prev,v,v.next))return;v=v.prevZ}for(;y&&y.z<=c;){if(y!==t.prev&&y!==t.next&&Zt(e.x,e.y,o.x,o.y,s.x,s.y,y.x,y.y)&&0<=E(y.prev,y,y.next))return;y=y.nextZ}return 1}(t,n,e,o):function(t){var r=t.prev,i=t,n=t.next;if(0<=E(r,i,n))return;var e=t.next.next;for(;e!==t.prev;){if(Zt(r.x,r.y,i.x,i.y,n.x,n.y,e.x,e.y)&&0<=E(e.prev,e,e.next))return;e=e.next}return 1}(t))r.push(j.i/i),r.push(t.i/i),r.push(S.i/i),Qt(t),t=S.next,O=S.next;else if((t=S)===O){s?1===s?Gt(t=function(t,r,i){var n=t;do{var e=n.prev,o=n.next.next}while(!Wt(e,o)&&Vt(e,n,n.next,o)&&zt(e,o)&&zt(o,e)&&(r.push(e.i/i),r.push(n.i/i),r.push(o.i/i),Qt(n),Qt(n.next),n=t=o),n=n.next,n!==t);return Ft(n)}(Ft(t),r,i),r,i,n,e,o,2):2===s&&function(t,r,i,n,e,o){var s=t;do{for(var u,a=s.next.next;a!==s.prev;){if(s.i!==a.i&&function(t,r){return t.next.i!==r.i&&t.prev.i!==r.i&&!function(t,r){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==r.i&&i.next.i!==r.i&&Vt(i,i.next,t,r))return 1}while(i=i.next,i!==t);return}(t,r)&&(zt(t,r)&&zt(r,t)&&function(t,r){var i=t,n=!1,e=(t.x+r.x)/2,o=(t.y+r.y)/2;for(;i.y>o!=i.next.y>o&&i.next.y!==i.y&&e<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next,i!==t;);return n}(t,r)&&(E(t.prev,t,r.prev)||E(t,r.prev,r))||Wt(t,r)&&0<E(t.prev,t,t.next)&&0<E(r.prev,r,r.next))}(s,a))return u=Xt(s,a),s=Ft(s,s.next),u=Ft(u,u.next),Gt(s,r,i,n,e,o),Gt(u,r,i,n,e,o);a=a.next}}while(s=s.next,s!==t)}(t,r,i,n,e,o):Gt(Ft(t),r,i,n,e,o,1);break}}}function Ct(t,r){return t.x-r.x}function Ut(t,r,i,n,e){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*e)|t<<8))|t<<4))|t<<2))|t<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=32767*(r-n)*e)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function Zt(t,r,i,n,e,o,s,u){return 0<=(e-s)*(r-u)-(t-s)*(o-u)&&0<=(t-s)*(n-u)-(i-s)*(r-u)&&0<=(i-s)*(o-u)-(e-s)*(n-u)}function E(t,r,i){return(r.y-t.y)*(i.x-r.x)-(r.x-t.x)*(i.y-r.y)}function Wt(t,r){return t.x===r.x&&t.y===r.y}function Vt(t,r,i,n){var e=Yt(E(t,r,i)),o=Yt(E(t,r,n)),s=Yt(E(i,n,t)),u=Yt(E(i,n,r));return e!==o&&s!==u||0===e&&qt(t,i,r)||0===o&&qt(t,n,r)||0===s&&qt(i,t,n)||!(0!==u||!qt(i,r,n))}function qt(t,r,i){return r.x<=Math.max(t.x,i.x)&&r.x>=Math.min(t.x,i.x)&&r.y<=Math.max(t.y,i.y)&&r.y>=Math.min(t.y,i.y)}function Yt(t){return 0<t?1:t<0?-1:0}function zt(t,r){return E(t.prev,t,t.next)<0?0<=E(t,r,t.next)&&0<=E(t,t.prev,r):E(t,r,t.prev)<0||E(t,t.next,r)<0}function Xt(t,r){var i=new Kt(t.i,t.x,t.y),n=new Kt(r.i,r.x,r.y),e=t.next,o=r.prev;return(t.next=r).prev=t,(i.next=e).prev=i,(n.next=i).prev=n,(o.next=n).prev=o,n}function Ht(t,r,i,n){t=new Kt(t,r,i);return n?(t.next=n.next,(t.prev=n).next.prev=t,n.next=t):(t.prev=t).next=t,t}function Qt(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Kt(t,r,i){this.i=t,this.x=r,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Jt(t){return function(t){if(Array.isArray(t))return $t(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){var i;if(t)return"string"==typeof t?$t(t,r):"Map"===(i="Object"===(i=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?$t(t,r):void 0}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $t(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,n=new Array(r);i<r;i++)n[i]=t[i];return n}var tr={area:function(t){for(var r=t.length,i=0,n=r-1,e=0;e<r;n=e++)i+=t[n].x*t[e].y-t[e].x*t[n].y;return.5*i},isClockWise:function(t){return tr.area(t)<0},triangulateShape:function(t,r){var i=[],n=[],e=[],o=(rr(t),ir(i,t),t.length);r.forEach(rr);for(var s=0;s<r.length;s++)n.push(o),o+=r[s].length,ir(i,r[s]);for(var u=Dt(i,n),a=0;a<u.length;a+=3)e.push(u.slice(a,a+3));return e},triangulate:function(t){(e=[]).push.apply(e,Jt(t[0]));for(var r=[],i=1;i<t.length;i++){var n=[];n.push.apply(n,Jt(t[i])),r.push(n)}if(!tr.isClockWise(e))for(var e=e.reverse(),o=0,s=r.length;o<s;o++){var u=r[o];tr.isClockWise(u)&&(r[o]=u.reverse())}return tr.triangulateShape(e,r)}};function rr(t){var r,i=t.length;2<i&&(i=t[i-1],r=t[0],i.x===r.x)&&i.y===r.y&&t.pop()}function ir(t,r){for(var i=0;i<r.length;i++)t.push(r[i].x),t.push(r[i].y)}function nr(t){return(nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function er(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){t=function(t,r){if("object"!=nr(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===r?String:Number)(t);i=i.call(t,r||"default");if("object"!=nr(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==nr(t)?t:String(t)}(n.key),n)}}function or(t,r,i){return r&&er(t.prototype,r),i&&er(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}var a=1e-5,sr=.001,ur=Math.PI/180,ar=180/Math.PI,r=or(function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function")});Object.assign(r.prototype,{rt:function(){return a},it:function(){return ur},nt:function(){return ar},et:function(t){return t<a&&-a<t},ot:function(t){return a<t},st:function(t){return t<-a},ut:function(t,r,i){r=(t.x-i.x)*(r.y-i.y)-(r.x-i.x)*(t.y-i.y);return Math.abs(r)<a?0:r},distanceOfTwoPoints:function(t,r){return t&&r?Math.sqrt((t.x-r.x)*(t.x-r.x)+(t.y-r.y)*(t.y-r.y)):Number.NaN},distance:function(t,r){return Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2))},isPolygonContainPoint:function(t,r){for(var i=0,n=0;n<t.length;n++){var e=t[n].x,o=t[n].y,s=0,u=0,u=(n<t.length-1?(s=t[n+1].x,t[n+1]):(s=t[0].x,t[0])).y;if(e===r.x&&o===r.y||s===r.x&&u===r.y)return!0;if(u!==o){var a=e+(r.y-o)*(s-e)/(u-o);if(a===r.x)return!0;e!==s?a<=Math.max(e,s)&&a>=Math.min(e,s)&&a>r.x&&a!==e&&(a===s&&0<(o-r.y)*(u-r.y)?i+=2:i++):a<=Math.max(e,s)&&a>=Math.min(e,s)&&a>r.x&&(a===s&&0<(o-r.y)*(u-r.y)?i+=2:i++)}}return 0<i%2},isPolygonContainPoint2:function(t,r){var i=t.length;if(i<3)return!1;for(var n=i-1,e=0,o=0;o<i;o++){var s=t[o],u=t[n];s.y>r.y!=u.y>r.y&&r.x<(u.x-s.x)*(r.y-s.y)/(u.y-s.y)+s.x&&(s.y>u.y?e++:e--),n=o}return 0!=e},isPolygonInPolygon:function(t,r){var i=Object.assign([],t),n=Object.assign([],r);i.push(i[0]),n.push(n[0]);for(var e=0;e<i.length-1;e++){var o=i[e];if(!this.isPolygonContainPoint(n,o)&&!this.isPolygonContainPoint2(n,o))return!1}for(var s=0;s<i.length-1;s++)for(var u=0;u<n.length-1;u++)if(this.at(i[s],i[s+1],n[u],n[u+1]).isintersect&&!this.ft(n[u],n[u+1],i[s])&&!this.ft(n[u],n[u+1],i[s+1]))return!1;return!0},ht:function(t,r,i,n){return!(Math.max(t.x,r.x)<Math.min(i.x,n.x)||Math.max(t.y,r.y)<Math.min(i.y,n.y)||Math.max(i.x,n.x)<Math.min(t.x,r.x)||Math.max(i.y,n.y)<Math.min(t.y,r.y))},lt:function(t,r,i,n){return!(Math.max(t.x,r.x)<Math.min(i.x,n.x)||Math.max(t.y,r.y)<Math.min(i.y,n.y)||Math.max(i.x,n.x)<Math.min(t.x,r.x)||Math.max(i.y,n.y)<Math.min(t.y,r.y)||0===this.ut(i,r,t)&&0===this.ut(r,n,t)||this.ut(i,r,t)*this.ut(r,n,t)<0||this.ut(t,n,i)*this.ut(n,r,i)<0)},ct:function(t,r,i){return!(t.x<r.x||t.y<r.y||t.x>i.x||t.y>i.y)},vt:function(t,r,i){var n=Math.min(r.x,i.x),e=Math.max(r.x,i.x),o=Math.min(r.y,i.y),r=Math.max(r.y,i.y);return!(t.x<n||t.x>e||t.y<o||t.y>r)},yt:function(t,r,i){var n=Math.min(i.x,r.x),e=Math.max(i.x,r.x),o=Math.min(i.y,r.y),i=Math.max(i.y,r.y);return!(t.x<n||t.x>e||t.y<o||t.y>i)},dt:function(t,r,i){for(var n,e,o=!1,s=0;s<i;s++)n=r[s],e=r[(s+1)%i],(n.y<t.y&&e.y>=t.y||e.y<t.y&&n.y>=t.y)&&(n.x<=t.x||e.x<=t.x)&&n.x+(t.y-n.y)/(e.y-n.y)*(e.x-n.x)<t.x&&(o=!o);return o},bt:function(t,r,i){return(t.x-r.x)*(i.y-r.y)==(i.x-r.x)*(t.y-r.y)&&Math.min(r.x,i.x)<=t.x&&t.x<=Math.max(r.x,i.x)&&Math.min(r.y,i.y)<=t.y&&t.y<=Math.max(r.y,i.y)},wt:function(t,r){return Math.sqrt((t.x-r.x)*(t.x-r.x)+(t.y-r.y)*(t.y-r.y))},gt:function(t,r){return(t.x-r.x)*(t.x-r.x)+(t.y-r.y)*(t.y-r.y)},_t:function(t,r,i){var n=r.x,r=r.y,e=i.x,i=i.y,o=t.x,t=t.y,s=e-n,u=i-r,a=s*s+u*u,f=o-n,h=t-r,l=f*f+h*h;return this.et(a)?this.et(l)?0:l:(a=Math.sqrt(a),h=this.ot(u=(s=s/a)*f+(f=u/a)*h)?this.st(u-a)?(h=o-(n+u*s))*h+(a=t-(r+u*f))*a:(n=o-e)*n+(s=t-i)*s:l,this.et(h)?0:h)},jt:function(t,r,i,n){var e,o=r.x,s=r.y,u=i.x,a=i.y,f=t.x,t=t.y,h=u-o,l=a-s,c=Math.sqrt(h*h+l*l),v=f-o,y=t-s,d=Math.sqrt(v*v+y*y);return this.et(c)?(n.x=r.x,n.y=r.y,this.et(e=d)?0:e):(e=this.ot(l=(h=h/c)*v+(v=l/c)*y)?this.st(l-c)?(c=f-(y=o+l*h),h=t-(o=s+l*v),s=Math.sqrt(c*c+h*h),n.x=y,n.y=o,s):(l=f-u,v=t-a,c=Math.sqrt(l*l+v*v),n.x=i.x,n.y=i.y,c):(n.x=r.x,n.y=r.y,d),this.et(e)?0:e)},St:function(t,r){for(var i=0,n=0,e=0,o=0;o<r;o++){var s=t[o],u=t[(o+1)%r],a=(s.x*u.y-s.y*u.x)/2;i+=a,n+=a*(s.x+u.x)/3,e+=a*(s.y+u.y)/3}return{x:n/=i,y:e/=i}},Ot:function(t){for(var r=tr.triangulate([t]),i=0,n=0,e=0,o=0;o<r.length;o++){var s=t[r[o][0]],u=t[r[o][1]],a=t[r[o][2]],f=u.x-s.x,h=u.y-s.y,l=a.x-s.x,f=(f*(a.y-s.y)-l*h)/2;i+=f,n+=(s.x+u.x+a.x)/3*f,e+=(s.y+u.y+a.y)/3*f}return{x:n/i,y:e/i}},Et:function(t,r){if(r<3)return 0;for(var i=0,n=0;n<r;++n){var e=t[n],o=t[(n+1)%r];i+=e.x*o.y-e.y*o.x}return Math.abs(i/2)},Tt:function(t,r,i,n,e){var o,s;return this.lt(t,r,i,n)?(o=(n.x-i.x)*(t.y-r.y)-(r.x-t.x)*(i.y-n.y),s=(t.y-i.y)*(r.x-t.x)*(n.x-i.x)+i.x*(n.y-i.y)*(r.x-t.x)-t.x*(r.y-t.y)*(n.x-i.x),e.x=s/o,o=(t.x-r.x)*(n.y-i.y)-(r.y-t.y)*(i.x-n.x),s=r.y*(t.x-r.x)*(n.y-i.y)+(n.x-r.x)*(n.y-i.y)*(t.y-r.y)-n.y*(i.x-n.x)*(r.y-t.y),e.y=s/o,1):0},Rt:function(t,r,i,n,e){var o=Math.min(i.x,n.x),s=Math.max(i.x,n.x),u=Math.min(i.y,n.y),a=Math.max(i.y,n.y),f=t.x,h=t.y,l=i.x,c=i.y,v=n.x,y=n.y;if(90==r)return!(t.x<o||t.x>s||(s-o<sr?t.y>=c&&t.y<=y||t.y>=y&&t.y<=c?(e.x=t.x,e.y=t.y,0):c<y&&t.x<c?(e.x=l,e.y=c,0):!(y<c&&t.x<y)||(e.x=v,e.y=y,0):(e.y=d=(y-c)/(v-l)*(f-l)+c,e.x=f,d<h||!this.yt(e,i,n))));if(270==r)return!(t.x<o||t.x>s||(Math.abs(s-o<sr)?t.y>=c&&t.y<=y||t.y>=y&&t.y<=c?(e.x=t.x,e.y=t.y,0):c<y&&t.y>y?(e.x=v,e.y=y,0):!(y<c&&t.y>c)||(e.x=l,e.y=c,0):(e.y=d=(y-c)/(v-l)*(f-l)+c,e.x=f,h<d||!this.yt(e,i,n))));if(270!=r&&90!=r&&Math.abs(s-o<sr)){var t=o,d=Math.tan(r/180*Math.PI)*(t-f)+h;if(e.y=d,e.x=t,this.yt(e,i,n))return s=d-h,0<(o=t-f)/Math.sqrt(o*o+s*s)*Math.cos(r/180*Math.PI)}return Math.abs(a-u<=sr)?(d=u,t=1/Math.tan(r/180*Math.PI)*(d-h)+f,e.x=t,e.y=d,!!this.yt(e,i,n)&&(o=d-h,0<(s=t-f)/Math.sqrt(s*s+o*o)*Math.cos(r/180*Math.PI))):(t=h+(a=Math.tan(r/180*Math.PI))*((d=(c-h-((u=(y-c)/(v-l))*l-a*f))/(a-u))-f),e.x=d,e.y=t,!!this.yt(e,i,n)&&(s=d-f,o=t-h,Math.abs(s)<=sr&&Math.abs(o)<=sr||0<s/Math.sqrt(s*s+o*o)*Math.cos(r/180*Math.PI)))},Mt:function(t,r){return Math.abs(t.x-r.x)<a&&Math.abs(t.y-r.y)<a},Nt:function(t,r,i,n){var e,o,s,u,a=t.x,f=t.y,h=r.x,l=r.y,c=i.x,v=i.y;return this.Mt(t,r)||this.Mt(t,i)?(n.x=a,n.y=f,!0):(s=Math.min(r.x,i.x),u=Math.max(r.x,i.x),e=Math.min(r.y,i.y),o=Math.max(r.y,i.y),Math.abs(h-c)<1e-5?(n.x=h,e<=(n.y=f)&&f<=o):Math.abs(l-v)<1e-5?(n.x=a,n.y=l,s<=a&&a<=u):(u=f+(e=-1/((v-l)/(c-h)))*((s=(l-f-((o=(v-l)/(c-h))*h-e*a))/(e-o))-a),n.x=s,n.y=u,!!this.yt(n,r,i)||!(!this.Mt(t,r)&&!this.Mt(t,i))))},kt:function(t,r){return{x:t.y*r.z-t.z*r.y,y:t.z*r.x-t.x*r.z,z:t.x*r.y-t.y*r.x}},It:function(t,r){return t.x*r.x+t.y*r.y+t.z*r.z},At:function(t){return Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z)},Pt:function(t,r){return t.x*r.x+t.y*r.y},xt:function(t,r){return t.x*r.y-t.y*r.x},Lt:function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},Dt:function(t,r){var i,n;return 0==t.x&&0==t.y||0==r.x&&0==r.y?0:(i={x:t.x,y:t.y,z:0},n={x:r.x,y:r.y,z:0},i=this.kt(i,n),n=this.Pt(t,r),n=Math.acos(n/(this.Lt(t)*this.Lt(r))),0<i.z?n/Math.PI*180:360-n/Math.PI*180)},Bt:function(t,r,i,n){for(var e=0;e<i.length;e++){var o=i[e],s=i[(e+1)%i.length];if(1==this.Tt(t,r,o,s,n))return!0}return!1},Ft:function(t,r,i,n,e){var o=Math.min(t.x,i.x,n.x),s=Math.max(t.x,i.x,n.x),u=Math.min(t.y,i.y,n.y),a=Math.max(t.y,i.y,n.y),s=Math.sqrt((s-o)*(s-o)+(a-u)*(a-u)),o=r/180*Math.PI,a=s*Math.cos(o)+t.x,u=s*Math.sin(o)+t.y;return 1==this.Tt(t,{x:a,y:u},i,n,e)},Gt:function(t){var r={x:null,y:null},i=0,n=0,e=t.length;1<t.length&&t[0].x===t[t.length-1].x&&t[0].y===t[t.length-1].y&&e--;for(var o=0;o<e;o++)i+=t[o].x,n+=t[o].y;return r.x=i/t.length,r.y=n/t.length,r},Ct:function(t,r,i,n){var e=[],o=t.x-r,s=t.x+r,u=t.y-r,a=t.y+r,f=Math.min(i.x,n.x),h=Math.max(i.x,n.x),l=Math.min(i.y,n.y),c=Math.max(i.y,n.y);return h<o||s<f||c<u||a<l||(o=n.x-i.x,s=n.y-i.y,(u=(t=(o*(u=t.x-i.x)+s*(a=t.y-i.y))/(n=o*o+s*s))*t-(u*u+a*a-r*r)/n)<0)||(a=Math.sqrt(u),n={x:i.x-o*(r=-t+a),y:i.y-s*r},o={x:i.x-o*(u=-t-a),y:i.y-s*u},r!==u&&(f<=n.x&&n.x<=h&&l<=n.y&&n.y<=c&&e.push(n),f<=o.x)&&o.x<=h&&l<=o.y&&o.y<=c&&e.push(o)),e},Ut:function(t,r,i){var n,e={};if(t.x!=r.x)return n=r=(r.y-t.y)/(r.x-t.x),r=t.y-r*t.x,e.x=(+i.x- -1*n*i.y-n*r)/(n*n+1),e.y=(n*n*i.y- -1*n*i.x- -1*r)/(n*n+1),e;e.x=t.x,e.y=i.y},at:function(t,r,i,n){var e,o,s,u,a={point:null,isintersect:!1};return this.distanceOfTwoPoints(t,i)<.001||this.distanceOfTwoPoints(t,n)<.001?(a.isintersect=!0,a.point=t):this.distanceOfTwoPoints(r,i)<.001||this.distanceOfTwoPoints(r,n)<.001?(a.isintersect=!0,a.point=r):(e={x:r.x-t.x,y:r.y-t.y},o={x:n.x-i.x,y:n.y-i.y},s={x:i.x-t.x,y:i.y-t.y},n={x:n.x-t.x,y:n.y-t.y},r={x:r.x-i.x,y:r.y-i.y},i={x:-s.x,y:-s.y},u=this.xt(o,e),Math.abs(u)<=1e-5||this.xt(s,e)*this.xt(n,e)<=-5e-4&&this.xt(i,o)*this.xt(r,o)<-5e-4&&(n=this.xt(o,s)/u,a.point={x:t.x+e.x*n,y:t.y+e.y*n},a.isintersect=!0)),a},Zt:function(t,r,i){t.x===r.x&&(r.x=r.x+1),t.y===r.y&&(r.y=r.y+1),r.x===i.x&&(i.x=i.x+1),r.y===i.y&&(i.y=i.y+1);var n=r.x-t.x,t=r.y-t.y,e=i.x-r.x;return!(0<n*(i.y-r.y)-t*e)},getAngle:function(t){var r=t.p1,t=t.p2,i=t.x-r.x,t=t.y-r.y,r=Math.sqrt(i*i+t*t),r=Math.asin(Math.abs(t)/r);return 0<i&&0<t?r:i<0&&0<t?Math.PI-r:i<0&&t<0?Math.PI+r:0<i&&t<0?2*Math.PI-r:0==i&&0<t?r:0==i&&t<0?3*Math.PI/2:0<i&&0==t?r:i<0&&0==t?Math.PI:null},Wt:function(t){var r=this.distanceOfTwoPoints(t[0],t[1]),i=this.distanceOfTwoPoints(t[1],t[2]),t=this.distanceOfTwoPoints(t[0],t[2]),n=(r+i+t)/2;return Math.sqrt(n*(n-r)*(n-i)*(n-t))},Vt:function(t,r){var i,n,e,o,s;return this.jt(t,r[0],r[1],{})<1e-4||this.jt(t,r[0],r[2],{})<1e-4||this.jt(t,r[1],r[2],{})<1e-4||(o={x:r[1].x-r[0].x,y:r[1].y-r[0].y},i={x:r[0].x-r[2].x,y:r[0].y-r[2].y},n={x:r[2].x-r[1].x,y:r[2].y-r[1].y},s={x:t.x-r[0].x,y:t.y-r[0].y},e={x:t.x-r[1].x,y:t.y-r[1].y},t={x:t.x-r[2].x,y:t.y-r[2].y},r=this.xt(o,s),o=this.xt(n,e),s=this.xt(i,t),a<r*o&&a<o*s)},qt:function(t,r,i){var n=i.length,e={isintersect:!1,start:null,end:null,type:0,outer:null},o=[];if(this.Vt(t,i)&&(e.start=t),this.Vt(r,i)&&(e.end=r),null!=e.start&&null!=e.end)e.isintersect=!0,e.type=1;else{for(var s=(i[1].x+i[2].x)/2,u=(i[1].y+i[2].y)/2,a=1;a<n;a++){var f,h=this.at(t,r,i[a-1],i[a]);if(h.isintersect){if(null!=e.start)return e.end=h.point,e.isintersect=!0,e.outer="end",f=this.Dt({x:s-i[0].x,y:u-i[0].y},{x:r.x-i[0].x,y:r.y-i[0].y}),e.type=0<(f=f<180?f:f-360)?2:3,e;if(null!=e.end)return e.start=h.point,e.isintersect=!0,e.outer="start",f=this.Dt({x:s-i[0].x,y:u-i[0].y},{x:t.x-i[0].x,y:t.y-i[0].y}),e.type=0<(f=f<180?f:f-360)?2:3,e;o.push(h)}}var l,c=this.at(t,r,i[0],i[n-1]);if(c.isintersect){if(null!=e.start)return e.end=c.point,e.isintersect=!0,e.outer="end",l=this.Dt({x:s-i[0].x,y:u-i[0].y},{x:r.x-i[0].x,y:r.y-i[0].y}),e.type=0<(l=l<180?l:l-360)?2:3,e;if(null!=e.end)return e.start=c.point,e.isintersect=!0,e.outer="start",l=this.Dt({x:s-i[0].x,y:u-i[0].y},{x:t.x-i[0].x,y:t.y-i[0].y}),e.type=0<(l=l<180?l:l-360)?2:3,e;o.push(c)}2!=o.length||this.distanceOfTwoPoints(o[0].point,o[1].point)<.01||(this.distanceOfTwoPoints(o[0].point,t)<=this.distanceOfTwoPoints(o[0].point,r)?(e.start=o[0].point,e.end=o[1].point):(e.start=o[1].point,e.end=o[0].point),e.isintersect=!0,e.type=4)}return e},Yt:function(t,r,i){var n=i.length,e={isintersect:!1,start:null,end:null},o=[];if(this.Vt(t,i)&&(e.start=t),this.Vt(r,i)&&(e.end=r),null!=e.start&&null!=e.end)e.isintersect=!0;else{for(var s=1;s<n;s++){var u=this.at(t,r,i[s-1],i[s]);if(u.isintersect){if(null!=e.start)return e.end=u.point,e.isintersect=!0,e;if(null!=e.end)return e.start=t,e.isintersect=!0,e;o.push(u)}}var a=this.at(t,r,i[0],i[n-1]);if(a.isintersect){if(null!=e.start)return e.end=a.point,e.isintersect=!0,e;if(null!=e.end)return e.start=t,e.isintersect=!0,e;o.push(a)}2==o.length&&(e.start=(this.distanceOfTwoPoints(o[0].point,t)<=this.distanceOfTwoPoints(o[0].point,r)?o[0]:o[1]).point,e.end=(this.distanceOfTwoPoints(o[0].point,t)>this.distanceOfTwoPoints(o[0].point,r)?o[0]:o[1]).point,e.isintersect=!0)}return e},zt:function(e,t){if(0==t.length)return[e];for(var r,i,n=this.Xt(t),o=[],s=(n.sort(function(t,r){var i=(t.Ht.x-e.Ht.x)*(t.Ht.x-e.Ht.x)+(t.Ht.y-e.Ht.y)*(t.Ht.y-e.Ht.y),n=(r.Ht.x-e.Ht.x)*(r.Ht.x-e.Ht.x)+(r.Ht.y-e.Ht.y)*(r.Ht.y-e.Ht.y),t=(t.Qt.x-e.Ht.x)*(t.Qt.x-e.Ht.x)+(t.Qt.y-e.Ht.y)*(t.Qt.y-e.Ht.y),r=(r.Qt.x-e.Ht.x)*(r.Qt.x-e.Ht.x)+(r.Qt.y-e.Ht.y)*(r.Qt.y-e.Ht.y);return(i<t?i:t)<(n<r?n:r)}),0),s=0;s<n.length;s++)this.distanceOfTwoPoints(n[s].Ht,n[s].Qt)<.01||(r=this.distanceOfTwoPoints(n[s].Ht,e.Ht),i=this.distanceOfTwoPoints(n[s].Qt,e.Ht),r<.01?e.Ht=n[s].Qt:i<.01?e.Ht=n[s].Ht:r<i?.1<this.distanceOfTwoPoints(e.Ht,n[s].Ht)&&(o.push({Kt:e.Kt,Ht:e.Ht,Qt:n[s].Ht,wt:e.wt,Jt:e.Jt}),e.Ht=n[s].Qt):.1<this.distanceOfTwoPoints(e.Ht,n[s].Qt)&&(o.push({Kt:e.Kt,Ht:e.Ht,Qt:n[s].Qt,wt:e.wt,Jt:e.Jt}),e.Ht=n[s].Ht),n.splice(s,1));return.1<this.distanceOfTwoPoints(e.Ht,e.Qt)&&o.push(e),o},Xt:function(t){var r=[];if(1==t.length)return t;for(var i=t[0],n=1;0<t.length;){if(n>=t.length){if(r.push(i),t.splice(0,1),t.length<1)break;i=t[0],n=1}if(1===t.length){r.push(i);break}this.ft(i.Ht,i.Qt,t[n].Ht)?(this.ft(i.Ht,i.Qt,t[n].Qt)||(i.Qt=t[n].Qt),t.splice(n,1)):this.ft(i.Ht,i.Qt,t[n].Qt)?(i.Ht=t[n].Ht,t.splice(n,1)):this.ft(t[n].Ht,t[n].Qt,i.Ht)?(i=(this.ft(t[n].Ht,t[n].Qt,i.Qt)||(t[n].Qt=i.Qt),t[n]),t.splice(n,1)):this.ft(t[n].Ht,t[n].Qt,i.Qt)?(t[n].Ht=i.Ht,i=t[n],t.splice(n,1)):n++}return r},ft:function(t,r,i){var n=t.x-i.x,e=t.y-i.y,o=r.x-i.x,s=r.y-i.y,u=this.distanceOfTwoPoints(t,i),i=this.distanceOfTwoPoints(r,i),t=this.distanceOfTwoPoints(t,r);return n*s-e*o<1e-5&&u+i-t<.001},$t:function(t,r,i){var n=r.x-t.x,t=r.y-t.y,e=Math.sqrt(n*n+t*t);return{x:r.x+n/e*i,y:r.y+t/e*i}}});var rt=new r;function fr(t){return(fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hr(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){t=function(t,r){if("object"!=fr(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===r?String:Number)(t);i=i.call(t,r||"default");if("object"!=fr(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==fr(t)?t:String(t)}(n.key),n)}}var r=function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.tr={x:Number.MAX_VALUE,y:Number.MAX_VALUE},this.rr={x:-Number.MAX_VALUE,y:-Number.MAX_VALUE}}var r,i,n;return r=t,(i=[{key:"min",get:function(){return this.tr}},{key:"max",get:function(){return this.rr}},{key:"center",get:function(){var t={x:Number.NaN,y:Number.NaN};return this.valid()&&(t.x=(this.min.x+this.max.x)/2,t.y=(this.min.y+this.max.y)/2),t}},{key:"size",get:function(){var t={x:Number.NaN,y:Number.NaN};return this.valid()&&(t.x=this.max.x-this.min.x,t.y=this.max.y-this.min.y),t}},{key:"copy",value:function(t){return this.rr.x=t.max.x,this.rr.y=t.max.y,this.tr.x=t.min.x,this.tr.y=t.min.y,this}},{key:"clone",value:function(){return(new t).copy(this)}},{key:"reset",value:function(){this.tr={x:Number.MAX_VALUE,y:Number.MAX_VALUE},this.rr={x:-Number.MAX_VALUE,y:-Number.MAX_VALUE}}},{key:"toObject",value:function(){return{min:this.min,max:this.max,center:this.center,size:this.size}}},{key:"expand",value:function(t){this.ir(t)}},{key:"expandByCoords",value:function(t){this.nr(t)}},{key:"valid",value:function(){return this.er()}},{key:"isCross",value:function(t){var r=!0;return t.max.x<this.min.x&&(r=!1),t.min.x>this.max.x&&(r=!1),t.max.y<this.min.y&&(r=!1),r=t.min.y>this.max.y?!1:r}}])&&hr(r.prototype,i),n&&hr(r,n),Object.defineProperty(r,"prototype",{writable:!1}),t}(),lr=(Object.assign(r.prototype,{er:function(){return!(this.min.x>this.max.x||this.min.y>this.max.y)},ir:function(t){t&&t.valid()&&(t.min.x<this.min.x&&(this.min.x=t.min.x),t.min.y<this.min.y&&(this.min.y=t.min.y),t.max.x>this.max.x&&(this.max.x=t.max.x),t.max.y>this.max.y)&&(this.max.y=t.max.y)},nr:function(t){var r=this;t&&0!=t.length&&t.forEach(function(t){t.x<r.min.x&&(r.min.x=t.x),t.y<r.min.y&&(r.min.y=t.y),t.x>r.max.x&&(r.max.x=t.x),t.y>r.max.y&&(r.max.y=t.y)})}}),r);function cr(t){return(cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vr(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){t=function(t,r){if("object"!=cr(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===r?String:Number)(t);i=i.call(t,r||"default");if("object"!=cr(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==cr(t)?t:String(t)}(n.key),n)}}function yr(t,r,i){r=br(r);var n=t,r=dr()?Reflect.construct(r,i||[],br(t).constructor):r.apply(t,i);if(r&&("object"===cr(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");t=n;if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}function dr(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(dr=function(){return!!t})()}function br(t){return(br=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function pr(t,r){return(pr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t})(t,r)}var r=function(){var t,r,i=e,n=C;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");function e(t,r){if(this instanceof e)return(t=yr(this,e,[t,r])).sr=new lr,t.ur=null,t;throw new TypeError("Cannot call a class as a function")}return i.prototype=Object.create(n&&n.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),n&&pr(i,n),i=e,t&&vr(i.prototype,t),r&&vr(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(),mr=(Object.assign(r.prototype,{X:function(t){return t.getType()!=g.MODEL?this.ar(t):this.hr(t)},hr:function(t){return!0},lr:function(t){t=t.getBound();return!!rt.ht(this.sr.tr,this.sr.rr,t.min,t.max)},H:function(t,r){var i=t.getCoordinates();if(t.getType()!==g.MODEL)r.wt=Math.sqrt(rt.gt(i[0],this.cr));else{for(var n=Number.MAX_VALUE,e=0,o=i.length;e<o;e++)for(var s=1,u=i[e].length;s<u;s++){var a=i[e][s-1],f=i[e][s],a=rt._t(this.cr,a,f);a<n&&(n=a)}r.wt=Math.sqrt(n)}},ar:function(t){t=t.getCoordinates()[0];return!!rt.ct(t,this.sr.tr,this.sr.rr)&&("circle"===this.ur?rt.gt(t,this.cr)<this.vr:rt.dt(t,this.yr,this.yr.length-1))}}),r);function wr(t){return(wr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gr(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){t=function(t,r){if("object"!=wr(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===r?String:Number)(t);i=i.call(t,r||"default");if("object"!=wr(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==wr(t)?t:String(t)}(n.key),n)}}function _r(t,r,i){r=Sr(r);var n=t,r=jr()?Reflect.construct(r,i||[],Sr(t).constructor):r.apply(t,i);if(r&&("object"===wr(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");t=n;if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}function jr(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(jr=function(){return!!t})()}function Sr(t){return(Sr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Or(t,r){return(Or=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t})(t,r)}var r=function(){var t,r,i=e,n=mr;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");function e(t,r){if(this instanceof e)return(t=_r(this,e,[t,r])).ur="circle",t.cr=t.Y.center,t.dr=t.Y.radius,t.vr=t.Y.radius*t.Y.radius,t.sr.nr([{x:t.cr.x-t.dr,y:t.cr.y-t.dr},{x:t.cr.x+t.dr,y:t.cr.y+t.dr}]),t;throw new TypeError("Cannot call a class as a function")}return i.prototype=Object.create(n&&n.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),n&&Or(i,n),i=e,t&&gr(i.prototype,t),r&&gr(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(),Er=(Object.assign(r.prototype,{hr:function(t){if(this.lr(t))for(var r=t.getCoordinates(),i=0,n=r.length;i<n;i++)for(var e=1,o=r[i].length;e<o;e++){var s=r[i][e];if(rt.gt(s,this.cr)<this.vr)return!0;var u=r[i][e-1];if(1==e&&rt.gt(u,this.cr)<this.vr)return!0;if(rt._t(this.cr,u,s)<this.vr)return!0}return!1}}),r);function Tr(t){return(Tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Rr(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){t=function(t,r){if("object"!=Tr(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===r?String:Number)(t);i=i.call(t,r||"default");if("object"!=Tr(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==Tr(t)?t:String(t)}(n.key),n)}}function Mr(t,r,i){r=kr(r);var n=t,r=Nr()?Reflect.construct(r,i||[],kr(t).constructor):r.apply(t,i);if(r&&("object"===Tr(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");t=n;if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}function Nr(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Nr=function(){return!!t})()}function kr(t){return(kr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ir(t,r){return(Ir=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t})(t,r)}var r=function(){var t,r,i=e,n=mr;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");function e(t,r){if(this instanceof e)return(t=Mr(this,e,[t,r])).ur="polygon",t.yr=t.Y,t.br=t.yr.length-1,t.cr=rt.Ot(t.yr),t.sr.nr(t.yr),t;throw new TypeError("Cannot call a class as a function")}return i.prototype=Object.create(n&&n.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),n&&Ir(i,n),i=e,t&&Rr(i.prototype,t),r&&Rr(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(),Ar=(Object.assign(r.prototype,{hr:function(t){if(this.lr(t)){for(var r=t.getCoordinates(),i=0,n=r.length;i<n;i++)for(var e=0,o=r[i].length-1;e<o;e++)if(rt.dt(r[i][e],this.yr,this.yr.length))return!0;for(var s=0;s<this.br;s++){for(var u=!1,a=0,f=r.length;a<f;a++)rt.dt(this.yr[s],r[a],r[a].length-1)&&(u=0==a);if(u)return!0}for(var h=0;h<=this.br;h++)for(var l=null,c=null,c=h===this.br?(l=this.yr[0],this.yr[h]):(l=this.yr[h],this.yr[h+1]),v=0,y=r.length;v<y;v++)for(var d=0,b=r[v].length-1;d<b;d++){var p=r[v][d],m=r[v][d+1];if(rt.lt(l,c,p,m))return!0}}return!1}}),r);function Pr(t){return(Pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xr(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){t=function(t,r){if("object"!=Pr(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===r?String:Number)(t);i=i.call(t,r||"default");if("object"!=Pr(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==Pr(t)?t:String(t)}(n.key),n)}}function Lr(t,r,i){r=Br(r);var n=t,r=Dr()?Reflect.construct(r,i||[],Br(t).constructor):r.apply(t,i);if(r&&("object"===Pr(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");t=n;if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}function Dr(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Dr=function(){return!!t})()}function Br(t){return(Br=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Fr(t,r){return(Fr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t})(t,r)}var r=function(){var t,r,i=e,n=C;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");function e(t,r){if(this instanceof e)return Lr(this,e,[t,r]);throw new TypeError("Cannot call a class as a function")}return i.prototype=Object.create(n&&n.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),n&&Fr(i,n),i=e,t&&xr(i.prototype,t),r&&xr(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(),Gr=(Object.assign(r.prototype,{X:function(t){return!1}}),r);function Cr(t){return(Cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ur(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){t=function(t,r){if("object"!=Cr(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===r?String:Number)(t);i=i.call(t,r||"default");if("object"!=Cr(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==Cr(t)?t:String(t)}(n.key),n)}}function Zr(t,r,i){r=Vr(r);var n=t,r=Wr()?Reflect.construct(r,i||[],Vr(t).constructor):r.apply(t,i);if(r&&("object"===Cr(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");t=n;if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}function Wr(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Wr=function(){return!!t})()}function Vr(t){return(Vr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function qr(t,r){return(qr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t})(t,r)}var r=function(){var t,r,i=e,n=C;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");function e(t,r){if(this instanceof e)return(t=Zr(this,e,[t,r])).pr=t.Y.point,t;throw new TypeError("Cannot call a class as a function")}return i.prototype=Object.create(n&&n.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),n&&qr(i,n),i=e,t&&Ur(i.prototype,t),r&&Ur(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(),Yr=(Object.assign(r.prototype,{X:function(t){return t.getType()==g.MODEL&&this.hr(t)},hr:function(t){var r=t.getBound();if(!rt.ct(this.pr,r.min,r.max))return!1;for(var i=t.getCoordinates(),n=0,e=0,o=i.length;e<o&&(rt.dt(this.pr,i[e],i[e].length-1)&&n++,!(1<n));e++);return 1==n}}),r);function zr(t){return(zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xr(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){t=function(t,r){if("object"!=zr(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===r?String:Number)(t);i=i.call(t,r||"default");if("object"!=zr(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==zr(t)?t:String(t)}(n.key),n)}}function Hr(t,r,i){r=Kr(r);var n=t,r=Qr()?Reflect.construct(r,i||[],Kr(t).constructor):r.apply(t,i);if(r&&("object"===zr(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");t=n;if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}function Qr(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Qr=function(){return!!t})()}function Kr(t){return(Kr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Jr(t,r){return(Jr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t})(t,r)}var r=function(){var t,r=n,i=mr;if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");function n(t,r){if(this instanceof n)return(t=Hr(this,n,[t,r])).ur="linebuffer",t.mr=t.Y.coords,t.wr=t.Y.buffer,t.gr=t.wr*t.wr,t._r=[],t._r=t._calculateBound(t.mr,t.wr),t;throw new TypeError("Cannot call a class as a function")}return r.prototype=Object.create(i&&i.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),i&&Jr(r,i),r=n,(i=[{key:"_calculateBound",value:function(t,r){for(var i=[],n=0;n<t.length-1;n++){var e=Math.min(t[n].x,t[n+1].x),o=Math.max(t[n].x,t[n+1].x),s=Math.min(t[n].y,t[n+1].y),u=Math.max(t[n].y,t[n+1].y),a=(e-=r,o+=r,s-=r,u+=r,new lr);a.expandByCoords([{x:e,y:s},{x:o,y:u}]),i.push(a)}return i}}])&&Xr(r.prototype,i),t&&Xr(r,t),Object.defineProperty(r,"prototype",{writable:!1}),n}(),$r=(Object.assign(r.prototype,{lr:function(t){for(var r=t.getBound(),i=0;i<this._r.length;i++){var n=this._r[i];if(rt.ht(n.tr,n.rr,r.min,r.max))return!0}return!1},hr:function(t){if(this.lr(t))for(var r=t.getCoordinates(),i=0,n=r.length;i<n;i++)for(var e=1,o=r[i].length;e<o;e++)for(var s=r[i][e],u=r[i][e-1],a=0;a<this.mr.length-1;a++){var f=this.mr[a],h=this.mr[a+1];if(rt._t(s,f,h)<this.gr)return!0;if(1==e&&rt._t(u,f,h)<this.gr)return!0;if(rt._t(f,u,s)<this.gr)return!0;if(rt._t(h,u,s)<this.gr)return!0;if(rt.lt(f,h,u,s))return!0}return!1},ar:function(t){for(var r=t.getCoordinates()[0],i=0;i<this.mr.length-1;i++){var n=this.mr[k],e=this.mr[k+1];if(rt._t(r,n,e)<this.gr)return!0}return!1},H:function(t,r){return r}}),r);function ti(t){return(ti="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ri(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){t=function(t,r){if("object"!=ti(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===r?String:Number)(t);i=i.call(t,r||"default");if("object"!=ti(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==ti(t)?t:String(t)}(n.key),n)}}var ii=new(function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function")}var r,i,n;return r=t,(i=[{key:"create",value:function(t){if(!t||"object"!=ti(t))return null;var r,i=[];for(r in t)switch(r){case"FID":i.push(new H(r,t[r]));break;case"name":i.push(new yt(r,t[r]));break;case"ename":i.push(new _t(r,t[r]));break;case"keyword":i.push(new Lt(r,t[r]));break;case"typeID":i.push(new Mt(r,t[r]));break;case"circle":i.push(new Er(r,t[r]));break;case"polygon":i.push(new Ar(r,t[r]));break;case"buffer":i.push(new Gr(r,t[r]));break;case"contain":i.push(new Yr(r,t[r]));break;case"line":i.push(new $r(r,t[r]))}return i}}])&&ri(r.prototype,i),n&&ri(r,n),Object.defineProperty(r,"prototype",{writable:!1}),t}());function ni(t){return(ni="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ei(t){return function(t){if(Array.isArray(t))return oi(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){var i;if(t)return"string"==typeof t?oi(t,r):"Map"===(i="Object"===(i=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?oi(t,r):void 0}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oi(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,n=new Array(r);i<r;i++)n[i]=t[i];return n}function si(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){t=function(t,r){if("object"!=ni(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===r?String:Number)(t);i=i.call(t,r||"default");if("object"!=ni(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==ni(t)?t:String(t)}(n.key),n)}}var r=function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.jr=null,this.Sr=N.MODEL,this.Or=null,this.Er=[],this.Tr=[],this.Rr=!1,this.Mr=null}var r,i,n;return r=t,(i=[{key:"levels",get:function(){return this.jr},set:function(t){this.jr=t}},{key:"type",get:function(){return this.Sr},set:function(t){this.Sr=t}},{key:"addCondition",value:function(t){var r,i=ii.create(t);(r=this.Tr).push.apply(r,ei(i)),this.Er.push(t)}},{key:"onlyInBuilding",get:function(){return this.Rr},set:function(t){this.Rr=t}},{key:"buildings",get:function(){return this.Mr},set:function(t){this.Mr=t}},{key:"buildingID",get:function(){return this.Or},set:function(t){this.Or=t}}])&&si(r.prototype,i),n&&si(r,n),Object.defineProperty(r,"prototype",{writable:!1}),t}(),ui=t(3),v={NAME_KEY_ERROR:0,MAP_ID_URL_ERROR:2,THEME_ID_URL_ERROR:4,LICENSE_ERROR:8,PATH_ERROR:404,INFO:32,DEFAULT_LEVEL_ERROR:64},ai=t(2),l=t(0);function fi(t){return(fi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hi(r,t){var i,n=Object.keys(r);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(r),t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})),n.push.apply(n,i)),n}function li(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?hi(Object(e),!0).forEach(function(t){var r,i;r=n,i=e[t=t],(t=yi(t))in r?Object.defineProperty(r,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[t]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):hi(Object(e)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))})}return n}function ci(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,yi(n.key),n)}}function vi(t,r,i){return r&&ci(t.prototype,r),i&&ci(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function yi(t){t=function(t,r){if("object"!=fi(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===r?String:Number)(t);i=i.call(t,r||"default");if("object"!=fi(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==fi(t)?t:String(t)}var i=vi(function t(r){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.Nr=li({data:null,method:"GET",responseType:"json"},r),this.kr=null}),f=(Object.assign(i.prototype,{Ir:function(t,r,i){var n=this.Nr,e=n.data,o=n.method,s=n.url,u=n.responseType,a=n.header,f=null;if((f=new(l.a.environment===ai.a.WX?l.a.XMLHttpRequest:"undefined"!=typeof XMLHttpRequest?XMLHttpRequest:ui.a.global().fengmap.XMLHttpRequest)).responseType=u,f.open(o,s),"object"==fi(a))for(var h in a)f.setRequestHeader(h,a[h]);f.addEventListener("load",function(){200===f.status||0===f.status||201===f.status?t&&t(f.response):r&&(404===f.status?r(v.PATH_ERROR):2069===f.response.error_code?r(v.NAME_KEY_ERROR):2063===f.response.error_code?r(v.MAP_ID_URL_ERROR):400===f.response.error_code?r(v.THEME_ID_URL_ERROR):r(f.response))}),f.addEventListener("timeout",function(t){i&&i(t)}),f.addEventListener("error",function(t){r&&r(t)}),f.send(JSON.stringify(e)),this.kr=f},Ar:function(){this.kr&&this.kr.abort&&(this.kr.abort(),this.kr=null)}}),i),i=t(29),di=t.n(i);function bi(t){return(bi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pi(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){t=function(t,r){if("object"!=bi(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===r?String:Number)(t);i=i.call(t,r||"default");if("object"!=bi(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==bi(t)?t:String(t)}(n.key),n)}}function mi(t,r,i){return r&&pi(t.prototype,r),i&&pi(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}for(var i=["TmF2aVNlZ21lbg==","YWNjZXNzaWJsZQ==","Zmlk","bmZv","Rmxvb3JHZW8=","bGlmdFR5cGU=","bGVu","dmVs","ZXh0ZW50TGF5ZQ==","RXh0ZW50Qml6SQ==","cmVhZE9ubHk=","LnByb3RvYnVm","aW50MzI=","ZG9vcnR5cGU=","R0VPUE9JTlRfTQ==","TmF2aVpvbmU=","ZW50cmFuY2VGbA==","bGVuZ3Ro","ZWxCaXpJbmZv","c3RhaXJMYXllcg==","dG9CaWQ=","R2F0ZQ==","b2Zmc2V0WQ==","Zmlkcw==","aXNTZWxlY3RhYg==","ZmxhZw==","ZXh0ZXJuYWxNbw==","bGlmdEVudHJ5","VklTRUdNRU5U","SW5kZXhJbmZv","ZGF0YQ==","ZGVsQml6SW5mbw==","bWlk","cG9pTGF5ZXI=","bW9kZWxpZA==","cGFja2Vk","dGhyb3VnaA==","bmF2aVNlZ21lbg==","bGlmdExheWVy","cmVwZWF0ZWQ=","ZGVmQ2VuWQ==","b29y","bm9kZUlk","TmF2aU1vZGVs","cmFuaw==","c25vZGU=","cHRz","ZGVmR2lk","aGFzaENvZGU=","bmVzdGVk","Ymlk","cmVxdWlyZWQ=","R0VPTElORV9OQQ==","b2Zmc2V0WA==","TmF2aU5vZGU=","bHR5cGU=","T1ZFUkxBWURBVA==","ZGVmQ2VuWA==","b3B0aW9ucw==","YmFzZUxldmVs","YXJlYQ==","TGF5ZXJHcm91cA==","ZmllbGRz","cGFzcw==","Zmxvb3Jz","SUZU","Rmxvb3JOYXZp","amF2YV9vdXRlcg==","UG9seWdvbkxhYg==","ZW50cmFuY2VUeQ==","VHlwZQ==","bmF2aVpvbmVz","ZWxMYXllcg==","YWxpYXM=","d2lkdGg=","YXllcg==","ZW50cnl0eXBlcw==","TGlmdEJpekluZg==","bm9kZXR5cGVz","amF2YV9wYWNrYQ==","bmF2aVR5cGU=","ZGF0ZVZlcg==","bGlmdEZsYWc=","Z2lk","bWF4WA==","bW5hbWU=","bWluU2NhbGVMZQ==","Zmxvb3JJZA==","X2NsYXNzbmFtZQ==","TW9kZWxCaXpJbg==","Zmxvb3I=","bmFtZQ==","c2NhbGVMZXZlbA==","RXh0ZXJuYWxNbw==","cGdpZA==","ZmlsZVZlcg==","VEFJUg==","bWlubGV2ZWw=","Rmxvb3JDb25maQ==","R2VuZXJhbEdlbw==","ZHJpdmU=","Ym9vbA==","a2V5","R0VPUE9MWUdPTg==","dG9HaWQ=","ZGVmQ2VuWg==","YnR5cGU=","R0VPUE9JTlRfUw==","cC5wbGF0Zm9ybQ==","TmF2aUZsb29y","ZmxvYXQ=","bmF2aUV4dGVudA==","UE9JQml6SW5mbw==","TGFiZWxCaXpJbg==","TGF5ZXI=","cnVsZQ==","bGlk","Y29tLmZlbmdtYQ==","c2NhbGU=","c2VnbWVudElk","ZGVzYw==","ZGVsTGF5ZXI=","R0VPUE9JTlRfUA==","cm90YXRlQW5nbA==","X0xBQkVM","cG9seWdvbkxheQ==","ZmlsZURhdGU=","R0VPUE9JTlRfTA==","U3RhaXJCaXpJbg==","ZXNjYWxhdG9yTA==","bGlua1NlZw==","QnVmZmVy","TmF2aUV4dGVudA==","Z2Vv","R0VPTElORQ==","bmF2aU5vZGVz","cmVqZWN0cw==","UG9seWdvbkJpeg==","aXNWaXNpYmxl","b25zaGlw","YnVmZmVycw==","bWF4bGV2ZWw=","ZG91Ymxl","R0VPUE9JTlRfRQ==","bmF2aQ==","Rmxvb3JCaXo=","Z1Byb3RvQnVm","T0RFTA==","ZW5hbWU=","bW9kZWxMYXllcg==","a2V5cw==","ZWlk","bGF5ZXJz","QU5PUkFNQQ==","UkRFUg==","R0VPUE9JTlQ=","QnVpbGRpbmc=","bWluWA==","TWFw","aGVpZ2h0","c3RyaW5n","dHlwZQ==","ZGVmYXVsdA==","cG9seWdvbkxhYg==","TmF2aVJlbGF0aQ==","dWludDY0","aWR4cw==","SW5mbw==","X0VYVEVOVA=="],wi=i,gi=218;--gi;)wi.push(wi.shift());var _i=mi(function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.id={nested:{protobuf:{options:{java_package:"com.fengmap.platform.protobuf",java_outer_classname:"FloorConfigProtoBuf"},nested:{Map:{fields:{mid:{rule:"required",type:"string",id:1},fileVer:{rule:"required",type:"int32",id:2},dateVer:{rule:"required",type:"uint64",id:3},mname:{rule:"required",type:"string",id:4},hashCode:{rule:"required",type:"string",id:5},key:{type:"string",id:6},fileDate:{type:"string",id:7},desc:{type:"string",id:8},readOnly:{type:"bool",id:9,options:{default:!1}},buffers:{rule:"repeated",type:"Buffer",id:10},keys:{rule:"repeated",type:"string",id:11}},nested:{Buffer:{fields:{gid:{rule:"required",type:"int32",id:1},fileVer:{rule:"required",type:"int32",id:2},btype:{rule:"required",type:"int32",id:3},len:{rule:"required",type:"uint64",id:4},data:{rule:"required",type:"bytes",id:5}}}}},Scene:{fields:{mid:{rule:"required",type:"string",id:19},fileVer:{rule:"required",type:"int32",id:20},dateVer:{rule:"required",type:"uint64",id:21},mname:{rule:"required",type:"string",id:22},hashCode:{rule:"required",type:"string",id:23},key:{type:"string",id:24},desc:{type:"string",id:25},readOnly:{type:"bool",id:26,options:{default:!1}},x:{type:"float",id:1},y:{type:"float",id:2},z:{type:"float",id:3},minX:{type:"float",id:4},minY:{type:"float",id:5},maxX:{type:"float",id:6},maxY:{type:"float",id:7},defGid:{type:"string",id:8},defCenX:{type:"float",id:9},defCenY:{type:"float",id:10},defCenZ:{type:"float",id:11},height:{type:"float",id:12},rotateAngleX:{type:"float",id:13},rotateAngleY:{type:"float",id:14},rotateAngleZ:{type:"float",id:15},scale:{type:"float",id:16},scaleLevel:{type:"string",id:17},naviType:{type:"int32",id:28},layerGroups:{rule:"repeated",type:"LayerGroup",id:18},buildings:{rule:"repeated",type:"Building",id:27}},nested:{Layer:{fields:{lid:{type:"int32",id:1},lname:{type:"string",id:2},alias:{type:"string",id:3},ltype:{type:"Type",id:4},offsetX:{type:"float",id:5},offsetY:{type:"float",id:6},height:{type:"float",id:7},rotateAngleX:{type:"float",id:8},rotateAngleY:{type:"float",id:9},rotateAngleZ:{type:"float",id:10},minScaleLevel:{type:"float",id:11},maxScaleLevel:{type:"float",id:12},isVisible:{type:"bool",id:13},isSelectable:{type:"bool",id:14},isEditable:{type:"bool",id:15},desc:{type:"string",id:16}},nested:{Type:{values:{GEOPOINT:1,GEOPOINT_ESCALATOR:2,GEOPOINT_LIFT:3,GEOPOINT_STAIR:4,GEOPOINT_PANORAMA:5,GEOPOINT_POI:6,GEOPOINT_STORELABEL:7,GEOPOINT_NAVINODE:8,GEOPOINT_MODEL:9,GEOLINE:20,GEOLINE_NAVISEGMENT:21,GEOLINE_BORDER:22,GEOPOLYGON:30,GEOPOLYGON_EXTENT:31,GEOPOLYGON_STORE:32,GEOPOLYGON_LABEL:33,RASTERATA:40,OVERLAYDATA:50}}}},LayerGroup:{fields:{gid:{type:"int32",id:1},gname:{type:"string",id:2},alias:{type:"string",id:3},height:{type:"float",id:4},desc:{type:"string",id:5},layers:{rule:"repeated",type:"Layer",id:6},floorId:{type:"string",id:7},naviType:{type:"int32",id:8}}},Floor:{fields:{gid:{type:"int32",id:1},x:{type:"float",id:2},y:{type:"float",id:3},offsetX:{type:"float",id:4},offsetY:{type:"float",id:5},angle:{type:"float",id:6},scale:{type:"float",id:7},fids:{rule:"repeated",type:"string",id:8},pgid:{type:"int32",id:9},baseLevel:{type:"bool",id:10},minlevel:{type:"int32",id:11},maxlevel:{type:"int32",id:12},floorId:{type:"string",id:13},idxs:{rule:"repeated",type:"IndexInfo",id:14},pts:{rule:"repeated",type:"double",id:15,options:{packed:!1}}},nested:{IndexInfo:{fields:{idxs:{rule:"repeated",type:"int32",id:1,options:{packed:!1}}}}}},Building:{fields:{bid:{type:"string",id:1},name:{type:"string",id:2},ename:{type:"string",id:3},alias:{type:"string",id:4},x:{type:"float",id:5},y:{type:"float",id:6},mid:{type:"string",id:7},version:{type:"int32",id:8},floors:{rule:"repeated",type:"Floor",id:9},bcode:{type:"int32",id:10}}}}},Gate:{fields:{mid:{rule:"required",type:"string",id:1},floors:{rule:"repeated",type:"NaviFloor",id:2}},nested:{NaviFloor:{fields:{gid:{type:"int32",id:1},floorId:{type:"string",id:2},bid:{type:"string",id:3},mid:{type:"string",id:4},navi:{rule:"repeated",type:"NaviRelationship",id:5},drive:{rule:"repeated",type:"NaviRelationship",id:6},accessible:{rule:"repeated",type:"NaviRelationship",id:7}}},NaviRelationship:{fields:{eid:{rule:"required",type:"int32",id:1},type:{type:"int32",id:2},accessible:{type:"int32",id:3},idxs:{rule:"repeated",type:"IndexInfo",id:4},pts:{rule:"repeated",type:"double",id:5,options:{packed:!1}},flag:{type:"int32",id:6},toBid:{rule:"repeated",type:"string",id:7},toGid:{rule:"repeated",type:"string",id:8}},nested:{IndexInfo:{fields:{idxs:{rule:"repeated",type:"int32",id:1,options:{packed:!1}}}}}}}},FloorGeo:{fields:{mid:{rule:"required",type:"string",id:1},gid:{rule:"required",type:"int32",id:2},height:{type:"float",id:3},extentLayer:{rule:"repeated",type:"GeneralGeoInfo",id:4},modelLayer:{rule:"repeated",type:"GeneralGeoInfo",id:5},labelLayer:{rule:"repeated",type:"GeneralGeoInfo",id:6},poiLayer:{rule:"repeated",type:"GeneralGeoInfo",id:7},polygonLayer:{rule:"repeated",type:"GeneralGeoInfo",id:8},polygonLabelLayer:{rule:"repeated",type:"GeneralGeoInfo",id:9},liftLayer:{rule:"repeated",type:"GeneralGeoInfo",id:10},stairLayer:{rule:"repeated",type:"GeneralGeoInfo",id:11},escalatorLayer:{rule:"repeated",type:"GeneralGeoInfo",id:12},externalModelLayer:{rule:"repeated",type:"GeneralGeoInfo",id:13}},nested:{GeneralGeoInfo:{fields:{eid:{rule:"required",type:"int32",id:1},geo:{type:"string",id:2},height:{type:"float",id:3},area:{type:"float",id:4},idxs:{rule:"repeated",type:"IndexInfo",id:5},pts:{rule:"repeated",type:"double",id:6,options:{packed:!1}},baseheight:{type:"float",id:7}},nested:{IndexInfo:{fields:{idxs:{rule:"repeated",type:"int32",id:1,options:{packed:!1}}}}}}}},FloorBiz:{fields:{mid:{rule:"required",type:"string",id:1},gid:{rule:"required",type:"int32",id:2},extentLayer:{rule:"repeated",type:"ExtentBizInfo",id:3},modelLayer:{rule:"repeated",type:"ModelBizInfo",id:4},labelLayer:{rule:"repeated",type:"LabelBizInfo",id:5},poiLayer:{rule:"repeated",type:"POIBizInfo",id:6},polygonLayer:{rule:"repeated",type:"PolygonBizInfo",id:7},liftLayer:{rule:"repeated",type:"LiftBizInfo",id:8},stairLayer:{rule:"repeated",type:"StairBizInfo",id:9},polygonLabelLayer:{rule:"repeated",type:"PolygonLabelBizInfo",id:10},externalModelLayer:{rule:"repeated",type:"ExternalModelBizInfo",id:11}},nested:{ExtentBizInfo:{fields:{eid:{rule:"required",type:"int32",id:1},fid:{type:"string",id:2},type:{type:"int32",id:3},name:{type:"string",id:4},ename:{type:"string",id:5},minlevel:{type:"int32",id:6},maxlevel:{type:"int32",id:7}}},ModelBizInfo:{fields:{eid:{rule:"required",type:"int32",id:1},fid:{type:"string",id:2},type:{type:"int32",id:3},name:{type:"string",id:4},ename:{type:"string",id:5},minlevel:{type:"int32",id:6},maxlevel:{type:"int32",id:7},pass:{type:"int32",id:8}}},LabelBizInfo:{fields:{eid:{rule:"required",type:"int32",id:1},fid:{type:"string",id:2},type:{type:"int32",id:3},name:{type:"string",id:4},ename:{type:"string",id:5},minlevel:{type:"int32",id:6},maxlevel:{type:"int32",id:7}}},PolygonBizInfo:{fields:{eid:{rule:"required",type:"int32",id:1},fid:{type:"string",id:2},type:{type:"int32",id:3},name:{type:"string",id:4},ename:{type:"string",id:5},minlevel:{type:"int32",id:6},maxlevel:{type:"int32",id:7}}},POIBizInfo:{fields:{eid:{rule:"required",type:"int32",id:1},fid:{type:"string",id:2},type:{type:"int32",id:3},name:{type:"string",id:4},ename:{type:"string",id:5},minlevel:{type:"int32",id:6},maxlevel:{type:"int32",id:7}}},LiftBizInfo:{fields:{eid:{rule:"required",type:"int32",id:1},fid:{type:"string",id:2},type:{type:"int32",id:3},flag:{type:"int32",id:4},floor:{type:"string",id:5},minlevel:{type:"int32",id:6},maxlevel:{type:"int32",id:7}}},StairBizInfo:{fields:{eid:{rule:"required",type:"int32",id:1},fid:{type:"string",id:2},type:{type:"int32",id:3},flag:{type:"int32",id:4},minlevel:{type:"int32",id:5},maxlevel:{type:"int32",id:6}}},PolygonLabelBizInfo:{fields:{eid:{rule:"required",type:"int32",id:1},fid:{type:"string",id:2},type:{type:"int32",id:3},width:{type:"float",id:4},name:{type:"string",id:5},ename:{type:"string",id:6},angle:{type:"float",id:7}}},ExternalModelBizInfo:{fields:{eid:{rule:"required",type:"int32",id:1},fid:{type:"string",id:2},type:{type:"int32",id:3},name:{type:"string",id:4},ename:{type:"string",id:5},minlevel:{type:"int32",id:6},maxlevel:{type:"int32",id:7}}}}},FloorNavi:{fields:{mid:{rule:"required",type:"string",id:1},gid:{rule:"required",type:"int32",id:2},naviNodes:{rule:"repeated",type:"NaviNode",id:3},naviSegments:{rule:"repeated",type:"NaviSegment",id:4},naviZones:{rule:"repeated",type:"NaviZone",id:5},naviModels:{rule:"repeated",type:"NaviModel",id:6},nextFloors:{rule:"repeated",type:"int32",id:7,options:{packed:!1}},naviExtents:{rule:"repeated",type:"NaviExtent",id:8}},nested:{NaviNode:{fields:{nodeId:{type:"int32",id:1},nodeType:{type:"int32",id:2},liftType:{type:"int32",id:3},liftFlag:{type:"int32",id:4},liftEntry:{type:"int32",id:5},liftFloor:{type:"string",id:6},linkSeg:{type:"string",id:7},geo:{type:"string",id:8},entranceType:{type:"int32",id:9},entranceFloor:{type:"string",id:10},doortype:{type:"int32",id:11},idxs:{rule:"repeated",type:"int32",id:12,options:{packed:!1}},pts:{rule:"repeated",type:"double",id:13,options:{packed:!1}},accessible:{type:"int32",id:14,options:{default:0}}}},NaviSegment:{fields:{segmentId:{type:"int32",id:1},snode:{type:"int32",id:2},enode:{type:"int32",id:3},length:{type:"double",id:4},rank:{type:"int32",id:5},name:{type:"string",id:6},entry:{type:"int32",id:7},desc:{type:"string",id:8},geo:{type:"string",id:9},through:{type:"int32",id:10},idxs:{rule:"repeated",type:"int32",id:11,options:{packed:!1}},pts:{rule:"repeated",type:"double",id:12,options:{packed:!1}}}},NaviZone:{fields:{id:{rule:"required",type:"int32",id:1},type:{rule:"required",type:"int32",id:2,options:{default:0}},geo:{type:"string",id:3},rejects:{rule:"repeated",type:"string",id:4},idxs:{rule:"repeated",type:"int32",id:5,options:{packed:!1}},pts:{rule:"repeated",type:"double",id:6,options:{packed:!1}}}},NaviModel:{fields:{modelid:{rule:"required",type:"int32",id:1},doorids:{rule:"repeated",type:"int32",id:2,options:{packed:!1}},nodetypes:{rule:"repeated",type:"int32",id:3,options:{packed:!1}},entrytypes:{rule:"repeated",type:"int32",id:4,options:{packed:!1}}}},NaviExtent:{fields:{id:{rule:"required",type:"int32",id:1},pts:{rule:"repeated",type:"double",id:2,options:{packed:!1}},idxs:{rule:"repeated",type:"IndexInfo",id:3}},nested:{IndexInfo:{fields:{idxs:{rule:"repeated",type:"int32",id:1,options:{packed:!1}}}}}}}}}}}}});function ji(t){return(ji="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Si(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){t=function(t,r){if("object"!=ji(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===r?String:Number)(t);i=i.call(t,r||"default");if("object"!=ji(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==ji(t)?t:String(t)}(n.key),n)}}function Oi(t,r,i){return r&&Si(t.prototype,r),i&&Si(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}var i=Oi(function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.Pr=null}),Ei=(Object.assign(i.prototype,{Lr:function(){this.Pr||(this.Pr=di.a.Root.fromJSON((new("undefined"!=typeof KjWzhWlSj&&KjWzhWlSj.ProtoDef?KjWzhWlSj.ProtoDef:_i)).id))},Dr:function(t){return this.Lr(),this.Pr.lookup("Map").decode(t)},Br:function(t){for(var r=0;r<t.buffers.length;r++){var i=t.buffers[r];if(1==i.btype)return this.Fr(i.data)}return null},Gr:function(t){for(var r=0;r<t.buffers.length;r++){var i=t.buffers[r];if(7==i.btype)return this.Cr(i.data)}return null},Ur:function(t,r){for(var i=0;i<t.buffers.length;i++){var n=t.buffers[i];if(2==n.btype&&n.gid==r)return this.Zr(n.data)}return null},Wr:function(t,r){for(var i=0;i<t.buffers.length;i++){var n=t.buffers[i];if(3==n.btype&&n.gid==r)return this.Vr(n.data)}return null},qr:function(t,r){for(var i=0;i<t.buffers.length;i++){var n=t.buffers[i];if(4==n.btype&&n.gid==r)return this.Yr(n.data)}return null},zr:function(t,r){for(var i=0;i<t.buffers.length;i++){var n=t.buffers[i];if(5===n.btype&&n.gid===r)return this.Yr(n.data)}return null},Xr:function(t,r){for(var i=0;i<t.buffers.length;i++){var n=t.buffers[i];if(6===n.btype&&n.gid===r)return this.Yr(n.data)}return null},Fr:function(t){this.Lr();var r=this.Pr.lookup("Scene").decode(t);return r.levels=[],r.layerGroups.forEach(function(t){r.levels.push(t.gid)}),r},Cr:function(t){return this.Lr(),this.Pr.lookup("Gate").decode(t)},Zr:function(t){return this.Lr(),this.Pr.lookup("FloorGeo").decode(t)},Vr:function(t){return this.Lr(),this.Pr.lookup("FloorBiz").decode(t)},Yr:function(t){return this.Lr(),this.Pr.lookup("FloorNavi").decode(t)}}),i);function Ti(t){return(Ti="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ri(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){t=function(t,r){if("object"!=Ti(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===r?String:Number)(t);i=i.call(t,r||"default");if("object"!=Ti(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==Ti(t)?t:String(t)}(n.key),n)}}function Mi(t,r,i){return r&&Ri(t.prototype,r),i&&Ri(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}var Ni,ki,y,Ii,Ai,i=Mi(function t(){var r;if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");l.a.environment===ai.a.WX?this.Hr=new l.a.ProtoReaderStatic:void 0!==ui.a.global().KjWzhWlSj&&ui.a.global().KjWzhWlSj.ProtoReaderStatic?(r=ui.a.global().KjWzhWlSj.ProtoReaderStatic,this.Hr=new r):this.Hr=new Ei}),Pi=(Object.assign(i.prototype,{Dr:function(t){return this.Hr.Dr(t)},Br:function(t){return this.Hr.Br(t)},Gr:function(t){return this.Hr.Gr(t)},Ur:function(t,r){return this.Hr.Ur(t,r)},Wr:function(t,r){return this.Hr.Wr(t,r)},qr:function(t,r){return this.Hr.qr(t,r)},zr:function(t,r){return this.Hr.zr(t,r)},Xr:function(t,r){return this.Hr.Xr(t,r)},Fr:function(t){return this.Hr.Fr(t)},Cr:function(t){return this.Hr.Cr(t)},Zr:function(t){return this.Hr.Zr(t)},Vr:function(t){return this.Hr.Vr(t)},Yr:function(t){return this.Hr.Yr(t)}}),i),i="https://console.fengmap.com/api-s/",xi={domain:i,online:i+"sdk/check",check:i+"sdk/auth/web",download:i+"sdk/auth/obtainMapRoute",downloadTile:i+"sdk/authLayered/obtainMapRoute",collect:i+"sdk/collect",themeUrl:i+"webtheme/",externalModelURL:i+"webmodel/"};function d(t,r){for(var i,n=0,e=0,e=0;e<8;e++)1&r&&(n^=t),i=128&t,t<<=1,i&&(t^=27),r>>=1;return n}function Li(t,r,i){for(var n=0;n<4;n++)t[0+n]^=r[16*i+4*n],t[4+n]^=r[16*i+4*n+1],t[8+n]^=r[16*i+4*n+2],t[12+n]^=r[16*i+4*n+3]}function Di(t){for(var r,i,n,e=1;e<4;e++)for(i=0;i<e;){for(n=t[4*e+4-1],r=3;0<r;r--)t[4*e+r]=t[4*e+r-1];t[4*e+0]=n,i++}}function Bi(t){for(var r,i,n,e=0;e<4;e++)for(r=0;r<4;r++)i=(240&t[4*e+r])>>4,n=15&t[4*e+r],t[4*e+r]=ki[16*i+n]}function Fi(t){for(var r=0;r<4;r++)t[r]=Ni[16*((240&t[r])>>4)+(15&t[r])]}function Gi(t){return parseInt(t,16)}Ni=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],ki=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],Ai=[2,Ii=y=0,0,0];var Ci={decryption:function(t,r){for(var i=Array(16),n=0;n<16;n++)i[n]=16*Gi(r.substr(2*n,1))+Gi(r.substr(2*n+1,1));var e=Array(16);for(n=0;n<16;n++)e[n]=16*Gi(t.substr(2*n,1))+Gi(t.substr(2*n+1,1));var o=Array(16);switch(n=[],i.length){default:case 16:y=4,Ii=10;break;case 24:y=6,Ii=12;break;case 32:y=8,Ii=14}for(var s=n=Array(16*(Ii+1)),u=Array(4),a=4*(Ii+1),f=0;f<y;f++)s[4*f+0]=i[4*f+0],s[4*f+1]=i[4*f+1],s[4*f+2]=i[4*f+2],s[4*f+3]=i[4*f+3];for(f=y;f<a;f++){if(u[0]=s[4*(f-1)+0],u[1]=s[4*(f-1)+1],u[2]=s[4*(f-1)+2],u[3]=s[4*(f-1)+3],0==f%y){for(var h=void 0,l=void 0,h=(i=u)[0],l=0;l<3;l++)i[l]=i[l+1];if(i[3]=h,Fi(u),1==(i=f/y))Ai[0]=1;else if(1<i)for(Ai[0]=2,i--;0<i-1;)Ai[0]=d(Ai[0],2),i--;(l=i=u)[0]=i[0]^(h=Ai)[0],l[1]=i[1]^h[1],l[2]=i[2]^h[2],l[3]=i[3]^h[3]}else 6<y&&4==f%y&&Fi(u);s[4*f+0]=s[4*(f-y)+0]^u[0],s[4*f+1]=s[4*(f-y)+1]^u[1],s[4*f+2]=s[4*(f-y)+2]^u[2],s[4*f+3]=s[4*(f-y)+3]^u[3]}for(s=Array(16),u=0;u<4;u++)for(f=0;f<4;f++)s[4*u+f]=e[u+4*f];for(Li(s,n,Ii),e=Ii-1;1<=e;e--)for(Di(s),Bi(s),Li(s,n,e),u=s,f=[14,9,13,11],a=l=void 0,i=Array(4),h=Array(4),a=0;a<4;a++){for(l=0;l<4;l++)i[l]=u[4*l+a];var l=f,c=i,v=h;for(v[0]=d(l[0],c[0])^d(l[3],c[1])^d(l[2],c[2])^d(l[1],c[3]),v[1]=d(l[1],c[0])^d(l[0],c[1])^d(l[3],c[2])^d(l[2],c[3]),v[2]=d(l[2],c[0])^d(l[1],c[1])^d(l[0],c[2])^d(l[3],c[3]),v[3]=d(l[3],c[0])^d(l[2],c[1])^d(l[1],c[2])^d(l[0],c[3]),l=0;l<4;l++)u[4*l+a]=h[l]}for(Di(s),Bi(s),Li(s,n,0),u=0;u<4;u++)for(f=0;f<4;f++)o[u+4*f]=s[4*u+f];for(e="",n=0;n<16;++n)e+=s=(s=o[n].toString(16)).length<2?"0"+s:s;return e}};function Ui(t,r){var i=(65535&t)+(65535&r);return(t>>16)+(r>>16)+(i>>16)<<16|65535&i}function Zi(t,r,i,n,e,o){return Ui((r=Ui(Ui(r,t),Ui(n,o)))<<e|r>>>32-e,i)}function c(t,r,i,n,e,o,s){return Zi(r&i|~r&n,t,r,e,o,s)}function b(t,r,i,n,e,o,s){return Zi(r&n|i&~n,t,r,e,o,s)}function p(t,r,i,n,e,o,s){return Zi(r^i^n,t,r,e,o,s)}function m(t,r,i,n,e,o,s){return Zi(i^(r|~n),t,r,e,o,s)}function Wi(t,r){t[r>>5]|=128<<r%32,t[14+(r+64>>>9<<4)]=r;for(var i,n,e,o,s=1732584193,u=-271733879,a=-1732584194,f=271733878,h=0;h<t.length;h+=16)s=c(i=s,n=u,e=a,o=f,t[h],7,-680876936),f=c(f,s,u,a,t[h+1],12,-389564586),a=c(a,f,s,u,t[h+2],17,606105819),u=c(u,a,f,s,t[h+3],22,-1044525330),s=c(s,u,a,f,t[h+4],7,-176418897),f=c(f,s,u,a,t[h+5],12,1200080426),a=c(a,f,s,u,t[h+6],17,-1473231341),u=c(u,a,f,s,t[h+7],22,-45705983),s=c(s,u,a,f,t[h+8],7,1770035416),f=c(f,s,u,a,t[h+9],12,-1958414417),a=c(a,f,s,u,t[h+10],17,-42063),u=c(u,a,f,s,t[h+11],22,-1990404162),s=c(s,u,a,f,t[h+12],7,1804603682),f=c(f,s,u,a,t[h+13],12,-40341101),a=c(a,f,s,u,t[h+14],17,-1502002290),s=b(s,u=c(u,a,f,s,t[h+15],22,1236535329),a,f,t[h+1],5,-165796510),f=b(f,s,u,a,t[h+6],9,-1069501632),a=b(a,f,s,u,t[h+11],14,643717713),u=b(u,a,f,s,t[h],20,-373897302),s=b(s,u,a,f,t[h+5],5,-701558691),f=b(f,s,u,a,t[h+10],9,38016083),a=b(a,f,s,u,t[h+15],14,-660478335),u=b(u,a,f,s,t[h+4],20,-405537848),s=b(s,u,a,f,t[h+9],5,568446438),f=b(f,s,u,a,t[h+14],9,-1019803690),a=b(a,f,s,u,t[h+3],14,-187363961),u=b(u,a,f,s,t[h+8],20,1163531501),s=b(s,u,a,f,t[h+13],5,-1444681467),f=b(f,s,u,a,t[h+2],9,-51403784),a=b(a,f,s,u,t[h+7],14,1735328473),s=p(s,u=b(u,a,f,s,t[h+12],20,-1926607734),a,f,t[h+5],4,-378558),f=p(f,s,u,a,t[h+8],11,-2022574463),a=p(a,f,s,u,t[h+11],16,1839030562),u=p(u,a,f,s,t[h+14],23,-35309556),s=p(s,u,a,f,t[h+1],4,-1530992060),f=p(f,s,u,a,t[h+4],11,1272893353),a=p(a,f,s,u,t[h+7],16,-155497632),u=p(u,a,f,s,t[h+10],23,-1094730640),s=p(s,u,a,f,t[h+13],4,681279174),f=p(f,s,u,a,t[h],11,-358537222),a=p(a,f,s,u,t[h+3],16,-722521979),u=p(u,a,f,s,t[h+6],23,76029189),s=p(s,u,a,f,t[h+9],4,-640364487),f=p(f,s,u,a,t[h+12],11,-421815835),a=p(a,f,s,u,t[h+15],16,530742520),s=m(s,u=p(u,a,f,s,t[h+2],23,-995338651),a,f,t[h],6,-198630844),f=m(f,s,u,a,t[h+7],10,1126891415),a=m(a,f,s,u,t[h+14],15,-1416354905),u=m(u,a,f,s,t[h+5],21,-57434055),s=m(s,u,a,f,t[h+12],6,1700485571),f=m(f,s,u,a,t[h+3],10,-1894986606),a=m(a,f,s,u,t[h+10],15,-1051523),u=m(u,a,f,s,t[h+1],21,-2054922799),s=m(s,u,a,f,t[h+8],6,1873313359),f=m(f,s,u,a,t[h+15],10,-30611744),a=m(a,f,s,u,t[h+6],15,-1560198380),u=m(u,a,f,s,t[h+13],21,1309151649),s=m(s,u,a,f,t[h+4],6,-145523070),f=m(f,s,u,a,t[h+11],10,-1120210379),a=m(a,f,s,u,t[h+2],15,718787259),u=m(u,a,f,s,t[h+9],21,-343485551),s=Ui(s,i),u=Ui(u,n),a=Ui(a,e),f=Ui(f,o);return[s,u,a,f]}function Vi(t){for(var r="",i=32*t.length,n=0;n<i;n+=8)r+=String.fromCharCode(t[n>>5]>>>n%32&255);return r}function qi(t){var r=[];for(r[(t.length>>2)-1]=void 0,n=0;n<r.length;n+=1)r[n]=0;for(var i=8*t.length,n=0;n<i;n+=8)r[n>>5]|=(255&t.charCodeAt(n/8))<<n%32;return r}function Yi(t){for(var r,i="0123456789abcdef",n="",e=0;e<t.length;e+=1)r=t.charCodeAt(e),n+=i.charAt(r>>>4&15)+i.charAt(15&r);return n}function zi(t){return unescape(encodeURIComponent(t))}function Xi(t){return Vi(Wi(qi(t=zi(t)),8*t.length))}function Hi(t,r){var i,t=zi(t),r=zi(r),n=qi(t),e=[],o=[];for(e[15]=o[15]=void 0,16<n.length&&(n=Wi(n,8*t.length)),i=0;i<16;i+=1)e[i]=909522486^n[i],o[i]=1549556828^n[i];return t=Wi(e.concat(qi(r)),512+8*r.length),Vi(Wi(o.concat(t),640))}function Qi(t,r,i){return r?i?Hi(r,t):Yi(Hi(r,t)):i?Xi(t):Yi(Xi(t))}var Ki={encryption:function(t){return Qi(t)}};function Ji(t){return(Ji="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $i(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){t=function(t,r){if("object"!=Ji(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===r?String:Number)(t);i=i.call(t,r||"default");if("object"!=Ji(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==Ji(t)?t:String(t)}(n.key),n)}}function tn(t,r,i){return r&&$i(t.prototype,r),i&&$i(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}var rn="0.0.0.0",i=tn(function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function")});Object.assign(i.prototype,{Qr:function(t,r,i,n,e){void 0===l.a.KjWzhWlSj||!l.a.KjWzhWlSj.license||!l.a.KjWzhWlSj.license||"string"==typeof r&&0!=r.length&&(r=Ci.decryption(r,"026685bf295f587b5dffc1f18d5dc27c"),i=Ki.encryption(i),r=Ci.decryption(r,i),-1!==t.indexOf(r))?n&&n():e&&e()},Kr:function(t,r,i,n){var e;-1!==r.indexOf("")||-1!==r.indexOf("aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa")||void 0===t.mapURL||(e=Ki.encryption("fengmap.localhost:"+t.appName),e=Ci.decryption(t.key,e),-1!==r.indexOf(e))?this.Qr(r,t.license,t.buildingID,function(){i&&i()},function(){n&&n(v.LICENSE_ERROR)}):n&&n(v.NAME_KEY_ERROR)},Jr:function(t,r,i){var n=this;void 0!==t.mapURL?r&&r():(t.enableCollect&&this.$r(t),this.ti(function(){new f({method:"POST",url:xi.check,header:{"X-Requested-With":"XMLHttpRequest","Content-type":"application/json;charset=utf-8"},data:n.ri(t)}).Ir(function(){r&&r()},function(t){i&&i(t)},function(){r&&r()})},function(){r&&r()}))},ti:function(t,r){new f({method:"GET",url:xi.online}).Ir(function(){t&&t()},function(){r&&r()},function(){r&&r()})},ri:function(t,r){l.a.environment===ai.a.BROWSER&&-1!==(n=(i=ui.a.global().location.host).indexOf(":"))&&(i=i.slice(0,n));var i,n={mapId:t.buildingID,appName:t.appName};return r?n.keyValue=t.key:n.appKey=t.key,r?n.webUrl=i||rn:n.webURL=i||rn,n},$r:function(t){if("undefined"!=typeof navigator&&"undefined"!=typeof document){var r={};-1!==navigator.userAgent.indexOf("Opera")?r.userAgent="Opera":-1!==navigator.userAgent.indexOf("Firefox")?r.userAgent="FF":-1!==navigator.userAgent.indexOf("Chrome")?r.userAgent="Chrome":-1!==navigator.userAgent.indexOf("Safari")&&0===navigator.userAgent.indexOf("Chrome")?r.userAgent="Safari":-1!==navigator.userAgent.indexOf("compatible")&&-1!==navigator.userAgent.indexOf("MSIE")?r.userAgent="IE":-1!==navigator.userAgent.indexOf("Trident")&&(r.userAgent="Edge"),r.product="JS",r.sdkVersion=R+"."+M,r.appName=t.appName,r.appkey=t.key;for(var t=l.a.document.createElement("canvas").getContext("experimental-webgl"),i=t.getExtension("WEBGL_debug_renderer_info"),n=(r.gpu=i?t.getParameter(i.UNMASKED_RENDERER_WEBGL):null,r.os=navigator.platform,!0),e=navigator.userAgent,o=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],s=0;s<o.length;s++)if(0<e.indexOf(o[s])){n=!1;break}r.device=n?"pc":"mobile",new f({method:"POST",url:xi.collect,header:{"X-Requested-With":"XMLHttpRequest","Content-type":"application/json;charset=utf-8"},data:r}).Ir()}}});var nn=new i;function en(t){return(en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function on(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){t=function(t,r){if("object"!=en(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===r?String:Number)(t);i=i.call(t,r||"default");if("object"!=en(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==en(t)?t:String(t)}(n.key),n)}}function sn(t,r,i){return r&&on(t.prototype,r),i&&on(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}var i=sn(function t(){var r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=this,n=t;if(!(i instanceof n))throw new TypeError("Cannot call a class as a function");this.ii=r.disposeCallback,this.ni=!1,this.ei=!1,this.oi=void 0!==r.enable&&r.enable,this.name=void 0!==r.name?r.name:"",this.si=new Map,this.ui=r.mapCreateTime}),un=(Object.assign(i.prototype,{ai:function(){!this.oi||this.ei||this.ni&&0===this.si.size&&(this.ii({mapCreateTime:this.ui}),this.ei=!0)},fi:function(t){this.oi&&(this.ni=t,this.ai())},li:function(t){this.oi&&(this.si.has(t),this.si.set(t,0))},ci:function(t){this.oi&&this.si.has(t)&&(this.si.delete(t),this.ai())}}),i);function an(t){return(an="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fn(t){return function(t){if(Array.isArray(t))return hn(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){var i;if(t)return"string"==typeof t?hn(t,r):"Map"===(i="Object"===(i=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?hn(t,r):void 0}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hn(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,n=new Array(r);i<r;i++)n[i]=t[i];return n}function ln(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){t=function(t,r){if("object"!=an(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===r?String:Number)(t);i=i.call(t,r||"default");if("object"!=an(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==an(t)?t:String(t)}(n.key),n)}}function cn(t,r,i){return r&&ln(t.prototype,r),i&&ln(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}var i=cn(function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.Hr=new Pi,this.vi=[],this.yi=new un({enable:!0,name:"DataManager"})}),vn=(Object.assign(i.prototype,{Ar:function(t){var r=this;this.yi.ii=t,this.vi.forEach(function(t){200!==t.kr.status&&r.yi.ci(t.Nr.url),t.Ar()}),this.vi.length=0,this.yi.fi(!0)},di:function(t,r,i,n){var e;t.mapURL?(e=t.isPreview?t.isOutdoor?t.tile?t.mapURL+t.buildingID+"/separate/"+t.buildingID+r+".fmap":t.mapURL+t.buildingID+"/"+t.buildingID+r+".fmap":t.tile?t.mapURL+t.mapID+"/"+t.bid+"/"+t.buildingID+"/separate/"+t.buildingID+r+".fmap":t.mapURL+t.mapID+"/"+t.bid+"/"+t.buildingID+"/"+t.buildingID+r+".fmap":t.mapURLAbsolute?t.mapURL+t.buildingID+r+".fmap":t.isOutdoor?t.mapURL+t.buildingID+"/"+t.buildingID+r+".fmap":t.mapURL+t.mapID+"/"+t.bid+"/"+t.buildingID+"/"+t.buildingID+r+".fmap",i&&i(e)):(e={newFlag:"2",keyType:3,isSeparate:!1},t.isOutdoor||(e.bId=t.bid,e.rootMid=t.mapID),r=new f({method:"POST",url:""===r?xi.download:xi.downloadTile+"/"+t.buildingID+r+".fmap",header:{"X-Requested-With":"XMLHttpRequest","Content-type":"application/json;charset=utf-8"},data:Object.assign(e,nn.ri(t,!0))}),this.vi.push(r),r.Ir(function(t){i&&i(t.replace('"',"").replace('"',""))},function(t){n&&n(t)},function(t){n&&n(t)}))},bi:function(n,e,o){var s=this;n.enableCollect=!0,nn.Jr(n,function(){s.di(n,"",function(i){var t=new f({method:"GET",responseType:"arraybuffer",url:i});s.vi.push(t),s.yi.li(i),t.Ir(function(t){s.yi.ci(i);var t=new Uint8Array(t),r=s.Hr.Dr(t);!n.isOutdoor||(t=[],r.keys&&0!==r.keys.length?t.push.apply(t,fn(r.keys)):t.push(r.key),n.isPreview)?e&&e(r):nn.Kr(n,t,function(){e&&e(r)},function(t){o&&o(t)})},function(t){o&&o(t===v.PATH_ERROR?v.MAP_ID_URL_ERROR:t),s.yi.ci(i)},function(t){o&&o(t),s.yi.ci(i)})},function(t){o&&o(t)})},function(t){o&&o(t)})},pi:function(n,e,o){var s=this;n.enableCollect=!0,nn.Jr(n,function(){s.di(n,".scene",function(i){s.yi.li(i);var t=new f({method:"GET",responseType:"arraybuffer",url:i});s.vi.push(t),t.Ir(function(t){var t=new Uint8Array(t),r=s.Hr.Fr(t);s.yi.ci(i),!n.isOutdoor||(t=[],r.keys&&0!==r.keys.length?t.push.apply(t,fn(r.keys)):t.push(r.key),n.isPreview)?e&&e(r):nn.Kr(n,t,function(){e&&e(r)},function(t){o&&o(t)})},function(t){o&&o(t),s.yi.ci(i)},function(t){o&&o(t),s.yi.ci(i)})},function(t){o&&o(t)})},function(t){o&&o(t)})},mi:function(t,i,n){var e=this;this.di(t,".gate",function(r){e.yi.li(r);var t=new f({method:"GET",responseType:"arraybuffer",url:r});e.vi.push(t),t.Ir(function(t){t=new Uint8Array(t),t=e.Hr.Cr(t);i&&i(t),e.yi.ci(r)},function(t){n&&n(t),e.yi.ci(r)},function(t){n&&n(t),e.yi.ci(r)})},function(t){n&&n(t)})},wi:function(t,r,i,n){var e=this;this.di(t,".floor."+r+".geo",function(r){var t=new f({method:"GET",responseType:"arraybuffer",url:r});e.yi.li(r),e.vi.push(t),t.Ir(function(t){t=new Uint8Array(t),t=e.Hr.Zr(t);i&&i(t),e.yi.ci(r)},function(t){n&&n(t),e.yi.ci(r)},function(t){n&&n(t),e.yi.ci(r)})},function(t){n&&n(t)})},gi:function(t,r,i,n){var e=this;this.di(t,".floor."+r+".biz",function(r){var t=new f({method:"GET",responseType:"arraybuffer",url:r});e.yi.li(r),e.vi.push(t),t.Ir(function(t){t=new Uint8Array(t),t=e.Hr.Vr(t);i&&i(t),e.yi.ci(r)},function(t){n&&n(t),e.yi.ci(r)},function(t){n&&n(t),e.yi.ci(r)})},function(t){n&&n(t)})},_i:function(t,r,i,n){var e=this;this.di(t,r,function(r){var t=new f({method:"GET",responseType:"arraybuffer",url:r});e.yi.li(r),e.vi.push(t),t.Ir(function(t){t=new Uint8Array(t),t=e.Hr.Yr(t);i&&i(t),e.yi.ci(r)},function(t){n&&n(t),e.yi.ci(r)})},function(t){n&&n(t)},function(t){n&&n(t)})},ji:function(t,r,i,n){this._i(t,".floor."+r+".navi",i,n)},Si:function(t,r,i,n){this._i(t,".floor."+r+".drive.navi",i,n)},Oi:function(t,r,i,n){this._i(t,".floor."+r+".accessible.navi",i,n)}}),i);function yn(t){for(var r=[],i=t.length,n=0;n<i;n++){for(var e=t[n],o={x:this.Ei(e.x),y:this.Ei(e.y)},s=r.length,u=!1,a=0;a<s;a++){var f=r[a];if(f.x==o.x&&f.y==o.y){u=!0;break}}u||r.push(o)}return r}function dn(t){return+t.toFixed(2)}function bn(t){return(bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pn(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){t=function(t,r){if("object"!=bn(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===r?String:Number)(t);i=i.call(t,r||"default");if("object"!=bn(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==bn(t)?t:String(t)}(n.key),n)}}function mn(t,r,i){return r&&pn(t.prototype,r),i&&pn(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}i=mn(function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function")});Object.assign(i.prototype,{Ti:function(t,r){for(var i=[],n=0,e=0;e<t.length;e++){var o=t[e].idxs;if("number"==typeof(o=o||t[e]))for(;n<o;)i.push({x:r[n],y:r[n+1]}),n+=2;else for(var s=0;s<o.length;s++)for(var u=o[s];n<u;)i.push({x:r[n],y:r[n+1]}),n+=2}return i},Ri:function(t,r){for(var i=[],n=0,e=0;e<t.length;e++){var o=t[e].idxs;if("number"==typeof(o=o||t[e])){for(var s=[];n<o;)s.push({x:r[n],y:r[n+1]}),n+=2;i.push(s)}else for(var u=0;u<o.length;u++){for(var a=o[u],f=[];n<a;)f.push({x:r[n],y:r[n+1]}),n+=2;i.push(f)}}return i},Mi:function(t,r){for(var i=[],n=[],e=0,o=0;o<t.length;o++){var s=t[o].idxs;if("number"==typeof(s=s||t[o]))for(;e<s;)i.push({x:r[e],y:r[e+1]}),e+=2;else for(var u=0;u<s.length;u++)if(0===u)for(var a=s[u];e<a;)i.push({x:r[e],y:r[e+1]}),e+=2;else{for(var f=[],h=s[u];e<h;)f.push({x:r[e],y:r[e+1]}),e+=2;n.push(f)}}var l=[];return l.push(i),l.push.apply(l,n),l},Ni:function(t){return yn(t)},Ei:dn});var wn=new i;function gn(t){return(gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _n(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){t=function(t,r){if("object"!=gn(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===r?String:Number)(t);i=i.call(t,r||"default");if("object"!=gn(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==gn(t)?t:String(t)}(n.key),n)}}function jn(t,r,i){return r&&_n(t.prototype,r),i&&_n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}var h={G1:"MULTIPOLYGON(((",G2:"POINT(",G3:"MULTILINESTRING(("},i=(h.GLEN1="MULTIPOLYGON(((".length,h.GLEN2="POINT(".length,h.GLEN3="MULTILINESTRING((".length,jn(function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function")}));Object.assign(i.prototype,{Ti:function(t){var r=[];return 0!=t.indexOf(h.G2)?[]:(t=t.substring(h.GLEN2,t.length-1).split(" "),r.push({x:parseFloat(t[0]),y:parseFloat(t[1])}),r)},ki:function(t,r){for(var i=0;i<t.length;i++){var n=t[i].split(" ");r.push({x:parseFloat(n[0]),y:parseFloat(n[1])})}},Ri:function(t){return 0!=t.indexOf(h.G3)?[]:(t=t.substring(h.GLEN3,t.length-2).split(","),this.ki(t,t=[]),[t])},Mi:function(t){var r=[],i=[];if(0!=t.indexOf(h.G1))return[];for(var n=t.substring(h.GLEN1,t.length-3).split(/\),\(/),e=0;e<n.length;e++){var o=n[e].split(/,/);if(0==e)this.ki(o,r);else{for(var s=[],u=0;u<o.length;u++){var a=o[u].split(" ");s.push({x:parseFloat(a[0]),y:parseFloat(a[1])})}i.push(s)}}t=[];return t.push(r),t.push.apply(t,i),t},Ni:function(t){return yn(t)},Ei:dn});var Sn=new i,i={STOP:0,PASS:1,PUSH:2},On=(Object.freeze(i),i);function En(t,r){var i,n,e,o,s="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(s)return n=!(i=!0),{s:function(){s=s.call(t)},n:function(){var t=s.next();return i=t.done,t},e:function(t){n=!0,e=t},f:function(){try{i||null==s.return||s.return()}finally{if(n)throw e}}};if(Array.isArray(t)||(s=function(t,r){var i;if(t)return"string"==typeof t?Tn(t,r):"Map"===(i="Object"===(i=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Tn(t,r):void 0}(t))||r&&t&&"number"==typeof t.length)return s&&(t=s),o=0,{s:r=function(){},n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:r};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Tn(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,n=new Array(r);i<r;i++)n[i]=t[i];return n}function Rn(t){return(Rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mn(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){t=function(t,r){if("object"!=Rn(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===r?String:Number)(t);i=i.call(t,r||"default");if("object"!=Rn(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==Rn(t)?t:String(t)}(n.key),n)}}var i=function(){function r(t){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");this.Sr=g.GROUP,this.Ii=new Map,this.Ai=-1,this.sr=null,Object.assign(this,t)}var t,i,n;return t=r,(i=[{key:"getType",value:function(){return this.Sr}},{key:"getBound",value:function(){return this.sr||this.Pi(),this.sr}},{key:"getChildren",value:function(){return this.Ii}}])&&Mn(t.prototype,i),n&&Mn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),r}(),Nn=(Object.assign(i.prototype,{Ar:function(){var t,r=En(this.Ii.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;i.Ar&&i.Ar()}}catch(t){r.e(t)}finally{r.f()}this.Ii.clear()},xi:function(r){var t=r._support(this);t==On.PASS?this.Ii.forEach(function(t){t.xi(r)}):t==On.PUSH&&r.Li.push(this)},Pi:function(){var r=this;this.sr=new lr,0!=this.Ii.size&&this.Ii.forEach(function(t){r.sr.ir(t.getBound())})}}),i);function kn(t){return(kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function In(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){t=function(t,r){if("object"!=kn(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===r?String:Number)(t);i=i.call(t,r||"default");if("object"!=kn(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==kn(t)?t:String(t)}(n.key),n)}}var i=function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.Ai=-1,this.Sr=g.NONE,this.Di=null,this.sr=null}var r,i,n;return r=t,(i=[{key:"getType",value:function(){return this.Sr}},{key:"getCoordinates",value:function(){return this.Di}},{key:"getBound",value:function(){return this.sr||this.Pi(),this.sr}}])&&In(r.prototype,i),n&&In(r,n),Object.defineProperty(r,"prototype",{writable:!1}),t}(),An=(Object.assign(i.prototype,{Ar:function(){},xi:function(t){t._support(this)==On.PUSH&&t.Li.push(this)}}),i);function Pn(t){return(Pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xn(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){t=function(t,r){if("object"!=Pn(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===r?String:Number)(t);i=i.call(t,r||"default");if("object"!=Pn(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==Pn(t)?t:String(t)}(n.key),n)}}function Ln(t,r,i){r=Bn(r);var n=t,r=Dn()?Reflect.construct(r,i||[],Bn(t).constructor):r.apply(t,i);if(r&&("object"===Pn(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return Fn(n)}function Dn(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Dn=function(){return!!t})()}function Bn(t){return(Bn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Fn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Gn(t,r){return(Gn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t})(t,r)}var i=function(){var t,r,i=e,n=An;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");function e(t){var r;if(this instanceof e)return(r=Ln(this,e)).Ai=t.eid,r.Sr=g.POINT,Object.assign(Fn(r),t),r;throw new TypeError("Cannot call a class as a function")}return i.prototype=Object.create(n&&n.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),n&&Gn(i,n),i=e,t&&xn(i.prototype,t),r&&xn(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(),Cn=(Object.assign(i.prototype,{Pi:function(){this.sr=new lr,this.Di&&this.sr.nr(this.Di)},xi:function(t){t._support(this)==On.PUSH&&t.Li.push(this)}}),i);function Un(t){return(Un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zn(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){t=function(t,r){if("object"!=Un(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===r?String:Number)(t);i=i.call(t,r||"default");if("object"!=Un(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==Un(t)?t:String(t)}(n.key),n)}}function Wn(t,r,i){r=qn(r);var n=t,r=Vn()?Reflect.construct(r,i||[],qn(t).constructor):r.apply(t,i);if(r&&("object"===Un(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return Yn(n)}function Vn(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Vn=function(){return!!t})()}function qn(t){return(qn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Yn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zn(t,r){return(zn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t})(t,r)}var i=function(){var t,r=n,i=An;if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");function n(t){var r;if(this instanceof n)return(r=Wn(this,n)).Ai=t.eid,r.Sr=g.POLYGON,Object.assign(Yn(r),t),r;throw new TypeError("Cannot call a class as a function")}return r.prototype=Object.create(i&&i.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),i&&zn(r,i),r=n,(i=[{key:"getCenter",value:function(){return this.cr}}])&&Zn(r.prototype,i),t&&Zn(r,t),Object.defineProperty(r,"prototype",{writable:!1}),n}(),Xn=(Object.assign(i.prototype,{Pi:function(){var r=this;this.sr=new lr,this.Di&&this.Di.forEach(function(t){r.sr.nr(t)})},xi:function(t){t._support(this)==On.PUSH&&t.Li.push(this)}}),i);function Hn(t){return(Hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Qn=["layerGroups"],Kn=["layers"];function Jn(t,r){if(null==t)return{};var i,n=function(t,r){if(null==t)return{};var i,n,e={},o=Object.keys(t);for(n=0;n<o.length;n++)i=o[n],0<=r.indexOf(i)||(e[i]=t[i]);return e}(t,r);if(Object.getOwnPropertySymbols)for(var e=Object.getOwnPropertySymbols(t),o=0;o<e.length;o++)i=e[o],0<=r.indexOf(i)||Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i]);return n}function $n(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){t=function(t,r){if("object"!=Hn(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===r?String:Number)(t);i=i.call(t,r||"default");if("object"!=Hn(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==Hn(t)?t:String(t)}(n.key),n)}}function te(t,r,i){return r&&$n(t.prototype,r),i&&$n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}var i=te(function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.Bi=[1,2,3,4],this.Fi=[6,7,9],this.Gi=[31,32],this.Ci=new Map,this.Ci.set(31,g.EXTENTGROUP),this.Ci.set(32,g.MODELGROUP),this.Ci.set(6,g.FACILITYGROUP),this.Ci.set(7,g.LABELGROUP),this.Ci.set(9,g.EXTERNALMODELGROUP),this.Ui=new Map,this.Ui.set(31,["extentLayer",null]),this.Ui.set(32,["modelLayer","labelLayer"]),this.Ui.set(6,["poiLayer",null]),this.Ui.set(7,["labelLayer",null]),this.Ui.set(9,["externalModelLayer",null]),this.Hr=new Pi}),re=(Object.assign(i.prototype,{Zi:function(t){var r;return t?(r=t.scene,this.Wi(r,t)):null},Wi:function(t,i){var n=this,r=t.layerGroups,e=Jn(t,Qn),o=t.fileVer,s=new Nn(e);return r.forEach(function(t){var r=n.Vi(t,i,o);s.Ii.set(t.gid,r)}),s},Vi:function(t,r,i){var n=this,e=t.layers,o=Jn(t,Kn),s=new Nn(o),u=r&&r.floors?r.floors.get(t.gid).geo[0]:null,a=r&&r.floors?r.floors.get(t.gid).biz[0]:null;return e.forEach(function(t){6===t.ltype&&-1!==t.lname.indexOf("storelabel")&&(t.ltype=7);var r=n.qi(t,u,a,i);null!==r&&s.Ii.set(n.Ci.get(t.ltype),r)}),this.Yi(s),s},Yi:function(t){var r=Array.from(t.Ii);r.sort(function(t,r){return t[0]-r[0]}),t.Ii=new Map(r)},qi:function(t,r,i,n){var e;return-1===this.Bi.indexOf(t.ltype)&&this.Ui.get(t.ltype)?(e=new Nn(t),this.zi(e,r,i,n),e&&(e.Sr=this.Ci.get(t.ltype)),e):null},zi:function(t,r,i,n){if(t){var e=this.Ui.get(t.ltype);if(e){var o=r?r[e[0]]:[],s=i?i[e[0]]:[];switch(t.ltype){case 6:this.Xi(t,o,s,n,g.FACILITY);break;case 7:this.Xi(t,o,s,n,g.LABEL);break;case 9:this.Xi(t,o,s,n,g.EXTERNALMODEL);break;case 31:this.Hi(t,o,s,n,g.EXTENT,null);break;case 32:this.Hi(t,o,s,n,g.MODEL,r?r[e[1]]:null)}}}},Xi:function(t,r,i,n,e){for(var o=0;o<r.length;o++){var s=this.Qi(r[o],i[o],n);s.Sr=e,t.Ii.set(r[o].eid,s)}},Qi:function(t,r,i){r=Object.assign({},r,{area:t.area,eid:t.eid,height:t.height}),r=new Cn(r);return t.coordinates?r.Di=t.coordinates:(r.Di=1==i?Sn.Ti(t.geo):wn.Ti(t.idxs,t.pts),t.coordinates=r.Di),r},Hi:function(t,r,i,n,e,o){for(var s=0;s<r.length;s++){var u=this.Ki(r[s],i[s],n,o?o[s]:null);u.Sr=e,t.Ii.set(r[s].eid,u)}},Ki:function(t,r,i,n){r=Object.assign({},r,{area:t.area,eid:t.eid,height:t.height,baseheight:t.baseheight}),r=new Xn(r);return r.Di=1===i?Sn.Mi(t.geo):wn.Mi(t.idxs,t.pts),n&&(n.coordinates||(n.coordinates=1===i?Sn.Ti(n.geo):wn.Ti(n.idxs,n.pts)),r.cr=n.coordinates[0]),r}}),i),ie={NONE_RODE_NETWORK:1,WALK_RODE_NETWORK:2,DRIVE_RODE_NETWORK:4,ACCESSIBLE_RODE_NETWORK:8};function ne(t){return(ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ee(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){t=function(t,r){if("object"!=ne(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===r?String:Number)(t);i=i.call(t,r||"default");if("object"!=ne(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==ne(t)?t:String(t)}(n.key),n)}}for(var i=function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.Ji=new Map,this.$i=new Map,this.Nr=new Map,this.tn=new Map,this.rn=new Map,this.nn=new Map,this.sn=[2,3],this.un=!1,this.Hr=new Pi,this.an=new re,this.hn=new vn}var r,i,n;return r=t,(i=[{key:"load",value:function(t,r){this.ln(t,r)}},{key:"loadWhole",value:function(t,r){this.cn(t,r)}},{key:"getDecode",value:function(t){t=void 0!==t.buildingID?t.buildingID:t.mapID;return this.vn({buildingID:t})}},{key:"getData",value:function(t){t=void 0!==t.buildingID?t.buildingID:t.mapID;return this.Ji.get(t)}},{key:"setCache",value:function(t){this.Ji=t[0],this.$i=t[1]}},{key:"getCache",value:function(){return[this.Ji,this.$i]}}])&&ee(r.prototype,i),n&&ee(r,n),Object.defineProperty(r,"prototype",{writable:!1}),t}(),oe=(Object.assign(i.prototype,{Ar:function(t){this.hn.Ar(t),this.yn()},yn:function(){this.Ji.clear(),this.Ji=null,this.$i.clear(),this.$i=null,this.Nr.clear(),this.Nr=null,this.tn.clear(),this.tn=null,this.rn.clear(),this.rn=null,this.nn.clear(),this.nn=null,this._delayDisposeCallback&&this._delayDisposeCallback({name:"DataManager"})},dn:function(t){this.tn.set(t.buildingID+t.uuid,null),this.rn.set(t.buildingID+t.uuid,null),this.nn.set(t.buildingID+t.uuid,0)},ln:function(u,a){var f=this;this.dn(u),this.pi(u,function(r,t){a&&a(r,t);var s=f.bn(u),t=u.loadNavi&&s.buildings&&0<s.buildings.length;f.mi(u,t,function(t,r){a&&a(t,r);for(var i=void 0!==u.level?u.level:parseInt(s.defGid),n=(f.pn(u,i,a),u.visibleLevels||s.levels),e=0;e<n.length;e++)n[e]===i||s.levels.indexOf(n[e])<0||f.pn(u,n[e],a);if(u.preLoad)for(var o=0;o<s.levels.length;o++)s.levels[o]!==i&&-1===n.indexOf(s.levels[o])&&f.pn(u,s.levels[o],a)},function(t){a&&a(r,t)})},function(t,r){a&&a(t,r)})},mi:function(i,t,n,e){var o=this;t?(t=this.mn(i))?n&&n("gate",t):this.hn.mi(i,function(t){o.$i.get(i.buildingID).gate=t,n&&n("gate",t)},function(t){var r;i.navigationData?((r=o.$i.get(i.buildingID)).gate=i.navigationData,n&&n("gate",r.gate)):e("error",t)}):n&&n("gate",null)},pi:function(r,i,n){var e=this,t=this.bn(r);t?(i&&i("scene",t),r.justDecode||(t=this.Ji.get(r.buildingID),i&&i("building",t))):this.hn.pi(r,function(t){r.isOutdoor&&e.wn(t),e.$i.set(r.buildingID,{scene:t}),i&&i("scene",t),r.justDecode||(t=e.an.Wi(t),e.Ji.set(r.buildingID,t),i&&i("building",t))},function(t){n&&n("error",t===v.PATH_ERROR?v.MAP_ID_URL_ERROR:t)})},wn:function(t){var r=t.fileVer;t.buildings&&1<r&&t.buildings.forEach(function(r){r.floors&&(r.levelChart=[],r.fids=[],r.floors.forEach(function(t){t.Di=wn.Mi(t.idxs,t.pts),t.pgid&&r.levelChart.push(t.pgid,t.gid),t.baseLevel&&(r.minlevel=t.minlevel,r.maxlevel=t.maxlevel),t.fids&&r.fids.push.apply(r.fids,t.fids)}))})},pn:function(t,r,i,n){var e=this.tn.get(t.buildingID+t.uuid);e||this.tn.set(t.buildingID+t.uuid,e=[]),n?e.unshift(r):e.push(r),this.un&&1!==e.length||this.gn(t,i)},gn:function(n,e){var o,t,s,u=this,a=this.bn(n);a&&(o=this.tn.get(n.buildingID+n.uuid))&&0!==o.length&&((t=this.rn.get(n.buildingID+n.uuid))||this.rn.set(n.buildingID+n.uuid,t=[]),s=o[0],-1!==t.indexOf(s)?(o.splice(o.indexOf(s),1),this.gn(n,e)):(t.push(s),this._n(n,s,function(t,r){var i=u.nn.get(n.buildingID+n.uuid);"layerGroup"===t&&(e&&e(t,r),u.nn.set(n.buildingID+n.uuid,++i),i===a.layerGroups.length&&e&&e("decode",u.vn(n)),o.splice(o.indexOf(s),1),u.gn(n,e)),"layer"===t&&e&&e(t,r),"floor"===t&&(e&&e(t,r),i===a.layerGroups.length)&&e&&e("complete",u.jn(n))},function(t,r){e&&e(t,r)})))},_n:function(e,o,s,r){var t,u,a,f,h,i,n=this,l=this.bn(e),c=this.Sn(l,o);c?(t=c.gname,c=c.naviType||0,u=this.sn[0],a=0,f=new Map,h=e.merge,i=function(r){var i,n,t;u===++a&&(i=f.get("geo"),n=f.get("biz"),h&&h.merge(o,i,n,l.fileVer),s&&s("layerGroup",f),e.justDecode||((t=r.On(e,o)).Ii.forEach(function(t){r.an.zi(t,i,n,l.fileVer),s&&s("layer",t)}),s&&s("floor",t)))},e.loadNavi&&((0!=(c&ie.WALK_RODE_NETWORK)||l.fileVer<3)&&(u++,this.ji(e,o,t,function(t,r){f.set(t,r),s&&s(t,r),i(n)},function(t){r&&r(t)})),0!=(c&ie.DRIVE_RODE_NETWORK)&&(u++,this.Si(e,o,t,function(t,r){f.set(t,r),s&&s(t,r),i(n)},function(t){r&&r(t)})),0!=(c&ie.ACCESSIBLE_RODE_NETWORK))&&(u++,this.Oi(e,o,t,function(t,r){f.set(t,r),s&&s(t,r),i(n)},function(t){r&&r(t)})),this.wi(e,o,t,function(t,r){f.set(t,r),s&&s(t,r),i(n)},function(t){r&&r(t)}),this.gi(e,o,t,function(t,r){f.set(t,r),s&&s(t,r),i(n)},function(t){r&&r(t)})):r&&r("error",v.DEFAULT_LEVEL_ERROR)},wi:function(r,i,t,n,e){var o=this,s=this.En(r,i,"geo");s?n&&n("geo",s):this.hn.wi(r,t,function(t){o.Tn(r,i,"geo",t),n&&n("geo",t)},function(t){e&&e("error",t)})},gi:function(r,i,t,n,e){var o=this,s=this.En(r,i,"biz");s?n&&n("biz",s):this.hn.gi(r,t,function(t){o.Tn(r,i,"biz",t),n&&n("biz",t)},function(t){e&&e("error",t)})},ji:function(r,i,t,n,e){var o=this,s=this.En(r,i,"navi");s?n&&n("navi",s):this.hn.ji(r,t,function(t){o.Tn(r,i,"navi",t),n&&n("navi",t)},function(t){e&&e("error",t)})},Si:function(r,i,t,n,e){var o=this,s=this.En(r,i,"drive_navi");s?n&&n("drive_navi",s):this.hn.Si(r,t,function(t){o.Tn(r,i,"drive_navi",t),n&&n("drive_navi",t)},function(t){e&&e("error",t)})},Oi:function(r,i,t,n,e){var o=this,s=this.En(r,i,"accessible_navi");s?n&&n("drive_navi",s):this.hn.Oi(r,t,function(t){o.Tn(r,i,"accessible_navi",t),n&&n("accessible_navi",t)},function(t){e&&e("error",t)})},cn:function(t,i){this.bi(t,function(t,r){i&&i(t,r)},function(t,r){i&&i(t,r)})},bi:function(r,i,n){var e=this,o=this.vn(r);o?i&&i("decode",o):this.hn.bi(r,function(t){e.Rn(r,t),o=e.vn(r),i&&i("decode",o),r.justDecode||(t=e.an.Zi(o),e.Ji.set(r.buildingID,t),i&&i("complete",t))},function(t){n&&n("error",t)})},jn:function(t){if(this.Ji)return this.Ji.get(t.buildingID)||null},On:function(t,r){t=this.Ji.get(t.buildingID);return t?t.Ii.get(r):null},Rn:function(t,r){var i={scene:null,floors:new Map},n=this.Hr.Br(r);t.isOutdoor&&this.wn(n),i.scene=n,i.gate=this.Hr.Gr(r);for(var e=0;e<n.layerGroups.length;e++){var o=n.layerGroups[e],s=this.Hr.Ur(r,o.gid),u=this.Hr.Wr(r,o.gid),a=this.Hr.qr(r,o.gid),f=this.Hr.zr(r,o.gid),h=this.Hr.Xr(r,o.gid),l=(t.merge&&t.merge.merge(o.gid,s,u,n.fileVer),new Map);l.set("geo",s),l.set("biz",u),l.set("navi",a),l.set("drive_navi",f),l.set("accessible_navi",h),i.floors.set(o.gid,l)}this.$i.set(t.buildingID,i)},vn:function(t){var r=this.$i.get(t.buildingID);if(!r)return null;for(var i=r.scene,r=r.gate,n=new Map,r={scene:i,floors:n,gate:r},e=0;e<i.layerGroups.length;e++){var o=i.layerGroups[e],s=o.gid,u={gid:s,gname:o.gname,level:s,geo:[],biz:[],navi:[],naviDrive:[],naviAccessible:[]},a=(u.geo.push(this.En(t,s,"geo")),u.biz.push(this.En(t,s,"biz")),this.En(t,s,"navi")),a=(a&&u.navi.push(a),this.En(t,s,"drive_navi")),a=(a&&u.naviDrive.push(a),this.En(t,s,"accessible_navi"));a&&u.naviAccessible.push(a),n.set(o.gid,u)}return r},bn:function(t){t=this.$i.get(t.buildingID);return t?t.scene:null},mn:function(t){t=this.$i.get(t.buildingID);return t?t.gate:null},Tn:function(t,r,i,n){var e,t=this.$i.get(t.buildingID);t&&((e=t.floors)||(e=new Map,t.floors=e),(t=e.get(r))||(t=new Map,e.set(r,t)),t.set(i,n))},En:function(t,r,i){var t=this.$i.get(t.buildingID);return(t=t&&t.floors)&&(t=t.get(r))?t.get(i):null},Sn:function(t,r){if(null!=t)for(var i=t.layerGroups,n=0;n<i.length;n++)if(i[n].gid==r)return i[n];return null}}),i),e=[],se=0;se<256;se++)e[se]=(se<16?"0":"")+se.toString(16);var ue={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t=4294967295*Math.random()|0,r=4294967295*Math.random()|0,i=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(e[255&t]+e[t>>8&255]+e[t>>16&255]+e[t>>24&255]+"-"+e[255&r]+e[r>>8&255]+"-"+e[r>>16&15|64]+e[r>>24&255]+"-"+e[63&i|128]+e[i>>8&255]+"-"+e[i>>16&255]+e[i>>24&255]+e[255&n]+e[n>>8&255]+e[n>>16&255]+e[n>>24&255]).toUpperCase()},clamp:function(t,r,i){return Math.max(r,Math.min(i,t))},euclideanModulo:function(t,r){return(t%r+r)%r},mapLinear:function(t,r,i,n,e){return n+(t-r)*(e-n)/(i-r)},lerp:function(t,r,i){return(1-i)*t+i*r},smoothstep:function(t,r,i){return t<=r?0:i<=t?1:(t=(t-r)/(i-r))*t*(3-2*t)},smootherstep:function(t,r,i){return t<=r?0:i<=t?1:(t=(t-r)/(i-r))*t*t*(t*(6*t-15)+10)},randInt:function(t,r){return t+Math.floor(Math.random()*(r-t+1))},randFloat:function(t,r){return t+Math.random()*(r-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*ue.DEG2RAD},radToDeg:function(t){return t*ue.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,r,i,n,e){var o=Math.cos,s=Math.sin,u=o(i/2),i=s(i/2),a=o((r+n)/2),f=s((r+n)/2),h=o((r-n)/2),l=s((r-n)/2),o=o((n-r)/2),s=s((n-r)/2);"XYX"===e?t.set(u*f,i*h,i*l,u*a):"YZY"===e?t.set(i*l,u*f,i*h,u*a):"ZXZ"===e?t.set(i*h,i*l,u*f,u*a):"XZX"===e?t.set(u*f,i*s,i*o,u*a):"YXY"===e?t.set(i*o,u*f,i*s,u*a):"ZYZ"===e?t.set(i*s,i*o,u*f,u*a):console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order.")}},ae={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},n={h:0,s:0,l:0},fe={h:0,s:0,l:0};function he(t,r,i){return void 0===r&&void 0===i?this.set(t):this.setRGB(t,r,i)}function le(t,r,i){return i<0&&(i+=1),1<i&&--i,i<1/6?t+6*(r-t)*i:i<.5?r:i<2/3?t+6*(r-t)*(2/3-i):t}function ce(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function ve(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}function ye(t){return(ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function de(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){t=function(t,r){if("object"!=ye(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===r?String:Number)(t);i=i.call(t,r||"default");if("object"!=ye(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==ye(t)?t:String(t)}(n.key),n)}}Object.assign(he.prototype,{isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},setScalar:function(t){return this.r=t,this.g=t,this.b=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,r,i){return this.r=t,this.g=r,this.b=i,this},setHSL:function(t,r,i){return t=ue.euclideanModulo(t,1),r=ue.clamp(r,0,1),i=ue.clamp(i,0,1),0===r?this.r=this.g=this.b=i:(this.r=le(r=2*i-(i=i<=.5?i*(1+r):i+r-i*r),i,t+1/3),this.g=le(r,i,t),this.b=le(r,i,t-1/3)),this},setStyle:function(r){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+r+" will be ignored.")}if(a=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(r)){var i,n,e,o,s=a[1],u=a[2];switch(s){case"rgb":case"rgba":if(i=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(u))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,t(i[5]),this;if(i=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(u))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,t(i[5]),this;break;case"hsl":case"hsla":if(i=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(u))return n=parseFloat(i[1])/360,e=parseInt(i[2],10)/100,o=parseInt(i[3],10)/100,t(i[5]),this.setHSL(n,e,o)}}else if(a=/^\#([A-Fa-f0-9]+)$/.exec(r)){var s=a[1],a=s.length;if(3===a)return this.r=parseInt(s.charAt(0)+s.charAt(0),16)/255,this.g=parseInt(s.charAt(1)+s.charAt(1),16)/255,this.b=parseInt(s.charAt(2)+s.charAt(2),16)/255,this;if(6===a)return this.r=parseInt(s.charAt(0)+s.charAt(1),16)/255,this.g=parseInt(s.charAt(2)+s.charAt(3),16)/255,this.b=parseInt(s.charAt(4)+s.charAt(5),16)/255,this}return r&&0<r.length?this.setColorName(r):this},setColorName:function(t){var r=ae[t];return void 0!==r?this.setHex(r):console.warn("THREE.Color: Unknown color "+t),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,r){return void 0===r&&(r=2),this.r=Math.pow(t.r,r),this.g=Math.pow(t.g,r),this.b=Math.pow(t.b,r),this},copyLinearToGamma:function(t,r){r=0<(r=void 0===r?2:r)?1/r:1;return this.r=Math.pow(t.r,r),this.g=Math.pow(t.g,r),this.b=Math.pow(t.b,r),this},convertGammaToLinear:function(t){return this.copyGammaToLinear(this,t),this},convertLinearToGamma:function(t){return this.copyLinearToGamma(this,t),this},copySRGBToLinear:function(t){return this.r=ce(t.r),this.g=ce(t.g),this.b=ce(t.b),this},copyLinearToSRGB:function(t){return this.r=ve(t.r),this.g=ve(t.g),this.b=ve(t.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){void 0===t&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});var r,i=this.r,n=this.g,e=this.b,o=Math.max(i,n,e),s=Math.min(i,n,e),u=(s+o)/2;if(s===o)f=r=0;else{var a=o-s,f=u<=.5?a/(o+s):a/(2-o-s);switch(o){case i:r=(n-e)/a+(n<e?6:0);break;case n:r=(e-i)/a+2;break;case e:r=(i-n)/a+4}r/=6}return t.h=r,t.s=f,t.l=u,t},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(t,r,i){return this.getHSL(n),n.h+=t,n.s+=r,n.l+=i,this.setHSL(n.h,n.s,n.l),this},add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,r){return this.r=t.r+r.r,this.g=t.g+r.g,this.b=t.b+r.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,r){return this.r+=(t.r-this.r)*r,this.g+=(t.g-this.g)*r,this.b+=(t.b-this.b)*r,this},lerpHSL:function(t,r){this.getHSL(n),t.getHSL(fe);var t=ue.lerp(n.h,fe.h,r),i=ue.lerp(n.s,fe.s,r),r=ue.lerp(n.l,fe.l,r);return this.setHSL(t,i,r),this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,r){return this.r=t[r=void 0===r?0:r],this.g=t[r+1],this.b=t[r+2],this},toArray:function(t,r){return(t=void 0===t?[]:t)[r=void 0===r?0:r]=this.r,t[r+1]=this.g,t[r+2]=this.b,t}}),he.NAMES=ae;var be=function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function")}var r,i,n;return r=t,n=[{key:"round",value:function(t){return 0<t.toFixed(2)?Math.ceil(t.toFixed(2)):Math.floor(t.toFixed(2))}},{key:"generateUUID",value:function(){for(var t=[],r=0;r<256;r++)t[r]=(r<16?"0":"")+r.toString(16);var i=4294967295*Math.random()|0,n=4294967295*Math.random()|0,e=4294967295*Math.random()|0,o=4294967295*Math.random()|0,i=t[255&i]+t[i>>8&255]+t[i>>16&255]+t[i>>24&255]+"-"+t[255&n]+t[n>>8&255]+"-"+t[n>>16&15|64]+t[n>>24&255]+"-"+t[63&e|128]+t[e>>8&255]+"-"+t[e>>16&255]+t[e>>24&255]+t[255&o]+t[o>>8&255]+t[o>>16&255]+t[o>>24&255];return t.length=0,i.toUpperCase()}},{key:"findNearNthPowerOfTwo",value:function(t){t-=1;return(t=(t=(t=(t=(t|=t>>1)|t>>2)|t>>4)|t>>8)|t>>16)<0?1:1+t}},{key:"rgbToArray",value:function(t){var r=new he;return r.setStyle(t),[r.r,r.g,r.b]}},{key:"toRgba",value:function(t){var r;return void 0===t?t:"number"!=typeof t?3<=(r=t.split(",")).length?"rgba("+parseInt(r[0])+","+parseInt(r[1])+","+parseInt(r[2])+",1)":t:"rgba("+parseInt(255*new he(t).r)+","+parseInt(255*new he(t).g)+","+parseInt(255*new he(t).b)+",1)"}},{key:"toColor",value:function(t){var r;return"number"==typeof t?t:3<=(r=t.split(",")).length?parseInt(r[0])<<16|parseInt(r[1])<<8|parseInt(r[2]):(console.error("color format error",t),0)}},{key:"cov",value:function(t){for(var r=[],i=[0,0],n=[],e=0;e<t.length;e++)i[0]+=t[e].x,i[1]+=t[e].y;i[0]=i[0]/t.length,i[1]=i[1]/t.length;for(var o=0;o<t.length;o++)n.push([t[o].x-i[0],t[o].y-i[1]]);for(var s=[],u=0;u<n[0].length;u++){for(var a=[],f=0;f<n.length;f++)a.push(n[f][u]);s.push(a)}for(var h=0;h<s.length;h++){for(var l=[],c=0;c<n[0].length;c++){for(var v=0,y=0;y<s[h].length;y++)v+=s[h][y]*n[y][c];v/=t.length-1,l.push(v)}r.push(l)}return r}},{key:"eig",value:function(t){var r=(t[0][0]+t[1][1])/2,i=t[0][0]*t[1][1]-t[1][0]*t[0][1],n=r+Math.sqrt(r*r-i),r=r-Math.sqrt(r*r-i);return 0==t[0][1]&&0==t[1][0]?{eigValue:[n,r],eigVect:[[1,0],[0,1]]}:(i=(n-t[0][0])/t[0][1],t=(r-t[0][0])/t[0][1],{eigValue:[n,r],eigVect:[[1/Math.sqrt(1+i*i),i/Math.sqrt(1+i*i)],[1/Math.sqrt(1+t*t),t/Math.sqrt(1+t*t)]]})}}],(i=null)&&de(r.prototype,i),n&&de(r,n),Object.defineProperty(r,"prototype",{writable:!1}),t}();function pe(t,r){var i,n,e,o,s="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(s)return n=!(i=!0),{s:function(){s=s.call(t)},n:function(){var t=s.next();return i=t.done,t},e:function(t){n=!0,e=t},f:function(){try{i||null==s.return||s.return()}finally{if(n)throw e}}};if(Array.isArray(t)||(s=function(t,r){var i;if(t)return"string"==typeof t?me(t,r):"Map"===(i="Object"===(i=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?me(t,r):void 0}(t))||r&&t&&"number"==typeof t.length)return s&&(t=s),o=0,{s:r=function(){},n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:r};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function me(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,n=new Array(r);i<r;i++)n[i]=t[i];return n}function we(t){return(we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ge(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){t=function(t,r){if("object"!=we(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===r?String:Number)(t);i=i.call(t,r||"default");if("object"!=we(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==we(t)?t:String(t)}(n.key),n)}}var i=function(){function n(t,r,i){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");this.Nr=Object.assign({tile:!0,isPreview:!1},t),this.Nr.buildingID=t.mapID,this.Mn=!!t.map,this.Nn=t.map?t.map.getDataManager():new oe,this.Mr=[],this.kn={},this.In=t.statistics||null,this.An=r,this.Pn=i,this.xn=be.generateUUID(),this.Ln()}var t,r,i;return t=n,(r=[{key:"dispose",value:function(){this.Nr=null,this.Mn||this.Nn.Ar(),this.Nn=null,this.An=null,this.Pn=null}},{key:"query",value:function(t,r){if(this.Dn(),null===t.buildings){for(var i=[],n=0;n<this.Mr.length;n++)i.push({buildingID:this.Mr[n].bid});t.buildings=i}var e=[];if(!t.onlyInBuilding){t.buildingID=this.Nr.mapID,null===t.buildingID&&(t.buildingID=this.Nr.mapID);for(var o=this.Bn(t),s=0;s<o.length;s++)o[s].buildingID=null,e.push(o[s])}for(var u=t.buildings,a=0;a<u.length;a++)for(var f=this.Fn(u[a].buildingID),h=(t.buildingID=f,t.levels=u[a].levels,this.Bn(t)),l=0;l<h.length;l++)h[l].buildingID=u[a].buildingID,e.push(h[l]);r&&r(e)}}])&&ge(t.prototype,r),i&&ge(t,i),Object.defineProperty(t,"prototype",{writable:!1}),n}(),it=(Object.assign(i.prototype,{Ln:function(){this.Mr=[],this.Mn&&(t=this.Nr.map.getMapOptions(),this.Nr.mapID=t.mapID,this.Nr.buildingID=t.mapID,this.Nr.appName=t.appName,this.Nr.key=t.key,this.Nr.license=t.license,this.Nr.mapURL=t.mapURL,this.Nr.mapURLAbsolute=t.mapURLAbsolute,this.Nr.buildings=t.buildings,this.Nr.buildingOptions=t.buildingOptions,this.Nr.isPreview="undefined"!=typeof KjWzhWlSj&&!!KjWzhWlSj.ProtoDef,this.Nr.tile=t.tile);var t={mapID:this.Nr.mapID,buildingID:this.Nr.mapID,appName:this.Nr.appName,key:this.Nr.key,buildings:this.Nr.buildings,license:this.Nr.license,mapURL:this.Nr.mapURL,mapURLAbsolute:this.Nr.mapURLAbsolute,merge:this.Nr.merge,tile:this.Nr.tile,preLoad:!0,isPreview:"undefined"!=typeof KjWzhWlSj&&!!KjWzhWlSj.ProtoDef,uuid:this.xn,bid:this.Nr.buildingID||null,isOutdoor:!0};this.Gn(t)},Gn:function(i){var n=this;setTimeout(function(){n.Nr.tile?n.Nn.load(i,function(t,r){n.Cn(t,r,i.isOutdoor),n.In&&n.In._analyse(t,r,i)}):n.Nn.loadWhole(i,function(t,r){n.Cn(t,r,i.isOutdoor),n.In&&n.In._analyse(t,r,i)})},0)},Dn:function(){if(!(0<this.Mr.length)){var t=this.Nr.mapID,r=this.Nn.getData({buildingID:t});if(r&&r.buildings)for(var i=0;i<r.buildings.length;i++)this.Mr.push(r.buildings[i])}},Cn:function(t,r,i){if("error"==t&&this.Pn&&this.Pn(r),"decode"===t){if(i&&(this.kn[""+r.scene.mid]=!1,r.scene.buildings)&&0<r.scene.buildings.length)for(var n=0;n<r.scene.buildings.length;n++){var e=r.scene.buildings[n],o={mapID:this.Nr.mapID,buildingID:null,appName:this.Nr.appName,key:this.Nr.key,license:this.Nr.license,mapURL:this.Nr.mapURL,mapURLAbsolute:this.Nr.mapURLAbsolute,merge:this.Nr.merge,loadNavi:!0,preLoad:!0,isPreview:"undefined"!=typeof KjWzhWlSj,tile:this.Nr.tile,type:this.Nr.type,bid:null,isOutdoor:!1,uuid:this.xn},o=(o.buildingID=e.mid,o.bid=e.bid,Object.assign({},o));this.kn[""+e.mid]=!1,this.Gn(o)}if(this.Mn&&!this.Nr.tile){var s,u=this.kn[""+r.scene.mid]=!0;for(s in this.kn)this.kn[s]||(u=!1);u&&this.An&&this.An()}}if("complete"==t){var a,f=this.kn[""+r.mid]=!0;for(a in this.kn)this.kn[a]||(f=!1);f&&this.An&&this.An()}},Un:function(t){var r=g.NONE;return 0!=(t.Sr&g.MODEL)&&(r|=g.MODELGROUP),0!=(t.Sr&g.LABEL)&&(r|=g.LABELGROUP),0!=(t.Sr&g.FACILITY)&&(r|=g.FACILITYGROUP),0!=(t.Sr&g.EXTERNALMODEL)&&(r|=g.EXTERNALMODELGROUP),r},Zn:function(t){if(Array.isArray(t.jr))return t.jr;var r=this.Nr,t=(null!==t.buildingID&&(r={buildingID:t.buildingID,mapID:t.buildingID}),this.Nn.getData(r));if(!t)return[];var i,n=[],e=pe(t.getChildren());try{for(e.s();!(i=e.n()).done;){var o=i.value;n.push(o[1].gid)}}catch(t){e.e(t)}finally{e.f()}return n},Wn:function(t,r,i,n){if(0!=r)for(var e=0;e<r;e++){if(!t[e].X(i))return!1;t[e].H(i,n)}return!0},Vn:function(t,r,i){return{level:t,type:r.getType(),FID:r.fid,name:r.name,ename:r.ename,eid:r.eid,typeID:r.type,center:void 0!==r.getCenter?Object.assign({z:r.height},r.getCenter()):Object.assign({z:r.height},r.getCoordinates()[0]),distance:i.wt}},qn:function(t){t.sort(function(t,r){return t.level==r.level&&t.type==r.type&&t.distance&&r.distance?t.distance-r.distance:0})},Bn:function(t,r,i){var n=this.Nr,n=(null!==t.buildingID&&(n={buildingID:t.buildingID,mapID:t.buildingID}),this.Nn.getData(n));if(!n)return[];var e=this.Zn(t),o=this.Un(t);if(o===g.NONE)return[];var s,u=t.Tr,a=u.length,f=[],h=pe(n.getChildren());try{for(h.s();!(s=h.n()).done;){var l=s.value,c=l[0];if(-1!==e.indexOf(c)){var v,y=pe(l[1].getChildren());try{for(y.s();!(v=y.n()).done;){var d=v.value[1];if(0!=(d.getType()&o)){var b,p=pe(d.getChildren());try{for(p.s();!(b=p.n()).done;){var m=b.value[1],w={wt:void 0};this.Wn(u,a,m,w)&&f.push(this.Vn(c,m,w))}}catch(t){p.e(t)}finally{p.f()}}}}catch(t){y.e(t)}finally{y.f()}}}}catch(t){h.e(t)}finally{h.f()}return f},Fn:function(t){for(var r=null,i=this.Mr,n=0;n<i.length;n++)if(i[n].bid===t){r=i[n].mid;break}return r}}),{NaviNodeType_NULL:-1,NaviNodeType_COMMON:0,NaviNodeType_SIDE:1,NaviNodeType_FLOOR:2,NaviNodeType_EXTENT:3,NaviLiftType_NULL:0,NaviLiftType_Lift:1,NaviLiftType_Stair:2,NaviLiftType_Escalator:3,NaviLiftType_Accessible:4,NaviLiftType_Ramp:5,NaviLiftEntry_BOTH:0,NaviLiftEntry_UP:1,NaviLiftEntry_DOWN:2,NaviLiftEntry_FORBID:3,NaviEntranceType_NULL:0,NaviEntranceType_EXIT:1,NaviEntranceType_ENTRANCE:2,NaviEntranceType_ACCESS:3,NaviRoadRank_MAIN:1,NaviRoadRank_MINOR:2,NaviRoadRank_NARROW:3,NaviRoadEntry_BOTH:0,NaviRoadEntry_FORWARD:1,NaviRoadEntry_BACK:2,NaviRoadEntry_FORBID:3,NaviRoadPass_NULL:-1,NaviRoadPass_NOT_THROUGH:0,NaviRoadPass_THROUGH:1,NaviZoneType_NULL:-1,NaviZoneType_PASS_UNRESTRAINT:0,NaviZoneType_PASS_THROUGH:1,NaviZoneType_PASS_NOT_THROUGH:2,NaviZoneType_NO_ENTRY:3,NaviZoneType_CORRIDOR:4,NaviModelPassType_PASS_THROUGH:0,NaviModelPassType_PASS_NOT_THROUGH:1,NaviModelPassType_NOT_PASS:2,NaviModelPassType_DECORATE:3,NaviRoadHinderType_HINDER_GENERAL:0,NaviRoadHinderType_HINDER_HIGH:1,NaviObstructType_MODEL:0,NaviObstructType_EXTENT:1}),O={Drive:1,Walk:0},_e={Entry_BOTH:0,Entry_FORWARD:1,Entry_BACK:2,Entry_FORBID:3};function je(t){return(je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Se(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){t=function(t,r){if("object"!=je(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===r?String:Number)(t);i=i.call(t,r||"default");if("object"!=je(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==je(t)?t:String(t)}(n.key),n)}}var o=function(){function e(t,r,i,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.Yn=t,this.zn=r,this.Xn=i||[],this.Hn=n||[]}var t,r,i;return t=e,(r=[{key:"level",get:function(){return this.Yn}},{key:"length",get:function(){return this.zn}},{key:"pointList",get:function(){for(var t=[],r=0,i=this.Xn.length;r<i;r++)t.push({x:this.Xn[r].x,y:this.Xn[r].y,level:this.Yn});return t}}])&&Se(t.prototype,r),i&&Se(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Oe=(Object.assign(o.prototype,{Ar:function(){this.Xn=[],this.Hn=[]}}),o);function Ee(t){return(Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Te(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){t=function(t,r){if("object"!=Ee(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===r?String:Number)(t);i=i.call(t,r||"default");if("object"!=Ee(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==Ee(t)?t:String(t)}(n.key),n)}}var Z=function(){function o(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=this,e=o;if(!(n instanceof e))throw new TypeError("Cannot call a class as a function");Object.defineProperty(this,"isVector3",{value:!0}),this.x=t,this.y=r,this.z=i}var t,r,i;return t=o,(r=[{key:"set",value:function(t,r,i){return void 0===i&&(i=this.z),this.x=t,this.y=r,this.z=i,this}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}},{key:"sub",value:function(t,r){return void 0!==r?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,r)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}},{key:"subVectors",value:function(t,r){return this.x=t.x-r.x,this.y=t.y-r.y,this.z=t.z-r.z,this}},{key:"multiplyScalar",value:function(t){return this.x*=t,this.y*=t,this.z*=t,this}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y+this.z*t.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"cross",value:function(t,r){return void 0!==r?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,r)):this.crossVectors(this,t)}},{key:"crossVectors",value:function(t,r){var i=t.x,n=t.y,t=t.z,e=r.x,o=r.y,r=r.z;return this.x=n*r-t*o,this.y=t*e-i*r,this.z=i*o-n*e,this}},{key:"angleTo",value:function(t){var r=Math.sqrt(this.lengthSq()*t.lengthSq());return 0===r?Math.PI/2:(t=this.dot(t)/r,r=Math.max(-1,Math.min(1,t)),Math.acos(r))}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"divideScalar",value:function(t){return this.multiplyScalar(1/t)}}])&&Te(t.prototype,r),i&&Te(t,i),Object.defineProperty(t,"prototype",{writable:!1}),o}();function Re(t){return(Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Me(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){t=function(t,r){if("object"!=Re(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===r?String:Number)(t);i=i.call(t,r||"default");if("object"!=Re(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==Re(t)?t:String(t)}(n.key),n)}}function Ne(t,r,i){return r&&Me(t.prototype,r),i&&Me(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}var o=Ne(function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.Ai=0,this.pr={},this.Sr=0,this.Qn=[],this.Kn=[],this.Jn=0,this.$n=[],this.te=!1,this.re=!1,this.ie=0,this.ne=!1,this.ee=[]}),P=(Object.assign(o.prototype,{set oe(t){-1!=t&&(this.Sr|=t)},get oe(){return 3&this.Sr},set se(t){this.Sr|=t<<2},get se(){return this.Sr>>2&7},set ue(t){this.Sr|=t<<5},get ue(){return this.Sr>>5&3},Ln:function(t){this.Ai=t,this.pr={x:0,y:0},this.Sr=0,this.Jn=0,this.te=!1,this.re=!1},ae:function(t){return this.Ai==t.Ai},fe:function(t){this.Ai=t.Ai,this.pr=Object.assign({},t.pr),this.Sr=t.Sr,this.Qn=[];for(var r=0;r<t.Qn.length;r++)this.Qn[r]=t.Qn[r];this.Kn=[];for(var i=0;i<t.Kn.length;i++)this.Kn[i]=t.Kn[i];this.Jn=t.Jn,this.$n=[];for(var n=0;n<t.$n.length;n++)this.$n[n]=t.$n[n];this.te=t.te,this.re=t.re}}),o);function ke(t){return(ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ie(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){t=function(t,r){if("object"!=ke(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===r?String:Number)(t);i=i.call(t,r||"default");if("object"!=ke(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==ke(t)?t:String(t)}(n.key),n)}}function Ae(t,r,i){r=xe(r);var n=t,r=Pe()?Reflect.construct(r,i||[],xe(t).constructor):r.apply(t,i);if(r&&("object"===ke(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");t=n;if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}function Pe(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Pe=function(){return!!t})()}function xe(t){return(xe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Le(t,r){return(Le=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t})(t,r)}var De=function(){var t,r,i=e,n=P;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");function e(){var t;if(this instanceof e)return(t=Ae(this,e)).he=0,t.Yn=0,t.le=null,t.ie=0,t.ce=null,t.se=null,t;throw new TypeError("Cannot call a class as a function")}return i.prototype=Object.create(n&&n.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),n&&Le(i,n),i=e,t&&Ie(i.prototype,t),r&&Ie(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}();function Be(t){return(Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fe(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){t=function(t,r){if("object"!=Be(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===r?String:Number)(t);i=i.call(t,r||"default");if("object"!=Be(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==Be(t)?t:String(t)}(n.key),n)}}function Ge(t,r,i){return r&&Fe(t.prototype,r),i&&Fe(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}var o=Ge(function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.Ai=0,this.ve=-1,this.Ht={},this.ye=-1,this.Qt={},this.zn=0,this.Sr=0,this.de=[],this.be=-1,this.pe=!1,this.me=0}),x=(Object.assign(o.prototype,{set we(t){this.Sr|=t},get we(){return 3&this.Sr},set ge(t){this.Sr|=t<<2},get ge(){return this.Sr>>2&3},set _e(t){this.Sr|=t<<4},get _e(){return this.Sr>>4&3},set je(t){t?this.Sr|=16:this.Sr&=-17},get je(){return 16&this.Sr?1:0},Se:function(t){this.Ai=t.Ai,this.ve=t.ve,this.Ht=Object.assign({},t.Ht),this.ye=t.ye,this.Qt=Object.assign({},t.Qt),this.zn=t.zn,this.Sr=t.Sr,this.de=[],this.be=t.be;for(var r=0;r<t.de.zn;r++)this.de[r]=t.de[r]},Oe:function(){this.zn=rt.distanceOfTwoPoints(this.Ht,this.Qt)},Ee:function(){var t=this.Ht.x-this.Qt.x,r=this.Ht.y-this.Qt.y;this.zn=Math.abs(t)+Math.abs(r)},Te:function(){var t={};return t.x=(this.Ht.x+this.Qt.x)/2,t.y=(this.Ht.y+this.Qt.y)/2,t}}),o);function Ce(t){return(Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ue(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){t=function(t,r){if("object"!=Ce(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===r?String:Number)(t);i=i.call(t,r||"default");if("object"!=Ce(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==Ce(t)?t:String(t)}(n.key),n)}}var o=function(){function e(t,r,i,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.Ai=t,this.Yn=r||-1,this.Sr=i,this.mr=n,this.Re=n&&n.length?n.length-1:0,this.Me=0,this.Ne=null,this.ke=null,this.Ie=[],this.Ae=[],this.Pe=null,this.sr=new lr,this.sr.nr(this.mr)}var t,r,i;return t=e,(r=[{key:"_pass",get:function(){return 3&this.Sr},set:function(t){this.Sr|=t}},{key:"_area",get:function(){return null==this.Pe&&(this.Pe=rt.Et(this.mr,this.Re)),this.Pe}},{key:"bound",get:function(){return this.sr}}])&&Ue(t.prototype,r),i&&Ue(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Ze=(Object.assign(o.prototype,{xe:function(t){return!!rt.ct(t,this.sr.tr,this.sr.rr)&&rt.dt(this.mr,t,this.Re)},Tt:function(t,r){for(var i={},n=0;n<this.Re;n++){var e=this.mr[n],o=this.mr[(n+1)%this.Re];if(1==rt.Tt(e,o,t,r,i))break}return i}}),o);function We(t){return(We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ve(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){t=function(t,r){if("object"!=We(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===r?String:Number)(t);i=i.call(t,r||"default");if("object"!=We(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==We(t)?t:String(t)}(n.key),n)}}var o=function(){function s(t,r,i,n,e,o){if(!(this instanceof s))throw new TypeError("Cannot call a class as a function");this.Ai=t,this.Le="",this.mr=n,this.Re=n&&n.length?n.length-1:0,this.cr=e,this.De=o,this.Sr=i,this.Yn=r,this.Be=[],this.Fe=[],this.Ge=[],this.Ne=null,this.ke=null,this.Ie=[],this.Ce=0,this.Me=0,this.Pe=null,this.Ue=!1,this.sr=new lr,this.sr.nr(this.mr)}var t,r,i;return t=s,(r=[{key:"pass",get:function(){return 3&this.Sr},set:function(t){this.Sr|=t}},{key:"area",get:function(){return null==this.Pe&&(this.Pe=rt.Et(this.mr,this.Re)),this.Pe}},{key:"bound",get:function(){return this.sr}}])&&Ve(t.prototype,r),i&&Ve(t,i),Object.defineProperty(t,"prototype",{writable:!1}),s}(),qe=(Object.assign(o.prototype,{xe:function(t){if(this.De)for(var r=0;r<this.De.length;r++)if(rt.dt(t,this.De[r],this.De[r].length-1))return!1;return rt.dt(t,this.mr,this.Re)},toZone:function(){return new Ze(this.Ai,this.Yn,this.Sr,this.mr)}}),o);function Ye(t){return(Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ze(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){t=function(t,r){if("object"!=Ye(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===r?String:Number)(t);i=i.call(t,r||"default");if("object"!=Ye(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==Ye(t)?t:String(t)}(n.key),n)}}function Xe(t,r,i){r=Qe(r);var n=t,r=He()?Reflect.construct(r,i||[],Qe(t).constructor):r.apply(t,i);if(r&&("object"===Ye(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");t=n;if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}function He(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(He=function(){return!!t})()}function Qe(t){return(Qe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ke(t,r){return(Ke=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t})(t,r)}var o=function(){var t,r,i=e,n=P;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");function e(){var t;if(this instanceof e)return(t=Xe(this,e)).Yn=0,t.be=-1,t.Ze=[],t.le=null,t;throw new TypeError("Cannot call a class as a function")}return i.prototype=Object.create(n&&n.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),n&&Ke(i,n),i=e,t&&ze(i.prototype,t),r&&ze(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}(),Je=(Object.assign(o.prototype,{We:function(t,r,i){if(!t)return[];var n=[];i=i||this.Ze;for(var e=0;e<i.length;e++){var o=i[e];t==o.se&&(r&&(o.ie=o.ie+r),n.push(o))}return n}}),o);function $e(t){return($e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function to(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){t=function(t,r){if("object"!=$e(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===r?String:Number)(t);i=i.call(t,r||"default");if("object"!=$e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==$e(t)?t:String(t)}(n.key),n)}}var ro=function(){function e(t,r,i,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.Yn=0,this.Sr=n,this.Ve=t,this.qe=r,this.Ye=[],this.ze=[],this.Xe=[],this.He=[],this.Qe=new Map,this.Ke=new Map,this.Je=[],this.$e=new Map,this.ro=new Map,this.io=0,this.no=0,this.eo()}var t,r,i;return t=e,(r=[{key:"queryContainIdOfExtent",value:function(t){return this.oo(t)}},{key:"queryContainExtentID",value:function(t){return this.so(t)}}])&&to(t.prototype,r),i&&to(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}(),L=(Object.assign(ro.prototype,{Ar:function(){this.Ve=null,this.qe=null,this.Ye=null,this.ze=null,this.Xe=null,(this.He=null)!=this.Qe&&(this.Qe.clear(),this.Qe=null),null!=this.Ke&&(this.Ke.clear(),this.Ke=null),(this.Je=null)!=this.$e&&(this.$e.clear(),this.$e=null),null!=this.ro&&(this.ro.clear(),this.ro=null)},uo:function(){this.He=[];for(var t=0;t<this.ze.length;t++){var r=this.ze[t].toZone();this.He.push(r)}for(var i=0;i<this.Ye.length;i++){var n=this.ze[i].toZone();this.He.push(n)}},ao:function(t){for(var r=0;r<this.He.length;r++){var i=this.He[r];if(i&&i.Ai==t)return i}return null},fo:function(t){for(var r=0;r<this.He.length;r++){var i=this.He[r];if(i&&1==i.contain(t))return i}return null},oo:function(t){if(0!==this.ze.length&&t)for(var r=0,i=this.ze.length;r<i;r++){var n=this.ze[r];if(n.xe(t))return n.Ai}return 0},so:function(t){if(0!==this.ze.length&&t)for(var r=0,i=this.ze.length;r<i;r++){var n=this.ze[r];if(n.xe(t))return n.be}return 0},ho:function(t,r){if(0!=this.Xe.length&&t&&r)for(var i=0;i<this.Xe.length;i++)if(this.Xe[i].isCross(t,r))return!0;return!1},eo:function(){this.io=0;for(var t=this.no=0;t<this.qe.length;)null==this.qe[t]?this.qe.splice(t,1):(this.qe[t].Ai>this.no&&(this.no=this.qe[t].Ai),t++);for(var r=0;r<this.Ve.length;)null==this.Ve[r]?this.Ve.splice(r,1):(this.Ve[r].Ai>this.io&&(this.io=this.Ve[r].Ai),r++)},co:function(t){t=this.$e.get(t);return void 0===t?null:t},vo:function(t){t=this.ro.get(t);return void 0===t?null:t},yo:function(t){for(var r=Number.MAX_VALUE,i=null,n=0;n<this.ze.length;++n){var e=this.ze[n];e.contain(t)&&e.area<r&&(r=cur_area,i=e)}for(var o=0;o<this.Ye.size();++o){var s=this.Ye[o];s.contain(t)&&s.area<r&&(r=cur_area,i=s)}return i||null},do:function(t){for(var r=Number.MAX_VALUE,i=null,n=0;n<this.Ye.length;++n){var e=this.Ye[n];e.xe(t)&&e.area<r&&(r=e.area,i=e)}return i||null},bo:function(){return++this.io},po:function(){return++this.no},mo:function(t){this.io=t},wo:function(t){this.no=t},_o:function(){for(var t=0;t<this.Ve.length;t++){var r=this.Ve[t];r&&(r instanceof Je?this.$e.set(r.be,t):this.$e.set(r.Ai,t))}},jo:function(){for(var t=0;t<this.qe.length;t++){var r=this.qe[t];r&&this.ro.set(r.Ai,t)}},So:function(){for(var e=this,o=(this.Ke.clear(),0);o<this.qe.length;o++)!function(){var r=e.qe[o];if(null==r)return;var t,i,n=r.ge;it.NaviRoadEntry_BOTH!=n&&it.NaviRoadEntry_FORWARD!=n||(t=r.ve,(i=e.Ke.get(t))||e.Ke.set(t,i=[]),null==i.find(function(t){return t.Oo==r.ye})&&i.push({Oo:r.ye,zn:r.zn})),it.NaviRoadEntry_BOTH!=n&&it.NaviRoadEntry_BACK!=n||(t=r.ye,(i=e.Ke.get(t))||e.Ke.set(t,i=[]),null==i.find(function(t){return t.Oo==r.ve})&&i.push({Oo:r.ve,zn:r.zn}))}()},Eo:function(t){for(var r=0;r<this.Ve.length;r++)if(this.Ve[r].Ai==t)return r;return-1},To:function(t){for(var r=0;r<this.qe.length;r++)if(this.qe[r].Ai==t)return r;return-1},Ro:function(t){for(var r=[],i=this.qe,n=0;n<i.length;n++){var e=i[n],o=e.Ht,s=e.Qt,u=[];t.Mo([o,s],u)?r.push({road:e,crss:u,index:n}):t.No(o)&&r.push({road:e,crss:[],index:n})}return r},ko:function(t){for(var r=null,i=Number.MAX_VALUE,n=0;n<this.Ye.length;n++){var e=this.Ye[n];rt.dt(t,e.mr,e.Re)&&i>e.area&&(i=(r=e).area)}return r},Io:function(t){for(var r=-1,i=0;i<this.He.length;i++){var n=this.He[i];if(rt.dt(t,n.mr,n.Re)){r=n.Ai;break}}return r},Ao:function(){var t=this.Ye.length,t=parseInt(Math.random()*t);return this.Ye[t]},Po:function(){for(var t=0;t<this.Je.length;t++)this.Je[t]=!1},xo:function(){for(var t=[],r=0;r<this.Ve.length;r++){var i=this.Ve[r];i.se!=it.NaviLiftType_NULL&&t.push(i)}return t},Lo:function(t){for(var r=null,i=0;i<this.ze.length;i++)if(t==this.ze[i].Ai){r=this.ze[i];break}if(!r)return null;for(var n=[],e=0;e<this.Ve.length;e++){var o=this.Ve[e];rt.dt(o.pr,r.mr,r.Re)&&n.push(o)}for(var s=[],u=0;u<this.qe.length;u++){var a=this.qe[u];rt.dt(a.Ht,r.mr,r.Re)&&s.push(a)}for(var f=[],h=0;h<this.Ye.length;h++){var l=this.Ye[h];rt.dt(l.cr,r.mr,r.Re)&&f.push(l)}var c=new ro(n,s,!0,1);return c.Ye=f,c.ze=[r],c}}),ro);function io(t){return(io="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function no(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){t=function(t,r){if("object"!=io(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===r?String:Number)(t);i=i.call(t,r||"default");if("object"!=io(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==io(t)?t:String(t)}(n.key),n)}}function eo(t,r,i){return r&&no(t.prototype,r),i&&no(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}var o=eo(function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.Do=null}),oo=(Object.assign(o.prototype,{Ar:function(){this.Do=null},Bo:function(t){this.Do=t},Fo:function(t,r){var i=null;return 0==r?i=Sn.Ti(t):1==r?i=Sn.Ri(t):2==r&&(i=Sn.Mi(t)),{points:i[0],holes:i.slice(1)}},Go:function(t,r,i){var n=null;return 0==i?n=wn.Ti(t,r):1==i?n=wn.Ri(t,r):2==i&&(n=wn.Mi(t,r)),{points:n[0],holes:n.slice(1)}},Co:function(t){if(t&&"string"!=typeof t)for(var r in t){var i=t[r];if("vertices"==r||"vertex"==r)for(var n in i)n%2==0&&(i[n]=-i[n]);else"scene_data"==r?(i.x=-i.x,i.defCenX=-i.defCenX):this.Co(i)}},Uo:function(t){var r,i;return""!=t&&t?(r=[],i=[],0<=(t=t).indexOf("|")||0<=t.indexOf("-")||0<=t.indexOf(",")?(i=t.split(/[|,-]/),r.push.apply(r,i)):r.push(t),r):[]},Zo:function(t,r,i,n){for(var e={},o=[],s=[],u=[],a=[],f=[],h=this.Do.fileVer,l=n.naviExtents&&0<n.naviExtents.length?n.naviExtents:r.extentLayer,c=0,v=l.length;c<v;c++){var y=l[c],d=null,d=1===h?this.Fo(y.geo,2):this.Go(y.idxs,y.pts,2),y={eid:y.id||y.eid,geoArr:d.points,holes:d.holes};s.push(y)}for(var b=0,p=r.labelLayer.length;b<p;b++)e[r.labelLayer[b].eid]=r.labelLayer[b];for(var m=0,w=r.modelLayer.length;m<w;m++){var g=r.modelLayer[m],_=i.modelLayer[m],j={},_=(j.fid=_.fid,j.eid=g.eid,j.pass=_.pass,j.cr=(1===h?this.Fo(e[g.eid].geo,0):this.Go(e[g.eid].idxs,e[g.eid].pts,0)).points,null),_=1===h?this.Fo(g.geo,2):this.Go(g.idxs,g.pts,2);j.geoArr=_.points,j.holes=_.holes,o.push(j)}if(n&&n.naviNodes)for(var S=0,O=n.naviNodes.length;S<O;S++){var E=n.naviNodes[S];E.geoArr=(1===h?this.Fo(E.geo,0):this.Go(E.idxs,E.pts,0)).points,E.linkSegArr=this.Uo(E.linkSeg),E.liftFloorArr=this.Uo(E.liftFloor),u.push(E)}if(n&&n.naviSegments)for(var T=0,R=n.naviSegments.length;T<R;T++){var M=n.naviSegments[T];M.geoArr=(1===h?this.Fo(M.geo,1):this.Go(M.idxs,M.pts,1)).points,M.m_Id=n.mid,a.push(M)}if(n&&n.naviZones)for(var N=0,k=n.naviZones.length;N<k;N++){var I=n.naviZones[N],A=null,A=1===h?this.Fo(I.geo,2):this.Go(I.idxs,I.pts,2);I.geoArr=A.points,I.holes=A.holes,I.m_Id=n.mid,f.push(I)}return{level:t,extentLayer:s,modelLayer:o,naviSegments:a,naviNodes:u,naviZones:f}}}),o);function so(t){return(so="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function uo(t,r){var i,n,e,o,s="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(s)return n=!(i=!0),{s:function(){s=s.call(t)},n:function(){var t=s.next();return i=t.done,t},e:function(t){n=!0,e=t},f:function(){try{i||null==s.return||s.return()}finally{if(n)throw e}}};if(Array.isArray(t)||(s=function(t,r){var i;if(t)return"string"==typeof t?ao(t,r):"Map"===(i="Object"===(i=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?ao(t,r):void 0}(t))||r&&t&&"number"==typeof t.length)return s&&(t=s),o=0,{s:r=function(){},n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:r};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ao(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,n=new Array(r);i<r;i++)n[i]=t[i];return n}function fo(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){t=function(t,r){if("object"!=so(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===r?String:Number)(t);i=i.call(t,r||"default");if("object"!=so(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==so(t)?t:String(t)}(n.key),n)}}function ho(t,r,i){return r&&fo(t.prototype,r),i&&fo(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}var o=ho(function t(r){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.Wo=r,this.Vo=null,this.qo=null,this.Yo=-1,this.zo=-1,this.Xo=j.MODULE_SHORTEST,this.Ho=[],this.Wo._o(),this.Wo.jo(),this.Wo.So(),this.Qo=5e-4,this.Ko=0}),lo=(Object.assign(o.prototype,{Jo:function(t,r){if(null!=this.Wo.Ve&&0!=this.Wo.Ve.length&&this.Wo.Ve[0]instanceof Je){this.Ko=10;for(var n={},i=0;i<this.Wo.Ve.length;i++){var e=this.Wo.Ve[i],o=e.$o.mr,s=o.length-1,u=this.Wo.Ve[i].be,s=(n[u]=[1,1,Number.MAX_VALUE],rt.dt(t,o,s)&&(n[u][0]=0,t.level==e.Yn)&&e.be,rt.dt(r,o,s)&&(n[u][1]=0,r.level==e.Yn)&&e.be,rt.Gt(o)),e=rt.wt(t,s)+rt.wt(r,s);n[u][2]=e}var a,f=this.Wo.Ke,h=uo(f.keys());try{for(h.s();!(a=h.n()).done;){var l=a.value;f.get(l).sort(function(t,r){var i=n[t.Oo][0]+n[t.Oo][1]-(n[r.Oo][0]+n[r.Oo][1]);return 0==i?n[t.Oo][2]-n[r.Oo][2]:i})}}catch(t){h.e(t)}finally{h.f()}}},ts:function(t,r,i){this.rs(i),this.Vo=t,this.qo=r,this.Yo=t.Ai,this.zo=r.Ai;i=this.Wo.co(this.Yo);return null!=i&&null!=(t=this.Wo.co(r.Ai))&&((r=[]).push(t),this.ns(this.Wo,i,r))?tt.ROUTE_SUCCESS:tt.ROUTE_FAILED_CANNOT_ARRIVE},es:function(t,r,i,n){i&&n&&this.Jo(i,n),this.Yo=t,this.zo=r;i=this.Wo.co(t);return null!=i&&null!=(n=this.Wo.co(r))&&((t=[]).push(n),this.ns(this.Wo,i,t))?tt.ROUTE_SUCCESS:tt.ROUTE_FAILED_CANNOT_ARRIVE},ss:function(){var t=[],r=this.Wo.co(this.zo),i=[],r=(i.push(r),[]);return this.us(i,this.Wo.Ve,r,[]),t.push.apply(t,r),t},Ar:function(){this.Wo.Ar(),this.Wo=null,this.Vo=null,this.qo=null},ns:function(t,r,i){if(null==t)return!1;var n=t.Ve.length;if(r<0||n<=r)return!1;this.hs(i,r);for(var e=0;e<n;++e)t.Ve[e].ie=Number.MAX_VALUE,t.Ve[e].ne=!1,t.Ve[e].ee=[];t.Ve[r].ie=0;for(var o=i.length,s=0,u=[],a=(u.push(t.Ve[r]),this.ls.bind(this));0<u.length;){var f=null,f=u[0]instanceof Je?u[0].be:u[0].Ai,h=(u.splice(0,1),t.co(f));if(null!=h){var l=t.Ve[h];if(!l.ne){l.ne=!0;var c=i.indexOf(h);if(-1!=c&&++s==o)return!0;if(0!=t.Ke.size){var v=t.Ke.get(f);if(v)for(var y=0;y<v.length;y++){var d,b,p=v[y],m=p.Oo,m=t.co(m);null==m||(p=p.zn,d=t.Ve[m],b=this.Ko+p+l.ie,b=Number(b.toFixed(3)),d.ne)||(d.ie>b?(d.ie=b,d.ee=[],d.ee.push(h),u.push(t.Ve[m]),u.sort(a)):Math.abs(d.ie-(p+l.ie))<1e-12&&-1==d.ee.indexOf(h)&&d.ee.push(h))}}}}}return!(s<o)},ls:function(t,r){return t.ie-r.ie},hs:function(t,r){for(var i=t.indexOf(r);-1!=i;)t.splice(i,1),i=t.indexOf(r)},rs:function(t){if(this.Xo!=t){for(var r={},i=0;i<this.Wo.qe.length;i++){var n=this.Wo.qe[i],e=n.ve,o=n.ye,n=n.we;r.hasOwnProperty(e)||(r[e]={}),r[e][o]=n,r.hasOwnProperty(o)||(r[o]={}),r[o][e]=n}if(j.MODULE_SHORTEST==t){var s,u=uo(this.Wo.Ke.keys());try{for(u.s();!(s=u.n()).done;){var a,f=s.value,h=uo(this.Wo.Ke.get(f));try{for(h.s();!(a=h.n()).done;){var l=a.value,c=l.Oo,v=r[f][c];l.zn=l.zn/v}}catch(t){h.e(t)}finally{h.f()}}}catch(t){u.e(t)}finally{u.f()}}else if(j.MODULE_BEST==t){var y,d=uo(this.Wo.Ke.keys());try{for(d.s();!(y=d.n()).done;){var b,p=y.value,m=uo(this.Wo.Ke.get(p));try{for(m.s();!(b=m.n()).done;){var w=b.value,g=w.Oo,_=r[p][g];w.zn=w.zn*_}}catch(t){m.e(t)}finally{m.f()}}}catch(t){d.e(t)}finally{d.f()}}this.Xo=t}},cs:function(t,r,i,n){0!=r[t].ee.length&&(t=r[t].ee[0],i.push(r[t]),n.count++,this.cs(t,r,i,n))},us:function(t,r,i,n){for(var e=0;e<t.length;e++){var o=t[e],s=(i.push(r[o]),{count:1});this.cs(o,r,i,s),n.push(s.count)}}}),o);function co(t){return(co="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vo(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){t=function(t,r){if("object"!=co(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===r?String:Number)(t);i=i.call(t,r||"default");if("object"!=co(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==co(t)?t:String(t)}(n.key),n)}}function yo(t,r,i){r=po(r);var n=t,r=bo()?Reflect.construct(r,i||[],po(t).constructor):r.apply(t,i);if(r&&("object"===co(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");t=n;if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}function bo(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(bo=function(){return!!t})()}function po(t){return(po=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mo(t,r){return(mo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t})(t,r)}var wo=function(){var t,r,i=e,n=qe;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");function e(){var t;if(this instanceof e)return(t=yo(this,e)).Ai=-1,t.vs=[],t;throw new TypeError("Cannot call a class as a function")}return i.prototype=Object.create(n&&n.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),n&&mo(i,n),i=e,t&&vo(i.prototype,t),r&&vo(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}();function go(t){return(go="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _o(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){t=function(t,r){if("object"!=go(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===r?String:Number)(t);i=i.call(t,r||"default");if("object"!=go(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==go(t)?t:String(t)}(n.key),n)}}function jo(t,r,i){return r&&_o(t.prototype,r),i&&_o(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}var So=jo(function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.ut=null,this.Jt=null,this.ys=null,this.wt=0,this.ds=!1,this.bs=it.NaviObstructType_MODEL});function nt(t,r){var i,n,e,o,s="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(s)return n=!(i=!0),{s:function(){s=s.call(t)},n:function(){var t=s.next();return i=t.done,t},e:function(t){n=!0,e=t},f:function(){try{i||null==s.return||s.return()}finally{if(n)throw e}}};if(Array.isArray(t)||(s=Oo(t))||r&&t&&"number"==typeof t.length)return s&&(t=s),o=0,{s:r=function(){},n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:r};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function et(t){return function(t){if(Array.isArray(t))return Eo(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Oo(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oo(t,r){var i;if(t)return"string"==typeof t?Eo(t,r):"Map"===(i="Object"===(i=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Eo(t,r):void 0}function Eo(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,n=new Array(r);i<r;i++)n[i]=t[i];return n}function To(t){return(To="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ro(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){t=function(t,r){if("object"!=To(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===r?String:Number)(t);i=i.call(t,r||"default");if("object"!=To(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==To(t)?t:String(t)}(n.key),n)}}var o=function(){function r(t){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");this.Ai=null,this.ps=null,this.ws=null,this.Wo=t,this.gs=new Map,this._s=new Map,this.js=new Map,this.Ss=new Map,this.Os=new Map,this.Es=[],this.Ts=Number.INT_MIN,this.Rs=Number.INT_MIN,this.Ms=-1,this.Vo=null,this.qo=null,this.Xo=j.MODULE_SHORTEST,this.Ns=new Map,this.ks=new Map,this.Is=new Map,this.As=[],this.Ps=[],this.xs=[],this.Ls=[],this.Ds=100,this.Bs=-1,this.Fs=15,this.Gs=.1,this.Cs=[],this.Us=[],this.Zs=[],this.Ws=[],this.Vs=!0,this.qs=[],this.Sr=null,this.Ys(),this.zs(),this.Xs(),this.Hs(),this.Qs(),this.ne=!1,this.Ks=[],this.Sr=null}var t,i,n;return t=r,(i=[{key:"assignedPts",get:function(){return this.Us},set:function(t){this.Us=t}},{key:"obstruct",get:function(){return this.Vs},set:function(t){this.Vs=t}},{key:"level",get:function(){return this.Yn},set:function(t){this.Yn=t}}])&&Ro(t.prototype,i),n&&Ro(t,n),Object.defineProperty(t,"prototype",{writable:!1}),r}(),Mo=(Object.assign(o.prototype,{Js:function(t){var r,i=null==t.$s?null:t.$s;t instanceof P?this.Vo=t:(r=new P,this.tu(t,r,i)||this._failedInsertPts.push(t),this.Vo=r)},ru:function(t){var r,i=null==t.$s?null:t.$s;t instanceof P?this.qo=t:(r=new P,this.tu(t,r,i)||this._failedInsertPts.push(t),this.qo=r)},iu:function(t){var r=this.Wo.ze[0].mr;return!!rt.dt(t,r,r.length-1)},ts:function(t,r,i){this.Ts=t instanceof P?this.nu(t.pr):this.nu(t),this.Rs=r instanceof P?this.nu(r.pr):this.nu(r),i&&(this.Xo=i),!t.process&&!t instanceof P&&(this.eu(this.Ts),this.Ls=[]),!r.process&&!r instanceof P&&(this.eu(this.Rs),this.Ls=[]);var i=this._s.get(this.Ts),n=this._s.get(this.Rs);if(t instanceof P)this.Vo=t;else if(t.process)this.Vo=t.tmpNode;else if(tt.ROUTE_FAILED_NO_START_ARRIVAL==this.ou(t,i))return tt.ROUTE_FAILED_NO_START_ARRIVAL;if(r instanceof P)this.qo=r;else if(r.process)this.qo=r.tmpNode;else if(tt.ROUTE_FAILED_NO_DEST_ARRIVAL==this.su(r,n))return tt.ROUTE_FAILED_NO_DEST_ARRIVAL;return null==this.Vo?tt.ROUTE_FAILED_NO_DATA_START:null==this.qo?tt.ROUTE_FAILED_NO_DATA_DEST:this.uu()},au:function(){var t;this.Ws=[];for(var r=0;r<this.Us.length;r++){var i={x:(i=this.Us[r])[0],y:i[1]},n=this.nu(i),n=this.fu(n,i);this.Ws.push(n)}(t=this.Es).push.apply(t,et(this.Ws))},ss:function(){return this.Es},Ar:function(){this.ps=null,this.ws=null,this.Wo.Ar(),this.Wo=null,this.gs.clear(),this.gs=null;var t,r=nt(this._s);try{for(r.s();!(t=r.n()).done;)t.value[1].Ar()}catch(t){r.e(t)}finally{r.f()}this._s.clear(),this._s=null;var i,n=nt(this.Ss);try{for(n.s();!(i=n.n()).done;)i.value[1].Ar()}catch(t){n.e(t)}finally{n.f()}this.Ss.clear(),this.Ss=null;var e,o=nt(this.js);try{for(o.s();!(e=o.n()).done;)e.value[1].Ar()}catch(t){o.e(t)}finally{o.f()}this.js.clear(),this.js=null;var s,u=nt(this.Os);try{for(u.s();!(s=u.n()).done;)s.value[1].Ar()}catch(t){u.e(t)}finally{u.f()}this.Os.clear(),this.Os=null,this.Es=[],this.Vo=null,this.qo=null,this.Ns.clear(),this.Ns=null,this.ks.clear(),this.ks=null,this.Is.clear(),this.As=[],this.Ps=[],this.xs=[],this.Ls=[],this.qs=[],this.Vs=!1},dn:function(){this.Es=[],this.hu(-1),this.hu(this.Ts),this.Ts=Number.INT_MIN,this.hu(this.Rs),this.Rs=Number.INT_MIN,this.lu(),this.Cs=[];var t=this.Wo.qe.length;this.Ms<-2*t&&(this.Ms=-1);for(var r=0;r<this.As.length;r++){var i=this.As[r];this.cu(i.vu,i.ys,it.NaviRoadHinderType_HINDER_HIGH)}this.As=[],this.Ps=[],this.xs=[],this.Ls=[]},yu:function(t){if(this.qs=t,this.js.clear(),this.Os.clear(),this.qs){for(var r=0;r<this.qs.length;r++)for(var i=this.qs[r],n=this.du(i),e=0;e<n.length;e++){var o=n[e],s=this.js.get(o);s||(s=this.bu(this._s.get(o)),this.js.set(o,s)),this.pu(s,i)}var u,a=nt(this.js);try{for(a.s();!(u=a.n()).done;){var f=u.value;this.Os.set(f[0],new lo(f[1]))}}catch(t){a.e(t)}finally{a.f()}}},pu:function(t,r){for(var i=t.Ro(r),n=0;n<i.length;n++){var e=i[n],o=new x,s=(o.Se(e.road),o.ge);o.ge=it.NaviRoadEntry_FORBID,t.qe[e.index]=o,1==e.crss.length&&(r.No(o.Ht)?this.mu(e.crss[0],this.bo(),o.Qt,this.bo(),s,t):this.mu(o.Ht,this.bo(),e.crss[0],this.bo(),s,t)),2<=e.crss.length&&(this.mu(o.Ht,this.bo(),e.crss[0],this.bo(),s,t),this.mu(e.crss[e.crss.length-1],this.bo(),o.Qt,this.bo(),s,t))}var u=new wo;u.Ai=this.wu(),u.mr=r.mr,u.pass=it.NaviModelPassType_NOT_PASS,t.Ye.push(u)},mu:function(t,r,i,n,e,o){t instanceof P?s=t:((s=new P).Ai=r,s.pr=t,o.Ve.push(s)),i instanceof P?u=i:((u=new P).Ai=n,u.pr=i,o.Ve.push(u));var s,u,r=new x;r.Ai=this.po(),r.ve=s.Ai,r.Ht=s.pr,r.ye=u.Ai,r.Qt=u.pr,r.ge=e,r.Ai,r.ve,r.Ht.x.toFixed(3),r.Ht.y.toFixed(3),r.ye,r.Qt.x.toFixed(3),r.Qt.y.toFixed(3),o.qe.push(r)},wu:function(){return this.Ms--},gu:function(t){var r={ys:null};if(1!==this.Sr){var i=this.nu(t),n=this._u(i).do(t,-0);if(n&&(r.ys=n).pass!=it.NaviModelPassType_NOT_PASS&&(n.pass===it.NaviModelPassType_PASS_THROUGH||n.pass===it.NaviModelPassType_PASS_NOT_THROUGH)){if(0<n.Be.length)return r;for(var e={},o=[],s=[],u=this._u(i).qe,a=!0,f=0;f<n.Re;f++)for(var h=n.mr[f],l=n.mr[f+1],c=0;c<u.length;c++){var v=u[c];1===rt.Tt(h,l,v.Ht,v.Qt,e)&&it.NaviRoadEntry_FORBID!==v.ge&&(a=!1,(v={}).x=e.x,v.y=e.y,o.push(v),s.push(u[c]))}if(!a){n.Be=[],n.Ge=[],n.Fe=[];for(var y=0;y<o.length;y++){var d=s[y],b=this.ju(i,o[y],d);b.Su.push(d.Ai),b.oe=it.NaviNodeType_COMMON,d.ge===it.NaviRoadEntry_BOTH?b.entranceType=it.NaviEntranceType_ACCESS:rt.dt(d.Ht,n.mr,n.Re)?(d.ge===it.NaviRoadEntry_FORWARD&&(b.entranceType=it.NaviEntranceType_EXIT),d.ge===it.NaviRoadEntry_BACK&&(b.entranceType=it.NaviEntranceType_ENTRANCE)):(d.ge===it.NaviRoadEntry_FORWARD&&(b.entranceType=it.NaviEntranceType_ENTRANCE),d.ge===it.NaviRoadEntry_BACK&&(b.entranceType=it.NaviEntranceType_EXIT)),n.Be.push(b),n.Ge.push(b.entranceType),n.Fe.push(b.oe)}}}}return r},Ou:function(t){var r,i=null,n=Number.MAX_VALUE,e=nt(t.values());try{for(e.s();!(r=e.n()).done;){var o=r.value;0<o.length&&o[0].wt<n&&(i=o[0],n=o[0].wt)}}catch(t){e.e(t)}finally{e.f()}return i},Eu:function(t,r){for(var i=[],n=0;n<r.length;n++){Number.MAX_VALUE;var e=rt.jt(t,r[n].Ht,r[n].Qt,{});i.push({Kt:r[n].Ai,Ht:r[n].Ht,Qt:r[n].Qt,wt:e,Jt:r[n]})}return i.sort(function(t,r){return t.wt-r.wt}),i},Tu:function(t,r,i){var n=[],e=[],o=[],s=[],u=[],a=[],f=(a.push(t),a.push(r.Ht),a.push(r.Qt),[]),h=(f.push(t),1e7/Math.sqrt((r.Ht.x-t.x)*(r.Ht.x-t.x)+(r.Ht.y-t.y)*(r.Ht.y-t.y))),h=(f.push({x:t.x+(r.Ht.x-t.x)*h,y:t.y+(r.Ht.y-t.y)*h}),1e7/Math.sqrt((r.Qt.x-t.x)*(r.Qt.x-t.x)+(r.Qt.y-t.y)*(r.Qt.y-t.y)));f.push({x:t.x+(r.Qt.x-t.x)*h,y:t.y+(r.Qt.y-t.y)*h});for(var l,c,v,y,d,b=0;b<i.length;b++)i[b].Kt==r.Kt?(i[b].wt=rt.jt(t,i[b].Ht,i[b].Qt,{}),o.push({Kt:i[b].Kt,Ht:i[b].Ht,Qt:i[b].Qt,wt:i[b].wt,Jt:i[b].Jt})):(d=rt.qt(i[b].Ht,i[b].Qt,a)).isintersect?1==d.type?.01<rt.distanceOfTwoPoints(d.start,d.end)&&o.push({Kt:i[b].Kt,Ht:d.start,Qt:d.end,wt:i[b].wt,Jt:i[b].Jt}):2==d.type?("start"==d.outer?(i[b].Qt=d.start,i[b].wt=rt.wt(d.start,t)):"end"==d.outer&&(i[b].Ht=d.end,i[b].wt=rt.wt(d.end,t)),.01<rt.distanceOfTwoPoints(d.start,d.end)&&o.push({Kt:i[b].Kt,Ht:d.start,Qt:d.end,wt:i[b].wt,Jt:i[b].Jt}),n.push({Kt:i[b].Kt,Ht:i[b].Ht,Qt:i[b].Qt,wt:i[b].wt,Jt:i[b].Jt})):3==d.type?("start"==d.outer?(i[b].Qt=d.start,i[b].wt=rt.wt(d.start,t)):"end"==d.outer&&(i[b].Ht=d.end,i[b].wt=rt.wt(d.end,t)),.01<rt.distanceOfTwoPoints(d.end,d.start)&&o.push({Kt:i[b].Kt,Ht:d.start,Qt:d.end,wt:i[b].wt,Jt:i[b].Jt}),e.push({Kt:i[b].Kt,Ht:i[b].Ht,Qt:i[b].Qt,wt:i[b].wt,Jt:i[b].Jt})):4==d.type&&(.01<rt.distanceOfTwoPoints(d.start,d.end)&&o.push({Kt:i[b].Kt,Ht:d.start,Qt:d.end,wt:i[b].wt,Jt:i[b].Jt}),rt.distanceOfTwoPoints(i[b].Ht,d.start)<rt.distanceOfTwoPoints(i[b].Ht,d.end)?(c={x:d.start.x-t.x,y:d.start.y-t.y},l={x:i[b].Ht.x-t.x,y:i[b].Ht.y-t.y},0<(c=(c=rt.Dt(c,l))<180?c:c-360)?(.01<rt.distanceOfTwoPoints(i[b].Ht,d.start)&&n.push({Kt:i[b].Kt,Ht:i[b].Ht,Qt:d.start,wt:rt.wt(d.start,t),Jt:i[b].Jt}),.01<rt.distanceOfTwoPoints(i[b].Qt,d.end)&&e.push({Kt:i[b].Kt,Ht:d.end,Qt:i[b].Qt,wt:rt.wt(d.end,t),Jt:i[b].Jt})):(.01<rt.distanceOfTwoPoints(i[b].Ht,d.start)&&e.push({Kt:i[b].Kt,Ht:i[b].Ht,Qt:d.start,wt:rt.wt(d.start,t),Jt:i[b].Jt}),.01<rt.distanceOfTwoPoints(i[b].Qt,d.end)&&n.push({Kt:i[b].Kt,Ht:d.end,Qt:i[b].Qt,wt:rt.wt(d.end,t),Jt:i[b].Jt}))):(l={x:d.end.x-t.x,y:d.end.y-t.y},c={x:i[b].Ht.x-t.x,y:i[b].Ht.y-t.y},0<(v=(v=rt.Dt(l,c))<180?v:v-360)?(.01<rt.distanceOfTwoPoints(i[b].Ht,d.end)&&n.push({Kt:i[b].Kt,Ht:i[b].Ht,Qt:d.end,wt:rt.wt(d.end,t),Jt:i[b].Jt}),.01<rt.distanceOfTwoPoints(i[b].Qt,d.start)&&e.push({Kt:i[b].Kt,Ht:d.start,Qt:i[b].Qt,wt:rt.wt(d.start,t),Jt:i[b].Jt})):(.01<rt.distanceOfTwoPoints(i[b].Ht,d.end)&&e.push({Kt:i[b].Kt,Ht:i[b].Ht,Qt:d.end,wt:rt.wt(d.end,t),Jt:i[b].Jt}),.01<rt.distanceOfTwoPoints(i[b].Qt,d.start)&&n.push({Kt:i[b].Kt,Ht:d.start,Qt:i[b].Qt,wt:rt.wt(d.start,t),Jt:i[b].Jt})))):(v=rt.qt(i[b].Ht,i[b].Qt,f)).isintersect?1==v.type?.01<rt.distanceOfTwoPoints(v.start,v.end)&&u.push({Kt:i[b].Kt,Ht:v.start,Qt:v.end,wt:i[b].wt,Jt:i[b].Jt}):2==v.type?("start"==v.outer?(i[b].Qt=v.start,i[b].wt=rt.wt(v.start,t)):"end"==v.outer&&(i[b].Ht=v.end,i[b].wt=rt.wt(v.end,t)),.01<rt.distanceOfTwoPoints(v.start,v.end)&&u.push({Kt:i[b].Kt,Ht:v.start,Qt:v.end,wt:i[b].wt,Jt:i[b].Jt}),n.push({Kt:i[b].Kt,Ht:i[b].Ht,Qt:i[b].Qt,wt:i[b].wt,Jt:i[b].Jt})):3==v.type?("start"==v.outer?(i[b].Qt=v.start,i[b].wt=rt.wt(v.start,t)):"end"==v.outer&&(i[b].Ht=v.end,i[b].wt=rt.wt(v.end,t)),.01<rt.distanceOfTwoPoints(v.start,v.end)&&u.push({Kt:i[b].Kt,Ht:v.start,Qt:v.end,wt:i[b].wt,Jt:i[b].Jt}),e.push({Kt:i[b].Kt,Ht:i[b].Ht,Qt:i[b].Qt,wt:i[b].wt,Jt:i[b].Jt})):4==v.type&&(.01<rt.distanceOfTwoPoints(v.start,v.end)&&u.push({Kt:i[b].Kt,Ht:v.start,Qt:v.end,wt:i[b].wt,Jt:i[b].Jt}),rt.distanceOfTwoPoints(i[b].Ht,v.start)<rt.distanceOfTwoPoints(i[b].Ht,v.end)?(d={x:v.start.x-t.x,y:v.start.y-t.y},y={x:i[b].Ht.x-t.x,y:i[b].Ht.y-t.y},0<(d=(d=rt.Dt(d,y))<180?d:d-360)?(.01<rt.distanceOfTwoPoints(i[b].Ht,v.start)&&n.push({Kt:i[b].Kt,Ht:i[b].Ht,Qt:v.start,wt:rt.wt(v.start,t),Jt:i[b].Jt}),.01<rt.distanceOfTwoPoints(i[b].Qt,v.end)&&e.push({Kt:i[b].Kt,Ht:v.end,Qt:i[b].Qt,wt:rt.wt(v.end,t),Jt:i[b].Jt})):(.01<rt.distanceOfTwoPoints(i[b].Ht,v.start)&&e.push({Kt:i[b].Kt,Ht:i[b].Ht,Qt:v.start,wt:rt.wt(v.start,t),Jt:i[b].Jt}),.01<rt.distanceOfTwoPoints(i[b].Qt,v.end)&&n.push({Kt:i[b].Kt,Ht:v.end,Qt:i[b].Qt,wt:rt.wt(v.end,t),Jt:i[b].Jt}))):(y={x:v.end.x-t.x,y:v.end.y-t.y},d={x:i[b].Ht.x-t.x,y:i[b].Ht.y-t.y},0<(d=(d=rt.Dt(y,d))<180?d:d-360)?(.01<rt.distanceOfTwoPoints(i[b].Ht,v.end)&&n.push({Kt:i[b].Kt,Ht:i[b].Ht,Qt:v.end,wt:rt.wt(v.end,t),Jt:i[b].Jt}),.01<rt.distanceOfTwoPoints(i[b].Qt,v.start)&&e.push({Kt:i[b].Kt,Ht:v.start,Qt:i[b].Qt,wt:rt.wt(v.start,t),Jt:i[b].Jt})):(.01<rt.distanceOfTwoPoints(i[b].Ht,v.end)&&e.push({Kt:i[b].Kt,Ht:i[b].Ht,Qt:v.end,wt:rt.wt(v.end,t),Jt:i[b].Jt}),.01<rt.distanceOfTwoPoints(i[b].Qt,v.start)&&n.push({Kt:i[b].Kt,Ht:v.start,Qt:i[b].Qt,wt:rt.wt(v.start,t),Jt:i[b].Jt})))):s.push({Kt:i[b].Kt,Ht:i[b].Ht,Qt:i[b].Qt,wt:i[b].wt,Jt:i[b].Jt});return{left:n,right:e,inside:o,invalid:u,other:s}},eu:function(t){var r,i=this._s.get(t),n=nt(i.Ke.keys());try{for(n.s();!(r=n.n()).done;){var e=r.value;e<0&&i.Ke.delete(e)}}catch(t){n.e(t)}finally{n.f()}var o,s=nt(i.$e.keys());try{for(s.s();!(o=s.n()).done;){var u=o.value;u<0&&i.$e.delete(u)}}catch(t){s.e(t)}finally{s.f()}var a,f=nt(i.ro.keys());try{for(f.s();!(a=f.n()).done;){var h=a.value;h<0&&i.ro.delete(h)}}catch(t){f.e(t)}finally{f.f()}for(var l=[],c=0;c<i.Ve.length&&0<i.Ve[c].Ai;c++)l.push(i.Ve[c]);i.Ve=l;for(var v=[],y=0;y<i.qe.length&&0<i.qe[y].Ai;y++)v.push(i.qe[y]);i.qe=v,this._s.delete(t),this._s.set(t,i)},Ru:function(t,D){Number.MAX_VALUE;for(var r=this.Eu(t,D.qe),i=[],n=[],e=r[0],o=[],s=0;s<r.length;s++){if(r[s].wt<.01)return o.push(r[s]),o;if(!(r[s].Kt<0)){e=r[s],r.splice(0,s);break}}var u=0,B=0,a={x:null,y:null};rt.Nt(t,e.Ht,e.Qt,a)||(a=rt.wt(t,e.Ht)<=rt.wt(t,e.Qt)?e.Ht:e.Qt);for(var f,h,l=0;l<r.length;l++)r[l].Kt<0||(f=r[l].Ht,h=r[l].Qt,f=(f=rt.Dt({x:a.x-t.x,y:a.y-t.y},{x:f.x-t.x,y:f.y-t.y}))<180?f:f-360,h=(h=rt.Dt({x:a.x-t.x,y:a.y-t.y},{x:h.x-t.x,y:h.y-t.y}))<180?h:h-360,(0<f&&0<h?i:(f<0&&h<0||i.push(r[l]),n)).push(r[l]));for(var c=[],v=[];;){var y=this.Tu(t,e,i);if(y.inside&&0<y.inside.length){y.inside.sort(function(t,r){return t.wt-r.wt});for(var d=0;d<y.inside.length;d++){for(var b,p,m,w,F=[],g=0;g<y.inside.length;g++)d==g||y.inside[g].remain&&0===y.inside[g].remain.length||((b=[]).push(t),b.push(y.inside[d].Ht),b.push(y.inside[d].Qt),rt.qt(y.inside[g].Ht,y.inside[g].Qt,b).isintersect&&y.inside[g].wt<y.inside[d].wt&&(b=(y.inside[g].Ht.x-t.x)/Math.sqrt((y.inside[g].Ht.x-t.x)*(y.inside[g].Ht.x-t.x)+(y.inside[g].Ht.y-t.y)*(y.inside[g].Ht.y-t.y))*1e7,m=(y.inside[g].Ht.y-t.y)/Math.sqrt((y.inside[g].Ht.x-t.x)*(y.inside[g].Ht.x-t.x)+(y.inside[g].Ht.y-t.y)*(y.inside[g].Ht.y-t.y))*1e7,b={x:t.x+b,y:t.y+m},m=(y.inside[g].Qt.x-t.x)/Math.sqrt((y.inside[g].Qt.x-t.x)*(y.inside[g].Qt.x-t.x)+(y.inside[g].Qt.y-t.y)*(y.inside[g].Qt.y-t.y))*1e7,p=(y.inside[g].Qt.y-t.y)/Math.sqrt((y.inside[g].Qt.x-t.x)*(y.inside[g].Qt.x-t.x)+(y.inside[g].Qt.y-t.y)*(y.inside[g].Qt.y-t.y))*1e7,m={x:t.x+m,y:t.y+p},p={x:null,y:null},rt.Tt(t,b,y.inside[d].Ht,y.inside[d].Qt,b={x:null,y:null}),rt.Tt(t,m,y.inside[d].Ht,y.inside[d].Qt,p),b.x)&&b.y&&p.x&&p.y&&(m=rt.distanceOfTwoPoints(b,y.inside[d].Ht),w=rt.distanceOfTwoPoints(p,y.inside[d].Ht),F.push({Kt:y.inside[d].Kt,Ht:m<w?b:p,Qt:m<w?p:b,wt:y.inside[d].wt,Jt:y.inside[d].Jt})));var G=rt.zt(y.inside[d],F);y.inside[d].remain=G,c.push.apply(c,et(G))}}if(i=[],e=null,!(y.left&&0<y.left.length))break;y.left.sort(function(t,r){return t.wt-r.wt});for(var _=0;_<y.left.length;_++){var j={x:y.left[_].Ht.x-t.x,y:y.left[_].Ht.y-t.y},S={x:y.left[_].Qt.x-t.x,y:y.left[_].Qt.y-t.y},O={x:a.x-t.x,y:a.y-t.y},j=rt.Dt(O,j),O=rt.Dt(O,S),S=(O=O<180?O:O-360)<(j=j<180?j:j-360)?j:O;if(u<S){e=y.left[_],u=S;break}}if(!e)break;i.push.apply(i,et(y.left)),i.push.apply(i,et(y.other))}for(e=r[0];;){var E=this.Tu(t,e,n);if(E.inside&&0<E.inside.length){E.inside.sort(function(t,r){return t.wt-r.wt});for(var T=0;T<E.inside.length;T++){for(var R,M,N,k,C=[],I=0;I<E.inside.length;I++)T==I||E.inside[I].remain&&0===E.inside[I].remain.length||((R=[]).push(t),R.push(E.inside[T].Ht),R.push(E.inside[T].Qt),rt.qt(E.inside[I].Ht,E.inside[I].Qt,R).isintersect&&E.inside[I].wt<E.inside[T].wt&&(R=(E.inside[I].Ht.x-t.x)/Math.sqrt((E.inside[I].Ht.x-t.x)*(E.inside[I].Ht.x-t.x)+(E.inside[I].Ht.y-t.y)*(E.inside[I].Ht.y-t.y))*1e7,N=(E.inside[I].Ht.y-t.y)/Math.sqrt((E.inside[I].Ht.x-t.x)*(E.inside[I].Ht.x-t.x)+(E.inside[I].Ht.y-t.y)*(E.inside[I].Ht.y-t.y))*1e7,R={x:t.x+R,y:t.y+N},N=(E.inside[I].Qt.x-t.x)/Math.sqrt((E.inside[I].Qt.x-t.x)*(E.inside[I].Qt.x-t.x)+(E.inside[I].Qt.y-t.y)*(E.inside[I].Qt.y-t.y))*1e7,M=(E.inside[I].Qt.y-t.y)/Math.sqrt((E.inside[I].Qt.x-t.x)*(E.inside[I].Qt.x-t.x)+(E.inside[I].Qt.y-t.y)*(E.inside[I].Qt.y-t.y))*1e7,N={x:t.x+N,y:t.y+M},M={x:null,y:null},rt.Tt(t,R,E.inside[T].Ht,E.inside[T].Qt,R={x:null,y:null}),rt.Tt(t,N,E.inside[T].Ht,E.inside[T].Qt,M),R.x)&&R.y&&M.x&&M.y&&(N=rt.distanceOfTwoPoints(R,E.inside[T].Ht),k=rt.distanceOfTwoPoints(M,E.inside[T].Ht),C.push({Kt:E.inside[T].Kt,Ht:N<k?R:M,Qt:N<k?M:R,wt:E.inside[T].wt,Jt:E.inside[T].Jt})));var U=rt.zt(E.inside[T],C);E.inside[T].remain=U,v.push.apply(v,et(U))}}if(n=[],e=null,!(E.right&&0<E.right.length))break;E.right.sort(function(t,r){return t.wt-r.wt});for(var A=0;A<E.right.length;A++){var P={x:E.right[A].Ht.x-t.x,y:E.right[A].Ht.y-t.y},x={x:E.right[A].Qt.x-t.x,y:E.right[A].Qt.y-t.y},L={x:a.x-t.x,y:a.y-t.y},P=rt.Dt(L,P),L=rt.Dt(L,x),x=(P=P<180?P:P-360)<(L=L<180?L:L-360)?P:L;if(x<B){e=E.right[A],B=x;break}}if(!e)break;n.push.apply(n,et(E.right)),n.push.apply(n,et(E.other))}return c.push.apply(c,v),o.push.apply(o,c),o},Mu:function(t,r,i,n,e){for(var o=0;o<i.qe.length;o++){var s=i.qe[o];if(!(s.Ai==n.Ai||s.Ai<0)){var u=rt.Tt(t,r,s.Ht,s.Qt,{});if(u&&.01<rt.distanceOfTwoPoints(r,s.Ht)&&.01<rt.distanceOfTwoPoints(r,s.Qt))return{isValid:!1,model:null,extent:null,road:s}}}if(1!=this.Sr)for(var a={},f=0;f<i.Ye.length;f++){var h=i.Ye[f];if(null!=h&&h!=e&&(it.NaviModelPassType_DECORATE!=h.pass&&(null==e||e.pass==it.NaviModelPassType_DECORATE||!rt.dt(e.cr,h.mr,h.mr.length-1))))for(var l=h.mr.length,c=0;c<l-1;c++){var v=rt.Tt(t,r,h.mr[c],h.mr[c+1],a);if(v&&!(rt.distanceOfTwoPoints(t,a)<.01))return{isValid:!1,model:h,extent:null,road:null}}}for(var y={},d=i.ze,b=0;b<d.length;b++){for(var p=d[b],m=d[b].De,w=0;w<m.length;w++)for(var g=m[w],_=0;_<g.length-1;_++)if(rt.Tt(t,r,g[_],g[_+1],y))return{isValid:!1,model:null,extent:p,road:null};for(var j=d[b].mr,S=0;S<j.length-1;S++)if(rt.Tt(t,r,j[S],j[S+1],y))return{isValid:!1,model:null,extent:p,road:null}}return{isValid:!0,model:null,extent:null,road:null}},Nu:function(s,t,r,i,u,n,e,o){for(var a={Ht:u.Jt.Ht,Qt:u.Jt.Qt,Ai:u.Jt.Ai},f={Ht:u.Jt.Ht,Qt:u.Jt.Qt,Ai:u.Jt.Ai},h=Object.assign({},r),l=Object.assign({},r),c=!1,v=!1,y=i.model,d=i.model;;){var b=[{x:y.sr.tr.x,y:y.sr.tr.y},{x:y.sr.tr.x,y:y.sr.rr.y},{x:y.sr.rr.x,y:y.sr.rr.y},{x:y.sr.rr.x,y:y.sr.tr.y}],b=(b.sort(function(t,r){var i=rt.$t(s,t,1e4),n={x:null,y:null},e=rt.$t(s,r,1e4),o={x:null,y:null};return rt.Tt(i,s,a.Ht,a.Qt,n)&&rt.Tt(e,s,a.Ht,a.Qt,o)?rt.gt(n,u.Jt.Ht)-rt.gt(o,u.Jt.Ht):rt._t(t,u.Jt.Ht,u.Jt.Qt)-rt._t(r,u.Jt.Ht,u.Jt.Qt)}),{x:b[0].x-s.x,y:b[0].y-s.y}),p=Math.sqrt(b.x*b.x+b.y*b.y),m=[{x:d.sr.tr.x,y:d.sr.tr.y},{x:d.sr.tr.x,y:d.sr.rr.y},{x:d.sr.rr.x,y:d.sr.rr.y},{x:d.sr.rr.x,y:d.sr.tr.y}],m=(m.sort(function(t,r){var i=rt.$t(s,t,1e4),n={x:null,y:null},e=rt.$t(s,r,1e4),o={x:null,y:null};return rt.Tt(i,s,f.Ht,f.Qt,n)&&rt.Tt(e,s,f.Ht,f.Qt,o)?rt.gt(n,u.Jt.Qt)-rt.gt(o,u.Jt.Qt):rt._t(t,u.Jt.Ht,u.Jt.Qt)-rt._t(r,u.Jt.Ht,u.Jt.Qt)}),{x:m[0].x-s.x,y:m[0].y-s.y}),w=Math.sqrt(m.x*m.x+m.y*m.y),b={x:s.x+b.x/p*1e4,y:s.y+b.y/p*1e4},p={x:s.x+m.x/w*1e4,y:s.y+m.y/w*1e4},m=!0,w=!0;if(!c)if(rt.Tt(b,s,a.Ht,a.Qt,h)){var b=a.Ht.x-h.x,g=a.Ht.y-h.y,_=Math.sqrt(b*b+g*g),b=(h.x=h.x+b/_*.5,h.y=h.y+g/_*.5,{isValid:!1,model:null,extent:null,road:null});if((b=null!=t&&t.pass==it.NaviModelPassType_PASS_THROUGH&&0==t.Be.length?this.Mu(s,h,n,u.Jt,t):this.Mu(s,h,n,u.Jt)).isValid){h.wt=Number.MAX_VALUE;g={ut:h,Jt:u.Jt,wt:e.wt};if(o.has(u.Kt)){for(var j=o.get(u.Kt),S=!1,O=0;O<j.length;O++)if(rt.distanceOfTwoPoints(j[O].ut,r)<.01){S=!0;break}S||o.get(u.Kt).push(g)}else o.set(u.Kt,[g]);c=!0}else b.model?(a.Qt=Object.assign({},h),y=b.model):m=!1}else m=!1;if(!v)if(rt.Tt(p,s,f.Ht,f.Qt,l)){_=f.Qt.x-l.x,g=f.Qt.y-l.y,b=Math.sqrt(_*_+g*g),p=(l.x=l.x+_/b*.5,l.y=l.y+g/b*.5,{isValid:!1,model:null,extent:null,road:null});if((p=null!=t&&t.pass==it.NaviModelPassType_PASS_THROUGH&&0==t.Be.length?this.Mu(s,l,n,u.Jt,t):this.Mu(s,l,n,u.Jt)).isValid){l.wt=Number.MAX_VALUE;b={ut:l,Jt:u.Jt,wt:e.wt};if(o.has(u.Kt)){for(var E=o.get(u.Kt),T=!1,R=0;R<E.length;R++)if(rt.distanceOfTwoPoints(E[R].ut,r)<.01){T=!0;break}T||o.get(u.Kt).push(b)}else o.set(u.Kt,[b]);v=!0}else p.model?(f.Ht=Object.assign({},l),d=p.model):w=!1}else w=!1;if(c&&v)break;if(!m&&!w)break;if(c&&!w)break;if(v&&!m)break}},ku:function(t,r){for(var i=this._u(this.Ts),n=new Map,e=0;e<r.length;e++){var o=!0,s=new So,u=rt.Ut(r[e].Ht,r[e].Qt,t),a=(rt.at(t,u,r[e].Ht,r[e].Qt).isintersect||(u=rt.wt(t,r[e].Ht)<=rt.wt(t,r[e].Qt)?r[e].Ht:r[e].Qt),s.ut=Object.assign({},u),s.Jt=Object.assign({},i.qe[i.To(r[e].Ai)]),rt.wt(t,u));if(1!=this.Sr)for(var f=0;f<i.Ye.length;f++){var h=i.Ye[f];if(null!=h&&h!=obstruct&&(it.NaviModelPassType_DECORATE!=h.pass&&(null==obstruct||obstruct.pass==it.NaviModelPassType_DECORATE||!rt.dt(obstruct.cr,h.mr,h.mr.length-1))))for(var l=h.mr.length,c=0;c<l-1;c++){var v=rt.at(t,u,h.mr[c],h.mr[c+1]);v.isintersect&&(v=rt.wt(t,v.point))<a&&(a=v,s.ys=h,s.wt=Number.MAX_VALUE,s.ds=!1,s.bs=it.NaviObstructType_MODEL,o=!1)}}for(var y,d=i.ze,b=0;b<d.length;b++){for(var p=d[b],m=d[b].De,w=0;w<m.length;w++)for(var g=m[w],_=0;_<g.length-1;_++){var j=rt.Rt(t,u,g[_],g[_+1]);j.isintersect&&(j=rt.wt(t,j.point))<a&&(a=j,s.ys=p,s.wt=Number.MAX_VALUE,s.ds=!1,s.bs=it.NaviObstructType_EXTENT,o=!1)}for(var S=d[b].mr,O=0;O<S.length-1;O++){var E=rt.Rt(t,u,S[O],S[O+1]);E.isintersect&&(E=rt.wt(t,E.point))<a&&(a=E,s.ys=p,s.wt=Number.MAX_VALUE,s.ds=!1,s.bs=it.NaviObstructType_EXTENT,o=!1)}}o&&((y=n.get(s.Jt.Ai))?y.push(s):((y=[]).push(s),n.set(s.Jt.Ai,y)))}},ou:function(t,r){for(var i,n=0;n<this.qs.length;n++)if(rt.dt(t,this.qs[n].mr,this.qs[n].Iu))return tt.ROUTE_FAILED_NO_DEST_ARRIVAL;if(1===this.Sr)return(i=this.Au(t,r)).road?(i=this.Pu(this.Ts,i.coords,i.road),void(this.Vo=i)):tt.ROUTE_FAILED_NO_START_ARRIVAL;for(var e=this.Ru(t,r),o=new Map,s=0;s<e.length;s++){var u={x:null,y:null},a=e[s],f=(rt.Nt(t,a.Ht,a.Qt,u)?u.wt=0:(rt.distanceOfTwoPoints(t,a.Ht)<rt.distanceOfTwoPoints(t,a.Qt)?(u.x=a.Ht.x,u.y=a.Ht.y):(u.x=a.Qt.x,u.y=a.Qt.y),f=rt.Nt(t,a.Jt.Ht,a.Jt.Qt,h={x:null,y:null}),u.wt=f?rt.wt(u,h):Number.MAX_VALUE),rt.distanceOfTwoPoints(u,a.Jt.Ht)<.001?(u.id=a.Jt.ve,u.newNode=!1):rt.distanceOfTwoPoints(u,a.Jt.Qt)<.001?(u.id=a.Jt.ye,u.newNode=!1):u.newNode=!0,{isValid:!1,model:null,extent:null,road:null});if((f=null!=this.ps&&this.ps.pass==it.NaviModelPassType_PASS_THROUGH&&0==this.ps.Be.length?this.Mu(t,u,r,a.Jt,this.ps):this.Mu(t,u,r,a.Jt)).isValid){var h={ut:u,Jt:a.Jt,wt:e[s].wt};if(o.has(a.Kt)){for(var D=o.get(a.Kt),B=!1,l=0;l<D.length;l++)if(rt.distanceOfTwoPoints(D[l].ut,u)<.01){B=!0;break}B||o.get(a.Kt).push(h)}else o.set(a.Kt,[h])}else f.model&&this.Nu(t,this.ps,u,f,a,r,e[s],o)}var F,c=!0,v=(this.Vo=this.fu(this.Ts,t),null==this.ps&&(c=!1),new Map),G=new Map,y=nt(o);try{for(y.s();!(F=y.n()).done;){var C,d=F.value,U=!1,b=nt(d[1]);try{for(b.s();!(C=b.n()).done;){var p=C.value;if(p.ut.newNode&&p.ut.wt<.01){v.set(d[0],[p]),U=!0;break}}}catch(t){b.e(t)}finally{b.f()}U||G.set(d[0],d[1])}}catch(t){y.e(t)}finally{y.f()}if(null!=(o=0<v.size?v:G)&&0<o.size){var Z,c=!1,m=nt(o);try{for(m.s();!(Z=m.n()).done;)for(var W=Z.value[1],w=0;w<W.length;w++)0!=W[w].Jt.ge&&(c=!0)}catch(t){m.e(t)}finally{m.f()}var V,g=nt(o);try{for(g.s();!(V=g.n()).done;){var _=V.value[1];_.sort(function(t,r){return t.ut.wt-r.ut.wt}),_[0].Jt;if(_[0].ut.wt==Number.MAX_VALUE){var q,j=nt(_);try{for(j.s();!(q=j.n()).done;){var S=q.value,Y=this.Pu(this.Ts,S.ut,S.Jt);this.xu(this.Ts,this.Vo,Y,S.Jt.ge)}}catch(t){j.e(t)}finally{j.f()}}else{var z=this.Pu(this.Ts,_[0].ut,_[0].Jt);this.xu(this.Ts,this.Vo,z,_[0].Jt.ge)}}}catch(t){g.e(t)}finally{g.f()}}if(c&&null!=this.ps&&this.ps.Be&&0<this.ps.Be.length)for(var O=null,X=this._s.get(this.Ts),E=0;E<this.ps.Be.length;E++){var O=this.ps.Be[E],H=this.ps.Ge[E];if(H==it.NaviEntranceType_EXIT||H==it.NaviEntranceType_ACCESS){for(var Q=this.ps.De,T=!0,R=0;R<Q.length;R++){for(var M=Q[R],N=0;N<M.length-1;N++)if(rt.lt(t,O.pr,M[N],M[N+1])){T=!1;break}if(0==T)break}var k=[];this.ks&&this.ks.get(this.Ts)&&k.push.apply(k,et(this.ks.get(this.Ts))),this.Ns&&this.Ns.get(this.Ts)&&k.push.apply(k,et(this.Ns.get(this.Ts)));for(var I=0;I<k.length;I++){for(var A=k[I],K=A.mr.length,J={},P=0;P<K-1;P++){var $=rt.Tt(t,O.pr,A.mr[P],A.mr[P+1],J);if($&&!(rt.distanceOfTwoPoints(O.pr,J)<.01)){T=!1;break}}if(!T)break}if(0!=T){for(var x=0;x<X.qe.length;x++){var L=X.qe[x];if(0!=L.ge)if(rt.lt(t,O.pr,L.Ht,L.Qt)&&0<L.Ai&&0==O.Su.includes(L.Ai)){T=!1;break}}0!=T&&this.xu(this.Ts,this.Vo,O)}}}t.process||(t.process=!0,t.tmpNode=this.Vo)},su:function(t,r){for(var i,n=0;n<this.qs.length;n++)if(rt.dt(t,this.qs[n].mr,this.qs[n].Iu))return tt.ROUTE_FAILED_NO_DEST_ARRIVAL;if(1===this.Sr)return(i=this.Au(t,r)).road?(i=this.Pu(this.Rs,i.coords,i.road),t.$s&&(i.$s=t.$s,i.Lu=Object.assign({},t)),void(this.qo=i)):tt.ROUTE_FAILED_NO_DEST_ARRIVAL;for(var e=this.Ru(t,r),o=new Map,s=0;s<e.length;s++){var u={x:null,y:null},a=e[s],f=(rt.Nt(t,a.Ht,a.Qt,u)?u.wt=0:(rt.distanceOfTwoPoints(t,a.Ht)<rt.distanceOfTwoPoints(t,a.Qt)?(u.x=a.Ht.x,u.y=a.Ht.y):(u.x=a.Qt.x,u.y=a.Qt.y),f=rt.Nt(t,a.Jt.Ht,a.Jt.Qt,h={x:null,y:null}),u.wt=f?rt.wt(u,h):Number.MAX_VALUE),rt.distanceOfTwoPoints(u,a.Jt.Ht)<.001?(u.id=a.Jt.ve,u.newNode=!1):rt.distanceOfTwoPoints(u,a.Jt.Qt)<.001?(u.id=a.Jt.ye,u.newNode=!1):u.newNode=!0,{isValid:!1,model:null,extent:null,road:null});if((f=null!=this.ws&&this.ws.pass==it.NaviModelPassType_PASS_THROUGH&&0==this.ws.Be.length?this.Mu(t,u,r,a.Jt,this.ws):this.Mu(t,u,r,a.Jt)).isValid){var h={ut:u,Jt:a.Jt};if(o.has(a.Kt)){for(var D=o.get(a.Kt),B=!1,l=0;l<D.length;l++)if(rt.distanceOfTwoPoints(D[l].ut,u)<.01){B=!0;break}B||o.get(a.Kt).push(h)}else o.set(a.Kt,[h])}else f.model&&this.Nu(t,this.ws,u,f,a,r,e[s],o)}var F,c=!0,v=(this.qo=this.fu(this.Rs,t),t.$s&&(this.qo.$s=t.$s,this.qo.Lu=Object.assign({},t)),null==this.ws&&(c=!1),new Map),G=new Map,y=nt(o);try{for(y.s();!(F=y.n()).done;){var C,d=F.value,U=!1,b=nt(d[1]);try{for(b.s();!(C=b.n()).done;){var p=C.value;if(p.ut.newNode&&p.ut.wt<.01){v.set(d[0],[p]),U=!0;break}}}catch(t){b.e(t)}finally{b.f()}U||G.set(d[0],d[1])}}catch(t){y.e(t)}finally{y.f()}if(null!=(o=0<v.size?v:G)&&0<o.size){var Z,c=!1,m=nt(o);try{for(m.s();!(Z=m.n()).done;)for(var W=Z.value[1],w=0;w<W.length;w++)0!=W[w].Jt.ge&&(c=!0)}catch(t){m.e(t)}finally{m.f()}var V,g=nt(o);try{for(g.s();!(V=g.n()).done;){var _=V.value[1];_.sort(function(t,r){return t.ut.wt-r.ut.wt}),_[0].Jt;if(_[0].ut.wt==Number.MAX_VALUE){var q,j=nt(_);try{for(j.s();!(q=j.n()).done;){var S=q.value,Y=this.Pu(this.Rs,S.ut,S.Jt);this.xu(this.Rs,this.qo,Y,S.Jt.ge)}}catch(t){j.e(t)}finally{j.f()}}else{var z=this.Pu(this.Rs,_[0].ut,_[0].Jt);this.xu(this.Rs,this.qo,z,_[0].Jt.ge)}}}catch(t){g.e(t)}finally{g.f()}}if(c&&null!=this.ws&&this.ws.Be&&0<this.ws.Be.length)for(var O=null,X=this._s.get(this.Rs),E=0;E<this.ws.Be.length;E++){var O=this.ws.Be[E],H=this.ws.Ge[E];if(H==it.NaviEntranceType_ENTRANCE||H==it.NaviEntranceType_ACCESS){for(var Q=this.ws.De,T=!0,R=0;R<Q.length;R++){for(var M=Q[R],N=0;N<M.length-1;N++)if(rt.lt(t,O.pr,M[N],M[N+1])){T=!1;break}if(0==T)break}var k=[];this.ks&&this.ks.get(this.Rs)&&k.push.apply(k,et(this.ks.get(this.Rs))),this.Ns&&this.Ns.get(this.Rs)&&k.push.apply(k,et(this.Ns.get(this.Rs)));for(var I=0;I<k.length;I++){for(var A=k[I],K=A.mr.length,J={},P=0;P<K-1;P++){var $=rt.Tt(t,O.pr,A.mr[P],A.mr[P+1],J);if($&&!(rt.distanceOfTwoPoints(O.pr,J)<.01)){T=!1;break}}if(!T)break}if(0!=T){for(var x=0;x<X.qe.length;x++){var L=X.qe[x];if(0!=L.ge)if(rt.lt(t,O.pr,L.Ht,L.Qt)&&0<L.Ai&&0==O.Su.includes(L.Ai)){T=!1;break}}0!=T&&this.xu(this.Rs,this.qo,O)}}}t.process||(t.process=!0,t.tmpNode=this.qo)},tu:function(t,r,i){var n,e,o=this,s=(t instanceof Array&&2==t.length&&(t={x:t[0],y:t[1]}),null),u=!0,D=this.nu(t),a=this.Wo.ko(t),f=this.Wo.Io(t),s=null!=a&&a.pass==it.NaviModelPassType_PASS_THROUGH&&0==a.Be.length?this.Du(f,t,30,a):this.Du(f,t);if(1===this.Sr)return(h=this.Ou(s))?(n=h.Jt,e=null,(e=0==(n=this.Bu(f,t,n,[h],a)).length?this.Pu(f,h.ut,h.Jt):this.Pu(f,n[0].ut,n[0].Jt)).$s=void 0!==i&&i,i&&(Object.assign(t,e.pr),e.pr=t),Object.assign(r,e),!0):void 0;var h=this.fu(f,t);if(h.$s=void 0!==i&&i,Object.assign(r,h),null==a&&(u=!1),0<s.size){var l,u=!1,c=nt(s);try{for(c.s();!(l=c.n()).done;)for(var v=l.value[1],y=0;y<v.length;y++)0!=v[y].Jt.ge&&(u=!0)}catch(t){c.e(t)}finally{c.f()}var d,b=!1,p=[],m=nt(s);try{for(m.s();!(d=m.n()).done;){var w,g=d.value[1],B=g[0].Jt,_=this.Bu(f,t,B,g,a);if(0==_.length){var j,S=nt(g);try{for(S.s();!(j=S.n()).done;){var O=j.value,F=this.Pu(f,O.ut,O.Jt);this.xu(f,r,F)}}catch(t){S.e(t)}finally{S.f()}}else Math.abs(_[0].Fu)>rt.rt()?p.push.apply(p,et(_)):(b=!0,w=this.Pu(f,_[0].ut,_[0].Jt),this.xu(f,r,w))}}catch(t){m.e(t)}finally{m.f()}b||p.forEach(function(t){t=o.Pu(f,t.ut,t.Jt);o.xu(f,r,t)})}if(a&&a.pass!=it.NaviModelPassType_NOT_PASS){if(a.pass===it.NaviModelPassType_PASS_THROUGH||a.pass===it.NaviModelPassType_PASS_NOT_THROUGH){for(var E={},T=[],R=[],M=this.Wo.qe,G=!0,N=0;N<a.Re;N++)for(var C=a.mr[N],U=a.mr[N+1],k=0;k<M.length;k++){var I=M[k];1===rt.Tt(C,U,I.Ht,I.Qt,E)&&it.NaviRoadEntry_FORBID!==I.ge&&(G=!1,(I={}).x=E.x,I.y=E.y,T.push(I),R.push(M[k]))}if(!G){a.Be=[],a.Ge=[],a.Fe=[];for(var A=0;A<T.length;A++){var P=R[A],x=this.ju(D,T[A],P);x.Su.push(P.Ai),x.oe=it.NaviNodeType_COMMON,P.ge===it.NaviRoadEntry_BOTH?x.entranceType=it.NaviEntranceType_ACCESS:rt.dt(P.Ht,a.mr,a.Re)?(P.ge===it.NaviRoadEntry_FORWARD&&(x.entranceType=it.NaviEntranceType_EXIT),P.ge===it.NaviRoadEntry_BACK&&(x.entranceType=it.NaviEntranceType_ENTRANCE)):(P.ge===it.NaviRoadEntry_FORWARD&&(x.entranceType=it.NaviEntranceType_ENTRANCE),P.ge===it.NaviRoadEntry_BACK&&(x.entranceType=it.NaviEntranceType_EXIT)),a.Be.push(x),a.Ge.push(x.entranceType),a.Fe.push(x.oe)}}}if(u&&null!=a&&a.Be&&0<a.Be.length){for(var Z=!1,L=0;L<a.Be.length;L++){var W=a.Be[L],V=a.Ge[L];V!=it.NaviEntranceType_EXIT&&V!=it.NaviEntranceType_ACCESS||(this.xu(f,r,W),Z=!0)}if(!Z)return!1}return!0}},uu:function(){var t=this.Gu(this.Vo.pr),t=(t&&(this.cu(this.Ts,t,it.NaviRoadHinderType_HINDER_GENERAL),this.As.push({vu:this.Ts,ys:t})),this.Gu(this.qo.pr));if(t&&(this.cu(this.Rs,t,it.NaviRoadHinderType_HINDER_GENERAL),this.As.push({vu:this.Rs,ys:t})),this.Es=[],this.Ts===this.Rs){var t=this.Cu(this.Ts),r=t.ts(this.Vo,this.qo,this.Xo);if(r!==tt.ROUTE_SUCCESS)return r;r=t.ss();this.Es=[],r.reverse(),(t=this.Es).push.apply(t,et(r))}else{if(-1!==this.Ts&&-1===this.Rs){var t=this.Uu(this.Vo.pr,this.Ts,it.NaviEntranceType_EXIT),r=this.Ss.get(this.Ts),i=r.ts(this.Vo,t,this.Xo);if(i!=tt.ROUTE_SUCCESS)return i;var n=r.ss(n),r=this._contain_zoneIdDijkstras.get(-1);if((i=r.ts(t,this.qo,this.Xo))!=tt.ROUTE_SUCCESS)return i;t=r.ss();n.reverse(),t.reverse(),(i=this.Es).push.apply(i,et(n)),(r=this.Es).push.apply(r,et(t))}if(-1===this.Ts&&-1!==this.Rs){var i=this.Uu(this.qo.pr,this.Rs,it.NaviEntranceType_ENTRANCE),n=this.Ss.get(this.Rs),r=n.ts(i,this.qo,this.Xo);if(r!=tt.ROUTE_SUCCESS)return r;t=n.ss(),n=this.Ss.get(-1);if((r=n.ts(this.Vo,i,this.Xo))!=tt.ROUTE_SUCCESS)return r;i=n.ss();i.reverse(),t.reverse(),(r=this.Es).push.apply(r,et(i)),(n=this.Es).push.apply(n,et(t))}if(-1!==this.Ts&&-1!==this.Rs){r=this.Uu(this.Vo.pr,this.Ts,it.NaviEntranceType_EXIT),i=this.Ss.get(this.Ts),n=i.ts(this.Vo,r,this.Xo);if(n!=tt.ROUTE_SUCCESS)return n;var e=i.ss(e),t=this.Uu(this.qo.pr,this.Rs,it.NaviEntranceType_ENTRANCE),i=this.Ss(this.Rs);if((n=i.ts(t,this.qo,this.Xo))!=tt.ROUTE_SUCCESS)return n;var o=i.ss(o),i=this.Ss(-1);if((n=i.ts(r,t,this.Xo))!=tt.ROUTE_SUCCESS)return n;r=i.ss();e.reverse(),r.reverse(),o.reverse(),(t=this.Es).push.apply(t,et(e)),(n=this.Es).push.apply(n,et(r)),(i=this.Es).push.apply(i,et(o))}}return tt.ROUTE_SUCCESS},Zu:function(t,r,i){for(var n=0;n<r;n++)if(null!=t[n]&&t[n].Ai==i)return n;return-1},nu:function(t){for(var r=this.Wo.He,i=0;i<r.length;i++){var n=r[i];if(n.xe(t))return n.Ai}return-1},Ys:function(){for(var t=this.Wo.He,r=0;r<t.length;r++){var i=t[r],n=this.Wu(this.Wo,i);this._s.set(i.Ai,n)}this._s.set(-1,this.Wo);var e,o=nt(this._s);try{for(o.s();!(e=o.n()).done;){var s=e.value;s[1].eo(),this.Ss.set(s[0],new lo(s[1]))}}catch(t){o.e(t)}finally{o.f()}},Wu:function(t,r){if(t&&r){for(var i,n=0,e=0,o=t.qe.length,s=t.Ve.length,u=t.qe,a=t.Ve,f=0,h=new Int8Array(o),l=0;l<o;l++)u[l]&&u[l].ge!=it.NaviRoadEntry_FORBID&&(i=u[l],n=r.contain(i.Ht),e=r.contain(i.Qt),0==n&&0==e||(f=!0),1==n&&1==e&&(h[l]=1),1==n&&0==e&&(h[l]=2),0==n&&1==e&&(h[l]=3),0==n&&0==e&&(h[l]=4),2==n&&0==e&&(h[l]=6),2==n&&1==e&&(h[l]=7),0==n&&2==e&&(h[l]=8),1==n)&&2==e&&(h[l]=9);if(0==f)return null;for(var c,v,y,d,b,p,m=new Array(s),w=new Array(o),g=0,_=new Int8Array(s),j=h.length,S=0,O=j;S<O;S++)0!=h[S]&&6!=h[S]&&8!=h[S]&&1!=h[S]&&u[S]&&(p=(c=u[S]).ge,b=[c.Ai],2==h[S]||9==h[S]?(v=null,v=2==h[S]?r.Tt(c.Ht,c.Qt):Object.assign({},c.Qt),(y=new P).Ai=this.bo(),y.oe=it.NaviNodeType_COMMON,y.se=it.NaviLiftType_NULL,y.entranceType=it.NaviEntranceType_ACCESS,y.pr=Object.assign({},v),(v=new x).setRoad(c),v.Ai=this.po(),b.push(v.Ai),y.segLinks=b,(d=new P).setNode(y),p==it.NaviRoadEntry_FORWARD?d.entranceType=it.NaviEntranceType_EXIT:p==it.NaviRoadEntry_BACK&&(d.entranceType=it.NaviEntranceType_ENTRANCE),r.Ae.push(d),g=this.Zu(a,s,v.ye),v.Qt=Object.assign({},d.pr),v.de[1]=Object.assign({},d.pr),v.ye=d.Ai,v.Oe(),w[S]=v,m[g]=d,m[g=this.Zu(a,s,v.ve)]=a[g],m[g].segLinks.splice(m[g].segLinks.indexOf(c.Ai),1,v.Ai),(d=new P).setNode(y),c.ve=d.Ai,c.Ht=Object.assign({},d.pr),c.de[0]=Object.assign({},d.pr),c.Oe(),a[g].segLinks.splice(a[g].segLinks.indexOf(c.Ai),1),a.push(d),_[g]=2):3!=h[S]&&7!=h[S]||(v=null,v=3==h[S]?r.Tt(c.Ht,c.Qt):Object.assign({},c.Ht),(y=new P).Ai=this.bo(),y.oe=it.NaviNodeType_COMMON,y.se=it.NaviLiftType_NULL,y.entranceType=it.NaviEntranceType_ACCESS,y.pr=Object.assign({},v),(d=new x).setRoad(c),d.Ai=this.po(),b.push(d.Ai),y.segLinks=b,(b=new P).setNode(y),p==it.NaviRoadEntry_FORWARD?b.entranceType=it.NaviEntranceType_ENTRANCE:p==it.NaviRoadEntry_BACK&&(b.entranceType=it.NaviEntranceType_EXIT),r.Ae.push(b),g=this.Zu(a,s,d.ve),d.Ht=Object.assign({},b.pr),d.de[0]=Object.assign({},b.pr),d.ve=b.Ai,d.Oe(),w[S]=d,m[g]=b,m[g=this.Zu(a,s,d.ye)]=a[g],m[g].segLinks.splice(m[g].segLinks.indexOf(c.Ai),1,d.Ai),(p=new P).setNode(y),c.ye=p.Ai,c.Qt=Object.assign({},p.pr),c.de[1]=Object.assign({},p.pr),c.Oe(),a[g].segLinks.splice(a[g].segLinks.indexOf(c.Ai),1),a.push(p),_[g]=2));for(var E,T=0,R=j;T<R;T++)1==h[T]&&(E=u[T])&&(w[T]=E,2!=_[g=this.Zu(a,s,E.ve)]&&(m[g]=a[g],_[g]=1),2!=_[g=this.Zu(a,s,E.ye)]&&(m[g]=a[g],_[g]=1),u[T]=null);for(var M=0;M<s;M++)1==_[M]&&(a[M]=null);for(var j=new L(m,w,!0,1),N=[],k=t.Ye,I=0;I<k.length;I++){var A=k[I];A&&this.Vu(A,r)&&N.push(A)}return(t=j.Ye).push.apply(t,N),j}},zs:function(){var t,r=nt(this._s);try{for(r.s();!(t=r.n()).done;)for(var i=t.value,n=i[0],e=i[1].Ye,o=0;o<e.length;o++){var s,u=e[o];it.NaviModelPassType_PASS_NOT_THROUGH==u.pass&&((s=this.Ns.get(n))||(s=[],this.Ns.set(n,s)),s.push(u))}}catch(t){r.e(t)}finally{r.f()}},Xs:function(){var t,r=nt(this._s);try{for(r.s();!(t=r.n()).done;)for(var i=t.value,n=i[0],e=i[1].Ye,o=0;o<e.length;o++){var s,u=e[o];it.NaviModelPassType_NOT_PASS==u.pass&&((s=this.ks.get(n))||(s=[],this.ks.set(n,s)),s.push(u))}}catch(t){r.e(t)}finally{r.f()}},Hs:function(){var t,r=nt(this.Ns);try{for(r.s();!(t=r.n()).done;)for(var i=t.value,n=i[0],e=i[1],o=this._u(n).qe,s=0;s<e.length;s++){for(var u=e[s],a=0;a<o.length;a++){var f,h=o[a].Te();rt.dt(h,u.mr,u.Re)&&(o[a].zn=o[a].zn*this.Ds,(f=this.Is.get(u.Ai))||(f=[],this.Is.set(u.Ai,f)),f.push(o[a]))}this.cu(n,u,it.NaviRoadHinderType_HINDER_HIGH)}}catch(t){r.e(t)}finally{r.f()}},Qs:function(){var t,r=nt(this.ks);try{for(r.s();!(t=r.n()).done;)for(var i=t.value,n=i[0],e=i[1],o=this._u(n).qe,s=0;s<e.length;s++)for(var u=e[s],a=0;a<o.length;a++){var f=o[a],h=f.ge,l=f.Te();if(rt.dt(l,u.mr,u.Re)){if(f.zn=Number.MAX_VALUE,h==it.NaviRoadEntry_BOTH||h==it.NaviRoadEntry_FORWARD){var c=this._u(n).Ke.get(f.ve);if(c)for(var v=0;v<c.length;v++)c[v].Oo==f.ye&&(c[v].zn=f.zn)}if(f.ge==it.NaviRoadEntry_BOTH||f.ge==it.NaviRoadEntry_BACK){var y=this._u(n).Ke.get(f.ye);if(y)for(var d=0;d<y.length;d++)y[d].Oo==f.ve&&(y[d].zn=f.zn)}}}}catch(t){r.e(t)}finally{r.f()}},cu:function(t,r,i){var n=this.Is.get(r.Ai);if(n){if(it.NaviRoadHinderType_HINDER_HIGH==i)for(var e=0;e<n.length;e++){var o=n[e];if(o.Oe(),o.zn=o.zn*this.Ds,o.ge==it.NaviRoadEntry_BOTH||o.ge==it.NaviRoadEntry_FORWARD){var s=this._u(t).Ke.get(o.ve);if(s)for(var u=0;u<s.length;u++)s[u].Oo==o.ye&&(s[u].zn=o.zn)}if(o.ge==it.NaviRoadEntry_BOTH||o.ge==it.NaviRoadEntry_BACK){var a=this._u(t).Ke.get(o.ye);if(a)for(var f=0;f<a.length;f++)a[f].Oo==o.ve&&(a[f].zn=o.zn)}}if(it.NaviRoadHinderType_HINDER_GENERAL==i)for(var h=0;h<n.length;h++){var l=n[h];if(l.Oe(),l.ge==it.NaviRoadEntry_BOTH||l.ge==it.NaviRoadEntry_FORWARD){var c=this._u(t).Ke.get(l.ve);if(c)for(var v=0;v<c.length;v++)c[v].Oo==l.ye&&(c[v].zn=l.zn)}if(l.ge==it.NaviRoadEntry_BOTH||l.ge==it.NaviRoadEntry_BACK){var y=this._u(t).Ke.get(l.ye);if(y)for(var d=0;d<y.length;d++)y[d].Oo==l.ve&&(y[d].zn=l.zn)}}}},Uu:function(t,r,i){var n=this.Wo.ao(r);if(null==n)return null;for(var e=this._u(r).do(t,void 0),o=(e.area,Number.MAX_VALUE),s=null,u=0;u<n.Ae.length;u++){var a,f=n.Ae[u],h=rt.wt(f.pr,t);f.entranceType!=it.NaviEntranceType_ACCESS&&f.entranceType!=i||h<o&&((a=this.qu(r,f.pr))==e||a.pass!=it.NaviModelPassType_PASS_NOT_THROUGH)&&(o=h,s=f)}return s},qu:function(t,r){for(var i=null,t=this._u(t),n=Number.MAX_VALUE,e=Number.MAX_VALUE,o=null,s=t.Ye,u=0;u<s.length;u++){var a,f=s[u];(a=rt._pointToPolygon2d(f.mr,r,f.mr.length-1))<e&&(e=a,o=f),this.Gs>a&&(a=f.area)<n&&(n=a,i=f)}return null==i?o:i},Vu:function(t,r){return!!t.bound.isCross(r.bound)&&(t=t.cr,!!rt.dt(t,r.mr,r.Re))},Pu:function(t,r,i){for(var n=this.Cs.find(function(t){return t==i.ve}),e=this.Cs.find(function(t){return t==i.ye}),o=(null==n&&this.Cs.push(i.ve),null==e&&this.Cs.push(i.ye),this.Ls),s=null,u=0;u<o.length;u++)if(o[u].Yu==i){s=o[u];break}if(null==s)(s={}).Yu=i,o.push(s);else for(;null!=s.zu;)var a=s.zu.Yu,s=rt.vt(r,a.Ht,a.Qt)?s.zu:s.Xu;i=s.Yu;var f,h,l,n=new P;return r.id?n.Ai=r.id:n.Ai=this.wu(),n.pr.x=r.x,n.pr.y=r.y,n.Hu=!1!==r.newNode,!n.Hu&&1!==this.Sr||((e=new x).Ai=this.wu(),e.ve=i.ve,e.Ht=i.Ht,e.ye=n.Ai,e.Qt=n.pr,e.de=[i.Ht,n.pr],e.we=i.we,(f=new x).Ai=this.wu(),f.ve=n.Ai,f.Ht=n.pr,f.ye=i.ye,f.Qt=i.Qt,f.de=[n.pr,i.Qt],f.we=i.we,this.Ps.push(e),this.Ps.push(f),(l={}).Yu=e,(h={}).Yu=f,s.zu=l,s.Xu=h,n.tempType=1,e.tempType=1,f.tempType=1,e.Oe(),f.Oe(),e.ge=i.ge,f.ge=i.ge,(l=this._u(t)).Ve.push(n),l.qe.push(e),l.qe.push(f),(h=this.Cu(t).Wo).$e.set(n.Ai,l.Ve.length-1),i.ge==it.NaviRoadEntry_BOTH&&((t=[]).push({Oo:i.ve,zn:e.zn}),t.push({Oo:i.ye,zn:f.zn}),h.Ke.set(n.Ai,t),(t=h.Ke.get(i.ve))||h.Ke.set(i.ve,t=[]),t.push({Oo:n.Ai,zn:e.zn}),(t=h.Ke.get(i.ye))||h.Ke.set(i.ye,t=[]),t.push({Oo:n.Ai,zn:f.zn})),i.ge==it.NaviRoadEntry_FORWARD&&((l=[]).push({Oo:i.ye,zn:f.zn}),h.Ke.set(n.Ai,l),(l=h.Ke.get(i.ve))||h.Ke.set(i.ve,l=[]),l.push({Oo:n.Ai,zn:e.zn})),i.ge!=it.NaviRoadEntry_BACK)||((t=[]).push({Oo:i.ve,zn:e.zn}),h.Ke.set(n.Ai,t),(t=h.Ke.get(i.ye))||h.Ke.set(i.ye,t=[]),t.push({Oo:n.Ai,zn:f.zn})),n},Qu:function(t,r){for(var i=r.length-1;0<=i;i--)if(r[i].Ai&&0<r[i].Ai)return r.splice(i+1,0,t),i+1;return-1},ju:function(t,r,i,n){var e,o,s;return n?this.Pu(t,r,i):(n=this._u(t),(t=new P).Ai=this.bo(),t.pr=r,(r=new x).Ai=this.po(),r.ve=i.ve,r.Ht=i.Ht,r.ye=t.Ai,r.Qt=t.pr,r.we=i.we,r.de=[i.Ht,t.pr],(e=new x).Ai=this.po(),e.ve=t.Ai,e.Ht=t.pr,e.ye=i.ye,e.Qt=i.Qt,e.we=i.we,e.de=[t.pr,i.Qt],(o=[]).push(r.Ai),o.push(e.Ai),t.segLinks=o,r.Oe(),e.Oe(),r.ge=i.ge,e.ge=i.ge,o=n.Ve,s=n.qe,o=this.Qu(t,o),this.Qu(r,s),this.Qu(e,s),n.$e.set(t.Ai,o),i.ge==it.NaviRoadEntry_BOTH&&((s=[]).push({Oo:i.ve,zn:r.zn}),s.push({Oo:i.ye,zn:e.zn}),n.Ke.set(t.Ai,s),(s=n.Ke.get(i.ve))||n.Ke.set(i.ve,s=[]),s.push({Oo:t.Ai,zn:r.zn}),(s=n.Ke.get(i.ye))||n.Ke.set(i.ye,s=[]),s.push({Oo:t.Ai,zn:e.zn})),i.ge==it.NaviRoadEntry_FORWARD&&((o=[]).push({Oo:i.ye,zn:e.zn}),n.Ke.set(t.Ai,o),(o=n.Ke.get(i.ve))||n.Ke.set(i.ve,o=[]),o.push({Oo:t.Ai,zn:r.zn})),i.ge==it.NaviRoadEntry_BACK&&((s=[]).push({Oo:i.ve,zn:r.zn}),n.Ke.set(t.Ai,s),(s=n.Ke.get(i.ye))||n.Ke.set(i.ye,s=[]),s.push({Oo:t.Ai,zn:e.zn})),t.Su=[],t.Su.push(r.Ai),t.Su.push(e.Ai),t)},Ku:function(t){if(null!=t){for(var r=this._u(t),i=r.Ve.length-1;0<=i;i--){var n=r.Ve[i];if(null==n||0<=n.Ai)break;r.Ve.splice(i,1)}for(var e=r.qe.length-1;0<=e;e--){var o=r.qe[e];if(null==o||0<=o.Ai)break;r.qe.splice(e,1)}}},Ju:function(t,r){var i=t.get(r);if(i)for(var n=0;n<i.length;n++)i[n].Oo<0&&(i.splice(n,1),n--)},$u:function(t,r){for(var i=t.get(r),n=0;n<i.length;n++)this.Ju(t,i[n].Oo);t.delete(r)},ta:function(t,r,i,n,e){n.wt=Number.MAX_VALUE,n.ds=!1,n.Fu=i;for(var o=Number.MAX_VALUE,s={},u=this._u(t),a=Number.MAX_VALUE,f=0;f<u.qe.length;f++){var h,l=u.qe[f];null==l||l.Ai<0||(l.ge==it.NaviRoadEntry_FORBID?rt.Rt(r,i,l.Ht,l.Qt,s)&&(h=rt.wt(r,s))<=a&&(a=h):rt.Rt(r,i,l.Ht,l.Qt,s)&&(h=rt.wt(r,s))<o&&(o=h,n.ut=Object.assign({},s),n.wt=o,n.Jt=l,n.ds=!0))}if(n.wt>=a)return n.wt=Number.MAX_VALUE,n.ds=!1;if(!n.ds)return!1;if(1!=this.Sr)for(var c={},v=0;v<u.Ye.length;v++){var y=u.Ye[v];if(null!=y&&y!=e&&(it.NaviModelPassType_DECORATE!=y.pass&&(null==e||e.pass==it.NaviModelPassType_DECORATE||!rt.dt(e.cr,y.mr,y.mr.length-1))))for(var d=y.mr.length,b=0;b<d-1;b++)if(rt.Rt(r,i,y.mr[b],y.mr[b+1],c)){var p=rt.wt(r,c);if(p<o)return o=p,n.ys=y,n.wt=Number.MAX_VALUE,n.ds=!1,n.bs=it.NaviObstructType_MODEL,!1}}for(var m={},w=u.ze,g=0;g<w.length;g++){for(var _=w[g],j=w[g].De,S=0;S<j.length;S++)for(var O=j[S],E=0;E<O.length-1;E++)if(rt.Rt(r,i,O[E],O[E+1],m)){var T=rt.wt(r,m);if(T<o)return o=T,n.ys=_,n.wt=Number.MAX_VALUE,n.ds=!1,n.bs=it.NaviObstructType_EXTENT,!1}for(var R=w[g].mr,M=0;M<R.length-1;M++)if(rt.Rt(r,i,R[M],R[M+1],m)){var N=rt.wt(r,m);if(N<o)return o=N,n.ys=_,n.wt=Number.MAX_VALUE,n.ds=!1,n.bs=it.NaviObstructType_EXTENT,!1}}return!0},ra:function(t,r){return t.wt-r.wt},ia:function(t,r){return r.Fu-t.Fu},hu:function(t){t=this._u(t);if(t){for(var r=t.Ve,i=t.$e,n=r.length-1;0<=n;n--){var e=r[n];if(null==e||0<=e.Ai)break;i.delete(e.Ai),r.splice(n,1)}for(var o=t.qe,s=t.ro,u=o.length-1;0<=u;u--){var a=o[u];if(null==a||0<=a.Ai)break;s.delete(a.Ai),o.splice(u,1)}}},lu:function(){this.na(this.Os),this.na(this.Ss)},na:function(t){var r,i=nt(t);try{for(i.s();!(r=i.n()).done;){var n,e=r.value[1],o=[],s=e.Wo.Ke,u=nt(s);try{for(u.s();!(n=u.n()).done;){var a=n.value;a[0]<0&&o.push(a[0])}}catch(t){u.e(t)}finally{u.f()}for(var f=0;f<o.length;f++)this.$u(e.Wo.Ke,o[f]);for(var h=0;h<this.Cs.length;h++)this.Ju(s,this.Cs[h])}}catch(t){i.e(t)}finally{i.f()}},Bu:function(t,r,i,n,e){var o=[],s={x:0,y:0};if(rt.Nt(r,i.Ht,i.Qt,s)&&this.ea(r,s,{},e))(e={}).ut=s,e.ds=!0,e.Jt=i,e.Fu=0,e.wt=rt.wt(r,s),o.push(e);else{for(var u={x:s.x-r.x,y:s.y-r.y},a=0;a<n.length;a++){var f=n[a],h={x:f.ut.x-r.x,y:f.ut.y-r.y},h=rt.Dt(h,u);f.Fu=270<h?h-360:h}n.sort(this.ia);var l,c=null;if(n[n.length-1].Fu<0)c=n[n.length-1],o.push(c);else for(var v=0;v<n.length;v++)if(0<n[v].Fu)return c=n[v],0==v?o.push(c):(l=n[v-1],rt.wt(c.ut,i.Ht)>rt.wt(l.ut,i.Ht)?(o.push(l),o.push(c)):(o.push(c),o.push(l))),o}return o},oa:function(t,r,i,n,e){for(var o=n||30,s=0;s<360;s+=o){var u=new So;this.ta(t,r,s,u,e),1==u.ds&&i.push(u)}i.sort(this.ra)},Du:function(t,r,i,n){var e=new Map,o=[];for(this.oa(t,r,o,i,n);0!=o.length;){var s=o[0],u=e.get(s.Jt.Ai);u?u.push(s):((u=[]).push(s),e.set(s.Jt.Ai,u)),o.splice(0,1)}return e},fu:function(t,r){var i=new P,r=(i.Ai=this.wu(),i.pr=Object.assign({},r),this._u(t));return r.Ve.push(i),r.$e.set(i.Ai,r.Ve.length-1),this.Cu(t).Wo=r,i},sa:function(t,r,i){return i?this.fu(t,r):((i=new P).Ai=this.bo(),i.pr=Object.assign({},r),t=(r=this._u(t)).Ve,t=this.Qu(i,t),r.$e.set(i.Ai,t),i)},ea:function(t,r,i,n){for(var e,o=this._u(-1),s=0;s<o.Ye.length;s++)if(null!=(e=o.Ye[s])&&e!=n&&it.NaviModelPassType_DECORATE!=e.pass)for(var u=e.mr,a=0;a<u.length-1;a++)if(rt.Tt(t,r,u[a],u[a+1],i)){var f=rt.wt(t,i),h=rt.wt(r,i);if(!(f<=rt.rt()||h<=rt.rt()))return!1}for(var l=o.ze,c=0;c<l.length;c++){for(var v=l[c],y=v.De,d=0;d<y.length;d++)for(var b=y[d],p=0;p<b.length-1;p++)if(rt.Tt(t,r,b[p],b[p+1],i))return!1;for(var m=v.mr,w=0;w<m.length-1;w++)if(rt.Tt(t,r,m[w],m[w+1],i))return!1}return!0},xu:function(t,r,i,n,e,o){for(var s=0;s<this.xs.length;s++){var u=this.xs[s],a={};if(1==rt.Tt(u.Ht,u.Qt,r.pr,i.pr,a)&&.001<rt.wt(r.pr,a)&&.001<rt.wt(i.pr,a)){var f,h,l=!0;if(!this.qo||r.Ai!=this.qo.Ai||u.ve!=this.Vo.Ai&&u.ye!=this.Vo.Ai||(f={x:u.Qt.x-u.Ht.x,y:u.Qt.y-u.Ht.y},h={x:i.pr.x-r.pr.x,y:i.pr.y-r.pr.y},Math.abs(rt.Pt(f,h))<1e-4&&(l=!1)),l)return null;i=this.Pu(this.Ts,a,u);break}}void 0===n&&(n=it.NaviRoadEntry_BOTH),void 0===e&&(e=!0),void 0===o&&(o=!0);var c=new x;c.ve=r.Ai,c.Ht=r.pr,c.ye=i.Ai,c.Qt=i.pr,c.de=[r.pr,i.pr],c.we=1,this.Cs.push(r.Ai),this.Cs.push(i.Ai),c.Ai=e?this.wu():this.po(),c.ge=n,c.Oe(),o&&this.xs.push(c);this._u(t).qe.push(c);e=this.Cu(t);return it.NaviRoadEntry_BOTH==n&&(o={Oo:i.Ai,zn:c.zn},(t=e.Wo.Ke.get(r.Ai))?t.push(o):((t=[]).push(o),e.Wo.Ke.set(r.Ai,t)),o={Oo:r.Ai,zn:c.zn},(t=e.Wo.Ke.get(i.Ai))?t.push(o):((t=[]).push(o),e.Wo.Ke.set(i.Ai,t))),it.NaviRoadEntry_FORWARD==n&&(o={Oo:i.Ai,zn:c.zn},(t=e.Wo.Ke.get(r.Ai))?t.push(o):((t=[]).push(o),e.Wo.Ke.set(r.Ai,t))),it.NaviRoadEntry_BACK==n&&(o={Oo:r.Ai,zn:c.zn},(t=e.Wo.Ke.get(i.Ai))?t.push(o):((t=[]).push(o),e.Wo.Ke.set(i.Ai,t))),c},Gu:function(t){var r=this.nu(t),i=this.Ns.get(r);if(i)for(var n=0;n<i.length;n++){var e=i[n];if(rt.dt(t,e.mr,e.Re))return e}return null},_u:function(t){var r=null;return r=(r=this.Vs?this.js.get(t):r)||this._s.get(t)},Cu:function(t){var r=null;return r=(r=this.Vs?this.Os.get(t):r)||this.Ss.get(t)},ua:function(){return this.Vs?this.Os:this.Ss},bo:function(){return this.Wo.bo()},po:function(){return this.Wo.po()},bu:function(t){var r=[],i=(r.push.apply(r,et(t.Ve)),[]),r=(i.push.apply(i,et(t.qe)),new L(r,i,!0,1));return(i=r.Ye).push.apply(i,et(t.Ye)),r},du:function(t){for(var r=[-1],i=this.Wo.He,n=0;n<i.length;n++){var e=i[n];t.aa(e.sr.tr,e.sr.rr)&&r.push(e.Ai)}return r},Au:function(t,r,i){var n=null,e=r.qe;if(!e||e.length<=0)return null;var o=r.oo(t);if(o<=0)return null;var s,u={},n={distance:Number.MAX_VALUE,road:null,coords:{level:t.level}},a=[],f=nt(e);try{for(f.s();!(s=f.n()).done;){var h=s.value;h.ge===it.NaviRoadEntry_FORBID&&o===h.be&&a.push(h)}}catch(t){f.e(t)}finally{f.f()}var l,c=nt(e);try{for(c.s();!(l=c.n()).done;){var v=l.value;if(v.ge!==it.NaviRoadEntry_FORBID&&o===v.be){var y=!1;if(i){if(!(i.indexOf(v.we)<0)){w=rt.jt(t,v.Ht,v.Qt,u);var d,b=nt(a);try{for(b.s();!(d=b.n()).done;){var p=d.value;if(rt.Tt(t,u,p.Ht,p.Qt,{x:0,y:0})){y=!0;break}}}catch(t){b.e(t)}finally{b.f()}y||w<n.distance&&(n.distance=w,n.road=v,Object.assign(n.coords,u))}}else{var m,w=rt.jt(t,v.Ht,v.Qt,u),g=nt(a);try{for(g.s();!(m=g.n()).done;){var _=m.value;if(rt.Tt(t,u,_.Ht,v.Qt,{x:0,y:0})){y=!0;break}}}catch(t){g.e(t)}finally{g.f()}y||w<n.distance&&(n.distance=w,n.road=v,Object.assign(n.coords,u))}}}}catch(t){c.e(t)}finally{c.f()}return n}}),o);function No(t){return(No="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ko(t,r){var i,n,e,o,s="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(s)return n=!(i=!0),{s:function(){s=s.call(t)},n:function(){var t=s.next();return i=t.done,t},e:function(t){n=!0,e=t},f:function(){try{i||null==s.return||s.return()}finally{if(n)throw e}}};if(Array.isArray(t)||(s=function(t,r){var i;if(t)return"string"==typeof t?Io(t,r):"Map"===(i="Object"===(i=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Io(t,r):void 0}(t))||r&&t&&"number"==typeof t.length)return s&&(t=s),o=0,{s:r=function(){},n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:r};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Io(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,n=new Array(r);i<r;i++)n[i]=t[i];return n}function Ao(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){t=function(t,r){if("object"!=No(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===r?String:Number)(t);i=i.call(t,r||"default");if("object"!=No(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==No(t)?t:String(t)}(n.key),n)}}function Po(t,r,i){return r&&Ao(t.prototype,r),i&&Ao(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}var o=Po(function t(r,i){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.fa=[],this.ha=new Map,this.Sr=i||null,this.la(r)}),xo=(Object.assign(o.prototype,{la:function(t){var r,i=ko(t);try{for(i.s();!(r=i.n()).done;)for(var n=r.value,e=n[1],o=e.ze,s=0;s<o.length;s++){var u=o[s].Ai,a=e.Lo(u),f=o[s].be,h=new Mo(a);h.Ai=f,h.Sr=this.Sr,h.Yn=n[0],this.fa.push(h),this.ha.set(f,h)}}catch(t){i.e(t)}finally{i.f()}},zn:function(){return this.fa.length},ca:function(t){if(this.fa)for(var r=this.fa,i=0;i<r.length;i++){var n=r[i];if(t.level==n.Yn&&n.iu(t))return n}return null},va:function(t){var r,i=ko(this.fa);try{for(i.s();!(r=i.n()).done;){var n=r.value;if(n.Ai==t)return n}}catch(t){i.e(t)}finally{i.f()}return null}}),o);function S(t){return function(t){if(Array.isArray(t))return Do(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Lo(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(t,r){var i,n,e,o,s="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(s)return n=!(i=!0),{s:function(){s=s.call(t)},n:function(){var t=s.next();return i=t.done,t},e:function(t){n=!0,e=t},f:function(){try{i||null==s.return||s.return()}finally{if(n)throw e}}};if(Array.isArray(t)||(s=Lo(t))||r&&t&&"number"==typeof t.length)return s&&(t=s),o=0,{s:r=function(){},n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:r};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Lo(t,r){var i;if(t)return"string"==typeof t?Do(t,r):"Map"===(i="Object"===(i=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Do(t,r):void 0}function Do(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,n=new Array(r);i<r;i++)n[i]=t[i];return n}function Bo(t){return(Bo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fo(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){t=function(t,r){if("object"!=Bo(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===r?String:Number)(t);i=i.call(t,r||"default");if("object"!=Bo(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==Bo(t)?t:String(t)}(n.key),n)}}var o=function(){function r(t){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function");this.Nr=t,this.Ht=null,this.Qt=null,this.Xo=j.MODULE_SHORTEST,this.ya=w.PRIORITY_DEFAULT,this.da=new Map,this.ba=new Map,this.pa=null,this.ma=null,this.wa=[],this.ga=[],this._a=[],this.ja=[],this.Sa=[],this.Oa=[],this.Li=[],this.Ea=.1,this.Ta=1,this.Ra=10,this.Ma=.1,this.Na=1,this.ka=10,this.Ia=.1,this.Aa=1,this.Pa=10,this.xa=1,this.La=10,this.Do=null,this.Da=null,this.Ba=null,this.Fa=null,this.ps=null,this.ws=null,this.Ga=null,this.Ca=!1,this.Ua=[],this.Vs=!0,this.qs=new Map,this.Za=null,this.Sr=t.type,this.barrierFree=!1,this.Wa=!1,this.Va=0,this.qa=0,this.Ya=[]}var t,i,n;return t=r,(i=[{key:"assginedInfos",get:function(){return this.Ua},set:function(t){this.Ua=t}},{key:"passPts",set:function(t){this.za=t}},{key:"failedInsertedPts",get:function(){return this._failedInsertedPts}},{key:"toDoors",get:function(){return this.Ca},set:function(t){this.Ca=t}},{key:"obstruct",get:function(){return this.Vs},set:function(t){this.Vs=t}}])&&Fo(t.prototype,i),n&&Fo(t,n),Object.defineProperty(t,"prototype",{writable:!1}),r}(),Go=(Object.assign(o.prototype,{Ln:function(t){if(t&&t.scene&&t.floors){this.Do=t.scene,this.Da=new oo;t=t.floors;if(0!=t.size){this.Xa(t),this.Ha(),this.Ba=new xo(this.da,this.Sr),this.Ba.Sr=this.Sr;var r,i=A(t);try{for(i.s();!(r=i.n()).done;){var n=r.value,e=n[1].gid;if(null!=e){var o=n[1].naviAccessible;if(o&&o[0]&&0<o[0].naviNodes.length){this.Wa=!0;break}}}}catch(t){i.e(t)}finally{i.f()}this.Wa&&(this.Xa(t),this.Ha(),this.Fa=new xo(this.ba,this.Sr),this.Fa.Sr=this.Sr)}}},Ar:function(){this.Nr=null,this.Do=null,this.Da&&(this.Da.Ar(),this.Da=null);var t,r=A(this.da);try{for(r.s();!(t=r.n()).done;)t.value[1].Ar()}catch(t){r.e(t)}finally{r.f()}if(this.da.clear(),this.da=null,this.pa.Ar(),this.pa=null,this.wa=null,this._a=null,this.Wa){var i,n=A(this.ba);try{for(n.s();!(i=n.n()).done;)i.value[1].Ar()}catch(t){n.e(t)}finally{n.f()}this.ba.clear(),this.ba=null,this.ma.Ar(),this.ma=null,this.ga=null,this.ja=null}this.Sa=null,this.Oa=null,this.Li=null},Qa:function(t,r){this.dn(),t.process&&(delete t.process,delete t.tmpNode),r.process&&(delete r.process,delete r.tmpNode);var i=this.Ka([t]);if(i.length<1)return tt.ROUTE_FAILED_NO_DATA_START;var i=i[0],n=(t.extentID=i,this.Ka([r]));if(n.length<1)return tt.ROUTE_FAILED_NO_DATA_DEST;for(var n=n[0],e=(r.endExtentID=n,this.za),o=0;o<e.length;o++)e[o].$s=!0;var s=this.Ka(e),i=this.Ja(i,n,s);if(i.rst!=tt.ROUTE_SUCCESS)return i.rst;for(var u=new Map,a=0;a<s.length;a++)u.has(s[a])?u.get(s[a]).push(e[a]):u.set(s[a],[e[a]]);n=i.extentPath,i=this.$a(t,r,u,n);return this.tf(i.nodePath),i.rst},rf:function(t,r,i,n){this.dn(),t.process&&(delete t.process,delete t.tmpNode),r.process&&(delete r.process,delete r.tmpNode);var e=null,o=(e=this.Wa&&this.barrierFree?this.Fa:this.Ba).ca(t);if(!o)return t.process=null,t.tmpNode=null,r.process=null,r.tmpNode=null,tt.ROUTE_FAILED_NO_DATA_START;var s=o.gu(t);if(s&&s.ys&&s.ys.pass==it.NaviModelPassType_NOT_PASS)return t.process=null,t.tmpNode=null,r.process=null,r.tmpNode=null,tt.ROUTE_FAILED_NO_START_ARRIVAL;var u=e.ca(r);if(!u)return t.process=null,t.tmpNode=null,r.process=null,r.tmpNode=null,tt.ROUTE_FAILED_NO_DATA_DEST;var a=u.gu(r);if(a&&a.ys&&a.ys.pass==it.NaviModelPassType_NOT_PASS)return t.process=null,t.tmpNode=null,r.process=null,r.tmpNode=null,tt.ROUTE_FAILED_NO_DEST_ARRIVAL;this.Xo=i,this.Ht=t,this.ps=s.ys,this.Qt=r,this.ws=a.ys;var f=o.Ai,h=u.Ai,u=s.ys,s=a.ys,a=tt.ROUTE_FAILED_CANNOT_ARRIVE;if(this.Li=[],1!==this.Sr&&this.if(n),f===h){n=t.level;o.ps=u,o.ws=s,(a=o.ts(t,r,i))===tt.ROUTE_SUCCESS&&(u=o.ss(),this.Li.push({Yn:n,Li:u}))}else{this.nf(f,h,t,r)!=tt.ROUTE_SUCCESS&&(a=tt.ROUTE_FAILED_OUTLINE),this.Sa.reverse();s=this.ef(e,t,r);if(s==tt.ROUTE_SUCCESS)return t.process=null,t.tmpNode=null,r.process=null,r.tmpNode=null,s;a=s}if(a!=tt.ROUTE_SUCCESS)for(;2<this.sf(f,h,t,r).length;){if(this.ef(e,t,r)===tt.ROUTE_SUCCESS)return this.uf(),t.process=null,t.tmpNode=null,r.process=null,r.tmpNode=null,tt.ROUTE_SUCCESS;f===h&&0<this.Sa.length&&(h=this.Sa[this.Sa.length-1].be)}return this.uf(),t.process=null,t.tmpNode=null,r.process=null,r.tmpNode=null,a},sf:function(t,r,i,n){var e=null;if(e=this.Wa&&this.barrierFree?this.ma:this.pa,t===r){var o=this.wa.length+1,s=new Je,u=e.Wo.co(t),u=e.Wo.Ve[u],u=(s.Ai=u.Ai,s.Yn=u.Yn,s.be=o,s.$o=u.$o,s.Ze=u.Ze,s.Jn=u.Jn,s.Qn=u.Qn,this.wa.push(s),this.af(),new L(this.wa,this._a)),s=(r=o,(e=new lo(u)).Wo.Ke.get(t));if(s){var a,f=A(s.values());try{for(f.s();!(a=f.n()).done;){var h=a.value;h.Oo===r&&(h.zn=Number.MAX_VALUE)}}catch(t){f.e(t)}finally{f.f()}}}else for(var l=0;l<this.Ya.length;l++){var c=this.Ya[l].from.be,v=this.Ya[l].to.be,c=e.Wo.Ke.get(c);if(c){var y,d=A(c.values());try{for(d.s();!(y=d.n()).done;){var b=y.value;b.Oo===v&&(b.zn=Number.MAX_VALUE)}}catch(t){d.e(t)}finally{d.f()}}}return this.pa=e,this.nf(t,r,i,n)!=tt.ROUTE_SUCCESS&&(this.Sa=[]),this.Sa.reverse(),this.Sa},uf:function(){var t;this.Wa&&this.barrierFree?(this.ff(),this.af(),t=new L(this.ga,this.ja),this.ma=new lo(t)):(this.ff(),this.af(),t=new L(this.wa,this._a),this.pa=new lo(t)),this.Ya=[]},ef:function(t,r,i){this.Li=[];for(var n=[],e=[this.Ht],o=tt.ROUTE_FAILED_CANNOT_ARRIVE,s=0;s<this.Sa.length-1;s++){var u=[],a=[];if(null==this.Sr||0===this.Sr){if(!this.hf(this.Sa[s],this.Sa[s+1],e[e.length-1],u,a))return this.Ya.push({from:this.Sa[s],to:this.Sa[s+1]}),tt.ROUTE_FAILED_CANNOT_ARRIVE}else if(!this.lf(this.Sa[s],this.Sa[s+1],e[e.length-1],u,a))return this.Ya.push({from:this.Sa[s],to:this.Sa[s+1]}),tt.ROUTE_FAILED_CANNOT_ARRIVE;for(var f=!1,h=0;h<u.length;h++){var l=u[h].ce,c=a[h].ce,v=u[h].Yn,y=a[h].Yn,d={x:l.pr.x,y:l.pr.y,level:v},b={x:c.pr.x,y:c.pr.y,level:y},d=t.ca(d),o=0==s?(d.ps=this.ps,d.ts(r,l,this.Xo)):d.ts(n[n.length-1],l,this.Xo);if(tt.ROUTE_SUCCESS==o){l=d.ss();if(this.Li.push({Yn:v,Li:l}),n.push(c),e.push(c.pr),f=!0,this.Sa.length-2==s){d=t.ca(b);if(d.ws=this.ws,o=d.ts(c,i,this.Xo),tt.ROUTE_SUCCESS!=o){this.Li.splice(this.Li.length-1,1),f=!1,e.splice(e.length-1,1),n.splice(n.length-1,1);continue}v=d.ss();this.Li.push({Yn:y,Li:v})}if(tt.ROUTE_SUCCESS==o)break}}if(!f)return 0==s?this.Ya.push({from:this.Sa[s],to:this.Sa[s+1]}):this.Ya.push({from:this.Sa[s-1],to:this.Sa[s]}),tt.ROUTE_FAILED_CANNOT_ARRIVE;o!==tt.ROUTE_SUCCESS&&this.Ya.push({from:this.Sa[s],to:this.Sa[s+1]})}return o},cf:function(){if(this.Ca&&(this.Ga=null,this.ws)&&0<this.Li.length){for(var t,r,i=this.Li[this.Li.length-1].Li,n=null,e={x:-1,y:-1},o=i.length-1;0<o;o--){var s=i[o],u=i[o-1];if(rt.Bt(s.pr,u.pr,this.ws.mr,e)){n=o;break}}null!=n&&(t=i[i.length-1],i.splice(n,i.length-n),(r=new P).Ai=-1,r.pr=e,(t.$s||t.pr.$s)&&(r.$s=!0,t.$s?r.Lu=t.Lu:r.Lu=t.pr),i.push(r),this.Ga=e)}for(var a=[],f=0;f<this.Li.length;f++)1<this.Li[f].Li.length&&a.push(this.Li[f]);for(var h=[],l=0;l<a.length;l++){this.vf(a[l]);for(var c=a[l],v=c.Yn,y=c.Li,d=[],b=0,p=0;p<y.length;p++)d.push(y[p].pr),p!=y.length-1&&(b+=rt.wt(y[p].pr,y[p+1].pr));var c=new Oe;c.Yn=v,c.Hn=y,c.Xn=d,c.zn=b,h.push(c),l!=a.length-1&&(v=this.yf(a[l]),c=this.df(a[l+1]),h.push(v),h.push(c))}return h},vf:function(t){if(null!=t&&t.Li){var r=t.Li,i=r.length;if(i&&!(i<2)){var n=[],e=(n.push(r[0]),r[0]),o=r[i-1];rt.wt(e.pr,o.pr);for(var s=1;s<i-1;s++){var u=r[s];null!=e&&rt.wt(e.pr,u.pr)<.001||null!=o&&rt.wt(o.pr,u.pr)<.001||n.push(u)}n.push(o);for(var i=n.length,a=new Array(i),f=0;f<i;f++)a[f]=0;for(var h=1;h<i-1;h++){for(var l=n[h],c=h-1;0!=a[c];)c--;!rt.bt(l.pr,n[c].pr,n[h+1].pr)||l.$s||(a[h]=1)}for(var v=[],y=0;y<i;y++)0==a[y]&&v.push(n[y]);t.Li=v}}},dn:function(){this.Sa=[],this.Oa=[];var t,r=this.Ba.ha,i=A(r.keys());try{for(i.s();!(t=i.n()).done;){var n=t.value,e=r.get(n);e.dn(),e.obstruct=this.Vs}}catch(t){i.e(t)}finally{i.f()}var o,s=this.Ba.ha,u=A(s.keys());try{for(u.s();!(o=u.n()).done;){var a=o.value,f=s.get(a);f.dn(),f.obstruct=this.Vs}}catch(t){u.e(t)}finally{u.f()}},bf:function(t,r){var i=null,n=null;if(null==(n=(this.Wa&&this.barrierFree?this.Fa:this.Ba).ca(t)))return null;for(var n=n.Wo,e=[],o=(e.push.apply(e,S(n.qe)),i={distance:Number.MAX_VALUE,road:null,angle:null,coords:{level:t.level}},{}),s=0;s<e.length;s++){var u,a=e[s];a.ge===it.NaviRoadEntry_FORBID||Array.isArray(r)&&0<r.length&&r.indexOf(a.we)<0||(u=rt.jt(t,a.Ht,a.Qt,o))<i.distance&&(i.distance=u,i.road=a,i.angle=this.pf(a.Ht,a.Qt),Object.assign(i.coords,o))}return null!=i.road&&(n={id:(n=i.road).Ai,extentID:n.be,roadEntry:n.ge,roadRank:n.we,startID:n.ve,startPoint:n.Ht,endID:n.ye,endPoint:n.Qt},i.road=n),i},pf:function(t,r){var i=new Z(0,0,1),t=new Z(t.x,0,t.y),r=new Z(r.x,0,r.y).clone().sub(t).normalize(),t=r.angleTo(i)*rt.nt();return 0<r.clone().cross(i).y?360-t:t},Xa:function(t){this.Wa?this.ba=new Map:this.da=new Map,this.Da.Bo(this.Do);var r,i=A(t);try{for(i.s();!(r=i.n()).done;){var n=r.value,e=n[1].gid;if(null!=e){var o=n[1].geo[0],s=n[1].biz[0],u=null;if(1==this.Sr?0<n[1].naviDrive.length&&(u=n[1].naviDrive[0]):this.Wa?0<n[1].naviAccessible.length&&(u=n[1].naviAccessible[0]):0<n[1].navi.length&&(u=n[1].navi[0]),u){var a=this.Da.Zo(e,o,s,u);if(0!=a.naviNodes.length&&0!=a.naviSegments.length){var f=new Map,h=this.mf(a,f),l=this.wf(a),c=this.gf(a),v=this._f(a),y=this.jf(a),d=(this.Sf(y,h,u,f),new L(h,l,!0,1));d.Yn=e,0!=v.length&&(d.ze=v),0!=c.length&&(d.He=c),0!=y.length&&(d.Ye=y);for(var b=0;b<l.length;b++)l[b].be=d.oo(l[b].Ht);(0==this.Wa?this.da:this.ba).set(a.level,d)}}}}}catch(t){i.e(t)}finally{i.f()}},mf:function(i,n){var e,o=[];for(e in i.naviNodes)!function(){var t=i.naviNodes[e];if(null==t.nodeId)return;var r=new P;r.Ai=t.nodeId,r.pr={x:parseFloat(t.geoArr.x.toFixed(3)),y:parseFloat(t.geoArr.y.toFixed(3))},r.oe=t.nodeType,r.se=t.liftType,r.Jn=t.liftFlag,r.ue=t.liftEntry,t.accessible&&(r.Of=t.accessible),t.linkSegArr.forEach(function(t){r.Kn.push(parseInt(t))}),t.liftFloorArr.forEach(function(t){r.Qn.push(parseInt(t))}),o.push(r),n.set(t.nodeId,e)}();return o},wf:function(t){var r,i=[];for(r in t.naviSegments){var n,e=t.naviSegments[r],o=e.geoArr;o&&((n=new x).Ai=e.segmentId,n.ve=e.snode,n.Ht={x:parseFloat(o[0].x.toFixed(3)),y:parseFloat(o[0].y.toFixed(3))},n.ye=e.enode,n.Qt={x:parseFloat(o[1].x.toFixed(3)),y:parseFloat(o[1].y.toFixed(3))},n.zn=e.length,n.ge=e.entry,n.we=e.rank,i.push(n))}return i},_f:function(t){for(var r=[],i=0,n=t.extentLayer.length;i<n;i++){var e=t.extentLayer[i],o=(o=e.geoArr)||[],o=new qe(e.eid,t.gid,0,o,e.cr,e.holes);o.fid=e.fid,r.push(o)}return r},jf:function(t){for(var r=[],i=0,n=t.modelLayer.length;i<n;i++){var e=t.modelLayer[i],o=(o=e.geoArr)||[],o=new qe(e.eid,t.gid,0,o,e.cr,e.holes);o.fid=e.fid,o.pass=e.pass,r.push(o)}return r},gf:function(t){for(var r=[],i=0,n=t.naviZones.length;i<n;i++){var e=t.naviZones[i],e=new Ze(e.Ai,t.gid,e.type,e.geoArr);r.push(e)}return r},Sf:function(t,r,i,n){for(var e=new Map,o=0;o<t.length;o++){var s=t[o];e.set(s.Ai,o)}for(var u=0;u<i.naviModels.length;u++)for(var a=i.naviModels[u],f=a.modelid,h=t[e.get(f)],l=0;l<a.doorids.length;l++){var c=a.doorids[l],c=r[n.get(c)],c=(h.Be.push(c),a.nodetypes[l]),v=a.entrytypes[l];h.Fe.push(c),h.Ge.push(v)}},Ha:function(){var t;this.Wa?(this.ff(),this.af(),t=new L(this.ga,this.ja),this.ma=new lo(t)):(this.ff(),this.af(),t=new L(this.wa,this._a),this.pa=new lo(t))},ff:function(){var t,r=0,i=0,n=A(this.Wa?(this.ga=[],this.ba):(this.wa=[],this.da));try{for(n.s();!(t=n.n()).done;)for(var e=t.value,o=e[1],s=o.ze,u=0;u<s.length;u++){var a=s[u],f=new Je;f.Ai=a.Ai,f.Yn=e[0],f.be=++r,a.be=f.be,f.$o=a;for(var h=0;h<o.Ve.length;h++){var l,c,v=o.Ve[h];v.se!=it.NaviLiftType_NULL&&rt.dt(v.pr,a.mr,a.Re)&&(l=new De,c=o.fo(v.pr),l.le=c,l.fe(v),l.he=++i,l.Yn=e[0],l.ce=v,l.ue=v.ue,l.se=v.se,l.Jn=v.Jn,l.be=f.be,this.Wa?1===v.Of&&(l.Of=v.Of,f.Ze.push(l)):(1===v.Of&&(l.Of=v.Of),f.Ze.push(l)))}(this.Wa?this.ga:this.wa).push(f)}}catch(t){n.e(t)}finally{n.f()}},af:function(){for(var t=null,r=0,t=this.Wa?this.ga:this.wa,i=[],n=0;n<t.length;n++)for(var e=t[n],o=0;o<t.length;o++){var s,u,a=t[o];n!=o&&(u=void 0,null!=(u=null==this.Sr||0==this.Sr?this.Ef(e,a):this.Tf(e,a)))&&(u*=0==(s=Math.abs(e.Yn-a.Yn))?1:s,(s=new x).ve=e.be,s.ye=a.be,s.zn=u,s.ge=it.NaviRoadEntry_FORWARD,s.Ai=r,r+=1,i.push(s))}this.Wa?this.ja=i:this._a=i},Ef:function(t,r){for(var i=Number.MAX_VALUE,n=!1,e=t.Yn,o=r.Yn,s=e<o?it.NaviLiftEntry_DOWN:it.NaviLiftEntry_UP,u=0;u<t.Ze.length;u++){var a=t.Ze[u],f=a.ue;if(f!=it.NaviLiftEntry_FORBID&&f!=s){var h=a.se;if(w.PRIORITY_LIFTONLY==this.ya){if(it.NaviLiftType_Lift!=h)continue}else if(w.PRIORITY_ESCALATORONLY==this.ya){if(it.NaviLiftType_Escalator!=h)continue}else if(w.PRIORITY_STAIRONLY==this.ya){if(it.NaviLiftType_Stair!=h)continue}else if(w.PRIORITY_ACCESSIBLEONLY==this.ya&&it.NaviLiftType_Accessible!=h)continue;if(h==it.NaviLiftType_Stair||-1!=a.Qn.indexOf(o))for(var l=0;l<r.Ze.length;l++){var c=r.Ze[l];if(null!=c&&a.Jn==c.Jn)if(w.PRIORITY_LIFTFIRST==this.ya||w.PRIORITY_DEFAULT==this.ya){if(it.NaviLiftType_Lift==h||it.NaviLiftType_Accessible==h)return this.Ea;if(it.NaviLiftType_Escalator==h){c=this.Na;c<i&&(i=c),n=!0;break}if(it.NaviLiftType_Stair==h){c=this.Pa;c<i&&(i=c),n=!0;break}}else if(w.PRIORITY_ESCALATORFIRST==this.ya){if(it.NaviLiftType_Lift==h||it.NaviLiftType_Accessible==h){c=this.Ta;c<i&&(i=c),n=!0;break}if(it.NaviLiftType_Escalator==h)return this.Ma;if(it.NaviLiftType_Stair==h){c=this.Pa;c<i&&(i=c),n=!0;break}}else if(w.PRIORITY_STAIRFIRST==this.ya){if(it.NaviLiftType_Lift==h){c=this.Ta;c<i&&(i=c),n=!0;break}if(it.NaviLiftType_Escalator==h||it.NaviLiftType_Accessible==h){c=this.ka;c<i&&(i=c),n=!0;break}if(it.NaviLiftType_Stair==h)return this.Ia}else{if(w.PRIORITY_LIFTFIRST1==this.ya||w.PRIORITY_STAIRFIRST1==this.ya||w.PRIORITY_ESCALATORFIRST1==this.ya)return this.xa;if(w.PRIORITY_LIFTONLY==this.ya||w.PRIORITY_ESCALATORONLY==this.ya||w.PRIORITY_STAIRONLY==this.ya||w.PRIORITY_ACCESSIBLEONLY==this.ya)return this.xa}}}}return n?i:null},Tf:function(t,r){for(var i=Number.MAX_VALUE,n=!1,e=t.Yn<r.Yn?it.NaviLiftEntry_DOWN:it.NaviLiftEntry_UP,o=0;o<t.Ze.length;o++){var s=t.Ze[o],u=s.ue;if(u!=it.NaviLiftEntry_FORBID&&u!=e){for(var a=0;a<r.Ze.length;a++){var f=r.Ze[a];if(s.Jn==f.Jn){i=this.La,n=!0;break}}if(n)break}}return n?i:null},if:function(t){this.ya!==t&&(this.ya=t,this.barrierFree?(this.af(),t=new L(this.ga,this.ja),this.ma=new lo(t)):(this.af(),t=new L(this.wa,this._a),this.pa=new lo(t)))},df:function(t){var r=t.Li,i=new Oe;return i.Yn=t.Yn,i.Hn.push(r[0]),i.Xn.push(r[0].pr),i.zn=0,i},yf:function(t){var r=t.Li,i=new Oe;return i.Yn=t.Yn,i.Hn.push(r[r.length-1]),i.Xn.push(r[r.length-1].pr),i.zn=0,i},Rf:function(t,r){for(var i=null,i=this.Wa&&this.barrierFree?this.ga:this.wa,n=0;n<i.length;n++)if(null!=t&&i[n].Yn==t&&i[n].Ai==r)return i[n];return null},Mf:function(t){for(var r=null,i=null,i=this.Wa&&this.barrierFree?this.ga:this.wa,n=0;n<i.length;n++)if(i[n].be==t)return r=i[n];return r},nf:function(t,r,i,n){var e,o=null,t=(o=this.Wa&&this.barrierFree?this.ma:this.pa).es(t,r,i,n);if(t==tt.ROUTE_SUCCESS){e=o.ss(),this.Sa=[];for(var s=0;s<e.length;s++)this.Sa.push(e[s])}return t},hf:function(i,t,r,n,e){var o=null,o=(this.Wa&&this.barrierFree?(o=this.Fa.ca(r),this.Za=(o||this.Fa.ha.get(i.Yn)).Wo.fo(r)):(o=this.Ba.ca(r),this.Za=(o||this.Ba.ha.get(i.Yn)).Wo.fo(r)),Math.abs(i.Yn-t.Yn)),s=[];function u(t,r){t=i.We(t,r,a);s.push.apply(s,S(t))}var a=[];if(0==this.Wa&&1==this.barrierFree)for(var f=0;f<i.Ze.length;f++)1==i.Ze[f].Of&&a.push(i.Ze[f]);else a=i.Ze;for(var h=0;h<a.length;h++){var l=a[h];l.ie=rt.wt(l.pr,this.Qt)+rt.wt(l.pr,r)}var c,v=i.$o.sr.size,v=v.x+v.y,y=(w.PRIORITY_LIFTONLY!==this.ya&&w.PRIORITY_ESCALATORONLY!==this.ya&&w.PRIORITY_STAIRONLY!==this.ya&&w.PRIORITY_ACCESSIBLEONLY!==this.ya||(c=null,w.PRIORITY_LIFTONLY===this.ya&&(c=it.NaviLiftType_Lift),w.PRIORITY_ESCALATORONLY===this.ya&&(c=it.NaviLiftType_Escalator),w.PRIORITY_STAIRONLY===this.ya&&(c=it.NaviLiftType_Stair),w.PRIORITY_ACCESSIBLEONLY===this.ya&&(c=it.NaviLiftType_Accessible),s=i.We(c,null,a)),w.PRIORITY_LIFTFIRST!==this.ya&&w.PRIORITY_ESCALATORFIRST!==this.ya&&w.PRIORITY_STAIRFIRST!==this.ya&&w.PRIORITY_DEFAULT!==this.ya||(w.PRIORITY_LIFTFIRST!==this.ya&&w.PRIORITY_DEFAULT!==this.ya||(u(it.NaviLiftType_Lift,-15*o),u(it.NaviLiftType_Escalator,-8*o),u(it.NaviLiftType_Stair,0)),w.PRIORITY_ESCALATORFIRST===this.ya&&(u(it.NaviLiftType_Lift,-8*o),u(it.NaviLiftType_Escalator,-15*o),u(it.NaviLiftType_Stair,0)),w.PRIORITY_STAIRFIRST===this.ya&&(u(it.NaviLiftType_Lift,-8*o),u(it.NaviLiftType_Escalator,0),u(it.NaviLiftType_Stair,-15*o))),w.PRIORITY_LIFTFIRST1!==this.ya&&w.PRIORITY_ESCALATORFIRST1!==this.ya&&w.PRIORITY_STAIRFIRST1!==this.ya||(w.PRIORITY_LIFTFIRST1===this.ya&&(u(it.NaviLiftType_Lift,-v),u(it.NaviLiftType_Escalator,0),u(it.NaviLiftType_Stair,0)),w.PRIORITY_ESCALATORFIRST1===this.ya&&(u(it.NaviLiftType_Lift,0),u(it.NaviLiftType_Escalator,-v),u(it.NaviLiftType_Stair,0)),w.PRIORITY_STAIRFIRST1===this.ya&&(u(it.NaviLiftType_Lift,0),u(it.NaviLiftType_Escalator,0),u(it.NaviLiftType_Stair,-v))),this);s.sort(function(t,r){if(t.zone!==r.zone){if(t.zone===y.Za)return-1;if(r.zone===y.Za)return 1}return t.ie-r.ie});for(var d=0;d<s.length;d++){var b=s[d];if(!(1===b.ue&&t.Yn<i.Yn)&&(!(2===b.ue&&t.Yn>i.Yn)&&3!==b.ue))for(var p=0;p<t.Ze.length;p++){var m=t.Ze[p];if(b.Jn===m.Jn){n.push(b),e.push(m);break}}}return 0!==n.length},lf:function(t,r,i,n,e){this.Za=this.Ba.ha.get(t.Yn).Wo.fo(i);for(var o=[],s=t.Ze,u=0;u<s.length;u++){var a=s[u];a.ie=rt.wt(a.pr,this.Qt)+rt.wt(a.pr,i)}var o=t.We(it.NaviLiftType_Ramp),f=this;o.sort(function(t,r){if(t.zone!==r.zone){if(t.zone===f.Za)return-1;if(r.zone===f.Za)return 1}return t.ie-r.ie});for(var h=0;h<o.length;h++){var l=o[h];if(!(1===l.ue&&r.Yn<t.Yn)&&(!(2===l.ue&&r.Yn>t.Yn)&&3!==l.ue))for(var c=0;c<r.Ze.length;c++){var v=r.Ze[c];if(l.Jn===v.Jn){n.push(l),e.push(v);break}}}return 0!==n.length},Ka:function(t){var r=[],i=null;if(i=this.barrierFree?this.Fa:this.Ba){var n,e=A(t);try{for(e.s();!(n=e.n()).done;){var o=n.value,s=i.ca(o),u=null==s?void 0:s.Ai;u&&r.push(u)}}catch(t){e.e(t)}finally{e.f()}}return r},Ja:function(t,r,i){var n=null,i=Array.from(new Set(i)),e=i.indexOf(t),e=(-1!=e&&i.splice(e,1),i.indexOf(r));if(-1!=e&&i.splice(e,1),i.length<=0){if(n={rst:tt.ROUTE_FAILED_OUTLINE,extentPath:[]},t==r)return n.extentPath.push(t),n.rst=tt.ROUTE_SUCCESS,n;if(n.rst=this.nf(t,r),n.rst!=tt.ROUTE_SUCCESS)return n;this.Sa.reverse();for(var o=0;o<this.Sa.length;o++)n.extentPath.push(this.Sa[o].be)}else n=this.Nf(t,r,i);return n},kf:function(t){var r=0;if(!(null==t||t.length<=0))for(var i=this.pa.Wo.Ke,n=1;n<t.length;n++)for(var e=t[n].Ai,o=t[n-1].Ai,s=i.get(o),u=0;u<s.length;u++)if(s[u].Oo==e){r+=s[u].zn;break}return r},Nf:function(t,r,i){for(var n={rst:null,extentPath:[]},e=[],o=t;0<i.length;){for(var s=Number.MAX_VALUE,u=null,a=null,f=0;f<i.length;f++){var h,l=i[f];this.pa.es(o,l)==tt.ROUTE_SUCCESS&&((l=this.pa.ss()).reverse(),(h=this.kf(l))<s)&&(s=h,u=f,a=l)}if(null==u)return n;o=i[u],a.splice(a.length-1,1),e.push.apply(e,S(a)),i.splice(u,1)}if(n.rst=this.pa.es(o,r),n.rst==tt.ROUTE_SUCCESS){t=this.pa.ss();t.reverse(),e.push.apply(e,S(t));for(var c=0;c<e.length;c++)n.extentPath.push(e[c].be)}return n},$a:function(t,r,i,n){this.dn(),t.process&&(delete t.process,delete t.tmpNode),r.process&&(delete r.process,delete r.tmpNode);for(var e=[],o=t,s=0;s<n.length;s++){var u=n[s],a=((this.barrierFree?this.Fa:this.Ba).va(u),[]),f=i.get(n[s]);if(null!=f)for(;0<f.length;){for(var h=null,l=null,c=(this.If(o,f),3<=f.length?3:f.length),v=[],y=0;y<c;y++){var d=this.Af(o,f[y]);d.rst==tt.ROUTE_SUCCESS&&v.push({result:d,index:y})}v.sort(function(t,r){return t.result.dist-r.result.dist});var b=this.Pf(f,v);if(b&&(h=b.result.nodePath,l=b.index,b.result.dist),null==l)return{rst:tt.ROUTE_FAILED_WAYPOINT_CALCULATE_ERROR,nodePath:e};(o=h[h.length-1].pr).level=f[l].level,f.splice(l,1),h.splice(h.length-1,1),a.push.apply(a,S(h));for(var p=0;p<b.result.naviResult.length;p++)e.push({level:b.result.naviResult[p].Yn,path:b.result.naviResult[p].Hn})}if(s==n.length-1){this.Ca&&(u=(this.Wa&&this.barrierFree?this.Fa:this.Ba).ca(r).gu(r))&&(this.ws=u.ys);var m=this.Af(o,r);if(m.rst!=tt.ROUTE_SUCCESS)return{rst:tt.ROUTE_FAILED_WAYPOINT_CALCULATE_ERROR,nodePath:e};a.push.apply(a,S(m.nodePath));for(var w=0;w<m.naviResult.length;w++)e.push({level:m.naviResult[w].Yn,path:m.naviResult[w].Hn});for(var g,_=[e[0]],j=1;j<e.length;j++)e[j].level==_[_.length-1].level?(g=_[_.length-1].path).push.apply(g,S(e[j].path)):_.push(e[j]);return{rst:tt.ROUTE_SUCCESS,nodePath:_}}}return{rst:tt.ROUTE_SUCCESS,nodePath:e}},tf:function(t){for(var r=[],i=0;i<t.length;i++)r.push({Yn:t[i].level,Li:t[i].path});this.Li=r},Af:function(t,r){this.dn(),t.process&&(delete t.process,delete t.tmpNode),r.process&&(delete r.process,delete r.tmpNode),this.Li=[];var i=null,n=Number.MAX_VALUE,e=[],o=(i=this.Wa&&this.barrierFree?this.Fa:this.Ba).ca(t);if(!o)return tt.ROUTE_FAILED_NO_DATA_START;var s=i.ca(r);if(!s)return tt.ROUTE_FAILED_NO_DATA_DEST;o.dn(),s.dn();var u=o.gu(t);if(u&&u.ys&&u.ys.pass==it.NaviModelPassType_NOT_PASS)return{rst:tt.ROUTE_FAILED_NO_START_ARRIVAL,dist:n,nodePath:e};var a=s.gu(r);if(a&&a.ys&&a.ys.pass==it.NaviModelPassType_NOT_PASS)return{rst:tt.ROUTE_FAILED_NO_DEST_ARRIVAL,dist:n,nodePath:e};this.Ht=t,this.ps=u.ys,this.Qt=r,this.ws=a.ys;var f=o.Ai,h=s.Ai,s=u.ys,u=a.ys,a=tt.ROUTE_FAILED_CANNOT_ARRIVE;if(this.Li=[],f===h){var l=t.level;o.ps=s,o.ws=u,(a=o.ts(t,r,this.Xo))===tt.ROUTE_SUCCESS&&(s=o.ss(),this.Li.push({Yn:l,Li:s}))}else{this.nf(f,h,t,r)!=tt.ROUTE_SUCCESS&&(a=tt.ROUTE_FAILED_OUTLINE),this.Sa.reverse();u=this.ef(i,t,r);if(u==tt.ROUTE_SUCCESS){for(var e=this.cf(),c=[],v=0;v<e.length;v++)c.push.apply(c,S(e[v].Hn));return{rst:u,dist:n=this.xf(c),nodePath:c,naviResult:e}}a=u}if(a!=tt.ROUTE_SUCCESS)for(;2<this.sf(f,h,t,r).length;){if(this.ef(i,t,r)===tt.ROUTE_SUCCESS){e=this.cf();for(var y=[],d=0;d<e.length;d++)y.push.apply(y,S(e[d].Hn));return n=this.xf(y),this.uf(),{rst:tt.ROUTE_SUCCESS,dist:n,nodePath:y,naviResult:e}}f===h&&0<this.Sa.length&&(h=this.Sa[this.Sa.length-1].be)}e=this.cf();for(var b=[],p=0;p<e.length;p++)b.push.apply(b,S(e[p].Hn));return n=this.xf(b),this.uf(),{rst:a,dist:n,nodePath:b,naviResult:e}},xf:function(t){var r=0;if(!(null==t||t.length<=1))for(var i=1;i<t.length;i++)r+=rt.wt(t[i].pr,t[i-1].pr);return r},Lf:function(i,t,r,n,e){var o=Math.abs(i.Yn-t.Yn),s=[];function u(t,r){t=i.We(t,r,a);s.push.apply(s,S(t))}var a=[];if(0==this.Wa&&1==this.barrierFree)for(var f=0;f<i.Ze.length;f++)1==i.Ze[f].Of&&a.push(i.Ze[f]);else a=i.Ze;for(var h=0;h<a.length;h++){var l=a[h];l.ie=rt.wt(r,l.pr)}var c,v=i.$o.sr.size,v=v.x+v.y,y=(w.PRIORITY_LIFTONLY!==this.ya&&w.PRIORITY_ESCALATORONLY!==this.ya&&w.PRIORITY_STAIRONLY!==this.ya&&w.PRIORITY_ACCESSIBLEONLY!==this.ya||(c=null,w.PRIORITY_LIFTONLY===this.ya&&(c=it.NaviLiftType_Lift),w.PRIORITY_ESCALATORONLY===this.ya&&(c=it.NaviLiftType_Escalator),w.PRIORITY_STAIRONLY===this.ya&&(c=it.NaviLiftType_Stair),w.PRIORITY_ACCESSIBLEONLY===this.ya&&(c=it.NaviLiftType_Accessible),s=i.We(c,null,a)),w.PRIORITY_LIFTFIRST!==this.ya&&w.PRIORITY_ESCALATORFIRST!==this.ya&&w.PRIORITY_STAIRFIRST!==this.ya&&w.PRIORITY_DEFAULT!==this.ya||(w.PRIORITY_LIFTFIRST!==this.ya&&w.PRIORITY_DEFAULT!==this.ya||(u(it.NaviLiftType_Lift,-15*o),u(it.NaviLiftType_Escalator,-8*o),u(it.NaviLiftType_Stair,0)),w.PRIORITY_ESCALATORFIRST===this.ya&&(u(it.NaviLiftType_Lift,-8*o),u(it.NaviLiftType_Escalator,-15*o),u(it.NaviLiftType_Stair,0)),w.PRIORITY_STAIRFIRST===this.ya&&(u(it.NaviLiftType_Lift,-8*o),u(it.NaviLiftType_Escalator,0),u(it.NaviLiftType_Stair,-15*o))),w.PRIORITY_LIFTFIRST1!==this.ya&&w.PRIORITY_ESCALATORFIRST1!==this.ya&&w.PRIORITY_STAIRFIRST1!==this.ya||(w.PRIORITY_LIFTFIRST1===this.ya&&(u(it.NaviLiftType_Lift,-v),u(it.NaviLiftType_Escalator,0),u(it.NaviLiftType_Stair,0)),w.PRIORITY_ESCALATORFIRST1===this.ya&&(u(it.NaviLiftType_Lift,0),u(it.NaviLiftType_Escalator,-v),u(it.NaviLiftType_Stair,0)),w.PRIORITY_STAIRFIRST1===this.ya&&(u(it.NaviLiftType_Lift,0),u(it.NaviLiftType_Escalator,0),u(it.NaviLiftType_Stair,-v))),this);s.sort(function(t,r){if(t.zone!==r.zone){if(t.zone===y.Za)return-1;if(r.zone===y.Za)return 1}return t.ie-r.ie});for(var d=0;d<s.length;d++){var b=s[d];if(!(1===b.ue&&t.Yn<i.Yn)&&!(2===b.ue&&t.Yn>i.Yn))for(var p=0;p<t.Ze.length;p++){var m=t.Ze[p];if(b.Jn===m.Jn){n.push(b),e.push(m);break}}}return 0!==n.length},If:function(i,t){t.sort(function(t,r){return rt.gt(i,t)-rt.gt(i,r)})},Pf:function(t,r){var i=null;if(!(r.length<1)){var n=(i=r[0]).index;if(!(r.length<2)&&3<=r.length){for(var e,o=Number.MAX_VALUE,s=-1,u=0;u<t.length;u++)u!=n&&(e=rt.wt(t[n],t[u]))<o&&(o=e,s=u);s!=r[1].index&&(i=r[1])}}return i},yu:function(t){var r=new Map;if(void 0!==t&&0===t.length){var i,n=this.Ba.ha,e=this.Ba.ha,o=A(this.qs.keys());try{for(o.s();!(i=o.n()).done;){var s,u=i.value,a=A(n.keys());try{for(a.s();!(s=a.n()).done;){var f=s.value,h=n.get(f);h.level===u&&h.yu([])}}catch(t){a.e(t)}finally{a.f()}var l,c=A(e.keys());try{for(c.s();!(l=c.n()).done;){var v=l.value,y=e.get(v);y.level===u&&y.yu([])}}catch(t){c.e(t)}finally{c.f()}}}catch(t){o.e(t)}finally{o.f()}this.qs.clear()}else{for(var d=0;d<t.length;d++){var b=t[d],p=r.get(b.Yn);p||r.set(b.Yn,p=[]),p.push(b)}var m,w=this.Ba.ha,g=this.Ba.ha,_=A(r.keys());try{for(_.s();!(m=_.n()).done;){var j=m.value,S=this.qs.get(j);if(!S||this.Df(r.get(j),S)){var O,E=A(w.keys());try{for(E.s();!(O=E.n()).done;){var T=O.value,R=w.get(T);R.level===j&&(R.yu(r.get(j)),this.qs.set(j,r.get(j)),0)}}catch(t){E.e(t)}finally{E.f()}var M,N=A(g.keys());try{for(N.s();!(M=N.n()).done;){var k=M.value,I=g.get(k);I.level===j&&(I.yu(r.get(j)),this.qs.set(j,r.get(j)),0)}}catch(t){N.e(t)}finally{N.f()}}}}catch(t){_.e(t)}finally{_.f()}}},Bf:function(){var t,r=this.Ba.ha,i=A(this.qs.keys());try{for(i.s();!(t=i.n()).done;){var n,e=t.value,o=A(r.keys());try{for(o.s();!(n=o.n()).done;){var s=n.value,u=r.get(s);u.level===e&&u.Bf()}}catch(t){o.e(t)}finally{o.f()}}}catch(t){i.e(t)}finally{i.f()}this.qs.clear()},Df:function(t,r){if(t.length!=r.length)return!0;for(var i=0;i<t.length;i++){for(var n=!1,e=0;e<r.length;e++)r[e].Ff(t[i])&&(n=!0);if(!n)return!0}return!1},au:function(){for(var t in this.Ua){var r,i=parseInt(t),n=void 0,e=A((n=(this.Wa&&this.barrierFree?this.Ba:this.Fa).ha).keys());try{for(e.s();!(r=e.n()).done;){var o=r.value;n.get(o).Yn===i&&(dij.assignedPts=this.Ua[i],dij.au(),this.Li.push({Yn:i,Li:dij.ss()}))}}catch(t){e.e(t)}finally{e.f()}}}}),o),Co={zh:{straight:"",still_go_straight:"",back_to:"",turn_right:"",turn_left:"",right_front:" ",left_front:" ",turn_right_rear:"",turn_left_rear:"",up:"",down:"",up_to:"",down_to:"",drive_up:"",drive_down:"",meter:"",pass:"",arrived:"",front:"",stair:"",stair_pure:"",escalator_pure:"",lift_pure:"",ramp_pure:"",take:"",along:"",take_stair:"",along_ramp:"",front_pure:"",right_front_pure:"",right_pure:"",right_back_pure:"",back_pure:"",left_back_pure:"",left_pure:"",left_front_pure:"",east:"",west:"",south:"",north:"",southeast:"",northeast:"",southwest:"",northwest:"",face_to:"",start:"",dest:"",enter:"",outdoor:"",entrance:"",exit:"",reach:""},en:{straight:"go straight",still_go_straight:"go straight",back_to:"turn back",turn_right:"turn right",turn_left:"turn left",right_front:"go straight right front ",left_front:"go straight left front ",turn_right_rear:"turn right rear",turn_left_rear:"turn left rear",up:"up",down:"up",up_to:"up to",down_to:"down to",drive_up:"drive up",drive_down:"drive down",meter:"meter",pass:"pass",arrived:"arrived",front:"front",stair:"stair",stair_pure:"stair",escalator_pure:"escalator",lift_pure:"lift",ramp_pure:"ramp",take:"take",along:"along",take_stair:"take stair",along_ramp:"along ramp",front_pure:"front",right_front_pure:"right front",right_pure:"right",right_back_pure:"right back",back_pure:"back",left_back_pure:"left back",left_pure:"left",left_front_pure:"left front",east:"east",west:"west",south:"south",north:"north",southeast:"southeast",northeast:"northeast",southwest:"southwest",northwest:"northwest",face_to:"face to",start:"start",dest:"dest",enter:"enter",outdoor:"outdoor",entrance:"entrance",exit:"exit",reach:"reach"}};function Uo(t){return(Uo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zo(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){t=function(t,r){if("object"!=Uo(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===r?String:Number)(t);i=i.call(t,r||"default");if("object"!=Uo(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==Uo(t)?t:String(t)}(n.key),n)}}function Wo(t,r,i){return r&&Zo(t.prototype,r),i&&Zo(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}var o=Wo(function t(r){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.Gf=r.data||null,this.Cf=r.directionAssert||10,this.Uf=r.combineAsset||5,this.Zf=r.combineDistance||.1,this.Wf=r.language||u.ZH,this.Sr=r.type||O.Walk,this.Vf=["north","northeast","east","southeast","south","southwest","west","northwest","north"],this.qf=["front_pure","right_front_pure","right_pure","right_back_pure","back_pure","left_back_pure","left_pure","left_front_pure","front_pure"],this.Yf=["still_go_straight","right_front","turn_right","turn_right_rear","back_to","turn_left_rear","turn_left","left_front","still_go_straight"],this.zf=0,this.Xf=[],this.Hf=!1,this.Qf=0,Object.assign(this,r)}),Vo=(Object.assign(o.prototype,{Kf:function(t){for(var r=[],i=0;i<t.length;i++)r=r.concat(t[i].Hn);return r},Jf:function(t,r){var i=Math.PI/4,t=t/i,n=parseInt(t),t=t%1*i;return n%2==0?r<t&&(n+=1):i-r<=t&&(n+=1),n},$f:function(t,r){var i=r.angleTo(t);return i=new Z(r.x,r.z,r.y).cross(new Z(t.x,t.z,t.y)).z<0?2*Math.PI-i:i},bn:function(){var t={center:{x:0,y:0,z:0}};return this.Gf&&(t.center.x=this.Gf.scene.defCenX,t.center.y=this.Gf.scene.defCenY,t.center.z=this.Gf.scene.defCenZ),t},th:function(t,r){var i=0;return r.level&&(i=this.On(r.level).height),new Z(r.x-t.x,t.y+i,-r.y+t.y)},rh:function(t){t=Co[this.Wf][t];return t||""},On:function(t){var r=null;if(!this.Gf)return null;for(var i=this.Gf.scene,r={level:t,height:0,gname:"",desc:""},n=0;n<i.layerGroups.length;n++){var e=i.layerGroups[n];if(e.gid===t){r.height=e.height,r.gname=e.gname,r.desc=e.desc;break}}return r},ih:function(t){if(-1!=t)switch(t){case 2:return" "+this.rh("stair_pure");case 3:return" "+this.rh("escalator_pure");case 1:return" "+this.rh("lift_pure");case 5:return" "+this.rh("ramp_pure");default:return""}return this.rh("stair")},nh:function(t,r){var i,n,e,o;return r==t.length-1?{index:t[t.length-1].index}:(e=n=new Z(0,0,1),0!=r&&((e=t[r].clone().sub(t[r-1]).normalize()).y=0,e.z*=-1),(o=t[r+1].clone().sub(t[r])).y=0,i=o.length(),(o=o.normalize()).z*=-1,n=this.Jf(this.$f(n,o),22.5*rt.it()),e=this.$f(e,o),{relField:o=this.Jf(e,this.Cf*rt.it()),relDesc:this.rh(this.qf[o]),relAngle:e*rt.nt(),absField:n,absDesc:this.rh(this.Vf[n]),distance:i,index:t[r].index})},eh:function(t,r,i){for(var n=this,e=this.bn().center,o=t.map(function(t,r){t=n.th(e,t);return t.index=r,t}),s=[],u=0;u<o.length;u++){var a=this.nh(o,u);a.point=t[u],0!==r[u].se&&(a.isLift=!0),!0===r[u].$s&&(a.$s=!0),a.level=i,s.push(a)}for(var f=[s[0]],h=1;h<s.length;h++)s[h].isLift?f.push(s[h]):1==h&&s[0].distance<=this.Zf?(s[0].distance+=s[h].distance,s[0].relDesc=s[h].relDesc,s[0].relAngle=s[h].relAngle,s[0].absField=s[h].absField,s[0].absDesc=s[h].absDesc):s[h].distance<=this.Zf&&(s[h].relAngle<=this.Uf||360-s[h].relAngle<=this.Uf)&&!s[h].$s||(s[h].relAngle<=this.Uf||360-s[h].relAngle<=this.Uf)&&!s[h].$s?f[f.length-1].distance+=s[h].distance:f.push(s[h]);return f},oh:function(t,r){var i=[],n=0;if(r.forEach(function(t){(t.$s||t.pr.$s)&&i.push(n),n++}),0!=i.length)for(;0!=i.length;){for(var e=0;e<t.length-1;e++)if(t[e].index<=i[0]&&t[e+1].index>=i[0]){t[e+1].$s=!0;break}i.splice(0,1)}},sh:function(t){var r="",t=this.On(t);return r=null==t||""+(r=this.Wf==u.ZH?t.desc:t.gname.toUpperCase())!="null"&&""+r!=""&&""+r!="undefined"?r:t.gname.toUpperCase()},uh:function(t,r,i,n,e,o){var s,u,a=t[r],f=t[r+1],h=null,l=this.rh(this.Yf[f.relField]),i=(this.Hf=r==t.length-3&&f.distance<this.zf,l&&!this.Hf||(n?(this.Hf=!1,l||(h=this.ah(t[r+1].point,e),e=this.ih(h),s=null,u=this.sh(n),l=this.Sr==O.Drive?(s=i<n?this.rh("drive_up"):this.rh("drive_down"),this.rh("along")+e+" "+s+" "+u):(s=i<n?this.rh("up_to"):this.rh("down_to"),this.rh("take")+e+" "+s+" "+u))):(this.Hf&&(this.Qf=f.distance),o||(l=this.rh("arrived")))),null),i=0==r?2==t.length?this.rh("face_to")+" "+a.absDesc+" "+this.rh("straight")+" "+Math.ceil(a.distance)+" "+this.rh("meter")+" "+l:this.rh("face_to")+" "+a.absDesc+" "+this.rh("straight")+" "+Math.ceil(a.distance)+" "+this.rh("meter")+" "+this.rh(this.Yf[t[r+1].relField]):this.rh("straight")+" "+Math.ceil(a.distance+(this.Hf&&!n?f.distance:0))+" "+this.rh("meter")+" "+l;return[i=f.$s?(i+=" ")+this.rh("pass"):i,h]},fh:function(t,r,i,n,e){var o=t[r],s=t[r+1];return this.rh(this.Yf[t[r+1].relField])&&!this.Hf||(n?(t=i<n?this.rh("up"):this.rh("down"),s.relDesc=t):s.relDesc=e?this.rh("front_pure"):this.rh("dest")),{startPoint:o.point,startLevel:o.level,startIndex:o.index,endPoint:s.point,endLevel:s.level,endIndex:s.index,startDirection:o.absDesc,endDirection:s.relDesc,distance:o.distance+(this.Hf&&!n?s.distance:0)}},ah:function(t,r){for(var i,n=Number.MAX_SAFE_INTEGER,e=-1,o=0;o<r.length;o++)r[o]&&(i=Math.pow(r[o].pr.x-t.x,2)+Math.pow(r[o].pr.y-t.y,2))<n&&0!==r[o].se&&(n=i,e=r[o].se);return e},hh:function(t){for(var r,i=t.lh,n=t.yh,e=t.result,o=[],s=[],u=[],a=null,f=0,h=[],l=!(this.Xf=[]),c=null,v=null,t=t.buildingName||this.rh("outdoor"),y=this.Kf(e),d=0;d<e.length;d++){if(r=(m=e[d]).level,a=null,d<e.length-1)for(var b=d;b<e.length;b++)if(e[b].level!=r){a=e[b].level;break}var p,m,w=m.pointList,g=this.eh(w,m.Hn,r);if(this.oh(g,m.Hn),1<g.length&&(this.Xf=this.Xf.concat(g)),1==g.length)(a||l)&&(l?s.length&&(d==e.length-1&&(n?(o[o.length-1]+=" "+this.rh("arrived"),s[s.length-1].endDirection=this.rh("dest")):s[s.length-1].endDirection=this.rh("front_pure")),s[s.length-1].endPoint=w[0],s[s.length-1].endLevel=r):c!=r&&null!=c||(m=null,p=this.sh(a),v=this.Sr===O.Drive?(m=r<a?this.rh("drive_up"):this.rh("drive_down"),this.rh("along_ramp")+" "+m+" "+p):(m=r<a?this.rh("up_to"):this.rh("down_to"),this.rh("take_stair")+" "+m+" "+p),o.push(v),s.push({startPoint:w[0],startDirection:r<a?this.rh("up"):this.rh("down"),startLevel:r})),l=!l);else for(var c=r,_=0;_<g.length-1&&!this.Hf;_++){var j=this.uh(g,_,r,a,y,n),S=j[0],j=j[1];j&&u.push(j),o.push(S),s.push(this.fh(g,_,r,a,n))}1<g.length&&(m=g.reduce(function(t,r){return t+(r.distance||0)},0),h.push({level:r,distance:m}),f+=m)}return i&&0<o.length&&(o[0]=this.rh("enter")+" "+t+" "+o[0]),n&&0<o.length&&(t===this.rh("outdoor")?o[o.length-1]=o[o.length-1]+this.rh("reach")+" "+n+" "+this.rh("entrance"):o[o.length-1]=o[o.length-1]+this.rh("reach")+" "+t+" "+this.rh("exit")),[o,s,f,h,this.Qf,u]}}),o);function qo(t){return(qo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function T(t,r){var i,n,e,o,s="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(s)return n=!(i=!0),{s:function(){s=s.call(t)},n:function(){var t=s.next();return i=t.done,t},e:function(t){n=!0,e=t},f:function(){try{i||null==s.return||s.return()}finally{if(n)throw e}}};if(Array.isArray(t)||(s=zo(t))||r&&t&&"number"==typeof t.length)return s&&(t=s),o=0,{s:r=function(){},n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:r};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Yo(t){return function(t){if(Array.isArray(t))return Xo(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||zo(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zo(t,r){var i;if(t)return"string"==typeof t?Xo(t,r):"Map"===(i="Object"===(i=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Xo(t,r):void 0}function Xo(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,n=new Array(r);i<r;i++)n[i]=t[i];return n}function Ho(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){t=function(t,r){if("object"!=qo(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===r?String:Number)(t);i=i.call(t,r||"default");if("object"!=qo(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==qo(t)?t:String(t)}(n.key),n)}}function Qo(t,r,i){return r&&Ho(t.prototype,r),i&&Ho(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}var o=Qo(function t(r){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.dh=r.gate,this.bh=r.bidToOutline,this.ph=r.bidToOutlineAccess,this.mh={},this.wh={},this.gh=-1,this._h=-1,this.jh=[],this.Sh=[],this.Oh=new Map,this.Eh=new Map,this.Th=[],this.Rh=new Map,this.Mh=[],this.Nh=new Map,this.kh=new Map,this.Ih=new Map,this.ve=null,this.ye=null,this.Ah=null,this.Ph=null,this.Sr=r.type,this.xh=r.barrierFree,this.Lh=!1,this.Dh=null,this.Bh=10,this.Fh=2,this.Gh()}),Ko=(Object.assign(o.prototype,{Gh:function(){this.dh&&(this.Ch(),this.Uh(),this.Zh(this.jh,this.kh),this.Zh(this.Sh,this.Ih))},Ch:function(){for(var t=0;t<this.dh.length;t++){var r=null,i=null,r=null==this.Sr||0===this.Sr?(i=this.dh[t].accessible,this.dh[t].navi):this.dh[t].drive,n=""==this.dh[t].bid?null:this.dh[t].bid,e=this.dh[t].gid,r=this.Wh(r,e,n),i=this.Wh(i,e,n);(e=this.Th).push.apply(e,Yo(r)),(e=this.Mh).push.apply(e,Yo(i)),null==this.mh[n]&&(this.mh[n]=[]),(e=this.mh[n]).push.apply(e,Yo(r)),null==this.wh[n]&&(this.wh[n]=[]),(e=this.wh[n]).push.apply(e,Yo(i))}for(var o=0;o<this.Th.length;o++)this.Th[o].Ai=o,this.Rh.set(o,this.Th[o]);for(var s=0;s<this.Mh.length;s++)this.Mh[s].Ai=s,this.Nh.set(s,this.Mh[s])},Wh:function(t,r,i){if(null==t)return[];for(var n=[],e=0;e<t.length;e++){var o=t[e];o.level=r,o.bid=i,n.push(o)}return n},Uh:function(){this.jh=this.Vh(this.Rh);this.Sh=this.Vh(this.Nh,!0);for(var t=0;t<this.jh.length;t++)this.jh[t].Ai=t,this.Oh.set(t,this.jh[t]);for(var r=0;r<this.Sh.length;r++)this.Sh[r].Ai=r,this.Eh.set(r,this.Sh[r])},Vh:function(t,r){for(var i=[],n=Array.from(t.keys()),e=0;e<n.length;e++)for(var o=e+1;o<n.length;o++){var s,u=n[e],a=n[o],f=t.get(u),h=t.get(a);t.get(u).flag==t.get(a).flag&&(s=this.qh(f,h),i.push(s)),t.get(u).bid==t.get(a).bid&&this.Yh(f,h,r)&&(s=this.qh(f,h),i.push(s))}return i},qh:function(t,r){var i,n,e,o=0,s={};return s.startPoint=t.Ai,s.endPoint=r.Ai,s.Ai=null,t.bid==r.bid?(i={x:t.pts[0],y:t.pts[1]},n={x:r.pts[0],y:r.pts[1]},e=Math.abs(t.level-r.level)*this.Bh,0<=t.Ai&&0<=r.Ai?this.Fh=4:this.Fh=2,o=0!=e||t.extentID!==r.extentID?(rt.distance(i,n)+e)*this.Fh:rt.distance(i,n)+e,s.dist=Number(o.toFixed(5))):s.dist=o,s},Yh:function(t,r,i){var n=t.bid,e=this.Xh(t),o=this.Xh(r);return(t.extentID=e)==(r.extentID=o)||(i?this.ph:this.bh).get(n).es(e,o)===tt.ROUTE_SUCCESS},Xh:function(t){for(var r,i=null==(r=this.bh.get(t.bid).Wo)?void 0:r.Ve,n=0;n<i.length;n++){var e=i[n].$o,o=i[n].Yn;if(t.level===o){o={x:t.pts[0],y:t.pts[1]};if(e.xe(o))return e.be}}return 0},Hh:function(t){this.ve=this.gh;var r=t.buildingID||null,i=[],n={type:null,pts:[t.x,t.y],bid:r,level:t.level,Ai:this.ve},e=[];if(null==(e=(this.xh?this.wh:this.mh)[r])||0==e.length)return!1;for(var o,s=0;s<e.length;s++)this.Yh(n,e[s])&&(o=this.qh(n,e[s]))&&(o.Ai=this._h,i.push(o),(this.xh?(this.Sh.push(o),this.Eh):(this.jh.push(o),this.Oh)).set(this._h,o),--this._h);return this.xh?(this.Mh.push(n),this.Nh.set(this.ve,n),this.Zh(i,this.Ih)):(this.Th.push(n),this.Rh.set(this.ve,n),this.Zh(i,this.kh)),--this.gh,!0},Qh:function(t){this.ye=this.gh;var r=t.buildingID||null,i=[],n={type:null,pts:[t.x,t.y],bid:r,level:t.level,Ai:this.ye},e=[];if(null==(e=(this.xh?this.wh:this.mh)[r])||0==e.length)return!1;this.Th.push(n),this.Rh.set(this.ye,n);for(var o,s=0;s<e.length;s++)this.Yh(n,e[s])&&(o=this.qh(n,e[s]))&&(o.Ai=this._h,i.push(o),(this.xh?(this.Sh.push(o),this.Eh):(this.jh.push(o),this.Oh)).set(this._h,o),--this._h);return this.xh?(this.Mh.push(n),this.Nh.set(this.ye,n),this.Zh(i,this.Ih)):(this.Th.push(n),this.Rh.set(this.ye,n),this.Zh(i,this.kh)),--this.gh,!0},Zh:function(t,r){for(var i=0;i<t.length;i++){var n=t[i],e=n.startPoint,o=n.endPoint;r.has(e)||r.set(e,new Map),r.get(e).set(o,n.dist),r.has(o)||r.set(o,new Map),r.get(o).set(e,n.dist)}return r},Kh:function(t,r,i){var n=null,e=null;if(this.xh){if(!this.Ih.has(t))return!1;for(var o=0;o<r.length;o++)if(!this.Ih.has(r[o]))return!1;n=this.Nh,e=this.Ih}else{if(!this.kh.has(t))return!1;for(var s=0;s<r.length;s++)if(!this.kh.has(r[s]))return!1;n=this.Rh,e=this.kh}this.hs(r,t);var u,a=r.length,f=0,h=T(n.keys());try{for(h.s();!(u=h.n()).done;){var l=u.value;if(n.get(l).ie=l==t?0:Number.MAX_VALUE,n.get(l).ne=!1,n.get(l).ee=[],i instanceof Array)for(var c=0;c<i.length;c++){if(l!=i[c]&&n.get(l).flag===n.get(i[c]).flag){-1==i.indexOf(l)&&i.push(l);break}if(i.length>=n.size)return!1}}}catch(t){h.e(t)}finally{h.f()}var v=[];for(v.push(t);0<v.length;){var y=v[0],d=(v.splice(0,1),n.get(y));if(!d.ne){d.ne=!0;var b=r.indexOf(y);if(-1!=b&&++f==a)return!0;var p=e.get(y);if(p){var m,w=T(p.keys());try{for(w.s();!(m=w.n()).done;){var g=m.value,_=d.ie+p.get(g),j=n.get(g);i instanceof Array&&i.includes(g)||j.ne||j.ie>_&&(j.ie=_,j.ee=[],j.ee.push(y),v.push(g))}}catch(t){w.e(t)}finally{w.f()}v.sort(function(t,r){return n.get(t).ie-n.get(r).ie})}}}return!(f<a)},hs:function(t,r){for(var i=t.indexOf(r);-1!=i;)t.splice(i,1),i=t.indexOf(r)},ts:function(){if(this.xh){if(!this.Ih.has(this.ve))return tt.ROUTE_FAILED_CANNOT_CALCULATE;if(!this.Ih.has(this.ye))return tt.ROUTE_FAILED_CANNOT_CALCULATE}else{if(!this.kh.has(this.ve))return tt.ROUTE_FAILED_CANNOT_CALCULATE;if(!this.kh.has(this.ye))return tt.ROUTE_FAILED_CANNOT_CALCULATE}var t=[];return t.push(this.ye),this.Kh(this.ve,t)?tt.ROUTE_SUCCESS:tt.ROUTE_FAILED_CANNOT_ARRIVE},ss:function(){var t=[],r=[];r.push(this.ye),this.us(r,t);for(var i=0;i<t.length;i++)t[i].paths.reverse();return t},us:function(t,r){for(var i=0;i<t.length;i++){var n={paths:[],distance:0};n.paths.push(t[i]),this.cs(t[i],n),r.push(n)}},cs:function(t,r){var i=null,n=null;if(this.xh){if(0==this.Nh.get(t).ee.length)return;i=this.Nh.get(t).ee[0],n=this.Nh.get(t).ie}else{if(0==this.Rh.get(t).ee.length)return;i=this.Rh.get(t).ee[0],n=this.Rh.get(t).ie}null!=i&&(r.paths.push(i),r.distance+=n),this.cs(i,r)},Jh:function(t){var r,i=new Map,n=T(t.keys());try{for(n.s();!(r=n.n()).done;){for(var e=r.value,o=rt.Gt(t.get(e)),s=(o.bid=e,0),u=0;u<t.get(e).length;u++)s+=t.get(e)[u].level;s=Math.floor(s/t.get(e).length),o.level=s,i.set(e,o)}}catch(t){n.e(t)}finally{n.f()}return i},$h:function(t){var r,i=null,n=null,e=[],o=T(t.keys());try{for(o.s();!(r=o.n()).done;){var s=r.value,u=this.tl(t.get(s));if(!u)return null;u.bid==this.Ah?i=u:u.bid==this.Ph?n=u:e.push(u)}}catch(t){o.e(t)}finally{o.f()}return null!=i&&e.unshift(i),null!=n&&e.push(n),e},tl:function(t){var r=t.bid||null,i=[],n={type:null,pts:[t.x,t.y],bid:t.bid,level:t.level,Ai:this.gh},e=[];if(!(e=(this.xh?this.wh:this.mh)[r])||0==e.length)return null;for(var o,s=0;s<e.length;s++)this.Yh(n,e[s])&&(o=this.qh(n,e[s]))&&(o.Ai=this._h,i.push(o),(this.xh?(this.Sh.push(o),this.Eh):(this.jh.push(o),this.Oh)).set(this._h,o),--this._h);return this.xh?(this.Mh.push(n),this.Nh.set(this.gh,n),this.Zh(i,this.Ih)):(this.Th.push(n),this.Rh.set(this.gh,n),this.Zh(i,this.kh)),--this.gh,n},rl:function(){if(!this.dh||0===this.dh.length)return null;var t=null;if(this.Lh){var r=this.Jh(this.Dh),i=this.$h(r);if(!i||0===i.length)return null;for(var n=[],e=1;e<i.length-1;e++)n.push(i[e].Ai);var r=i[0].Ai,o=[r],s=[],u=i[i.length-1].Ai;if(this.il(r,n,o,s),this.il(o[o.length-1],[u],o,s),o.length==i.length)return t=this.nl(s)}return t},nl:function(t){for(var r=[],i=-1,n=[],e=0;e<t.length;e++)for(var o,s=t[e].paths,u=null,a=0;a<s.length;a++)0<s[a]&&(o=s[a],u=this.Rh.get(o),-1==i&&(i=u.bid),u.bid==i?n.push(u):(r.push({bid:i,entrances:n}),n=[u]),i=u.bid),e==t.length-1&&a==s.length-1&&u&&r.push({bid:u.bid,entrances:n});return r},il:function(t,r,i,n){if(0!=r.length){for(var e,o=null,s=Number.MAX_VALUE,u=null,a=0,f=0;f<r.length;f++)this.Kh(t,[r[f]])&&(this.cs(r[f],e={paths:[],distance:0}),e.distance<s)&&(s=e.distance,o=r[f],u=e,a=f);o&&(i.push(o),u.paths.reverse(),n.push(u),r.splice(a,1),this.il(o,r,i,n))}},dn:function(){this.Th=this.Th.filter(function(t){return 0<=t.Ai}),this.Mh=this.Mh.filter(function(t){return 0<=t.Ai}),this.jh=this.jh.filter(function(t){return 0<=t.Ai}),this.Sh=this.Sh.filter(function(t){return 0<=t.Ai});var t,r=T(this.Rh.keys());try{for(r.s();!(t=r.n()).done;){var i=t.value;i<0&&this.Rh.delete(i)}}catch(t){r.e(t)}finally{r.f()}var n,e=T(this.Nh.keys());try{for(e.s();!(n=e.n()).done;){var o=n.value;o<0&&this.Nh.delete(o)}}catch(t){e.e(t)}finally{e.f()}var s,u=T(this.Oh.keys());try{for(u.s();!(s=u.n()).done;){var a=s.value;a<0&&this.Oh.delete(a)}}catch(t){u.e(t)}finally{u.f()}var f,h=T(this.Eh.keys());try{for(h.s();!(f=h.n()).done;){var l=f.value;l<0&&this.Eh.delete(l)}}catch(t){h.e(t)}finally{h.f()}var c,v=T(this.kh.keys());try{for(v.s();!(c=v.n()).done;){var y=c.value;if(y<0)this.kh.delete(y);else{var d,b=T(this.kh.get(y).keys());try{for(b.s();!(d=b.n()).done;){var p=d.value;p<0&&this.kh.get(y).delete(p)}}catch(t){b.e(t)}finally{b.f()}}}}catch(t){v.e(t)}finally{v.f()}var m,w=T(this.Ih.keys());try{for(w.s();!(m=w.n()).done;){var g=m.value;if(g<0)this.Ih.delete(g);else{var _,j=T(this.Ih.get(g).keys());try{for(j.s();!(_=j.n()).done;){var S=_.value;S<0&&this.Ih.get(g).delete(S)}}catch(t){j.e(t)}finally{j.f()}}}}catch(t){w.e(t)}finally{w.f()}this.gh=-1,this._h=-1}}),o);function Jo(t){return(Jo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $o(t){return function(t){if(Array.isArray(t))return is(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||rs(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ts(t,r){var i,n,e,o,s="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(s)return n=!(i=!0),{s:function(){s=s.call(t)},n:function(){var t=s.next();return i=t.done,t},e:function(t){n=!0,e=t},f:function(){try{i||null==s.return||s.return()}finally{if(n)throw e}}};if(Array.isArray(t)||(s=rs(t))||r&&t&&"number"==typeof t.length)return s&&(t=s),o=0,{s:r=function(){},n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:r};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function rs(t,r){var i;if(t)return"string"==typeof t?is(t,r):"Map"===(i="Object"===(i=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?is(t,r):void 0}function is(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,n=new Array(r);i<r;i++)n[i]=t[i];return n}function ns(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){t=function(t,r){if("object"!=Jo(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===r?String:Number)(t);i=i.call(t,r||"default");if("object"!=Jo(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==Jo(t)?t:String(t)}(n.key),n)}}function es(t,r,i){return r&&ns(t.prototype,r),i&&ns(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}var o=es(function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.Nr=null,this.Ht=null,this.Qt=null,this.Xo=null,this.ya=null,this.Sr=null,this.da=new Map,this.el=new Map,this.Li=tt.ROUTE_FAILED_CANNOT_ARRIVE,this.ol=[],this.sl=null,this.ul=[],this.Ga=null,this.Ua=[],this.Ca=!1,this.barrierFree=!1,this.za=[],this.al=null}),os=(Object.assign(o.prototype,{Ln:function(t){this.Nr=t,this.Sr=t.type,this.al=t.bid||null;var r,i=new Map,n=ts(this.el.keys());try{for(n.s();!(r=n.n()).done;){var e=r.value;i.set(e,this.el.get(e).pa)}}catch(t){n.e(t)}finally{n.f()}var o,s=new Map,u=ts(this.el.keys());try{for(u.s();!(o=u.n()).done;){var a=o.value;s.set(a,this.el.get(a).ma)}}catch(t){u.e(t)}finally{u.f()}t={gate:this.Nr.gate,bidToOutline:i,bidToOutlineAccess:s,type:this.Sr,barrierFree:this.barrierFree};this.fl=new Ko(t)},rf:function(t,r,i,n){this.dn(),t.buildingID=void 0!==t.buildingID?t.buildingID:this.al,r.buildingID=void 0!==r.buildingID?r.buildingID:this.al,this.Ht=t,this.Qt=r,this.Xo=i,this.ya=n;var e=[];if(this.Ht.buildingID==this.Qt.buildingID){var o=[[{pts:[t.x,t.y],bid:t.buildingID||null,level:t.level},{pts:[r.x,r.y],bid:r.buildingID||null,level:r.level}]];if(this.Li=this.hl(o),this.Li==tt.ROUTE_SUCCESS||this.Li==tt.ROUTE_FAILED_NO_START_ARRIVAL||this.Li==tt.ROUTE_FAILED_NO_DEST_ARRIVAL)return this.Li;if(null==this.fl)return this.Li}if(0==(o=this.ll(t,r)).length)this.Li=tt.ROUTE_FAILED_ENTRANCE;else{for(var s=0;s<o.length;s++)e.push(o[s][0].bid);i=this.hl(o);this.Li=i}return this.Li},dn:function(){this.Li=tt.ROUTE_FAILED_CANNOT_ARRIVE,this.ol=[],this.sl=null,this.ul=[]},ll:function(t,r){var i=[];if(this.cl(t,r)===tt.ROUTE_SUCCESS)for(var n=this.vl()[0],e=[],o=0;o<n.length-1;o++){var s=n[o],u=n[o+1];0===e.length&&e.push(s),s.bid===u.bid?(e.push(u),o==n.length-2&&i.push(e)):(i.push(e),e=[])}return i},hl:function(t){var r,i=new Map,n=new Map;null!=(r=this.fl)&&r.mh&&(n=this.fl.mh);for(var e=0;e<t.length;){if(t[e].length<=1)return tt.ROUTE_FAILED_CANNOT_ARRIVE;for(var o=0;o<t[e].length-1;o++){var s={},u=(s.x=t[e][o].pts[0],s.y=t[e][o].pts[1],s.level=t[e][o].level,t[e][o].Ai),a={},f=(a.x=t[e][o+1].pts[0],a.y=t[e][o+1].pts[1],a.level=t[e][o+1].level,t[e][o+1].Ai),h=t[e][o].bid,s=(this.el.get(h),this.yl(s,a,h));if(s===tt.ROUTE_SUCCESS){a=this.dl(h);if(this.ul.push({bid:h,result:a}),o===t[e].length-2){e+=1;break}}else{a=n[h];if(1==t.length)return s;if(e==t.length-1){var l=t[e-1][o].Ai,c=f,v=(i[h]=i[h]||[],i[h].push(u),i[h]);if(v.length===a.length)return s;l=this.bl(l,[c],v);if(l.length<=1)return s;t.splice(e,1),t.splice(e-1,1),t.splice.apply(t,[e-1,0].concat($o(l))),e-=1,this.ul.pop();break}c=u,v=t[e+1][o+1].Ai,l=(i[h]=i[h]||[],i[h].push(f),i[h]);if(l.length===a.length)return s;var y=this.bl(c,[v],l);if(!(1<y.length)){if(i[h].pop(),e<1)return s;var d=t[e-1][o].Ai,u=(i[h]=i[h]||[],i[h].push(u),i[h]);if(u.length===a.length)return s;h=this.bl(d,[f],u);if(h.length<=1)return s;t.splice(e,1),t.splice(e-1,1),t.splice.apply(t,[e-1,0].concat($o(h))),e-=1,this.ul.pop();break}t.splice(e+1,1),t.splice(e,1),t.splice.apply(t,[e,0].concat($o(y)))}}}return tt.ROUTE_SUCCESS},bl:function(t,r,i){var n=[],e=[],o=[],s=[];if(this.fl.Kh(t,r,i)){this.fl.us(r,n);for(var u=0;u<n.length;u++)n[u].paths.reverse();for(var a=0;a<n.length;a++){for(var f=[],h=0;h<n[a].paths.length;h++)this.barrierFree?f.push(this.fl.Nh.get(n[a].paths[h])):f.push(this.fl.Rh.get(n[a].paths[h]));e.push(f)}for(var l=e[0],c=0;c<l.length-1;c++){var v=l[c],y=l[c+1];0===o.length&&o.push(v),v.bid===y.bid?(o.push(y),c==l.length-2&&s.push(o)):(s.push(o),o=[])}}return s},yl:function(t,r,i){i=this.el.get(i=void 0===i?null:i);return i.barrierFree=this.barrierFree,i.Ca=this.toDoors,i.rf(t,r,this.Xo,this.ya)},pl:function(){return this.ul},ml:function(t){for(var r=[],i=0;i<t.length;i++){var n=this.dl(t[i]);r.push({bid:t[i],result:n})}return r},dl:function(t){var t=this.el.get(t=void 0===t?null:t),r=t.cf();return this.Ga=t.Ga,r},cl:function(t,r){var i=tt.ROUTE_FAILED_CANNOT_ARRIVE;return this.fl.dn(),this.fl.xh=this.barrierFree,i=this.fl.Hh(t)&&this.fl.Qh(r)?this.fl.ts():i},vl:function(){for(var t=this.fl.ss(),r=[],i=0;i<t.length;i++){for(var n=[],e=0;e<t[i].paths.length;e++)this.barrierFree?n.push(this.fl.Nh.get(t[i].paths[e])):n.push(this.fl.Rh.get(t[i].paths[e]));r.push(n)}return r},bf:function(t,r){var i=void 0!==t.buildingID?t.buildingID:this.al,i=this.el.get(i).bf(t,r);return i&&void 0!==t.buildingID&&(i.coords.buildingID=t.buildingID),i},yu:function(t){var r=new Map;if(void 0!==t&&0===t.length){var i,n=ts(this.el.keys());try{for(n.s();!(i=n.n()).done;){var e=i.value;this.el.get(e).yu([])}}catch(t){n.e(t)}finally{n.f()}}else{for(var o=0;o<t.length;o++){var s=t[o],u=r.get(s.al);u||r.set(s.al,u=[]),u.push(s)}var a,f=ts(r.keys());try{for(f.s();!(a=f.n()).done;){var h=a.value;this.el.get(h).yu(t)}}catch(t){f.e(t)}finally{f.f()}}},au:function(){for(var t in this.Ua){var r=parseInt(t),r=this.el.get(r),t=(r.Ua=this.Ua[t],r.au(),r.cf());(r=this.ul).push.apply(r,$o(t))}},Qa:function(t,r,i,n){this.Ht=t,this.Qt=r,this.Xo=i,this.ya=n;for(var e=!1,o=0;o<this.za.length;o++)this.za[o].$s=!0,this.za[o].order?e=!0:e&&(this.za[o].order=Number.MAX_VALUE);e&&this.za.sort(function(t,r){return t.order-r.order}),this.za.unshift(t),this.za.push(r);for(var s=0;s<this.za.length;s++)this.za[s].buildingID=void 0!==this.za[s].buildingID?this.za[s].buildingID:this.al;return e?this.wl(this.za):(i=this.gl(this.za),n=null,this.fl&&(this.fl.Dh=i,this.fl.Lh=!0,this.fl.Ah=t.buildingID,this.fl.Ph=r.buildingID,n=this.fl.rl()),this._l(t,r,n,this.za))},gl:function(t){for(var r=new Map,i=0;i<t.length;i++){var n=t[i].buildingID||null;r.has(n)||r.set(n,[]),r.get(n).push(t[i])}return r},_l:function(t,r,i,n){var e=[],o=null;if(n.shift(),n.pop(),i)for(var s=this.gl(n),u=0;u<i.length;u++){var a,f,h,l,c,v=i[u].bid;if(0==u?(f={x:i[u].entrances[0].pts[0],y:i[u].entrances[0].pts[1],level:i[u].entrances[0].level},s.has(v)?(a=s.get(v),o=this.jl(t,f,v,a),s.delete(v)):o=this.yl(t,f,v)):u==i.length-1?(a={x:i[u].entrances[0].pts[0],y:i[u].entrances[0].pts[1],level:i[u].entrances[0].level},s.has(v)?(f=s.get(v),o=this.jl(a,r,v,f),s.delete(v)):o=this.yl(a,r,v)):(h={x:i[u].entrances[0].pts[0],y:i[u].entrances[0].pts[1],level:i[u].entrances[0].level},l={x:i[u].entrances[1].pts[0],y:i[u].entrances[1].pts[1],level:i[u].entrances[1].level},s.has(v)?(c=s.get(v),o=this.jl(h,l,v,c),s.delete(v)):o=this.yl(h,l,v)),o!==tt.ROUTE_SUCCESS)break;d=this.dl(v),e.push({bid:v,result:d})}else{var y=t.buildingID||null,o=this.jl(t,r,y,n),d=this.dl(y);e.push({bid:y,result:d})}return this.ul=e,this.Li=o},wl:function(t){for(var r,i=[],n=null,e=null,o=0;o<t.length-1;o++)if(t[o].buildingID==t[o+1].buildingID){var s=t[o].buildingID;if((n=this.toDoors&&0<o?(c=(e=r).result[e.result.length-1].Xn,(v=t[o]).x=c[c.length-1].x,v.y=c[c.length-1].y,this.yl(v,t[o+1],s)):this.yl(t[o],t[o+1],s))!=tt.ROUTE_SUCCESS)return n;if(r={bid:s,result:this.dl(s)},0<i.length){if(r.bid===i[i.length-1].bid)for(var u,a=i[i.length-1].result.length,f=i[i.length-1].result[a-1],h=!0,l=0;l<r.result.length;l++)f.Yn==r.result[l].Yn&&1<r.result[l].Hn.length&&h?(i[i.length-1].result[a-1].zn+=r.result[l].zn,r.result[l].Hn.shift(),r.result[l].Xn.shift(),(u=i[i.length-1].result[a-1].Hn).push.apply(u,$o(r.result[l].Hn)),(u=i[i.length-1].result[a-1].Xn).push.apply(u,$o(r.result[l].Xn))):(h=h&&!1,i[i.length-1].result.push(r.result[l]))}else i.push(r)}else{var c,v,y=null,y=this.toDoors&&0<o?(c=(e=r[r.length-1]).result[e.result.length-1].Xn,(v=t[o]).x=c[c.length-1].x,v.y=c[c.length-1].y,this.ll(v,this.za[o+1])):this.ll(this.za[o],this.za[o+1]);if((n=this.hl(y))!=tt.ROUTE_SUCCESS)return n;for(var d=[],b=0;b<y.length;b++)d.push(y[b][0].bid);r=this.ml(d),i.push.apply(i,$o(r))}return this.ul=i,this.Li=n},jl:function(t,r,i,n){i=this.el.get(i),i.za=n,i.barrierFree=this.barrierFree,i.Ca=this.toDoors,i.Xo=this.Xo,i.ya=this.ya,n=i.Qa(t,r);return i.za=null,n},Ar:function(){this.Nr=null,this.ul=null,this.ol=null,this.sl=null;var t,r=ts(this.el.keys());try{for(r.s();!(t=r.n()).done;){var i=t.value;this.el.get(i).Ar()}}catch(t){r.e(t)}finally{r.f()}}}),o);function ss(t){return(ss="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function W(t,r){var i,n,e,o,s="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(s)return n=!(i=!0),{s:function(){s=s.call(t)},n:function(){var t=s.next();return i=t.done,t},e:function(t){n=!0,e=t},f:function(){try{i||null==s.return||s.return()}finally{if(n)throw e}}};if(Array.isArray(t)||(s=as(t))||r&&t&&"number"==typeof t.length)return s&&(t=s),o=0,{s:r=function(){},n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:r};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function us(t){return function(t){if(Array.isArray(t))return fs(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||as(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function as(t,r){var i;if(t)return"string"==typeof t?fs(t,r):"Map"===(i="Object"===(i=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?fs(t,r):void 0}function fs(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,n=new Array(r);i<r;i++)n[i]=t[i];return n}function hs(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){t=function(t,r){if("object"!=ss(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===r?String:Number)(t);i=i.call(t,r||"default");if("object"!=ss(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==ss(t)?t:String(t)}(n.key),n)}}var o=function(){function n(t,r,i){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");this.Nr=Object.assign({tile:!0,isPreview:!1},t),this.Sl=new Map,this.Ol=null,this.El=[],this.Tl=[],this.Rl=[],this.isExistAccess=!0,this.isExistNavi=!0,this.isExistDrive=!0,this.load_cnt=0,this.fl=null,this.Ml=void 0!==t.mapID?t.mapID:null,this.Nl=null,this.Mn=!!t.map,this.Nn=t.map?t.map.getDataManager():new oe,this.kl=1,this.Il={radius:.5,dash:{size:4,gap:2}},this.An=r,this.Pn=i,this.Sr=t.type,this.Al=new Map,this.Pl=new Map,this.xn=be.generateUUID(),this.xl=null,this.Ln()}var t,r,i;return t=n,(r=[{key:"setObstructions",value:function(t){this.Ol&&this.Ol.yu(t)}},{key:"route",value:function(t,r,i){this.Ol.toDoors=void 0!==t.toDoors&&t.toDoors,this.Ol.obstruct=void 0===t.obstruct||t.obstruct,this.Ol.barrierFree=void 0!==t.barrierFree&&t.barrierFree;var n=tt.ROUTE_FAILED_CANNOT_ARRIVE;if((n=t.viapoints&&0<t.viapoints.length?(this.Ol.za=t.viapoints,this.Ol.Qa(t.start,t.dest,t.mode||j.MODULE_SHORTEST,t.priority||w.PRIORITY_DEFAULT)):this.Ol.rf(t.start,t.dest,t.mode||j.MODULE_SHORTEST,t.priority||w.PRIORITY_DEFAULT))===tt.ROUTE_SUCCESS){this.El=this.Ol.pl();var e=null,o=null;this.Tl=[];for(var s=0;s<this.El.length;s++)0<s&&(e=this.Nr.bidToName.get(this.El[s-1].bid)?this.Nr.bidToName.get(this.El[s-1].bid):"outdoor"),s<this.El.length-1&&(o=this.Nr.bidToName.get(this.El[s+1].bid)?this.Nr.bidToName.get(this.El[s+1].bid):"outdoor"),this.El[s].lh=e,this.El[s].yh=o,o=e=null,this.El[s].buildingName=this.Nr.bidToName.get(this.El[s].bid),this.Tl.push([this.Ll(this.El[s],{language:u.ZH}),this.Ll(this.El[s],{language:u.EN})]);this.Nl=this.Ol.Ga,r&&r(this.Vn())}else i&&i(n)}},{key:"dispose",value:function(){this.Dl=null,this.El=[],this.Tl=[],this.Ol&&(this.Ol.Ar(),this.Ol=null)}},{key:"pathConstraint",value:function(t,r){return this.Ol?this.Ol.bf(t,r):null}},{key:"getNaviGraph",value:function(t){var r=t.buildingID,t=t.level;return null!=r?null!=t?this.Ol.da.get(r).get(t):this.Ol.da.get(r):null!=t?this.Ol.da.get(null).get(t):us(this.Ol.da.values())}},{key:"query",value:function(t,r,i,n){var e=[],o=null,o=i?this.Ol.el.get(i):this.Ol.el.get(null),s=n?o.ba:o.da;if(s){if(null==t){var u,a=W(s.keys());try{for(a.s();!(u=a.n()).done;){var f=u.value;e.push({level:f,roadRanks:r,roadVector:s.get(f).qe.slice(0)})}}catch(t){a.e(t)}finally{a.f()}}else if(null==r)e.push({level:t,roadRanks:r,roadVector:s.get(t).qe.slice(0)});else{for(var h=[],l=s.get(t).qe,c=0;c<r.length;c++)for(var v=0;v<l.length;v++)l[v].we===r[c]&&h.push(l[v]);e.push({level:t,roadRanks:r,roadVector:h})}for(var y=0;y<e.length;y++)for(var d=0;d<e[y].roadVector.length;d++)e[y].roadVector[d]=Object.assign({},this.Bl(e[y].roadVector[d])),i&&(e[y].roadVector[d].buildingID=i)}return e}},{key:"intersectionRoadsByCircle",value:function(t,r,i){var n;if(!i||!i.roadVector||i.roadVector.length<=0)return null;var e,o=null==i.roadVector[0].buildingID?null:i.roadVector[0].buildingID,s={center:t,radius:r,points:[]},u=t.x-r,a=t.x+r,f=t.y-r,h=t.y+r,l=[],c=new Map,v=W(i.roadVector);try{for(v.s();!(e=v.n()).done;){var y,d=e.value,b=rt.Ct(t,r,d.startPoint,d.endPoint);if(!(b.length<1)){var p=d.roadEntry,m=d.endId;if(rt.distance(d.endPoint,t)>r&&((p=p===it.Entry_FORWARD?_e.Entry_BACK:p)===it.Entry_BACK&&(p=_e.Entry_FORWARD),m=d.startId),p===_e.Entry_FORWARD||p===_e.Entry_BOTH){var w,g=W(b);try{for(g.s();!(w=g.n()).done;){var _=w.value;_.direction=p,_.Fl=m}}catch(t){g.e(t)}finally{g.f()}(y=s.points).push.apply(y,us(b)),d.startPoint.x>=u&&d.startPoint.x<=a&&d.startPoint.y>=f&&d.startPoint.y<=h&&l.push(d.startId),d.endPoint.x>=u&&d.endPoint.x<=a&&d.endPoint.y>=f&&d.endPoint.y<=h&&l.push(d.endId)}}}}catch(t){v.e(t)}finally{v.f()}for(var i=i.level,j=(null==(n=this.Ol.el)?void 0:n.get(o)).da.get(i).Ke,S=0,O=l;S<O.length;S++){var E=O[S];c.set(E,j.get(E))}var T,R=W(s.points);try{for(R.s();!(T=R.n()).done;){var M=T.value;M.branch=this.Gl(c,M.Fl,t.nodeID)}}catch(t){R.e(t)}finally{R.f()}return s}},{key:"queryNode",value:function(t){var r=t.buildingID?this.Ol.el.get(buildingID):this.Ol.el.get(null);if(null!=r){var i=(r=(t.barrierFree?r.ba:r.da).get(t.level)).oo(t.point);if(!(i<=0))for(var n=r.qe,e=new Set,o=0;o<n.length;o++)if(i===n[o].be){if(!e.has(n[o].ve)&&rt._compare(t.point,n[o].Ht))return t.nodeID=n[o].ve,t;if(!e.has(n[o].ye)&&rt._compare(t.point,n[o].Qt))return t.nodeID=n[o].ye,t;e.add(n[o].ve),e.add(n[o].ye)}}return null}},{key:"constraintTrack",value:function(t){var r=[];if(!(null==t||t.length<=0)){for(var i=new Map,n=0;n<t.length;n++){var e=void 0===t[n].coords.buildingID?null:t[n].coords.buildingID;i.has(e)?i.get(e).push(t[n]):i.set(e,[t[n]])}if(!(i.size<=0)){var o,s=W(i.keys());try{for(s.s();!(o=s.n()).done;){for(var u=o.value,a=i.get(u),f=new Set,h=new Set,l=0;l<a.length;l++)f.add(a[l].coords.level),h.add(a[l].road.roadRank);if(f.size<=0)return r;var c=Array.from(f),v=Array.from(h);this.Cl(c,v,u)}}catch(t){s.e(t)}finally{s.f()}for(var y=t.length-1,d=0;d<y;d++){var b=this.Ul(t[d],t[d+1]);r.push(t[d].coords),r.push.apply(r,us(b)),d+1==y&&r.push(t[d+1].coords)}}}return r}}])&&hs(t.prototype,r),i&&hs(t,i),Object.defineProperty(t,"prototype",{writable:!1}),n}(),ls=(Object.assign(o.prototype,{Ln:function(){this.Mn&&(t=this.Nr.map.getMapOptions(),this.Nr.mapID=t.mapID,this.Nr.appName=t.appName,this.Nr.key=t.key,this.Nr.license=t.license,this.Nr.mapURL=t.mapURL,this.Nr.mapURLAbsolute=t.mapURLAbsolute,this.Nr.navigationData=t.navigationData,this.Nr.buildingOptions=t.buildingOptions,this.Nr.type=this.Sr);var t={buildingID:this.Nr.mapID,appName:this.Nr.appName,key:this.Nr.key,license:this.Nr.license,mapURL:this.Nr.mapURL,mapURLAbsolute:this.Nr.mapURLAbsolute,buildingOptions:this.Nr.buildingOptions,navigationData:this.Nr.navigationData,merge:this.Nr.merge,loadNavi:!0,justDecode:!0,preLoad:!0,isPreview:"undefined"!=typeof KjWzhWlSj&&!!KjWzhWlSj.ProtoDef,tile:this.Nr.tile,type:this.Nr.type,bid:this.Nr.buildingID||null,gate:null,isOutdoor:!0,uuid:this.xn};this.Ml||(this.Ml=this.Nr.mapID),this.Sl.set(t.bid,t),this.Nr.bidToMid=new Map,this.Nr.bidToName=new Map,this.Nr.bidToMid.set(t.bid,this.Ml),this.Ol=new os,this.Gn(t)},Gn:function(i){var n=this;setTimeout(function(){i.tile?n.Nn.load(i,function(t,r){n.Cn(t,r,i)}):n.Nn.loadWhole(i,function(t,r){n.Cn(t,r,i)})},0)},Cn:function(t,r,i){if("error"===t)this.isExistAccess=!1,this.isExistNavi=!1,this.isExistDrive=!1;else if("scene"===t&&r.naviType&&"undefined"!=r.naviType&&0!=r.naviType){this.isExistAccess=!0,this.isExistNavi=!0,this.isExistDrive=!0;var n=r.naviType;1===n?(this.isExistAccess=!1,this.isExistNavi=!1,this.isExistDrive=!1):(8<=n&&(n-=8),this.isExistAccess=!1,4<=n?n-=4:this.Sr===O.Drive&&(this.isExistDrive=!1),n<=0&&!this.isExistAccess&&this.Sr===O.Walk&&(this.isExistNavi=!1)),this.load_cnt++,this.isExistAccess||this.isExistNavi||this.Sr!==O.Walk?this.isExistDrive||this.Sr!==O.Drive||this.Rl.push({buildingID:i.buildingID,error:"NONE_DRIVE_RODE_NETWORK",data:D.NONE_DRIVE_RODE_NETWORK}):this.Rl.push({buildingID:i.buildingID,error:"NONE_WALK_RODE_NETWORK",data:D.NONE_WALK_RODE_NETWORK})}else if("decode"===t){n=new Go(i);n.Ln(r),this.Ol.el.set(i.bid,n),this.Ol.da.set(i.bid,n.da),r.gate&&(this.xl=r.gate.floors);for(var e=0;e<(null==(o=r.scene.buildings)?void 0:o.length);e++){var o=r.scene.buildings[e],s={mapID:this.Nr.mapID,buildingID:null,appName:this.Nr.appName,key:this.Nr.key,license:this.Nr.license,mapURL:this.Nr.mapURL,mapURLAbsolute:this.Nr.mapURLAbsolute,merge:this.Nr.merge,loadNavi:!0,justDecode:!0,preLoad:!0,isPreview:"undefined"!=typeof KjWzhWlSj,tile:this.Nr.tile,type:this.Nr.type,bid:null,isOutdoor:!1,uuid:this.xn},s=(s.buildingID=o.mid,s.bid=o.bid,Object.assign({},s));this.Sl.set(o.bid,s),this.Nr.bidToMid.set(o.bid,o.mid),this.Nr.bidToName.set(o.bid,o.name),this.Gn(s)}this.Ol.el.size===this.Nr.bidToMid.size&&(null!=this.xl&&this.Ol.Ln(Object.assign(this.Nr,{gate:this.xl})),0!==this.load_cnt&&this.Rl.length>=this.load_cnt?this.Pn&&this.Pn({result:this.Rl}):(this.Rl={state:t,error:"0",data:null},this.An&&this.An()))}},Vn:function(){for(var t={buildings:[],distance:0,subs:[],viapoints:[]},r=0;r<this.El.length;r++){var i,n={buildingID:null,buildingName:null,levels:[],distance:0},e=this.El[r].bid,o=this.El[r].buildingName,s=this.Zl(this.El[r],this.Tl[r],e),u=(n.levels=s.levels,n.distance=s.distance,t.distance+=n.distance,r!==this.El.length-1&&s.subs[s.subs.length-1]&&(s.subs[s.subs.length-1].transfer=I.TRANSFER_ENTRANCE),n.buildingID=e==this.Ml?null:e,n.buildingName=o||null,W(s.subs));try{for(u.s();!(i=u.n()).done;){var a=i.value;a.buildingID=n.buildingID,a.buildingName=n.buildingName}}catch(t){u.e(t)}finally{u.f()}t.buildings.push(n),(e=t.subs).push.apply(e,us(s.subs)),(o=t.viapoints).push.apply(o,us(s.viapoints))}return t},Zl:function(t,r,i){if(0==t.length||0==r.length)return null;for(var n={viapoints:[],subs:[],levels:[],distance:0},e=r[0].descriptions,o=r[0].descriptionsData,s=r[1].descriptions,u=r[1].descriptionsData,a=r[0].ladderList,f=0,h=[],l=!1,c=[],v=0;v<o.length;v++){var y={instruction:{zh:null,en:null},waypoint:{points:null,direction:{zh:null,en:null}},viapoint:null,levels:null,distance:Number.NaN,buildingID:null},d=e[v],b=o[v],p=s[v],m=u[v],d=(y.instruction.zh=d,y.instruction.en=p,y.levels=[b.startLevel,b.endLevel],y.distance=void 0!==b.distance?b.distance:0,y.waypoint.direction.zh=[b.startDirection,b.endDirection||b.startDirection],y.waypoint.direction.en=[m.startDirection,m.endDirection||m.startDirection],y.levels[0]!=y.levels[1]?(l=!0,h.push.apply(h,us(y.levels)),y.transfer=a[f],f+=1):0!=h.length&&h.slice(-1)[0]==y.levels[0]&&!l||(h.push(y.levels[0]),l=!1),this.Wl([b.startIndex,b.endIndex],h,t.result));y.waypoint.points=d.points,d.via&&-1==c.indexOf(d.via)&&(y.viapoint=Object.assign({},d.via),n.viapoints.push(Object.assign({},d.via)),c.push(d.via)),n.distance+=y.distance,y.buildingID=i,n.subs.push(y)}for(var w=0;w<h.length;w++)0!=n.levels.length&&n.levels.slice(-1)[0]==h[w]||n.levels.push(h[w]);return n.door=this.Nl,n},Wl:function(t,r,i){for(var n=[],e=[],o=null,s=[],u=0;u<i.length;u++){var a=i[u];if(s.push(a.Yn),r.toString()==s.toString()){var f=r[r.length-1],h=a.Xn,l=a.Hn;if(void 0===t[0]||void 0===t[1])n.push(Object.assign({level:a.Yn},a.Xn[0])),e.push(a.Hn[0]),a=i[u-1],n.unshift(Object.assign({level:a.Yn},a.Xn[0])),e.unshift(a.Hn[0]);else for(var c=t[0];c<=t[1];c++)n.push({x:h[c].x,y:h[c].y,level:f}),e.push(l[c]);break}}return e.forEach(function(t){t.$s&&delete(o=t.Lu).$s}),{points:n,via:o}},Ll:function(t,r){var i=t.bid,n=t.result;return this.Vl(n)?(n=new Vo(Object.assign({data:this.Nn.getDecode(this.Sl.get(i)),directionAssert:10,combineAsset:10,language:u.ZH},r)).hh(t),i=this.ql(n[5]),{descriptions:n[0],descriptionsData:n[1],distance:n[2],distances:n[3],ladderList:i}):{}},ql:function(t){for(var r=0;r<t.length;r++)switch(t[r]){case 1:t[r]=I.TRANSFER_LIFT;break;case 2:t[r]=I.TRANSFER_STAIR;break;case 3:t[r]=I.TRANSFER_ESCALATOR;break;case 4:t[r]=I.TRANSFER_ACCESSIBLE;break;case 5:t[r]=I.TRANSFER_RAMP;break;default:return}return t},Yl:function(t){this.Ol.Ua=t,this.Ol.au(),this.El=this._navi.cf()},zl:function(){return this.El},Xl:function(t){var r=t||this.El;if(!this.Vl(r))return[];var i,n=[];for(i in r)r[i].getPointList&&n.push.apply(n,us(r[i].pointList));return n},Hl:function(t){var r=t||this.El;if(!this.Vl(r))return[];for(var i=[],n=0;n<r.length;n++){for(var e=r[n],o=e.level,s=e.pointList,u={level:o,points:[]},a=0;a<s.length;a++)u.points.push(Object.assign({},s[a]));i.push(u)}return i},Ql:function(t){t=t||this.El;if(!this.Vl(t))return 0;var r=this.Xl(t);if(0==r.length)return 0;for(var i=0,n=0;n<r.length-1;n++)i+=rt.wt(r[n],r[n+1]);return i},Kl:function(t){var r=t||this.El;if(!this.Vl(r))return[];var i,n=[];for(i in r)!r[i].level||0!=i&&n[n.length-1]==r[i].level||n.push(r[i].level);return n},Jl:function(t,r){var i=r||this.El;if(!this.Vl(i))return[];var n,e=[];for(n in i)i[n].level&&i[n].level==t&&(e=e.concat(i[n].pointList));return e},Vl:function(t){if(!Array.isArray(t))return!1;if(0==t.length)return!1;for(var r=0;r<t.length;r++)if(!(t[r]instanceof Oe))return!1;return!0},$l:function(e,t){if(0===e.length)return null;null==t&&(t={});for(var r=Object.assign({},this.Il),o=(t&&t.style&&Object.assign(r,t.style),1===this.Sr&&(r.color="#002FA7"),t&&t.height?t.height:this.kl),s=[],u=0;u<e.length;u++)!function(){var t=e[u],r=t.pointList;if(0===r.length)return;var t=t.level,i=[],n=(r.forEach(function(t){var r=parseFloat(""+t.x),t=parseFloat(""+t.y);i.push({x:r,y:t,z:o})}),r.length<2&&(n=parseFloat(""+r[0].x),r=parseFloat(""+r[0].y),i.push({x:n,y:r,z:o})),new fengmap.FMSegment);n.level=t,n.points=i,s.push(n)}();r=new fengmap.FMLineMarker(Object.assign({segments:s},r));return r.passed=t&&t.passed?t.passed:this._linePassed,r},Bl:function(t){return{id:t.Ai,startPoint:{x:t.Ht.x,y:t.Ht.y},endPoint:{x:t.Qt.x,y:t.Qt.y},startId:t.ve,endId:t.ye,roadRank:t.we,roadEntry:t.ge}},Gl:function(t,r,i){if(0!=t.length&&null!=t.get(r)&&null!=t.get(i)){var n,e=new Map,o=W(t.keys());try{for(o.s();!(n=o.n()).done;){var s=n.value;e.set(s,!1)}}catch(t){o.e(t)}finally{o.f()}for(var u=[r];0<u.length;){var a=u[0];if(e.get(a))u.splice(0,1);else{if(e.set(a,!0),u.splice(0,1),a==i)return!1;var f=t.get(a);if(!f||2<f.length)return!0;for(var h=0;h<f.length;h++)u.push(f[h].Oo)}}return!0}},Ul:function(t,r){var i=[];if(t.coords.buildingID==r.coords.buildingID&&t.coords.level==r.coords.level){var n=null==t.buildingID?null:t.buildingID,e=t.coords.level,o=this.Al.get(n).get(e),s=t.road.id,u=r.road.id,a=o.get(s),o=o.get(u),f=t.coords.buildingID,h=null==this.Pl.get(f)?[]:this.Pl.get(f),n=f?this.Ol.el.get(n):this.Ol.el.get(null);if(a!=o){for(var l=null,c=0;c<h.length;c++)if(h[c].level==e&&null!=h[c].ptsBwteenRoad){l=h[c].ptsBwteenRoad;break}if(null!=l&&null!=l.get(s)&&null!=l.get(s).get(u))i=l.get(s).get(u);else{var v,y=n.Ba.ha,d=W(y.keys());try{for(d.s();!(v=d.n()).done;){var b=v.value,p=y.get(b);if(p.level===e&&(null!=(i=this.tc(t,r,p))&&0<i.length))break}}catch(t){d.e(t)}finally{d.f()}null==l?((l=new Map).set(s,new Map),l.get(s).set(u,i),h.push({level:e,ptsBwteenRoad:l}),this.Pl.set(f,h)):(null==l.get(s)&&l.set(s,new Map),l.get(s).set(u,i))}}}return i},Cl:function(t,r,i,n){var e,o=new Map;if(null==(e=(i=null==i?null:i)?this.Ol.el.get(i):this.Ol.el.get(null)))return null;for(var s=n?e.ba:e.da,u=0;u<t.length;u++){var a=t[u],f=s.get(a).qe,h=[],l=void 0;if(null!=r&&0<r.length){for(var c=0;c<r.length;c++)for(var v=0;v<f.length;v++)f[v].we===r[c]&&h.push(f[v]);l=this.rc(h)}else l=this.rc(f);o.set(a,l)}this.Al.set(i,o)},rc:function(t){for(var r=new Map,i=new Map,n=0,e=0;e<t.length;e++)i.set(t[e].Ai,[0,0]),r.set(t[e].Ai,-1);for(var o=0;o<t.length;o++){var s=t[o];if(1!=i.get(s.Ai)[0]||1!=i.get(s.Ai)[1]){for(var u=s.ve,a=s.ye,f=new Z(s.Qt.x-s.Ht.x,s.Qt.y-s.Ht.y),h=o+1;h<t.length;h++){var l=t[h];if(s.we==l.we){var c=l.ve,v=l.ye,y=r.get(s.Ai),d=r.get(l.Ai),b=void 0,b=-1==y&&-1==d?-1:-1!=y&&(-1==d||y<=d)?y:d,p=new Z(l.Qt.x-l.Ht.x,l.Qt.y-l.Ht.y);if(0==i.get(s.Ai)[0]){if(u==c){if(f.multiplyScalar(-1).angleTo(p)*rt.nt()<=5){if(b=-1==b?++n:b,r.set(s.Ai,b),r.set(l.Ai,b),i.get(s.Ai)[0]=1,-(i.get(l.Ai)[0]=1)!=d&&d!=b){var m,w=W(r.keys());try{for(w.s();!(m=w.n()).done;){var g=m.value;r.get(g)==d&&r.set(g,b)}}catch(t){w.e(t)}finally{w.f()}}if(-1!=y&&y!=b){var _,j=W(r.keys());try{for(j.s();!(_=j.n()).done;){var S=_.value;r.get(S)==y&&r.set(S,b)}}catch(t){j.e(t)}finally{j.f()}}}continue}if(u==v){if(f.multiplyScalar(-1).angleTo(p.multiplyScalar(-1))*rt.nt()<=5){if(b=-1==b?++n:b,r.set(s.Ai,b),r.set(l.Ai,b),i.get(s.Ai)[0]=1,-(i.get(l.Ai)[1]=1)!=d&&d!=b){var O,E=W(r.keys());try{for(E.s();!(O=E.n()).done;){var T=O.value;r.get(T)==d&&r.set(T,b)}}catch(t){E.e(t)}finally{E.f()}}if(-1!=y&&y!=b){var R,M=W(r.keys());try{for(M.s();!(R=M.n()).done;){var N=R.value;r.get(N)==y&&r.set(N,b)}}catch(t){M.e(t)}finally{M.f()}}}continue}}if(0==i.get(s.Ai)[1])if(a==c){if(f.angleTo(p)*rt.nt()<=5){if(b=-1==b?++n:b,r.set(s.Ai,b),r.set(l.Ai,b),i.get(s.Ai)[1]=1,-(i.get(l.Ai)[0]=1)!=d&&d!=b){var k,I=W(r.keys());try{for(I.s();!(k=I.n()).done;){var A=k.value;r.get(A)==d&&r.set(A,b)}}catch(t){I.e(t)}finally{I.f()}}if(-1!=y&&y!=b){var D,P=W(r.keys());try{for(P.s();!(D=P.n()).done;){var B=D.value;r.get(B)==y&&r.set(B,b)}}catch(t){P.e(t)}finally{P.f()}}}}else if(a==v)if(f.angleTo(p.multiplyScalar(-1))*rt.nt()<=5){if(b=-1==b?++n:b,r.set(s.Ai,b),r.set(l.Ai,b),i.get(s.Ai)[1]=1,-(i.get(l.Ai)[1]=1)!=d&&d!=b){var F,x=W(r.keys());try{for(x.s();!(F=x.n()).done;){var G=F.value;r.get(G)==d&&r.set(G,b)}}catch(t){x.e(t)}finally{x.f()}}if(-1!=y&&y!=b){var C,L=W(r.keys());try{for(L.s();!(C=L.n()).done;){var U=C.value;r.get(U)==y&&r.set(U,b)}}catch(t){L.e(t)}finally{L.f()}}}}}-1==r.get(s.Ai)&&r.set(s.Ai,++n)}}return r},tc:function(t,r,i){var n=[],e=t.coords,t=t.road,o=r.coords,r=r.road,s=i.nu(e),u=i.nu(o);if(null!=t&&null!=r&&e.level==o.level&&t.extentID==r.extentID&&s==u){var u=null,a=null,f=e.level,a=rt.gt(o,t.startPoint)<=rt.gt(o,t.endPoint)?(u=t.startPoint,t.startID):(u=t.endPoint,t.endID),e=null,e=rt.gt(u,r.startPoint)<=rt.gt(u,r.endPoint)?(r.startPoint,r.startID):(r.endPoint,r.endID),o=i.Wo,t=o.Eo(a),u=[o.Eo(e)],r=i.Cu(s);if(null!=r)if(r.ns(o,t,u)){r.zo=e;for(var h=r.ss(),l=h.length-1;0<=l;l--)n.push(Object.assign({level:f},h[l].pr))}}return n}}),o);function cs(t){return(cs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vs(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){t=function(t,r){if("object"!=cs(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===r?String:Number)(t);i=i.call(t,r||"default");if("object"!=cs(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==cs(t)?t:String(t)}(n.key),n)}}function ys(t,r,i){r=bs(r);var n=t,r=ds()?Reflect.construct(r,i||[],bs(t).constructor):r.apply(t,i);if(r&&("object"===cs(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");t=n;if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}function ds(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(ds=function(){return!!t})()}function bs(t){return(bs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ps(t,r){return(ps=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t})(t,r)}o=function(){var t,r,i=e,n=ls;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");function e(t,r,i){if(this instanceof e)return ys(this,e,[t,r,i]);throw new TypeError("Cannot call a class as a function")}return i.prototype=Object.create(n&&n.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),n&&ps(i,n),i=e,t&&vs(i.prototype,t),r&&vs(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i}();function ms(t){return(ms="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ws(t){return function(t){if(Array.isArray(t))return gs(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){var i;if(t)return"string"==typeof t?gs(t,r):"Map"===(i="Object"===(i=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:i)||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?gs(t,r):void 0}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gs(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,n=new Array(r);i<r;i++)n[i]=t[i];return n}function _s(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){t=function(t,r){if("object"!=ms(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===r?String:Number)(t);i=i.call(t,r||"default");if("object"!=ms(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==ms(t)?t:String(t)}(n.key),n)}}function js(t,r,i){return r&&_s(t.prototype,r),i&&_s(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}var Ss=js(function t(r){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.al=void 0!==r.buildingID?r.buildingID:null,this.Yn=void 0!==r.level?r.level:null,this.mr=void 0!==r.points?r.points:null,this.Iu=-1,this.sr=null,this.Ln()});Object.assign(Ss.prototype,{Ln:function(){this.mr&&(this.sr=new lr,this.sr.nr(this.mr),this.Iu=this.mr.length,this.mr[0].x==this.mr[this.Iu-1].x&&this.mr[0].y==this.mr[this.Iu-1].y?this.Iu--:this.mr.push(this.mr[0]))},aa:function(t,r){return rt.ht(t,r,this.sr.tr,this.sr.rr)},No:function(t){return!!rt.ct(t,this.sr.min,this.sr.max)&&rt.dt(t,this.mr,this.Iu)},ic:function(t){var r=0;return this.No(t[0])&&(r|=1),this.No(t[1])&&(r|=2),r},Mo:function(t,r){if(!rt.ht(t[0],t[1],this.sr.min,this.sr.max))return!1;for(var i,n,e=!1,o=0;o<this.Iu;o++){var s={};1==rt.Tt(t[0],t[1],this.mr[o],this.mr[o+1],s)&&(e=!0,r.push(s))}return t[0].x!=t[1].x?(i=t[0].x<t[1].x,r.sort(function(t,r){return i?t.x-r.x:r.x-t.x})):(n=t[0].y<t[1].y,r.sort(function(t,r){return n?t.y-r.y:r.y-t.y})),e},nc:function(t,r){for(var i=[],n=(i.push(t[0]),i.push.apply(i,ws(r)),i.push(t[1]),[]),e=0;e<i.length-1;e++)n.push([i[e],i[e+1]]);return n},Ff:function(t){if(this.al!=t.bid||this.Yn!=t.Yn)return!1;if(this.mr.length!=t.mr.length)return!1;for(var r=0;r<this.mr.length;r++){if(this.mr[r].x!=t.mr[r].x)return!1;if(this.mr[r].y!=t.mr[r].y)return!1}return!0}});function Os(t){return(Os="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Es(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){t=function(t,r){if("object"!=Os(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===r?String:Number)(t);i=i.call(t,r||"default");if("object"!=Os(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==Os(t)?t:String(t)}(n.key),n)}}function Ts(t,r,i){r=Ms(r);var n=t,r=Rs()?Reflect.construct(r,i||[],Ms(t).constructor):r.apply(t,i);if(r&&("object"===Os(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");t=n;if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}function Rs(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Rs=function(){return!!t})()}function Ms(t){return(Ms=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ns(t,r){return(Ns=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t})(t,r)}var ks=function(){var t,r=n,i=ls;if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");function n(t,r,i){if(this instanceof n)return t.type=O.Drive,Ts(this,n,[t,r,i]);throw new TypeError("Cannot call a class as a function")}return r.prototype=Object.create(i&&i.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),i&&Ns(r,i),r=n,(i=[{key:"route",value:function(t,r,i){this.Ol.obstruct=void 0===t.obstruct||t.obstruct;var n=tt.ROUTE_FAILED_CANNOT_ARRIVE;if((n=t.viapoints&&0<t.viapoints.length?(this.Ol.za=t.viapoints,this.Ol.Qa(t.start,t.dest)):this.Ol.rf(t.start,t.dest,t.mode||j.MODULE_SHORTEST,t.priority||w.PRIORITY_DEFAULT))===tt.ROUTE_SUCCESS){this.El=this.Ol.pl();var e=null,o=null;this.Tl=[];for(var s=0;s<this.El.length;s++)0<s&&(e=this.Nr.bidToName.get(this.El[s-1].bid)?this.Nr.bidToName.get(this.El[s-1].bid):"outdoor"),s<this.El.length-1&&(o=this.Nr.bidToName.get(this.El[s+1].bid)?this.Nr.bidToName.get(this.El[s+1].bid):"outdoor"),this.El[s].lh=e,this.El[s].yh=o,o=e=null,this.El[s].buildingName=this.Nr.bidToName.get(this.El[s].bid),this.Tl.push([this.Ll(this.El[s],{language:u.ZH,type:O.Drive}),this.Ll(this.El[s],{language:u.EN,type:O.Drive})]);this.Nl=this.Ol.Ga,r&&r(this.Vn())}else i&&i(n)}}])&&Es(r.prototype,i),t&&Es(r,t),Object.defineProperty(r,"prototype",{writable:!1}),n}();function Is(t){return(Is="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function As(t,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){t=function(t,r){if("object"!=Is(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0===i)return("string"===r?String:Number)(t);i=i.call(t,r||"default");if("object"!=Is(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==Is(t)?t:String(t)}(n.key),n)}}function Ps(t,r,i){r=Ls(r);var n=t,r=xs()?Reflect.construct(r,i||[],Ls(t).constructor):r.apply(t,i);if(r&&("object"===Is(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");t=n;if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}function xs(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(xs=function(){return!!t})()}function Ls(t){return(Ls=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ds(t,r){return(Ds=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t})(t,r)}var Bs,Fs=function(){var t,r=n,i=ls;if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");function n(t,r,i){if(this instanceof n)return t.type=O.Walk,Ps(this,n,[t,r,i]);throw new TypeError("Cannot call a class as a function")}return r.prototype=Object.create(i&&i.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),i&&Ds(r,i),r=n,(i=[{key:"route",value:function(t,r,i){this.Ol.toDoors=void 0!==t.toDoors&&t.toDoors,this.Ol.obstruct=void 0===t.obstruct||t.obstruct,this.Ol.barrierFree=void 0!==t.barrierFree&&t.barrierFree;var n=tt.ROUTE_FAILED_CANNOT_ARRIVE;if((n=t.viapoints&&0<t.viapoints.length?(this.Ol.za=t.viapoints,this.Ol.Qa(t.start,t.dest,t.mode||j.MODULE_SHORTEST,t.priority||w.PRIORITY_DEFAULT)):this.Ol.rf(t.start,t.dest,t.mode||j.MODULE_SHORTEST,t.priority||w.PRIORITY_DEFAULT))===tt.ROUTE_SUCCESS){this.El=this.Ol.pl();var e=null,o=null;this.Tl=[];for(var s=0;s<this.El.length;s++)0<s&&(e=this.Nr.bidToName.get(this.El[s-1].bid)?this.Nr.bidToName.get(this.El[s-1].bid):"outdoor"),s<this.El.length-1&&(o=this.Nr.bidToName.get(this.El[s+1].bid)?this.Nr.bidToName.get(this.El[s+1].bid):"outdoor"),this.El[s].lh=e,this.El[s].yh=o,o=e=null,this.El[s].buildingName=this.Nr.bidToName.get(this.El[s].bid),this.Tl.push([this.Ll(this.El[s],{language:u.ZH}),this.Ll(this.El[s],{language:u.EN})]);this.Nl=this.Ol.Ga,r&&r(this.Vn())}else i&&i(n)}}])&&As(r.prototype,i),t&&As(r,t),Object.defineProperty(r,"prototype",{writable:!1}),n}(),t=t(30),Gs={VERSION:R,BUILD:M,XMLHttpRequest:t.a,FMType:N,FMNaviMode:j,FMNaviPriority:w,FMRouteResult:tt,FMLanguageType:u,FMNaviTransfer:I,FMRoadNetworkResult:D,FMSearchRequest:r,FMSearchAnalyser:i,FMNaviAnalyser:o,FMNaviObstruction:Ss,FMNaviDriveAnalyser:ks,FMNaviWalkAnalyser:Fs},t=ui.a.global(),Cs=void 0!==t?t.fengmap:{};for(Bs in void 0===Cs&&(Cs={}),Gs)Cs[Bs]=Gs[Bs];void 0!==t&&(t.fengmap=Cs);_.default=Cs}]).default});