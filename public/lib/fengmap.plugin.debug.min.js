/**Released Version v3.1.10,BUILD 237,Time 1749031855591. Fengmap Javascript SDK , see: https://www.fengmap.com for details**/
((n,e)=>{"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.fengmap=e():n.fengmap=e()})(this,function(){return t=[function(n,e,t){t.r(e);function l(){var t=0,i=document.createElement("div");function n(n){return i.appendChild(n.dom),n}function e(n){for(var e=0;e<i.children.length;e++)i.children[e].style.display=e===n?"block":"none";t=n}i.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",i.addEventListener("click",function(n){n.preventDefault(),e(++t%i.children.length)},!1);var o,r=(performance||Date).now(),a=r,s=0,c=n(new l.Panel("FPS","#0ff","#002")),f=n(new l.Panel("MS","#0f0","#020"));return self.performance&&self.performance.memory&&(o=n(new l.Panel("MB","#f08","#201"))),e(0),{REVISION:16,dom:i,addPanel:n,showPanel:e,begin:function(){r=(performance||Date).now()},end:function(){s++;var n,e=(performance||Date).now();return f.update(e-r,200),a+1e3<=e&&(c.update(1e3*s/(e-a),100),a=e,s=0,o)&&(n=performance.memory,o.update(n.usedJSHeapSize/1048576,n.jsHeapSizeLimit/1048576)),e},update:function(){r=this.end()},domElement:i,setMode:e}}l.Panel=function(t,i,o){var r=1/0,a=0,s=Math.round,c=s(window.devicePixelRatio||1),f=80*c,n=48*c,l=3*c,u=2*c,p=3*c,m=15*c,d=74*c,v=30*c,b=document.createElement("canvas"),h=(b.width=f,b.height=n,b.style.cssText="width:80px;height:48px",b.getContext("2d"));return h.font="bold "+9*c+"px Helvetica,Arial,sans-serif",h.textBaseline="top",h.fillStyle=o,h.fillRect(0,0,f,n),h.fillStyle=i,h.fillText(t,l,u),h.fillRect(p,m,d,v),h.fillStyle=o,h.globalAlpha=.9,h.fillRect(p,m,d,v),{dom:b,update:function(n,e){r=Math.min(r,n),a=Math.max(a,n),h.fillStyle=o,h.globalAlpha=1,h.fillRect(0,0,f,m),h.fillStyle=i,h.fillText(s(n)+" "+t+" ("+s(r)+"-"+s(a)+")",l,u),h.drawImage(b,p+c,m,d-c,v,p,m,d-c,v),h.fillRect(p+d-c,m,c,v),h.fillStyle=o,h.globalAlpha=.9,h.fillRect(p+d-c,m,c,s((1-n/e)*v))}}};var i=l,t={NONE:0,EXTRUDE_MARKER:2,FM3DTILE_LAYER:4,IMAGE_MARKER:8,LOCATION_MARKER:16,POLYGON_MARKER:32,TEXT_MARKER:64,LINE_MARKER:128,LINE3D_MARKER:256,HEAT_MAP_MARKER:512,EXTENT:1024,EXTERNAL_MODEL:2048,MODEL:4096,FACILITY:8192,LABEL:16384,DYNAMIC_MODEL_MARKER:32768,DOM_MARKER:65536,SPHERE_MARKER:1<<17,CAD_LAYER:1<<18,EXTENT_LAYER:1<<20,EXTERNAL_MODEL_LAYER:1<<21,MODEL_LAYER:1<<22,FACILITY_LAYER:1<<23,LABEL_LAYER:1<<24,MARKER_GROUP:1<<25,FLOW_LINE_LAYER:1<<27,FLOW_LINE_MARKER:1<<27,FIRE_MARKER:1<<28,WALL_MARKER:1<<29,TUBE_MARKER:1<<30},r=(t.LAYER_NODE_TYPE=new Map,t.LAYER_NODE_TYPE.set(t.EXTENT_LAYER,t.EXTENT),t.LAYER_NODE_TYPE.set(t.EXTERNAL_MODEL_LAYER,t.EXTERNAL_MODEL),t.LAYER_NODE_TYPE.set(t.MODEL_LAYER,t.MODEL),t.LAYER_NODE_TYPE.set(t.FACILITY_LAYER,t.FACILITY),t.LAYER_NODE_TYPE.set(t.LABEL_LAYER,t.LABEL),t.LAYER_NODE_TYPE.set(t.DOM_MARKER,t.DOM_MARKER),t.LAYER_NODE_TYPE.set(t.DYNAMIC_MODEL_MARKER,t.DYNAMIC_MODEL_MARKER),t.LAYER_NODE_TYPE.set(t.EXTRUDE_MARKER,t.EXTRUDE_MARKER),t.LAYER_NODE_TYPE.set(t.HEAT_MAP_MARKER,t.HEAT_MAP_MARKER),t.LAYER_NODE_TYPE.set(t.LINE_MARKER,t.LINE_MARKER),t.LAYER_NODE_TYPE.set(t.LOCATION_MARKER,t.LOCATION_MARKER),t.LAYER_NODE_TYPE.set(t.POLYGON_MARKER,t.POLYGON_MARKER),t.LAYER_NODE_TYPE.set(t.TEXT_MARKER,t.TEXT_MARKER),t.LAYER_NODE_TYPE.set(t.IMAGE_MARKER,t.IMAGE_MARKER),t.LAYER_NODE_TYPE.set(t.FLOW_LINE_LAYER,t.FLOW_LINE_MARKER),t.LAYER_NODE_TYPE.set(t.FIRE_MARKER,t.FIRE_MARKER),t.LAYER_NODE_TYPE.set(t.WALL_MARKER,t.WALL_MARKER),t.LAYER_NODE_TYPE.set(t.TUBE_MARKER,t.TUBE_MARKER),t.LAYER_NODE_TYPE.set(t.LINE3D_MARKER,t.LINE3D_MARKER),t.LAYER_NODE_TYPE.set(t.SPHERE_MARKER,t.SPHERE_MARKER),t.LAYER_NODE_TYPE.set(t.CAD_LAYER,t.CAD_LAYER),t);function o(n){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function a(n,e,t){return(e=c(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function s(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,c(i.key),i)}}function c(n){n=((n,e)=>{if("object"!=o(n)||!n)return n;var t=n[Symbol.toPrimitive];if(void 0===t)return("string"===e?String:Number)(n);if("object"!=o(t=t.call(n,e||"default")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")})(n,"string");return"symbol"==o(n)?n:n+""}var f=(()=>{function e(n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.map=n,this.info={extent:{faceCount:0,vertexCount:0},model:{faceCount:0,vertexCount:0},externalModel:{faceCount:0,vertexCount:0},tiles3d:{faceCount:0,vertexCount:0}},this.initDom()}return n=e,(t=[{key:"initDom",value:function(){this.domElement=document.createElement("div"),this.domElement.classList.add("fengmap-performance-container"),this.domElement.innerHTML='\n    <div class="fengmap-performance-layer extent">\n      <div class="fengmap-performance-title">extent</div>\n      <div class="fengmap-performance-item">面&nbsp;&nbsp;&nbsp;&nbsp;数: <span class="face">0</span> </div>\n      <div class="fengmap-performance-item">顶点数: <span class="vertex">0</span> </div>\n    </div>\n\n    <div class="fengmap-performance-layer model">\n      <div class="fengmap-performance-title">model</div>\n      <div class="fengmap-performance-item">面&nbsp;&nbsp;&nbsp;&nbsp;数: <span class="face">0</span> </div>\n      <div class="fengmap-performance-item">顶点数:<span class="vertex">0</span> </div>\n    </div>\n\n    <div class="fengmap-performance-layer externalModel">\n      <div class="fengmap-performance-title">externalModel</div>\n      <div class="fengmap-performance-item">面&nbsp;&nbsp;&nbsp;&nbsp;数: <span class="face">0</span> </div>\n      <div class="fengmap-performance-item">顶点数:<span class="vertex">0</span> </div>\n    </div>\n\n\n    <div class="fengmap-performance-layer tiles3d">\n      <div class="fengmap-performance-title">tiles3d</div>\n      <div class="fengmap-performance-item">面&nbsp;&nbsp;&nbsp;&nbsp;数: <span class="face">0</span> </div>\n      <div class="fengmap-performance-item">顶点数:<span class="vertex">0</span> </div>\n    </div>\n\n      <div class="fengmap-performance-layer ">\n        <div class="fengmap-performance-title objectCountTitle">对象总数:</div>\n        <div class="fengmap-performance-item"><span class="objectCount">0</span> </div>\n      </div>\n\n      <div class="fengmap-performance-layer ">\n        <div class="fengmap-performance-title objectCountTitle">地图zoom:</div>\n        <div class="fengmap-performance-item"><span class="mapZoom">0</span> </div>\n      </div>\n    ';var n=document.createElement("style");n.textContent="\n      .fengmap-performance-container {\n        position: absolute;\n        top: 2px;\n        right: 2px;\n        cursor: pointer;\n        z-index: 10000;\n        width: 180px;\n        background-color: rgba(0,0,2,0.6);\n        padding: 8px;\n        border-radius: 4px;\n        font-family: sans-serif;\n        color: rgba(25,255,255,1);\n      }\n\n      .fengmap-performance-container span {\n        margin-left: 15px;\n        color:#fff;\n      }\n\n      .fengmap-performance-layer {\n        margin-bottom: 10px;\n      }\n\n      .fengmap-performance-title{\n        font-size: 18px;\n        margin-bottom: 2px;\n        color:#fff;\n      }\n\n      .fengmap-performance-item {\n        margin-left: 20px;\n        font-size: 14px;\n      }\n\n      .objectCountTitle {        color:#0f0 !important;     }\n    ",document.getElementsByTagName("HEAD").item(0).appendChild(n)}},{key:"handleLayer",value:function(n,t){var i,o=this;t!==r.MODEL_LAYER&&t!==r.EXTENT_LAYER&&t!==r.EXTERNAL_MODEL_LAYER||(i=a(a(a({},r.EXTENT_LAYER,"extent"),r.MODEL_LAYER,"model"),r.EXTERNAL_MODEL_LAYER,"externalModel")[t],n.traverse(function(n){var e;"Mesh"===n.type&&(o.info.objectCount+=1,t===r.EXTERNAL_MODEL_LAYER||t===r.MODEL_LAYER||t===r.EXTENT_LAYER?n.geometry.attributes?(o.info[i].vertexCount+=n.geometry.attributes.position.count,n.geometry.index?o.info[i].faceCount+=n.geometry.index.count/3:o.info[i].faceCount+=n.geometry.attributes.position.count/3):n.geometry.faces&&(o.info[i].faceCount+=null!=(e=null==(e=n.geometry)||null==(e=e.faces)?void 0:e.length)?e:0,o.info[i].vertexCount+=null!=(e=null==(e=n.geometry)||null==(e=e.vertices)?void 0:e.length)?e:0):(o.info[i].faceCount+=null!=(e=null==(e=n.geometry)||null==(e=e.faces)?void 0:e.length)?e:0,o.info[i].vertexCount+=null!=(n=null==(e=n.geometry)||null==(e=e.vertices)?void 0:e.length)?n:0))}),document.querySelector(".".concat(i," .face")).innerText=Number(this.info[i].faceCount).toLocaleString(),document.querySelector(".".concat(i," .vertex")).innerText=Number(this.info[i].vertexCount).toLocaleString())}},{key:"clear",value:function(){this.info.extent.faceCount=0,this.info.extent.vertexCount=0,this.info.model.faceCount=0,this.info.model.vertexCount=0,this.info.externalModel.faceCount=0,this.info.externalModel.vertexCount=0,this.info.tiles3d.faceCount=0,this.info.tiles3d.vertexCount=0,this.info.objectCount=0}},{key:"handleTile3d",value:function(){for(var e=this,n=this.map.getRenderManager().get3DTilesLayerSceneArr(),t="tiles3d",i=0;i<n.length;i++){var o=n[i];o&&o.traverse(function(n){"Mesh"===n.type&&(e.info.objectCount+=1,e.info[t].vertexCount+=n.geometry.attributes.position.count,e.info[t].faceCount+=n.geometry.index.count/3)})}document.querySelector(".".concat(t," .face")).innerText=Number(this.info[t].faceCount).toLocaleString(),document.querySelector(".".concat(t," .vertex")).innerText=Number(this.info[t].vertexCount).toLocaleString()}},{key:"update",value:function(n){var e,t=this;this.map&&(this.clear(),this.map.getRenderManager().getRenderList().forEach(function(n,e){e=e.split("%A%B%C%D")[2];t.handleLayer(n,+e)}),this.handleTile3d(),e=this.map.getZoom(),document.querySelector(".objectCount").innerText=this.info.objectCount,document.querySelector(".mapZoom").innerText=e,this.info.zoom=e,n.callback)&&n.callback(this.info)}}])&&s(n.prototype,t),i&&s(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,t,i})();function u(n){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function p(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,(n=>(n=((n,e)=>{if("object"!=u(n)||!n)return n;var t=n[Symbol.toPrimitive];if(void 0===t)return("string"===e?String:Number)(n);if("object"!=u(t=t.call(n,e||"default")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")})(n,"string"),"symbol"==u(n)?n:n+""))(i.key),i)}}var t=(()=>{return n=function n(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=this,o=n;if(!(i instanceof o))throw new TypeError("Cannot call a class as a function");this.u=e,this.v=void 0===t.showUI||t.showUI,this.h=void 0===t.needUpdateFPS||t.needUpdateFPS,void 0!==t.showUI&&(this.h=t.showUI),this.initFPS(),this.initVertex(e),this.update=this.update.bind(this),this.options=t,this.visible=this.v,this.u.on("update",this.update)},(e=[{key:"visible",get:function(){return this.v},set:function(n){(this.v=n)?(this.g.domElement.style.top="2px",this.R.domElement.style.top="2px"):(this.g.domElement.style.top="-9999px",this.R.domElement.style.top="-9999px")}},{key:"update",value:function(){this.h&&this.g.update(),this.R.update(this.options)}},{key:"initFPS",value:function(){this.g=new i,this.g.setMode(0),this.g.domElement.style.position="absolute",this.g.domElement.style.left="2px",document.body.appendChild(this.g.domElement)}},{key:"initVertex",value:function(n){this.R=new f(n),this.R.domElement.style.position="absolute",this.R.domElement.style.right="2px",document.body.appendChild(this.R.domElement)}}])&&p(n.prototype,e),t&&p(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,e,t})(),m=window.fengmap||{};m.FMPerformance=t,e.default=m}],i={},o.m=t,o.c=i,o.d=function(n,e,t){o.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:t})},o.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"M",{value:!0})},o.t=function(e,n){if(1&n&&(e=o(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.M)return e;var t=Object.create(null);if(o.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)o.d(t,i,function(n){return e[n]}.bind(null,i));return t},o.n=function(n){var e=n&&n.M?function(){return n.default}:function(){return n};return o.d(e,"a",e),e},o.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},o.p="",o(o.s=0).default;function o(n){var e;return(i[n]||(e=i[n]={i:n,l:!1,exports:{}},t[n].call(e.exports,e,e.exports,o),e.l=!0,e)).exports}var t,i});