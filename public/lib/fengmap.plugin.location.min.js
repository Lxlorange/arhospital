/**Released Version v3.1.10,BUILD 237,Time 1749031855583. Fengmap Javascript SDK , see: https://www.fengmap.com for details**/
((t,i)=>{"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?exports.fengmap=i():t.fengmap=i()})(this,function(){return n=[function(D,I,t){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function N(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===i?String:Number)(t);if("object"!=r(n=n.call(t,i||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==r(t)?t:t+""))(e.key),e)}}t.r(I);for(var f=(()=>{return t=function t(){var i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,e=this,r=t;if(!(e instanceof r))throw new TypeError("Cannot call a class as a function");Object.defineProperty(this,"isVector2",{value:!0}),this.x=i,this.y=n},(i=[{key:"width",get:function(){return this.x},set:function(t){this.x=t}},{key:"height",get:function(){return this.y},set:function(t){this.y=t}},{key:"set",value:function(t,i){return this.x=t,this.y=i,this}},{key:"setScalar",value:function(t){return this.x=t,this.y=t,this}},{key:"setX",value:function(t){return this.x=t,this}},{key:"setY",value:function(t){return this.y=t,this}},{key:"setComponent",value:function(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;default:throw new Error("index is out of range: "+t)}return this}},{key:"getComponent",value:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this}},{key:"add",value:function(t,i){return void 0!==i?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,i)):(this.x+=t.x,this.y+=t.y,this)}},{key:"addScalar",value:function(t){return this.x+=t,this.y+=t,this}},{key:"addVectors",value:function(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this}},{key:"addScaledVector",value:function(t,i){return this.x+=t.x*i,this.y+=t.y*i,this}},{key:"sub",value:function(t,i){return void 0!==i?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,i)):(this.x-=t.x,this.y-=t.y,this)}},{key:"subScalar",value:function(t){return this.x-=t,this.y-=t,this}},{key:"subVectors",value:function(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this}},{key:"multiply",value:function(t){return this.x*=t.x,this.y*=t.y,this}},{key:"multiplyScalar",value:function(t){return this.x*=t,this.y*=t,this}},{key:"divide",value:function(t){return this.x/=t.x,this.y/=t.y,this}},{key:"divideScalar",value:function(t){return this.multiplyScalar(1/t)}},{key:"applyMatrix3",value:function(t){var i=this.x,n=this.y,t=t.elements;return this.x=t[0]*i+t[3]*n+t[6],this.y=t[1]*i+t[4]*n+t[7],this}},{key:"min",value:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}},{key:"max",value:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}},{key:"clamp",value:function(t,i){return this.x=Math.max(t.x,Math.min(i.x,this.x)),this.y=Math.max(t.y,Math.min(i.y,this.y)),this}},{key:"clampScalar",value:function(t,i){return this.x=Math.max(t,Math.min(i,this.x)),this.y=Math.max(t,Math.min(i,this.y)),this}},{key:"clampLength",value:function(t,i){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(i,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y}},{key:"cross",value:function(t){return this.x*t.y-this.y*t.x}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"angle",value:function(){return Math.atan2(-this.y,-this.x)+Math.PI}},{key:"distanceTo",value:function(t){return Math.sqrt(this.distanceToSquared(t))}},{key:"distanceToSquared",value:function(t){var i=this.x-t.x,t=this.y-t.y;return i*i+t*t}},{key:"manhattanDistanceTo",value:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}},{key:"setLength",value:function(t){return this.normalize().multiplyScalar(t)}},{key:"lerp",value:function(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this}},{key:"lerpVectors",value:function(t,i,n){return this.x=t.x+(i.x-t.x)*n,this.y=t.y+(i.y-t.y)*n,this}},{key:"equals",value:function(t){return t.x===this.x&&t.y===this.y}},{key:"fromArray",value:function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[i],this.y=t[i+1],this}},{key:"toArray",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return t[i]=this.x,t[i+1]=this.y,t}},{key:"fromBufferAttribute",value:function(t,i,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(i),this.y=t.getY(i),this}},{key:"rotateAround",value:function(t,i){var n=Math.cos(i),i=Math.sin(i),e=this.x-t.x,r=this.y-t.y;return this.x=e*n-r*i+t.x,this.y=e*i+r*n+t.y,this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this}}])&&N(t.prototype,i),n&&N(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,i,n})(),h=[],i=0;i<256;i++)h[i]=(i<16?"0":"")+i.toString(16);var n=1234567,s={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t=4294967295*Math.random()|0,i=4294967295*Math.random()|0,n=4294967295*Math.random()|0,e=4294967295*Math.random()|0;return(h[255&t]+h[t>>8&255]+h[t>>16&255]+h[t>>24&255]+"-"+h[255&i]+h[i>>8&255]+"-"+h[i>>16&15|64]+h[i>>24&255]+"-"+h[63&n|128]+h[n>>8&255]+"-"+h[n>>16&255]+h[n>>24&255]+h[255&e]+h[e>>8&255]+h[e>>16&255]+h[e>>24&255]).toUpperCase()},clamp:function(t,i,n){return Math.max(i,Math.min(n,t))},euclideanModulo:function(t,i){return(t%i+i)%i},mapLinear:function(t,i,n,e,r){return e+(t-i)*(r-e)/(n-i)},lerp:function(t,i,n){return(1-n)*t+n*i},smoothstep:function(t,i,n){return t<=i?0:n<=t?1:(t=(t-i)/(n-i))*t*(3-2*t)},smootherstep:function(t,i,n){return t<=i?0:n<=t?1:(t=(t-i)/(n-i))*t*t*(t*(6*t-15)+10)},randInt:function(t,i){return t+Math.floor(Math.random()*(i-t+1))},randFloat:function(t,i){return t+Math.random()*(i-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(t){return((n=16807*(n=void 0!==t?t%2147483647:n)%2147483647)-1)/2147483646},degToRad:function(t){return t*s.DEG2RAD},radToDeg:function(t){return t*s.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,i,n,e,r){var h=Math.cos,s=Math.sin,u=h(n/2),o=s(n/2),a=h((i+e)/2),c=s((i+e)/2),f=h((i-e)/2),l=s((i-e)/2),v=h((e-i)/2),y=s((e-i)/2);switch(r){case"XYX":t.set(u*c,o*f,o*l,u*a);break;case"YZY":t.set(o*l,u*c,o*f,u*a);break;case"ZXZ":t.set(o*f,o*l,u*c,u*a);break;case"XZX":t.set(u*c,o*y,o*v,u*a);break;case"YXY":t.set(o*v,u*c,o*y,u*a);break;case"ZYZ":t.set(o*y,o*v,u*c,u*a);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}};function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function V(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=u(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===i?String:Number)(t);if("object"!=u(n=n.call(t,i||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==u(t)?t:t+""))(e.key),e)}}t=(()=>{return t=function t(){var i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,h=this,s=t;if(!(h instanceof s))throw new TypeError("Cannot call a class as a function");Object.defineProperty(this,"isQuaternion",{value:!0}),this.h=i,this.u=n,this.v=e,this.M=r},n=[{key:"slerp",value:function(t,i,n,e){return n.copy(t).slerp(i,e)}},{key:"slerpFlat",value:function(t,i,n,e,r,h,s){var u,o,a,c=n[e+0],f=n[e+1],l=n[e+2],n=n[e+3],e=r[h+0],v=r[h+1],y=r[h+2],r=r[h+3];n===r&&c===e&&f===v&&l===y||(h=1-s,u=0<=(o=c*e+f*v+l*y+n*r)?1:-1,(a=1-o*o)>Number.EPSILON&&(a=Math.sqrt(a),o=Math.atan2(a,o*u),h=Math.sin(h*o)/a,s=Math.sin(s*o)/a),c=c*h+e*(o=s*u),f=f*h+v*o,l=l*h+y*o,n=n*h+r*o,h===1-s&&(c*=a=1/Math.sqrt(c*c+f*f+l*l+n*n),f*=a,l*=a,n*=a)),t[i]=c,t[i+1]=f,t[i+2]=l,t[i+3]=n}},{key:"multiplyQuaternionsFlat",value:function(t,i,n,e,r,h){var s=n[e],u=n[e+1],o=n[e+2],n=n[e+3],e=r[h],a=r[h+1],c=r[h+2],r=r[h+3];return t[i]=s*r+n*e+u*c-o*a,t[i+1]=u*r+n*a+o*e-s*c,t[i+2]=o*r+n*c+s*a-u*e,t[i+3]=n*r-s*e-u*a-o*c,t}}],(i=[{key:"x",get:function(){return this.h},set:function(t){this.h=t,this.k()}},{key:"y",get:function(){return this.u},set:function(t){this.u=t,this.k()}},{key:"z",get:function(){return this.v},set:function(t){this.v=t,this.k()}},{key:"w",get:function(){return this.M},set:function(t){this.M=t,this.k()}},{key:"set",value:function(t,i,n,e){return this.h=t,this.u=i,this.v=n,this.M=e,this.k(),this}},{key:"clone",value:function(){return new this.constructor(this.h,this.u,this.v,this.M)}},{key:"copy",value:function(t){return this.h=t.x,this.u=t.y,this.v=t.z,this.M=t.w,this.k(),this}},{key:"setFromEuler",value:function(t,i){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=t.h,e=t.u,r=t.v,h=t._order,t=Math.cos,s=Math.sin,u=t(n/2),o=t(e/2),a=t(r/2),c=s(n/2),f=s(e/2),l=s(r/2);switch(h){case"XYZ":this.h=c*o*a+u*f*l,this.u=u*f*a-c*o*l,this.v=u*o*l+c*f*a,this.M=u*o*a-c*f*l;break;case"YXZ":this.h=c*o*a+u*f*l,this.u=u*f*a-c*o*l,this.v=u*o*l-c*f*a,this.M=u*o*a+c*f*l;break;case"ZXY":this.h=c*o*a-u*f*l,this.u=u*f*a+c*o*l,this.v=u*o*l+c*f*a,this.M=u*o*a-c*f*l;break;case"ZYX":this.h=c*o*a-u*f*l,this.u=u*f*a+c*o*l,this.v=u*o*l-c*f*a,this.M=u*o*a+c*f*l;break;case"YZX":this.h=c*o*a+u*f*l,this.u=u*f*a+c*o*l,this.v=u*o*l-c*f*a,this.M=u*o*a-c*f*l;break;case"XZY":this.h=c*o*a-u*f*l,this.u=u*f*a-c*o*l,this.v=u*o*l+c*f*a,this.M=u*o*a+c*f*l;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+h)}return!1!==i&&this.k(),this}},{key:"setFromAxisAngle",value:function(t,i){var i=i/2,n=Math.sin(i);return this.h=t.x*n,this.u=t.y*n,this.v=t.z*n,this.M=Math.cos(i),this.k(),this}},{key:"setFromRotationMatrix",value:function(t){var t=t.elements,i=t[0],n=t[4],e=t[8],r=t[1],h=t[5],s=t[9],u=t[2],o=t[6],t=t[10],a=i+h+t;return 0<a?(a=.5/Math.sqrt(a+1),this.M=.25/a,this.h=(o-s)*a,this.u=(e-u)*a,this.v=(r-n)*a):h<i&&t<i?(a=2*Math.sqrt(1+i-h-t),this.M=(o-s)/a,this.h=.25*a,this.u=(n+r)/a,this.v=(e+u)/a):t<h?(a=2*Math.sqrt(1+h-i-t),this.M=(e-u)/a,this.h=(n+r)/a,this.u=.25*a,this.v=(s+o)/a):(a=2*Math.sqrt(1+t-i-h),this.M=(r-n)/a,this.h=(e+u)/a,this.u=(s+o)/a,this.v=.25*a),this.k(),this}},{key:"setFromUnitVectors",value:function(t,i){var n=t.dot(i)+1;return n<1e-6?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this.h=-t.y,this.u=t.x,this.v=0):(this.h=0,this.u=-t.z,this.v=t.y)):(this.h=t.y*i.z-t.z*i.y,this.u=t.z*i.x-t.x*i.z,this.v=t.x*i.y-t.y*i.x),this.M=n,this.normalize()}},{key:"angleTo",value:function(t){return 2*Math.acos(Math.abs(s.clamp(this.dot(t),-1,1)))}},{key:"rotateTowards",value:function(t,i){var n=this.angleTo(t);return 0!==n&&(i=Math.min(1,i/n),this.slerp(t,i)),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this.h*=-1,this.u*=-1,this.v*=-1,this.k(),this}},{key:"dot",value:function(t){return this.h*t.h+this.u*t.u+this.v*t.v+this.M*t.M}},{key:"lengthSq",value:function(){return this.h*this.h+this.u*this.u+this.v*this.v+this.M*this.M}},{key:"length",value:function(){return Math.sqrt(this.h*this.h+this.u*this.u+this.v*this.v+this.M*this.M)}},{key:"normalize",value:function(){var t=this.length();return 0===t?(this.h=0,this.u=0,this.v=0,this.M=1):(this.h=this.h*(t=1/t),this.u=this.u*t,this.v=this.v*t,this.M=this.M*t),this.k(),this}},{key:"multiply",value:function(t,i){return void 0!==i?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,i)):this.multiplyQuaternions(this,t)}},{key:"premultiply",value:function(t){return this.multiplyQuaternions(t,this)}},{key:"multiplyQuaternions",value:function(t,i){var n=t.h,e=t.u,r=t.v,t=t.M,h=i.h,s=i.u,u=i.v,i=i.M;return this.h=n*i+t*h+e*u-r*s,this.u=e*i+t*s+r*h-n*u,this.v=r*i+t*u+n*s-e*h,this.M=t*i-n*h-e*s-r*u,this.k(),this}},{key:"slerp",value:function(t,i){if(0!==i){if(1===i)return this.copy(t);var n,e=this.h,r=this.u,h=this.v,s=this.M,u=s*t.M+e*t.h+r*t.u+h*t.v;u<0?(this.M=-t.M,this.h=-t.h,this.u=-t.u,this.v=-t.v,u=-u):this.copy(t),1<=u?(this.M=s,this.h=e,this.u=r,this.v=h):((t=1-u*u)<=Number.EPSILON?(this.M=(n=1-i)*s+i*this.M,this.h=n*e+i*this.h,this.u=n*r+i*this.u,this.v=n*h+i*this.v,this.normalize()):(n=Math.sqrt(t),t=Math.atan2(n,u),u=Math.sin((1-i)*t)/n,i=Math.sin(i*t)/n,this.M=s*u+this.M*i,this.h=e*u+this.h*i,this.u=r*u+this.u*i,this.v=h*u+this.v*i),this.k())}return this}},{key:"equals",value:function(t){return t.h===this.h&&t.u===this.u&&t.v===this.v&&t.M===this.M}},{key:"fromArray",value:function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return this.h=t[i],this.u=t[i+1],this.v=t[i+2],this.M=t[i+3],this.k(),this}},{key:"toArray",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return t[i]=this.h,t[i+1]=this.u,t[i+2]=this.v,t[i+3]=this.M,t}},{key:"fromBufferAttribute",value:function(t,i){return this.h=t.getX(i),this.u=t.getY(i),this.v=t.getZ(i),this.M=t.getW(i),this}},{key:"onChange",value:function(t){return this.k=t,this}},{key:"_onChangeCallback",value:function(){}}])&&V(t.prototype,i),n&&V(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,i,n})();function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Y(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=o(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===i?String:Number)(t);if("object"!=o(n=n.call(t,i||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==o(t)?t:t+""))(e.key),e)}}var k=(()=>{return t=function t(){var i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=this,h=t;if(!(r instanceof h))throw new TypeError("Cannot call a class as a function");Object.defineProperty(this,"isVector3",{value:!0}),this.x=i,this.y=n,this.z=e},(i=[{key:"set",value:function(t,i,n){return void 0===n&&(n=this.z),this.x=t,this.y=i,this.z=n,this}},{key:"setScalar",value:function(t){return this.x=t,this.y=t,this.z=t,this}},{key:"setX",value:function(t){return this.x=t,this}},{key:"setY",value:function(t){return this.y=t,this}},{key:"setZ",value:function(t){return this.z=t,this}},{key:"setComponent",value:function(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;default:throw new Error("index is out of range: "+t)}return this}},{key:"getComponent",value:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}},{key:"add",value:function(t,i){return void 0!==i?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,i)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}},{key:"addScalar",value:function(t){return this.x+=t,this.y+=t,this.z+=t,this}},{key:"addVectors",value:function(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this}},{key:"addScaledVector",value:function(t,i){return this.x+=t.x*i,this.y+=t.y*i,this.z+=t.z*i,this}},{key:"sub",value:function(t,i){return void 0!==i?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,i)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}},{key:"subScalar",value:function(t){return this.x-=t,this.y-=t,this.z-=t,this}},{key:"subVectors",value:function(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this}},{key:"multiply",value:function(t,i){return void 0!==i?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,i)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)}},{key:"multiplyScalar",value:function(t){return this.x*=t,this.y*=t,this.z*=t,this}},{key:"multiplyVectors",value:function(t,i){return this.x=t.x*i.x,this.y=t.y*i.y,this.z=t.z*i.z,this}},{key:"applyEuler",value:function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(X.setFromEuler(t))}},{key:"applyAxisAngle",value:function(t,i){return this.applyQuaternion(X.setFromAxisAngle(t,i))}},{key:"applyMatrix3",value:function(t){var i=this.x,n=this.y,e=this.z,t=t.elements;return this.x=t[0]*i+t[3]*n+t[6]*e,this.y=t[1]*i+t[4]*n+t[7]*e,this.z=t[2]*i+t[5]*n+t[8]*e,this}},{key:"applyNormalMatrix",value:function(t){return this.applyMatrix3(t).normalize()}},{key:"applyMatrix4",value:function(t){var i=this.x,n=this.y,e=this.z,t=t.elements,r=1/(t[3]*i+t[7]*n+t[11]*e+t[15]);return this.x=(t[0]*i+t[4]*n+t[8]*e+t[12])*r,this.y=(t[1]*i+t[5]*n+t[9]*e+t[13])*r,this.z=(t[2]*i+t[6]*n+t[10]*e+t[14])*r,this}},{key:"applyQuaternion",value:function(t){var i=this.x,n=this.y,e=this.z,r=t.x,h=t.y,s=t.z,t=t.w,u=t*i+h*e-s*n,o=t*n+s*i-r*e,a=t*e+r*n-h*i,i=-r*i-h*n-s*e;return this.x=u*t+i*-r+o*-s-a*-h,this.y=o*t+i*-h+a*-r-u*-s,this.z=a*t+i*-s+u*-h-o*-r,this}},{key:"project",value:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}},{key:"unproject",value:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}},{key:"transformDirection",value:function(t){var i=this.x,n=this.y,e=this.z,t=t.elements;return this.x=t[0]*i+t[4]*n+t[8]*e,this.y=t[1]*i+t[5]*n+t[9]*e,this.z=t[2]*i+t[6]*n+t[10]*e,this.normalize()}},{key:"divide",value:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}},{key:"divideScalar",value:function(t){return this.multiplyScalar(1/t)}},{key:"min",value:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}},{key:"max",value:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}},{key:"clamp",value:function(t,i){return this.x=Math.max(t.x,Math.min(i.x,this.x)),this.y=Math.max(t.y,Math.min(i.y,this.y)),this.z=Math.max(t.z,Math.min(i.z,this.z)),this}},{key:"clampScalar",value:function(t,i){return this.x=Math.max(t,Math.min(i,this.x)),this.y=Math.max(t,Math.min(i,this.y)),this.z=Math.max(t,Math.min(i,this.z)),this}},{key:"clampLength",value:function(t,i){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(i,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y+this.z*t.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(t){return this.normalize().multiplyScalar(t)}},{key:"lerp",value:function(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this.z+=(t.z-this.z)*i,this}},{key:"lerpVectors",value:function(t,i,n){return this.x=t.x+(i.x-t.x)*n,this.y=t.y+(i.y-t.y)*n,this.z=t.z+(i.z-t.z)*n,this}},{key:"cross",value:function(t,i){return void 0!==i?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,i)):this.crossVectors(this,t)}},{key:"crossVectors",value:function(t,i){var n=t.x,e=t.y,t=t.z,r=i.x,h=i.y,i=i.z;return this.x=e*i-t*h,this.y=t*r-n*i,this.z=n*h-e*r,this}},{key:"projectOnVector",value:function(t){var i=t.lengthSq();return 0===i?this.set(0,0,0):(i=t.dot(this)/i,this.copy(t).multiplyScalar(i))}},{key:"projectOnPlane",value:function(t){return e.copy(this).projectOnVector(t),this.sub(e)}},{key:"reflect",value:function(t){return this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}},{key:"angleTo",value:function(t){var i=Math.sqrt(this.lengthSq()*t.lengthSq());return 0===i?Math.PI/2:(t=this.dot(t)/i,Math.acos(s.clamp(t,-1,1)))}},{key:"distanceTo",value:function(t){return Math.sqrt(this.distanceToSquared(t))}},{key:"distanceToSquared",value:function(t){var i=this.x-t.x,n=this.y-t.y,t=this.z-t.z;return i*i+n*n+t*t}},{key:"manhattanDistanceTo",value:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}},{key:"setFromSpherical",value:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}},{key:"setFromSphericalCoords",value:function(t,i,n){var e=Math.sin(i)*t;return this.x=e*Math.sin(n),this.y=Math.cos(i)*t,this.z=e*Math.cos(n),this}},{key:"setFromCylindrical",value:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}},{key:"setFromCylindricalCoords",value:function(t,i,n){return this.x=t*Math.sin(i),this.y=n,this.z=t*Math.cos(i),this}},{key:"setFromMatrixPosition",value:function(t){t=t.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}},{key:"setFromMatrixScale",value:function(t){var i=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),t=this.setFromMatrixColumn(t,2).length();return this.x=i,this.y=n,this.z=t,this}},{key:"setFromMatrixColumn",value:function(t,i){return this.fromArray(t.elements,4*i)}},{key:"setFromMatrix3Column",value:function(t,i){return this.fromArray(t.elements,3*i)}},{key:"equals",value:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}},{key:"fromArray",value:function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[i],this.y=t[i+1],this.z=t[i+2],this}},{key:"toArray",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return t[i]=this.x,t[i+1]=this.y,t[i+2]=this.z,t}},{key:"fromBufferAttribute",value:function(t,i,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(i),this.y=t.getY(i),this.z=t.getZ(i),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}])&&Y(t.prototype,i),n&&Y(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,i,n})(),e=new k,X=new t,Z=function(t,i,n){n=n||2;var e,r,h,s,u,o=i&&i.length,a=o?i[0]*n:t.length,c=G(t,0,a,n,!0),f=[];if(c&&c.next!==c.prev){if(o&&(c=((t,i,n,e)=>{var r,h,s,u,o=[];for(r=0,h=i.length;r<h;r++)u=i[r]*e,s=r<h-1?i[r+1]*e:t.length,(u=G(t,u,s,e,!1))===u.next&&(u.steiner=!0),o.push((t=>{for(var i=t,n=t;(i.x<n.x||i.x===n.x&&i.y<n.y)&&(n=i),(i=i.next)!==t;);return n})(u));for(o.sort(H),r=0;r<o.length;r++){{a=void 0;c=void 0;var a=o[r];var c=n;(c=((t,i)=>{var n,e=i,r=t.x,h=t.y,s=-1/0;do{if(h<=e.y&&h>=e.next.y&&e.next.y!==e.y){var u=e.x+(h-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(u<=r&&s<u){if((s=u)===r){if(h===e.y)return e;if(h===e.next.y)return e.next}n=e.x<e.next.x?e:e.next}}}while((e=e.next)!==i);if(!n)return null;if(r!==s){var o,a=n,c=n.x,f=n.y,l=1/0;for(e=n;r>=e.x&&e.x>=c&&r!==e.x&&O(h<f?r:s,h,c,f,h<f?s:r,h,e.x,e.y)&&(o=Math.abs(h-e.y)/(r-e.x),L(e,t))&&(o<l||o===l&&(e.x>n.x||e.x===n.x&&((t,i)=>T(t.prev,t,i.prev)<0&&T(i.next,t,t.next)<0)(n,e)))&&(n=e,l=o),(e=e.next)!==a;);}return n})(a,c))&&(a=K(c,a),S(c,c.next),S(a,a.next))}n=S(n,n.next)}return n})(t,i,c,n)),t.length>80*n){for(var l=e=t[0],v=r=t[1],y=n;y<a;y+=n)(h=t[y])<l&&(l=h),(s=t[y+1])<v&&(v=s),e<h&&(e=h),r<s&&(r=s);u=0!==(u=Math.max(e-l,r-v))?1/u:0}x(c,f,n,l,v,u)}return f};function G(t,i,n,e,r){var h,s;if(r===0<((t,i,n,e)=>{for(var r=0,h=i,s=n-e;h<n;h+=e)r+=(t[s]-t[h])*(t[h+1]+t[s+1]),s=h;return r})(t,i,n,e))for(h=i;h<n;h+=e)s=z(h,t[h],t[h+1],s);else for(h=n-e;i<=h;h-=e)s=z(h,t[h],t[h+1],s);return s&&R(s,s.next)&&(A(s),s=s.next),s}function S(t,i){if(!t)return t;i=i||t;var n,e=t;do{if(n=!1,e.steiner||!R(e,e.next)&&0!==T(e.prev,e,e.next))e=e.next;else{if(A(e),(e=i=e.prev)===e.next)break;n=!0}}while(n||e!==i);return i}function x(t,i,n,e,r,h,s){if(t){if(!s&&h){for(var u=t,o=e,a=r,c=h,f=u;null===f.z&&(f.z=j(f.x,f.y,o,a,c)),f.prevZ=f.prev,f.nextZ=f.next,(f=f.next)!==u;);f.prevZ.nextZ=null,f.prevZ=null;var l,v,y,M,d,k,m,p,b=f,w=1;do{for(v=b,d=b=null,k=0;v;){for(k++,y=v,l=m=0;l<w&&(m++,y=y.nextZ);l++);for(p=w;0<m||0<p&&y;)0!==m&&(0===p||!y||v.z<=y.z)?(v=(M=v).nextZ,m--):(y=(M=y).nextZ,p--),d?d.nextZ=M:b=M,M.prevZ=d,d=M;v=y}}while(d.nextZ=null,w*=2,1<k)}for(var g,E,_=t;t.prev!==t.next;)if(g=t.prev,E=t.next,h?((t,i,n,e)=>{var r=t.prev,h=t,s=t.next;if(!(0<=T(r,h,s))){for(var u=(r.x<h.x?r.x<s.x?r:s:h.x<s.x?h:s).x,o=(r.y<h.y?r.y<s.y?r:s:h.y<s.y?h:s).y,a=(h.x<r.x?r.x>s.x?r:s:h.x>s.x?h:s).x,c=(h.y<r.y?r.y>s.y?r:s:h.y>s.y?h:s).y,f=j(u,o,i,n,e),l=j(a,c,i,n,e),v=t.prevZ,y=t.nextZ;v&&v.z>=f&&y&&y.z<=l;){if(v!==t.prev&&v!==t.next&&O(r.x,r.y,h.x,h.y,s.x,s.y,v.x,v.y)&&0<=T(v.prev,v,v.next))return;if(v=v.prevZ,y!==t.prev&&y!==t.next&&O(r.x,r.y,h.x,h.y,s.x,s.y,y.x,y.y)&&0<=T(y.prev,y,y.next))return;y=y.nextZ}for(;v&&v.z>=f;){if(v!==t.prev&&v!==t.next&&O(r.x,r.y,h.x,h.y,s.x,s.y,v.x,v.y)&&0<=T(v.prev,v,v.next))return;v=v.prevZ}for(;y&&y.z<=l;){if(y!==t.prev&&y!==t.next&&O(r.x,r.y,h.x,h.y,s.x,s.y,y.x,y.y)&&0<=T(y.prev,y,y.next))return;y=y.nextZ}return 1}})(t,e,r,h):(t=>{var i=t.prev,n=t,e=t.next;if(!(0<=T(i,n,e))){for(var r=t.next.next;r!==t.prev;){if(O(i.x,i.y,n.x,n.y,e.x,e.y,r.x,r.y)&&0<=T(r.prev,r,r.next))return;r=r.next}return 1}})(t))i.push(g.i/n),i.push(t.i/n),i.push(E.i/n),A(t),t=E.next,_=E.next;else if((t=E)===_){s?1===s?x(t=((t,i,n)=>{var e=t;do{var r=e.prev,h=e.next.next}while(!R(r,h)&&q(r,e,e.next,h)&&L(r,h)&&L(h,r)&&(i.push(r.i/n),i.push(e.i/n),i.push(h.i/n),A(e),A(e.next),e=t=h),(e=e.next)!==t);return S(e)})(S(t),i,n),i,n,e,r,h,2):2===s&&((t,i,n,e,r,h)=>{var s=t;do{for(var u,o=s.next.next;o!==s.prev;){if(s.i!==o.i&&((t,i)=>t.next.i!==i.i&&t.prev.i!==i.i&&!((t,i)=>{var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==i.i&&n.next.i!==i.i&&q(n,n.next,t,i))return 1}while((n=n.next)!==t)})(t,i)&&(L(t,i)&&L(i,t)&&((t,i)=>{for(var n=t,e=!1,r=(t.x+i.x)/2,h=(t.y+i.y)/2;n.y>h!=n.next.y>h&&n.next.y!==n.y&&r<(n.next.x-n.x)*(h-n.y)/(n.next.y-n.y)+n.x&&(e=!e),(n=n.next)!==t;);return e})(t,i)&&(T(t.prev,t,i.prev)||T(t,i.prev,i))||R(t,i)&&0<T(t.prev,t,t.next)&&0<T(i.prev,i,i.next)))(s,o))return u=K(s,o),s=S(s,s.next),u=S(u,u.next),x(s,i,n,e,r,h),x(u,i,n,e,r,h);o=o.next}}while((s=s.next)!==t)})(t,i,n,e,r,h):x(S(t),i,n,e,r,h,1);break}}}function H(t,i){return t.x-i.x}function j(t,i,n,e,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=32767*(i-e)*r)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function O(t,i,n,e,r,h,s,u){return 0<=(r-s)*(i-u)-(t-s)*(h-u)&&0<=(t-s)*(e-u)-(n-s)*(i-u)&&0<=(n-s)*(h-u)-(r-s)*(e-u)}function T(t,i,n){return(i.y-t.y)*(n.x-i.x)-(i.x-t.x)*(n.y-i.y)}function R(t,i){return t.x===i.x&&t.y===i.y}function q(t,i,n,e){var r=c(T(t,i,n)),h=c(T(t,i,e)),s=c(T(n,e,t)),u=c(T(n,e,i));return r!==h&&s!==u||0===r&&a(t,n,i)||0===h&&a(t,e,i)||0===s&&a(n,t,e)||!(0!==u||!a(n,i,e))}function a(t,i,n){return i.x<=Math.max(t.x,n.x)&&i.x>=Math.min(t.x,n.x)&&i.y<=Math.max(t.y,n.y)&&i.y>=Math.min(t.y,n.y)}function c(t){return 0<t?1:t<0?-1:0}function L(t,i){return T(t.prev,t,t.next)<0?0<=T(t,i,t.next)&&0<=T(t,t.prev,i):T(t,i,t.prev)<0||T(t,t.next,i)<0}function K(t,i){var n=new l(t.i,t.x,t.y),e=new l(i.i,i.x,i.y),r=t.next,h=i.prev;return(t.next=i).prev=t,(n.next=r).prev=n,e.next=n,(h.next=n.prev=e).prev=h,e}function z(t,i,n,e){t=new l(t,i,n);return e?(t.next=e.next,(t.prev=e).next.prev=t,e.next=t):(t.prev=t).next=t,t}function A(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function l(t,i,n){this.i=t,this.x=i,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function U(t){return(t=>{if(Array.isArray(t))return v(t)})(t)||(t=>{if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)})(t)||((t,i)=>{var n;if(t)return"string"==typeof t?v(t,i):"Map"===(n="Object"===(n={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(t,i):void 0})(t)||(()=>{throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}function v(t,i){(null==i||i>t.length)&&(i=t.length);for(var n=0,e=Array(i);n<i;n++)e[n]=t[n];return e}var y={area:function(t){for(var i=t.length,n=0,e=i-1,r=0;r<i;e=r++)n+=t[e].x*t[r].y-t[r].x*t[e].y;return.5*n},isClockWise:function(t){return y.area(t)<0},triangulateShape:function(t,i){var n=[],e=[],r=[],h=(B(t),Q(n,t),t.length);i.forEach(B);for(var s=0;s<i.length;s++)e.push(h),h+=i[s].length,Q(n,i[s]);for(var u=Z(n,e),o=0;o<u.length;o+=3)r.push(u.slice(o,o+3));return r},triangulate:function(t){(r=[]).push.apply(r,U(t[0]));for(var i=[],n=1;n<t.length;n++){var e=[];e.push.apply(e,U(t[n])),i.push(e)}if(!y.isClockWise(r))for(var r=r.reverse(),h=0,s=i.length;h<s;h++){var u=i[h];y.isClockWise(u)&&(i[h]=u.reverse())}return y.triangulateShape(r,i)}};function B(t){var i,n=t.length;2<n&&(n=t[n-1],i=t[0],n.x===i.x)&&n.y===i.y&&t.pop()}function Q(t,i){for(var n=0;n<i.length;n++)t.push(i[n].x),t.push(i[n].y)}Math.PI;function W(t,i,n){return Math.max(i,Math.min(n,t))}function C(t){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function J(){J=function(){return s};var o,s={},t=Object.prototype,a=t.hasOwnProperty,c=Object.defineProperty||function(t,i,n){t[i]=n.value},i="function"==typeof Symbol?Symbol:{},e=i.iterator||"@@iterator",n=i.asyncIterator||"@@asyncIterator",r=i.toStringTag||"@@toStringTag";function h(t,i,n){return Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[i]}try{h({},"")}catch(o){h=function(t,i,n){return t[i]=n}}function u(t,i,n,e){var r,h,s,u,i=i&&i.prototype instanceof k?i:k,i=Object.create(i.prototype),e=new x(e||[]);return c(i,"_invoke",{value:(r=t,h=n,s=e,u=l,function(t,i){if(u===y)throw Error("Generator is already running");if(u===M){if("throw"===t)throw i;return{value:o,done:!0}}for(s.method=t,s.arg=i;;){var n=s.delegate;if(n){n=function t(i,n){var e=n.method,r=i.iterator[e];if(r===o)return n.delegate=null,"throw"===e&&i.iterator.return&&(n.method="return",n.arg=o,t(i,n),"throw"===n.method)||"return"!==e&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+e+"' method")),d;e=f(r,i.iterator,n.arg);if("throw"===e.type)return n.method="throw",n.arg=e.arg,n.delegate=null,d;r=e.arg;return r?r.done?(n[i.resultName]=r.value,n.next=i.nextLoc,"return"!==n.method&&(n.method="next",n.arg=o),n.delegate=null,d):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,d)}(n,s);if(n){if(n===d)continue;return n}}if("next"===s.method)s.sent=s.g=s.arg;else if("throw"===s.method){if(u===l)throw u=M,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);u=y;n=f(r,h,s);if("normal"===n.type){if(u=s.done?M:v,n.arg===d)continue;return{value:n.arg,done:s.done}}"throw"===n.type&&(u=M,s.method="throw",s.arg=n.arg)}})}),i}function f(t,i,n){try{return{type:"normal",arg:t.call(i,n)}}catch(t){return{type:"throw",arg:t}}}s.wrap=u;var l="suspendedStart",v="suspendedYield",y="executing",M="completed",d={};function k(){}function m(){}function p(){}var i={},b=(h(i,e,function(){return this}),Object.getPrototypeOf),b=b&&b(b(j([]))),w=(b&&b!==t&&a.call(b,e)&&(i=b),p.prototype=k.prototype=Object.create(i));function g(t){["next","throw","return"].forEach(function(i){h(t,i,function(t){return this._invoke(i,t)})})}function E(s,u){var i;c(this,"_invoke",{value:function(n,e){function t(){return new u(function(t,i){!function i(t,n,e,r){var h,t=f(s[t],s,n);if("throw"!==t.type)return(n=(h=t.arg).value)&&"object"==C(n)&&a.call(n,"__await")?u.resolve(n._).then(function(t){i("next",t,e,r)},function(t){i("throw",t,e,r)}):u.resolve(n).then(function(t){h.value=t,e(h)},function(t){return i("throw",t,e,r)});r(t.arg)}(n,e,t,i)})}return i=i?i.then(t,t):t()}})}function _(t){var i={tryLoc:t[0]};1 in t&&(i.catchLoc=t[1]),2 in t&&(i.finallyLoc=t[2],i.afterLoc=t[3]),this.tryEntries.push(i)}function S(t){var i=t.completion||{};i.type="normal",delete i.arg,t.completion=i}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function j(i){if(i||""===i){var n,t=i[e];if(t)return t.call(i);if("function"==typeof i.next)return i;if(!isNaN(i.length))return n=-1,(t=function t(){for(;++n<i.length;)if(a.call(i,n))return t.value=i[n],t.done=!1,t;return t.value=o,t.done=!0,t}).next=t}throw new TypeError(C(i)+" is not iterable")}return c(w,"constructor",{value:m.prototype=p,configurable:!0}),c(p,"constructor",{value:m,configurable:!0}),m.displayName=h(p,r,"GeneratorFunction"),s.isGeneratorFunction=function(t){t="function"==typeof t&&t.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},s.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,h(t,r,"GeneratorFunction")),t.prototype=Object.create(w),t},s.awrap=function(t){return{_:t}},g(E.prototype),h(E.prototype,n,function(){return this}),s.AsyncIterator=E,s.async=function(t,i,n,e,r){void 0===r&&(r=Promise);var h=new E(u(t,i,n,e),r);return s.isGeneratorFunction(i)?h:h.next().then(function(t){return t.done?t.value:h.next()})},g(w),h(w,r,"Generator"),h(w,e,function(){return this}),h(w,"toString",function(){return"[object Generator]"}),s.keys=function(t){var i,n=Object(t),e=[];for(i in n)e.push(i);return e.reverse(),function t(){for(;e.length;){var i=e.pop();if(i in n)return t.value=i,t.done=!1,t}return t.done=!0,t}},s.values=j,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this.g=o,this.done=!1,this.delegate=null,this.method="next",this.arg=o,this.tryEntries.forEach(S),!t)for(var i in this)"t"===i.charAt(0)&&a.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=o)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var e=this;function t(t,i){return h.type="throw",h.arg=n,e.next=t,i&&(e.method="next",e.arg=o),!!i}for(var i=this.tryEntries.length-1;0<=i;--i){var r=this.tryEntries[i],h=r.completion;if("root"===r.tryLoc)return t("end");if(r.tryLoc<=this.prev){var s=a.call(r,"catchLoc"),u=a.call(r,"finallyLoc");if(s&&u){if(this.prev<r.catchLoc)return t(r.catchLoc,!0);if(this.prev<r.finallyLoc)return t(r.finallyLoc)}else if(s){if(this.prev<r.catchLoc)return t(r.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return t(r.finallyLoc)}}}},abrupt:function(t,i){for(var n=this.tryEntries.length-1;0<=n;--n){var e=this.tryEntries[n];if(e.tryLoc<=this.prev&&a.call(e,"finallyLoc")&&this.prev<e.finallyLoc){var r=e;break}}var h=(r=r&&("break"===t||"continue"===t)&&r.tryLoc<=i&&i<=r.finallyLoc?null:r)?r.completion:{};return h.type=t,h.arg=i,r?(this.method="next",this.next=r.finallyLoc,d):this.complete(h)},complete:function(t,i){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&i&&(this.next=i),d},finish:function(t){for(var i=this.tryEntries.length-1;0<=i;--i){var n=this.tryEntries[i];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(t){for(var i=this.tryEntries.length-1;0<=i;--i){var n,e,r=this.tryEntries[i];if(r.tryLoc===t)return"throw"===(n=r.completion).type&&(e=n.arg,S(r)),e}throw Error("illegal catch attempt")},delegateYield:function(t,i,n){return this.delegate={iterator:j(t),resultName:i,nextLoc:n},"next"===this.method&&(this.arg=o),d}},s}function $(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=C(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===i?String:Number)(t);if("object"!=C(n=n.call(t,i||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==C(t)?t:t+""))(e.key),e)}}t=(()=>{return t=function t(){var i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,h=this,s=t;if(!(h instanceof s))throw new TypeError("Cannot call a class as a function");this.isQuaternion=!0,this.h=i,this.u=n,this.v=e,this.M=r},i=[{key:"x",get:function(){return this.h},set:function(t){this.h=t,this.k()}},{key:"y",get:function(){return this.u},set:function(t){this.u=t,this.k()}},{key:"z",get:function(){return this.v},set:function(t){this.v=t,this.k()}},{key:"w",get:function(){return this.M},set:function(t){this.M=t,this.k()}},{key:"set",value:function(t,i,n,e){return this.h=t,this.u=i,this.v=n,this.M=e,this.k(),this}},{key:"clone",value:function(){return new this.constructor(this.h,this.u,this.v,this.M)}},{key:"copy",value:function(t){return this.h=t.x,this.u=t.y,this.v=t.z,this.M=t.w,this.k(),this}},{key:"setFromEuler",value:function(t){var i=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=t.h,e=t.u,r=t.v,h=t._order,t=Math.cos,s=Math.sin,u=t(n/2),o=t(e/2),a=t(r/2),c=s(n/2),f=s(e/2),l=s(r/2);switch(h){case"XYZ":this.h=c*o*a+u*f*l,this.u=u*f*a-c*o*l,this.v=u*o*l+c*f*a,this.M=u*o*a-c*f*l;break;case"YXZ":this.h=c*o*a+u*f*l,this.u=u*f*a-c*o*l,this.v=u*o*l-c*f*a,this.M=u*o*a+c*f*l;break;case"ZXY":this.h=c*o*a-u*f*l,this.u=u*f*a+c*o*l,this.v=u*o*l+c*f*a,this.M=u*o*a-c*f*l;break;case"ZYX":this.h=c*o*a-u*f*l,this.u=u*f*a+c*o*l,this.v=u*o*l-c*f*a,this.M=u*o*a+c*f*l;break;case"YZX":this.h=c*o*a+u*f*l,this.u=u*f*a+c*o*l,this.v=u*o*l-c*f*a,this.M=u*o*a-c*f*l;break;case"XZY":this.h=c*o*a-u*f*l,this.u=u*f*a-c*o*l,this.v=u*o*l+c*f*a,this.M=u*o*a+c*f*l;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+h)}return!0===i&&this.k(),this}},{key:"setFromAxisAngle",value:function(t,i){var i=i/2,n=Math.sin(i);return this.h=t.x*n,this.u=t.y*n,this.v=t.z*n,this.M=Math.cos(i),this.k(),this}},{key:"setFromRotationMatrix",value:function(t){var t=t.elements,i=t[0],n=t[4],e=t[8],r=t[1],h=t[5],s=t[9],u=t[2],o=t[6],t=t[10],a=i+h+t;return 0<a?(a=.5/Math.sqrt(a+1),this.M=.25/a,this.h=(o-s)*a,this.u=(e-u)*a,this.v=(r-n)*a):h<i&&t<i?(a=2*Math.sqrt(1+i-h-t),this.M=(o-s)/a,this.h=.25*a,this.u=(n+r)/a,this.v=(e+u)/a):t<h?(a=2*Math.sqrt(1+h-i-t),this.M=(e-u)/a,this.h=(n+r)/a,this.u=.25*a,this.v=(s+o)/a):(a=2*Math.sqrt(1+t-i-h),this.M=(r-n)/a,this.h=(e+u)/a,this.u=(s+o)/a,this.v=.25*a),this.k(),this}},{key:"setFromUnitVectors",value:function(t,i){var n=t.dot(i)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this.h=-t.y,this.u=t.x,this.v=0):(this.h=0,this.u=-t.z,this.v=t.y)):(this.h=t.y*i.z-t.z*i.y,this.u=t.z*i.x-t.x*i.z,this.v=t.x*i.y-t.y*i.x),this.M=n,this.normalize()}},{key:"angleTo",value:function(t){return 2*Math.acos(Math.abs(W(this.dot(t),-1,1)))}},{key:"rotateTowards",value:function(t,i){var n=this.angleTo(t);return 0!==n&&(i=Math.min(1,i/n),this.slerp(t,i)),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this.h*=-1,this.u*=-1,this.v*=-1,this.k(),this}},{key:"dot",value:function(t){return this.h*t.h+this.u*t.u+this.v*t.v+this.M*t.M}},{key:"lengthSq",value:function(){return this.h*this.h+this.u*this.u+this.v*this.v+this.M*this.M}},{key:"length",value:function(){return Math.sqrt(this.h*this.h+this.u*this.u+this.v*this.v+this.M*this.M)}},{key:"normalize",value:function(){var t=this.length();return 0===t?(this.h=0,this.u=0,this.v=0,this.M=1):(this.h=this.h*(t=1/t),this.u=this.u*t,this.v=this.v*t,this.M=this.M*t),this.k(),this}},{key:"multiply",value:function(t){return this.multiplyQuaternions(this,t)}},{key:"premultiply",value:function(t){return this.multiplyQuaternions(t,this)}},{key:"multiplyQuaternions",value:function(t,i){var n=t.h,e=t.u,r=t.v,t=t.M,h=i.h,s=i.u,u=i.v,i=i.M;return this.h=n*i+t*h+e*u-r*s,this.u=e*i+t*s+r*h-n*u,this.v=r*i+t*u+n*s-e*h,this.M=t*i-n*h-e*s-r*u,this.k(),this}},{key:"slerp",value:function(t,i){if(0!==i){if(1===i)return this.copy(t);var n,e=this.h,r=this.u,h=this.v,s=this.M,u=s*t.M+e*t.h+r*t.u+h*t.v;u<0?(this.M=-t.M,this.h=-t.h,this.u=-t.u,this.v=-t.v,u=-u):this.copy(t),1<=u?(this.M=s,this.h=e,this.u=r,this.v=h):(t=1-u*u)<=Number.EPSILON?(this.M=(n=1-i)*s+i*this.M,this.h=n*e+i*this.h,this.u=n*r+i*this.u,this.v=n*h+i*this.v,this.normalize()):(n=Math.sqrt(t),t=Math.atan2(n,u),u=Math.sin((1-i)*t)/n,i=Math.sin(i*t)/n,this.M=s*u+this.M*i,this.h=e*u+this.h*i,this.u=r*u+this.u*i,this.v=h*u+this.v*i,this.k())}return this}},{key:"slerpQuaternions",value:function(t,i,n){return this.copy(t).slerp(i,n)}},{key:"random",value:function(){var t=2*Math.PI*Math.random(),i=2*Math.PI*Math.random(),n=Math.random(),e=Math.sqrt(1-n),n=Math.sqrt(n);return this.set(e*Math.sin(t),e*Math.cos(t),n*Math.sin(i),n*Math.cos(i))}},{key:"equals",value:function(t){return t.h===this.h&&t.u===this.u&&t.v===this.v&&t.M===this.M}},{key:"fromArray",value:function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return this.h=t[i],this.u=t[i+1],this.v=t[i+2],this.M=t[i+3],this.k(),this}},{key:"toArray",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return t[i]=this.h,t[i+1]=this.u,t[i+2]=this.v,t[i+3]=this.M,t}},{key:"fromBufferAttribute",value:function(t,i){return this.h=t.getX(i),this.u=t.getY(i),this.v=t.getZ(i),this.M=t.getW(i),this.k(),this}},{key:"toJSON",value:function(){return this.toArray()}},{key:"_onChange",value:function(t){return this.k=t,this}},{key:"_onChangeCallback",value:function(){}},{key:Symbol.iterator,value:J().mark(function t(){return J().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.h;case 2:return t.next=4,this.u;case 4:return t.next=6,this.v;case 6:return t.next=8,this.M;case 8:case"end":return t.stop()}},t,this)})}],n=[{key:"slerpFlat",value:function(t,i,n,e,r,h,s){var u,o,a,c=n[e+0],f=n[e+1],l=n[e+2],n=n[e+3],e=r[h+0],v=r[h+1],y=r[h+2],r=r[h+3];0===s?(t[i+0]=c,t[i+1]=f,t[i+2]=l,t[i+3]=n):1===s?(t[i+0]=e,t[i+1]=v,t[i+2]=y,t[i+3]=r):(n===r&&c===e&&f===v&&l===y||(h=1-s,u=0<=(o=c*e+f*v+l*y+n*r)?1:-1,(a=1-o*o)>Number.EPSILON&&(a=Math.sqrt(a),o=Math.atan2(a,o*u),h=Math.sin(h*o)/a,s=Math.sin(s*o)/a),c=c*h+e*(o=s*u),f=f*h+v*o,l=l*h+y*o,n=n*h+r*o,h===1-s&&(c*=a=1/Math.sqrt(c*c+f*f+l*l+n*n),f*=a,l*=a,n*=a)),t[i]=c,t[i+1]=f,t[i+2]=l,t[i+3]=n)}},{key:"multiplyQuaternionsFlat",value:function(t,i,n,e,r,h){var s=n[e],u=n[e+1],o=n[e+2],n=n[e+3],e=r[h],a=r[h+1],c=r[h+2],r=r[h+3];return t[i]=s*r+n*e+u*c-o*a,t[i+1]=u*r+n*a+o*e-s*c,t[i+2]=o*r+n*c+s*a-u*e,t[i+3]=n*r-s*e-u*a-o*c,t}}],i&&$(t.prototype,i),n&&$(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,i,n})();function P(t){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tt(){tt=function(){return s};var o,s={},t=Object.prototype,a=t.hasOwnProperty,c=Object.defineProperty||function(t,i,n){t[i]=n.value},i="function"==typeof Symbol?Symbol:{},e=i.iterator||"@@iterator",n=i.asyncIterator||"@@asyncIterator",r=i.toStringTag||"@@toStringTag";function h(t,i,n){return Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[i]}try{h({},"")}catch(o){h=function(t,i,n){return t[i]=n}}function u(t,i,n,e){var r,h,s,u,i=i&&i.prototype instanceof k?i:k,i=Object.create(i.prototype),e=new x(e||[]);return c(i,"_invoke",{value:(r=t,h=n,s=e,u=l,function(t,i){if(u===y)throw Error("Generator is already running");if(u===M){if("throw"===t)throw i;return{value:o,done:!0}}for(s.method=t,s.arg=i;;){var n=s.delegate;if(n){n=function t(i,n){var e=n.method,r=i.iterator[e];if(r===o)return n.delegate=null,"throw"===e&&i.iterator.return&&(n.method="return",n.arg=o,t(i,n),"throw"===n.method)||"return"!==e&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+e+"' method")),d;e=f(r,i.iterator,n.arg);if("throw"===e.type)return n.method="throw",n.arg=e.arg,n.delegate=null,d;r=e.arg;return r?r.done?(n[i.resultName]=r.value,n.next=i.nextLoc,"return"!==n.method&&(n.method="next",n.arg=o),n.delegate=null,d):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,d)}(n,s);if(n){if(n===d)continue;return n}}if("next"===s.method)s.sent=s.g=s.arg;else if("throw"===s.method){if(u===l)throw u=M,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);u=y;n=f(r,h,s);if("normal"===n.type){if(u=s.done?M:v,n.arg===d)continue;return{value:n.arg,done:s.done}}"throw"===n.type&&(u=M,s.method="throw",s.arg=n.arg)}})}),i}function f(t,i,n){try{return{type:"normal",arg:t.call(i,n)}}catch(t){return{type:"throw",arg:t}}}s.wrap=u;var l="suspendedStart",v="suspendedYield",y="executing",M="completed",d={};function k(){}function m(){}function p(){}var i={},b=(h(i,e,function(){return this}),Object.getPrototypeOf),b=b&&b(b(j([]))),w=(b&&b!==t&&a.call(b,e)&&(i=b),p.prototype=k.prototype=Object.create(i));function g(t){["next","throw","return"].forEach(function(i){h(t,i,function(t){return this._invoke(i,t)})})}function E(s,u){var i;c(this,"_invoke",{value:function(n,e){function t(){return new u(function(t,i){!function i(t,n,e,r){var h,t=f(s[t],s,n);if("throw"!==t.type)return(n=(h=t.arg).value)&&"object"==P(n)&&a.call(n,"__await")?u.resolve(n._).then(function(t){i("next",t,e,r)},function(t){i("throw",t,e,r)}):u.resolve(n).then(function(t){h.value=t,e(h)},function(t){return i("throw",t,e,r)});r(t.arg)}(n,e,t,i)})}return i=i?i.then(t,t):t()}})}function _(t){var i={tryLoc:t[0]};1 in t&&(i.catchLoc=t[1]),2 in t&&(i.finallyLoc=t[2],i.afterLoc=t[3]),this.tryEntries.push(i)}function S(t){var i=t.completion||{};i.type="normal",delete i.arg,t.completion=i}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function j(i){if(i||""===i){var n,t=i[e];if(t)return t.call(i);if("function"==typeof i.next)return i;if(!isNaN(i.length))return n=-1,(t=function t(){for(;++n<i.length;)if(a.call(i,n))return t.value=i[n],t.done=!1,t;return t.value=o,t.done=!0,t}).next=t}throw new TypeError(P(i)+" is not iterable")}return c(w,"constructor",{value:m.prototype=p,configurable:!0}),c(p,"constructor",{value:m,configurable:!0}),m.displayName=h(p,r,"GeneratorFunction"),s.isGeneratorFunction=function(t){t="function"==typeof t&&t.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},s.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,h(t,r,"GeneratorFunction")),t.prototype=Object.create(w),t},s.awrap=function(t){return{_:t}},g(E.prototype),h(E.prototype,n,function(){return this}),s.AsyncIterator=E,s.async=function(t,i,n,e,r){void 0===r&&(r=Promise);var h=new E(u(t,i,n,e),r);return s.isGeneratorFunction(i)?h:h.next().then(function(t){return t.done?t.value:h.next()})},g(w),h(w,r,"Generator"),h(w,e,function(){return this}),h(w,"toString",function(){return"[object Generator]"}),s.keys=function(t){var i,n=Object(t),e=[];for(i in n)e.push(i);return e.reverse(),function t(){for(;e.length;){var i=e.pop();if(i in n)return t.value=i,t.done=!1,t}return t.done=!0,t}},s.values=j,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this.g=o,this.done=!1,this.delegate=null,this.method="next",this.arg=o,this.tryEntries.forEach(S),!t)for(var i in this)"t"===i.charAt(0)&&a.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=o)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var e=this;function t(t,i){return h.type="throw",h.arg=n,e.next=t,i&&(e.method="next",e.arg=o),!!i}for(var i=this.tryEntries.length-1;0<=i;--i){var r=this.tryEntries[i],h=r.completion;if("root"===r.tryLoc)return t("end");if(r.tryLoc<=this.prev){var s=a.call(r,"catchLoc"),u=a.call(r,"finallyLoc");if(s&&u){if(this.prev<r.catchLoc)return t(r.catchLoc,!0);if(this.prev<r.finallyLoc)return t(r.finallyLoc)}else if(s){if(this.prev<r.catchLoc)return t(r.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return t(r.finallyLoc)}}}},abrupt:function(t,i){for(var n=this.tryEntries.length-1;0<=n;--n){var e=this.tryEntries[n];if(e.tryLoc<=this.prev&&a.call(e,"finallyLoc")&&this.prev<e.finallyLoc){var r=e;break}}var h=(r=r&&("break"===t||"continue"===t)&&r.tryLoc<=i&&i<=r.finallyLoc?null:r)?r.completion:{};return h.type=t,h.arg=i,r?(this.method="next",this.next=r.finallyLoc,d):this.complete(h)},complete:function(t,i){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&i&&(this.next=i),d},finish:function(t){for(var i=this.tryEntries.length-1;0<=i;--i){var n=this.tryEntries[i];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(t){for(var i=this.tryEntries.length-1;0<=i;--i){var n,e,r=this.tryEntries[i];if(r.tryLoc===t)return"throw"===(n=r.completion).type&&(e=n.arg,S(r)),e}throw Error("illegal catch attempt")},delegateYield:function(t,i,n){return this.delegate={iterator:j(t),resultName:i,nextLoc:n},"next"===this.method&&(this.arg=o),d}},s}function it(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=P(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===i?String:Number)(t);if("object"!=P(n=n.call(t,i||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==P(t)?t:t+""))(e.key),e)}}var M=(()=>{function h(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,e=this,r=h;if(!(e instanceof r))throw new TypeError("Cannot call a class as a function");h.prototype.isVector3=!0,this.x=t,this.y=i,this.z=n}return t=h,(i=[{key:"set",value:function(t,i,n){return void 0===n&&(n=this.z),this.x=t,this.y=i,this.z=n,this}},{key:"setScalar",value:function(t){return this.x=t,this.y=t,this.z=t,this}},{key:"setX",value:function(t){return this.x=t,this}},{key:"setY",value:function(t){return this.y=t,this}},{key:"setZ",value:function(t){return this.z=t,this}},{key:"setComponent",value:function(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;default:throw new Error("index is out of range: "+t)}return this}},{key:"getComponent",value:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}},{key:"add",value:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}},{key:"addScalar",value:function(t){return this.x+=t,this.y+=t,this.z+=t,this}},{key:"addVectors",value:function(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this}},{key:"addScaledVector",value:function(t,i){return this.x+=t.x*i,this.y+=t.y*i,this.z+=t.z*i,this}},{key:"sub",value:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}},{key:"subScalar",value:function(t){return this.x-=t,this.y-=t,this.z-=t,this}},{key:"subVectors",value:function(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this}},{key:"multiply",value:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}},{key:"multiplyScalar",value:function(t){return this.x*=t,this.y*=t,this.z*=t,this}},{key:"multiplyVectors",value:function(t,i){return this.x=t.x*i.x,this.y=t.y*i.y,this.z=t.z*i.z,this}},{key:"applyEuler",value:function(t){return this.applyQuaternion(et.setFromEuler(t))}},{key:"applyAxisAngle",value:function(t,i){return this.applyQuaternion(et.setFromAxisAngle(t,i))}},{key:"applyMatrix3",value:function(t){var i=this.x,n=this.y,e=this.z,t=t.elements;return this.x=t[0]*i+t[3]*n+t[6]*e,this.y=t[1]*i+t[4]*n+t[7]*e,this.z=t[2]*i+t[5]*n+t[8]*e,this}},{key:"applyNormalMatrix",value:function(t){return this.applyMatrix3(t).normalize()}},{key:"applyMatrix4",value:function(t){var i=this.x,n=this.y,e=this.z,t=t.elements,r=1/(t[3]*i+t[7]*n+t[11]*e+t[15]);return this.x=(t[0]*i+t[4]*n+t[8]*e+t[12])*r,this.y=(t[1]*i+t[5]*n+t[9]*e+t[13])*r,this.z=(t[2]*i+t[6]*n+t[10]*e+t[14])*r,this}},{key:"applyQuaternion",value:function(t){var i=this.x,n=this.y,e=this.z,r=t.x,h=t.y,s=t.z,t=t.w,u=2*(h*e-s*n),o=2*(s*i-r*e),a=2*(r*n-h*i);return this.x=i+t*u+h*a-s*o,this.y=n+t*o+s*u-r*a,this.z=e+t*a+r*o-h*u,this}},{key:"project",value:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}},{key:"unproject",value:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}},{key:"transformDirection",value:function(t){var i=this.x,n=this.y,e=this.z,t=t.elements;return this.x=t[0]*i+t[4]*n+t[8]*e,this.y=t[1]*i+t[5]*n+t[9]*e,this.z=t[2]*i+t[6]*n+t[10]*e,this.normalize()}},{key:"divide",value:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}},{key:"divideScalar",value:function(t){return this.multiplyScalar(1/t)}},{key:"min",value:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}},{key:"max",value:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}},{key:"clamp",value:function(t,i){return this.x=Math.max(t.x,Math.min(i.x,this.x)),this.y=Math.max(t.y,Math.min(i.y,this.y)),this.z=Math.max(t.z,Math.min(i.z,this.z)),this}},{key:"clampScalar",value:function(t,i){return this.x=Math.max(t,Math.min(i,this.x)),this.y=Math.max(t,Math.min(i,this.y)),this.z=Math.max(t,Math.min(i,this.z)),this}},{key:"clampLength",value:function(t,i){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(i,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y+this.z*t.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(t){return this.normalize().multiplyScalar(t)}},{key:"lerp",value:function(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this.z+=(t.z-this.z)*i,this}},{key:"lerpVectors",value:function(t,i,n){return this.x=t.x+(i.x-t.x)*n,this.y=t.y+(i.y-t.y)*n,this.z=t.z+(i.z-t.z)*n,this}},{key:"cross",value:function(t){return this.crossVectors(this,t)}},{key:"crossVectors",value:function(t,i){var n=t.x,e=t.y,t=t.z,r=i.x,h=i.y,i=i.z;return this.x=e*i-t*h,this.y=t*r-n*i,this.z=n*h-e*r,this}},{key:"projectOnVector",value:function(t){var i=t.lengthSq();return 0===i?this.set(0,0,0):(i=t.dot(this)/i,this.copy(t).multiplyScalar(i))}},{key:"projectOnPlane",value:function(t){return nt.copy(this).projectOnVector(t),this.sub(nt)}},{key:"reflect",value:function(t){return this.sub(nt.copy(t).multiplyScalar(2*this.dot(t)))}},{key:"angleTo",value:function(t){var i=Math.sqrt(this.lengthSq()*t.lengthSq());return 0===i?Math.PI/2:(t=this.dot(t)/i,Math.acos(W(t,-1,1)))}},{key:"distanceTo",value:function(t){return Math.sqrt(this.distanceToSquared(t))}},{key:"distanceToSquared",value:function(t){var i=this.x-t.x,n=this.y-t.y,t=this.z-t.z;return i*i+n*n+t*t}},{key:"manhattanDistanceTo",value:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}},{key:"setFromSpherical",value:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}},{key:"setFromSphericalCoords",value:function(t,i,n){var e=Math.sin(i)*t;return this.x=e*Math.sin(n),this.y=Math.cos(i)*t,this.z=e*Math.cos(n),this}},{key:"setFromCylindrical",value:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}},{key:"setFromCylindricalCoords",value:function(t,i,n){return this.x=t*Math.sin(i),this.y=n,this.z=t*Math.cos(i),this}},{key:"setFromMatrixPosition",value:function(t){t=t.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}},{key:"setFromMatrixScale",value:function(t){var i=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),t=this.setFromMatrixColumn(t,2).length();return this.x=i,this.y=n,this.z=t,this}},{key:"setFromMatrixColumn",value:function(t,i){return this.fromArray(t.elements,4*i)}},{key:"setFromMatrix3Column",value:function(t,i){return this.fromArray(t.elements,3*i)}},{key:"setFromEuler",value:function(t){return this.x=t.h,this.y=t.u,this.z=t.v,this}},{key:"setFromColor",value:function(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}},{key:"equals",value:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}},{key:"fromArray",value:function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[i],this.y=t[i+1],this.z=t[i+2],this}},{key:"toArray",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return t[i]=this.x,t[i+1]=this.y,t[i+2]=this.z,t}},{key:"fromBufferAttribute",value:function(t,i){return this.x=t.getX(i),this.y=t.getY(i),this.z=t.getZ(i),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}},{key:"randomDirection",value:function(){var t=Math.random()*Math.PI*2,i=2*Math.random()-1,n=Math.sqrt(1-i*i);return this.x=n*Math.cos(t),this.y=i,this.z=n*Math.sin(t),this}},{key:Symbol.iterator,value:tt().mark(function t(){return tt().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.x;case 2:return t.next=4,this.y;case 4:return t.next=6,this.z;case 6:case"end":return t.stop()}},t,this)})}])&&it(t.prototype,i),n&&it(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,i,n})(),nt=new M,et=new t;function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rt(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,(t=>(t=((t,i)=>{if("object"!=d(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===i?String:Number)(t);if("object"!=d(n=n.call(t,i||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string"),"symbol"==d(t)?t:t+""))(e.key),e)}}function ht(t,i,n){return i&&rt(t.prototype,i),n&&rt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var m=1e-5,p=.001,st=Math.PI/180,ut=180/Math.PI,t=ht(function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function")});Object.assign(t.prototype,{S:function(){return m},j:function(){return st},O:function(){return ut},T:function(t){return t<m&&-m<t},R:function(t){return m<t},L:function(t){return t<-m},A:function(t,i,n){i=(t.x-n.x)*(i.y-n.y)-(i.x-n.x)*(t.y-n.y);return Math.abs(i)<m?0:i},distanceOfTwoPoints:function(t,i){return t&&i?Math.sqrt((t.x-i.x)*(t.x-i.x)+(t.y-i.y)*(t.y-i.y)):Number.NaN},distance:function(t,i){return Math.sqrt(Math.pow(i.x-t.x,2)+Math.pow(i.y-t.y,2))},isPolygonContainPoint:function(t,i){for(var n=0,e=0;e<t.length;e++){var r=t[e].x,h=t[e].y,s=0,u=0,u=(e<t.length-1?(s=t[e+1].x,t[e+1]):(s=t[0].x,t[0])).y;if(r===i.x&&h===i.y||s===i.x&&u===i.y)return!0;if(u!==h){var o=r+(i.y-h)*(s-r)/(u-h);if(o===i.x)return!0;r!==s?o<=Math.max(r,s)&&o>=Math.min(r,s)&&o>i.x&&o!==r&&(o===s&&0<(h-i.y)*(u-i.y)?n+=2:n++):o<=Math.max(r,s)&&o>=Math.min(r,s)&&o>i.x&&(o===s&&0<(h-i.y)*(u-i.y)?n+=2:n++)}}return 0<n%2},isPolygonContainPoint2:function(t,i){var n=t.length;if(n<3)return!1;for(var e=n-1,r=0,h=0;h<n;h++){var s=t[h],u=t[e];s.y>i.y!=u.y>i.y&&i.x<(u.x-s.x)*(i.y-s.y)/(u.y-s.y)+s.x&&(s.y>u.y?r++:r--),e=h}return 0!=r},isPolygonInPolygon:function(t,i){var n=Object.assign([],t),e=Object.assign([],i);n.push(n[0]),e.push(e[0]);for(var r=0;r<n.length-1;r++){var h=n[r];if(!this.isPolygonContainPoint(e,h)&&!this.isPolygonContainPoint2(e,h))return!1}for(var s=0;s<n.length-1;s++)for(var u=0;u<e.length-1;u++)if(this.C(n[s],n[s+1],e[u],e[u+1]).isintersect&&!this.P(e[u],e[u+1],n[s])&&!this.P(e[u],e[u+1],n[s+1]))return!1;return!0},F:function(t,i,n,e){return!(Math.max(t.x,i.x)<Math.min(n.x,e.x)||Math.max(t.y,i.y)<Math.min(n.y,e.y)||Math.max(n.x,e.x)<Math.min(t.x,i.x)||Math.max(n.y,e.y)<Math.min(t.y,i.y))},D:function(t,i,n,e){return!(Math.max(t.x,i.x)<Math.min(n.x,e.x)||Math.max(t.y,i.y)<Math.min(n.y,e.y)||Math.max(n.x,e.x)<Math.min(t.x,i.x)||Math.max(n.y,e.y)<Math.min(t.y,i.y)||0===this.A(n,i,t)&&0===this.A(i,e,t)||this.A(n,i,t)*this.A(i,e,t)<0||this.A(t,e,n)*this.A(e,i,n)<0)},I:function(t,i,n){return!(t.x<i.x||t.y<i.y||t.x>n.x||n.y<t.y)},N:function(t,i,n){var e=Math.min(i.x,n.x),r=Math.max(i.x,n.x),h=Math.min(i.y,n.y),i=Math.max(i.y,n.y);return!(t.x<e||t.x>r||t.y<h||t.y>i)},V:function(t,i,n){var e=Math.min(n.x,i.x),r=Math.max(n.x,i.x),h=Math.min(n.y,i.y),n=Math.max(n.y,i.y);return!(t.x<e||t.x>r||t.y<h||t.y>n)},Y:function(t,i,n){for(var e,r,h=!1,s=0;s<n;s++)e=i[s],r=i[(s+1)%n],(e.y<t.y&&r.y>=t.y||r.y<t.y&&e.y>=t.y)&&(e.x<=t.x||r.x<=t.x)&&e.x+(t.y-e.y)/(r.y-e.y)*(r.x-e.x)<t.x&&(h=!h);return h},X:function(t,i,n){return(t.x-i.x)*(n.y-i.y)==(n.x-i.x)*(t.y-i.y)&&Math.min(i.x,n.x)<=t.x&&t.x<=Math.max(i.x,n.x)&&Math.min(i.y,n.y)<=t.y&&t.y<=Math.max(i.y,n.y)},Z:function(t,i){return Math.sqrt((t.x-i.x)*(t.x-i.x)+(t.y-i.y)*(t.y-i.y))},G:function(t,i){return(t.x-i.x)*(t.x-i.x)+(t.y-i.y)*(t.y-i.y)},H:function(t,i,n){var e=i.x,i=i.y,r=n.x,n=n.y,h=t.x,t=t.y,s=r-e,u=n-i,o=s*s+u*u,a=h-e,c=t-i,f=a*a+c*c;return this.T(o)?this.T(f)?0:f:(o=Math.sqrt(o),c=this.R(u=(s=s/o)*a+(a=u/o)*c)?this.L(u-o)?(c=h-(e+u*s))*c+(o=t-(i+u*a))*o:(e=h-r)*e+(s=t-n)*s:f,this.T(c)?0:c)},q:function(t,i,n,e){var r,h=i.x,s=i.y,u=n.x,o=n.y,a=t.x,t=t.y,c=u-h,f=o-s,l=Math.sqrt(c*c+f*f),v=a-h,y=t-s,M=Math.sqrt(v*v+y*y);return this.T(l)?(e.x=i.x,e.y=i.y,this.T(r=M)?0:r):(r=this.R(f=(c=c/l)*v+(v=f/l)*y)?this.L(f-l)?(l=a-(y=h+f*c),c=t-(h=s+f*v),s=Math.sqrt(l*l+c*c),e.x=y,e.y=h,s):(f=a-u,v=t-o,l=Math.sqrt(f*f+v*v),e.x=n.x,e.y=n.y,l):(e.x=i.x,e.y=i.y,M),this.T(r)?0:r)},K:function(t,i){for(var n=0,e=0,r=0,h=0;h<i;h++){var s=t[h],u=t[(h+1)%i],o=(s.x*u.y-s.y*u.x)/2;n+=o,e+=o*(s.x+u.x)/3,r+=o*(s.y+u.y)/3}return{x:e/=n,y:r/=n}},U:function(t){for(var i=y.triangulate([t]),n=0,e=0,r=0,h=0;h<i.length;h++){var s=t[i[h][0]],u=t[i[h][1]],o=t[i[h][2]],a=u.x-s.x,c=u.y-s.y,f=o.x-s.x,a=(a*(o.y-s.y)-f*c)/2;n+=a,e+=(s.x+u.x+o.x)/3*a,r+=(s.y+u.y+o.y)/3*a}return{x:e/n,y:r/n}},B:function(t,i){if(i<3)return 0;for(var n=0,e=0;e<i;++e){var r=t[e],h=t[(e+1)%i];n+=r.x*h.y-r.y*h.x}return Math.abs(n/2)},W:function(t,i,n,e,r){var h;return this.D(t,i,n,e)?(h=(e.x-n.x)*(t.y-i.y)-(i.x-t.x)*(n.y-e.y),r.x=((t.y-n.y)*(i.x-t.x)*(e.x-n.x)+n.x*(e.y-n.y)*(i.x-t.x)-t.x*(i.y-t.y)*(e.x-n.x))/h,r.y=(i.y*(t.x-i.x)*(e.y-n.y)+(e.x-i.x)*(e.y-n.y)*(t.y-i.y)-e.y*(n.x-e.x)*(i.y-t.y))/(h=(t.x-i.x)*(e.y-n.y)-(i.y-t.y)*(n.x-e.x)),1):0},J:function(t,i,n,e,r){var h=Math.min(n.x,e.x),s=Math.max(n.x,e.x),u=Math.min(n.y,e.y),o=Math.max(n.y,e.y),a=t.x,c=t.y,f=n.x,l=n.y,v=e.x,y=e.y;if(90==i)return!(t.x<h||t.x>s||(s-h<p?t.y>=l&&t.y<=y||t.y>=y&&t.y<=l?(r.x=t.x,r.y=t.y,0):l<y&&t.x<l?(r.x=f,r.y=l,0):!(y<l&&t.x<y)||(r.x=v,r.y=y,0):(r.y=M=(y-l)/(v-f)*(a-f)+l,r.x=a,M<c||!this.V(r,n,e))));if(270==i)return!(t.x<h||t.x>s||(Math.abs(s-h<p)?t.y>=l&&t.y<=y||t.y>=y&&t.y<=l?(r.x=t.x,r.y=t.y,0):l<y&&t.y>y?(r.x=v,r.y=y,0):!(y<l&&t.y>l)||(r.x=f,r.y=l,0):(r.y=M=(y-l)/(v-f)*(a-f)+l,r.x=a,c<M||!this.V(r,n,e))));if(270!=i&&90!=i&&Math.abs(s-h<p)){var t=h,M=Math.tan(i/180*Math.PI)*(t-a)+c;if(r.y=M,r.x=t,this.V(r,n,e))return s=M-c,0<(h=t-a)/Math.sqrt(h*h+s*s)*Math.cos(i/180*Math.PI)}return Math.abs(o-u<=p)?(M=u,t=1/Math.tan(i/180*Math.PI)*(M-c)+a,r.x=t,r.y=M,!!this.V(r,n,e)&&(h=M-c,0<(s=t-a)/Math.sqrt(s*s+h*h)*Math.cos(i/180*Math.PI))):(t=c+(o=Math.tan(i/180*Math.PI))*((M=(l-c-((u=(y-l)/(v-f))*f-o*a))/(o-u))-a),r.x=M,r.y=t,!!this.V(r,n,e)&&(s=M-a,h=t-c,Math.abs(s)<=p&&Math.abs(h)<=p||0<s/Math.sqrt(s*s+h*h)*Math.cos(i/180*Math.PI)))},$:function(t,i){return Math.abs(t.x-i.x)<m&&Math.abs(t.y-i.y)<m},tt:function(t,i,n,e){var r,h,s,u,o=t.x,a=t.y,c=i.x,f=i.y,l=n.x,v=n.y;return this.$(t,i)||this.$(t,n)?(e.x=o,e.y=a,!0):(s=Math.min(i.x,n.x),u=Math.max(i.x,n.x),r=Math.min(i.y,n.y),h=Math.max(i.y,n.y),Math.abs(c-l)<1e-5?(e.x=c,r<=(e.y=a)&&a<=h):Math.abs(f-v)<1e-5?(e.x=o,e.y=f,s<=o&&o<=u):(u=a+(r=-1/((v-f)/(l-c)))*((s=(f-a-((h=(v-f)/(l-c))*c-r*o))/(r-h))-o),e.x=s,e.y=u,!!this.V(e,i,n)||!(!this.$(t,i)&&!this.$(t,n))))},it:function(t,i){return{x:t.y*i.z-t.z*i.y,y:t.z*i.x-t.x*i.z,z:t.x*i.y-t.y*i.x}},nt:function(t,i){return t.x*i.x+t.y*i.y+t.z*i.z},et:function(t){return Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z)},rt:function(t,i){return t.x*i.x+t.y*i.y},ht:function(t,i){return t.x*i.y-t.y*i.x},st:function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},ut:function(t,i){var n,e;return 0==t.x&&0==t.y||0==i.x&&0==i.y?0:(n={x:i.x,y:i.y,z:0},n=this.it({x:t.x,y:t.y,z:0},n),e=this.rt(t,i),e=Math.acos(e/(this.st(t)*this.st(i))),0<n.z?e/Math.PI*180:360-e/Math.PI*180)},ot:function(t,i,n,e){for(var r=0;r<n.length;r++)if(1==this.W(t,i,n[r],n[(r+1)%n.length],e))return!0;return!1},ct:function(t,i,n,e,r){var h=Math.min(t.x,n.x,e.x),s=Math.max(t.x,n.x,e.x),u=Math.min(t.y,n.y,e.y),o=Math.max(t.y,n.y,e.y),s=Math.sqrt((s-h)*(s-h)+(o-u)*(o-u)),h=i/180*Math.PI,o=s*Math.cos(h)+t.x,u=s*Math.sin(h)+t.y;return 1==this.W(t,{x:o,y:u},n,e,r)},ft:function(t){var i={x:null,y:null},n=0,e=0,r=t.length;1<t.length&&t[0].x===t[t.length-1].x&&t[0].y===t[t.length-1].y&&r--;for(var h=0;h<r;h++)n+=t[h].x,e+=t[h].y;return i.x=n/t.length,i.y=e/t.length,i},lt:function(t,i,n,e){var r=[],h=t.x-i,s=t.x+i,u=t.y-i,o=t.y+i,a=Math.min(n.x,e.x),c=Math.max(n.x,e.x),f=Math.min(n.y,e.y),l=Math.max(n.y,e.y);return c<h||s<a||l<u||o<f||(s=(t=((h=e.x-n.x)*(s=t.x-n.x)+(u=e.y-n.y)*(o=t.y-n.y))/(e=h*h+u*u))*t-(s*s+o*o-i*i)/e)<0||(o=Math.sqrt(s),e={x:n.x-h*(i=-t+o),y:n.y-u*i},h={x:n.x-h*(s=-t-o),y:n.y-u*s},i!==s&&(a<=e.x&&e.x<=c&&f<=e.y&&e.y<=l&&r.push(e),a<=h.x)&&h.x<=c&&f<=h.y&&h.y<=l&&r.push(h)),r},vt:function(t,i){return Math.abs(t.x-i.x)<=m&&Math.abs(t.y-i.y)<=m},yt:function(t,i,n){var e,r={};if(t.x!=i.x)return e=i=(i.y-t.y)/(i.x-t.x),r.x=(+n.x- -1*e*n.y-e*(i=t.y-i*t.x))/(e*e+1),r.y=(e*e*n.y- -1*e*n.x- -1*i)/(e*e+1),r;r.x=t.x,r.y=n.y},C:function(t,i,n,e){var r,h,s,u,o={point:null,isintersect:!1};return this.distanceOfTwoPoints(t,n)<.001||this.distanceOfTwoPoints(t,e)<.001?(o.isintersect=!0,o.point=t):this.distanceOfTwoPoints(i,n)<.001||this.distanceOfTwoPoints(i,e)<.001?(o.isintersect=!0,o.point=i):(r={x:i.x-t.x,y:i.y-t.y},h={x:e.x-n.x,y:e.y-n.y},e={x:e.x-t.x,y:e.y-t.y},i={x:i.x-n.x,y:i.y-n.y},s={x:-(n={x:n.x-t.x,y:n.y-t.y}).x,y:-n.y},u=this.ht(h,r),Math.abs(u)<=1e-5||this.ht(n,r)*this.ht(e,r)<=-5e-4&&this.ht(s,h)*this.ht(i,h)<-5e-4&&(e=this.ht(h,n)/u,o.point={x:t.x+r.x*e,y:t.y+r.y*e},o.isintersect=!0)),o},Mt:function(t,i,n){return t.x===i.x&&(i.x=i.x+1),t.y===i.y&&(i.y=i.y+1),i.x===n.x&&(n.x=n.x+1),i.y===n.y&&(n.y=n.y+1),!(0<(i.x-t.x)*(n.y-i.y)-(i.y-t.y)*(n.x-i.x))},getAngle:function(t){var i=t.p1,t=t.p2,n=t.x-i.x,t=t.y-i.y,i=Math.sqrt(n*n+t*t),i=Math.asin(Math.abs(t)/i);return 0<n&&0<t?i:n<0&&0<t?Math.PI-i:n<0&&t<0?Math.PI+i:0<n&&t<0?2*Math.PI-i:0==n&&0<t?i:0==n&&t<0?3*Math.PI/2:0<n&&0==t?i:n<0&&0==t?Math.PI:null},dt:function(t){var i=this.distanceOfTwoPoints(t[0],t[1]),n=this.distanceOfTwoPoints(t[1],t[2]),t=this.distanceOfTwoPoints(t[0],t[2]),e=(i+n+t)/2;return Math.sqrt(e*(e-i)*(e-n)*(e-t))},kt:function(t,i){var n,e,r,h,s;return this.q(t,i[0],i[1],{})<1e-4||this.q(t,i[0],i[2],{})<1e-4||this.q(t,i[1],i[2],{})<1e-4||(h={x:i[1].x-i[0].x,y:i[1].y-i[0].y},n={x:i[0].x-i[2].x,y:i[0].y-i[2].y},e={x:i[2].x-i[1].x,y:i[2].y-i[1].y},s={x:t.x-i[0].x,y:t.y-i[0].y},r={x:t.x-i[1].x,y:t.y-i[1].y},t={x:t.x-i[2].x,y:t.y-i[2].y},i=this.ht(h,s),h=this.ht(e,r),s=this.ht(n,t),m<i*h&&m<h*s)},bt:function(t,i,n){var e=n.length,r={isintersect:!1,start:null,end:null,type:0,outer:null},h=[];if(this.kt(t,n)&&(r.start=t),this.kt(i,n)&&(r.end=i),null!=r.start&&null!=r.end)r.isintersect=!0,r.type=1;else{for(var s=(n[1].x+n[2].x)/2,u=(n[1].y+n[2].y)/2,o=1;o<e;o++){var a,c=this.C(t,i,n[o-1],n[o]);if(c.isintersect){if(null!=r.start)return r.end=c.point,r.isintersect=!0,r.outer="end",a=this.ut({x:s-n[0].x,y:u-n[0].y},{x:i.x-n[0].x,y:i.y-n[0].y}),r.type=0<(a=a<180?a:a-360)?2:3,r;if(null!=r.end)return r.start=c.point,r.isintersect=!0,r.outer="start",a=this.ut({x:s-n[0].x,y:u-n[0].y},{x:t.x-n[0].x,y:t.y-n[0].y}),r.type=0<(a=a<180?a:a-360)?2:3,r;h.push(c)}}var f,l=this.C(t,i,n[0],n[e-1]);if(l.isintersect){if(null!=r.start)return r.end=l.point,r.isintersect=!0,r.outer="end",f=this.ut({x:s-n[0].x,y:u-n[0].y},{x:i.x-n[0].x,y:i.y-n[0].y}),r.type=0<(f=f<180?f:f-360)?2:3,r;if(null!=r.end)return r.start=l.point,r.isintersect=!0,r.outer="start",f=this.ut({x:s-n[0].x,y:u-n[0].y},{x:t.x-n[0].x,y:t.y-n[0].y}),r.type=0<(f=f<180?f:f-360)?2:3,r;h.push(l)}2!=h.length||this.distanceOfTwoPoints(h[0].point,h[1].point)<.01||(this.distanceOfTwoPoints(h[0].point,t)<=this.distanceOfTwoPoints(h[0].point,i)?(r.start=h[0].point,r.end=h[1].point):(r.start=h[1].point,r.end=h[0].point),r.isintersect=!0,r.type=4)}return r},wt:function(t,i,n){var e=n.length,r={isintersect:!1,start:null,end:null},h=[];if(this.kt(t,n)&&(r.start=t),this.kt(i,n)&&(r.end=i),null!=r.start&&null!=r.end)r.isintersect=!0;else{for(var s=1;s<e;s++){var u=this.C(t,i,n[s-1],n[s]);if(u.isintersect){if(null!=r.start)return r.end=u.point,r.isintersect=!0,r;if(null!=r.end)return r.start=t,r.isintersect=!0,r;h.push(u)}}var o=this.C(t,i,n[0],n[e-1]);if(o.isintersect){if(null!=r.start)return r.end=o.point,r.isintersect=!0,r;if(null!=r.end)return r.start=t,r.isintersect=!0,r;h.push(o)}2==h.length&&(r.start=(this.distanceOfTwoPoints(h[0].point,t)<=this.distanceOfTwoPoints(h[0].point,i)?h[0]:h[1]).point,r.end=(this.distanceOfTwoPoints(h[0].point,t)>this.distanceOfTwoPoints(h[0].point,i)?h[0]:h[1]).point,r.isintersect=!0)}return r},gt:function(r,t){if(0==t.length)return[r];for(var i,n,e=this.Et(t),h=[],s=(e.sort(function(t,i){var n=(t._t.x-r._t.x)*(t._t.x-r._t.x)+(t._t.y-r._t.y)*(t._t.y-r._t.y),e=(i._t.x-r._t.x)*(i._t.x-r._t.x)+(i._t.y-r._t.y)*(i._t.y-r._t.y),t=(t.St.x-r._t.x)*(t.St.x-r._t.x)+(t.St.y-r._t.y)*(t.St.y-r._t.y),i=(i.St.x-r._t.x)*(i.St.x-r._t.x)+(i.St.y-r._t.y)*(i.St.y-r._t.y);return(n<t?n:t)<(e<i?e:i)}),0),s=0;s<e.length;s++)this.distanceOfTwoPoints(e[s]._t,e[s].St)<.01||(i=this.distanceOfTwoPoints(e[s]._t,r._t),n=this.distanceOfTwoPoints(e[s].St,r._t),i<.01?r._t=e[s].St:n<.01?r._t=e[s]._t:i<n?.1<this.distanceOfTwoPoints(r._t,e[s]._t)&&(h.push({xt:r.xt,_t:r._t,St:e[s]._t,Z:r.Z,jt:r.jt}),r._t=e[s].St):.1<this.distanceOfTwoPoints(r._t,e[s].St)&&(h.push({xt:r.xt,_t:r._t,St:e[s].St,Z:r.Z,jt:r.jt}),r._t=e[s]._t),e.splice(s,1));return.1<this.distanceOfTwoPoints(r._t,r.St)&&h.push(r),h},Et:function(t){var i=[];if(1==t.length)return t;for(var n=t[0],e=1;0<t.length;){if(t.length<=e){if(i.push(n),t.splice(0,1),t.length<1)break;n=t[0],e=1}if(1===t.length){i.push(n);break}this.P(n._t,n.St,t[e]._t)?(this.P(n._t,n.St,t[e].St)||(n.St=t[e].St),t.splice(e,1)):this.P(n._t,n.St,t[e].St)?(n._t=t[e]._t,t.splice(e,1)):this.P(t[e]._t,t[e].St,n._t)?(n=(this.P(t[e]._t,t[e].St,n.St)||(t[e].St=n.St),t[e]),t.splice(e,1)):this.P(t[e]._t,t[e].St,n.St)?(t[e]._t=n._t,n=t[e],t.splice(e,1)):e++}return i},P:function(t,i,n){var e=t.x-n.x,r=t.y-n.y,h=i.x-n.x,s=i.y-n.y,u=this.distanceOfTwoPoints(t,n),n=this.distanceOfTwoPoints(i,n),t=this.distanceOfTwoPoints(t,i);return e*s-r*h<1e-5&&u+n-t<.001},Ot:function(t,i,n){var e=i.x-t.x,t=i.y-t.y,r=Math.sqrt(e*e+t*t);return{x:i.x+e/r*n,y:i.y+t/r*n}},Tt:function(t){for(var i=null,n=0,e=0,r=0,h=0;h<t.length;h++)(null===i||t[h].x>i)&&(i=t[h].x,n=h);var s=new M(t[n].x,t[n].y,0),e=0===n?t.length-1:n-1,r=n===t.length-1?0:n+1,e=new M(t[e].x,t[e].y,0),r=new M(t[r].x,t[r].y,0),e=(new M).copy(s).sub(e),r=(new M).copy(r).sub(s);return 0<e.cross(r).z}});var ot=new t,t={BROWSER:0,WX:1},at=(Object.freeze(t),{document:"undefined"!=typeof document?document:{},window:"undefined"!=typeof window?window:{},environment:t.BROWSER,XMLHttpRequest:"undefined"!=typeof XMLHttpRequest?XMLHttpRequest:{}}),t={NONE:0,EXTRUDE_MARKER:2,FM3DTILE_LAYER:4,IMAGE_MARKER:8,LOCATION_MARKER:16,POLYGON_MARKER:32,TEXT_MARKER:64,LINE_MARKER:128,LINE3D_MARKER:256,HEAT_MAP_MARKER:512,EXTENT:1024,EXTERNAL_MODEL:2048,MODEL:4096,FACILITY:8192,LABEL:16384,DYNAMIC_MODEL_MARKER:32768,DOM_MARKER:65536,SPHERE_MARKER:1<<17,CAD_LAYER:1<<18,EXTENT_LAYER:1<<20,EXTERNAL_MODEL_LAYER:1<<21,MODEL_LAYER:1<<22,FACILITY_LAYER:1<<23,LABEL_LAYER:1<<24,MARKER_GROUP:1<<25,FLOW_LINE_LAYER:1<<27,FLOW_LINE_MARKER:1<<27,FIRE_MARKER:1<<28,WALL_MARKER:1<<29,TUBE_MARKER:1<<30},b=(t.LAYER_NODE_TYPE=new Map,t.LAYER_NODE_TYPE.set(t.EXTENT_LAYER,t.EXTENT),t.LAYER_NODE_TYPE.set(t.EXTERNAL_MODEL_LAYER,t.EXTERNAL_MODEL),t.LAYER_NODE_TYPE.set(t.MODEL_LAYER,t.MODEL),t.LAYER_NODE_TYPE.set(t.FACILITY_LAYER,t.FACILITY),t.LAYER_NODE_TYPE.set(t.LABEL_LAYER,t.LABEL),t.LAYER_NODE_TYPE.set(t.DOM_MARKER,t.DOM_MARKER),t.LAYER_NODE_TYPE.set(t.DYNAMIC_MODEL_MARKER,t.DYNAMIC_MODEL_MARKER),t.LAYER_NODE_TYPE.set(t.EXTRUDE_MARKER,t.EXTRUDE_MARKER),t.LAYER_NODE_TYPE.set(t.HEAT_MAP_MARKER,t.HEAT_MAP_MARKER),t.LAYER_NODE_TYPE.set(t.LINE_MARKER,t.LINE_MARKER),t.LAYER_NODE_TYPE.set(t.LOCATION_MARKER,t.LOCATION_MARKER),t.LAYER_NODE_TYPE.set(t.POLYGON_MARKER,t.POLYGON_MARKER),t.LAYER_NODE_TYPE.set(t.TEXT_MARKER,t.TEXT_MARKER),t.LAYER_NODE_TYPE.set(t.IMAGE_MARKER,t.IMAGE_MARKER),t.LAYER_NODE_TYPE.set(t.FLOW_LINE_LAYER,t.FLOW_LINE_MARKER),t.LAYER_NODE_TYPE.set(t.FIRE_MARKER,t.FIRE_MARKER),t.LAYER_NODE_TYPE.set(t.WALL_MARKER,t.WALL_MARKER),t.LAYER_NODE_TYPE.set(t.TUBE_MARKER,t.TUBE_MARKER),t.LAYER_NODE_TYPE.set(t.LINE3D_MARKER,t.LINE3D_MARKER),t.LAYER_NODE_TYPE.set(t.SPHERE_MARKER,t.SPHERE_MARKER),t.LAYER_NODE_TYPE.set(t.CAD_LAYER,t.CAD_LAYER),t);function ct(i,t){var n,e=Object.keys(i);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(i),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable})),e.push.apply(e,n)),e}function w(i){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ct(Object(n),!0).forEach(function(t){g(i,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(n)):ct(Object(n)).forEach(function(t){Object.defineProperty(i,t,Object.getOwnPropertyDescriptor(n,t))})}return i}function g(t,i,n){return(i=lt(i))in t?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,t}function E(t){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ft(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,lt(e.key),e)}}function lt(t){t=((t,i)=>{if("object"!=E(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===i?String:Number)(t);if("object"!=E(n=n.call(t,i||"default")))return n;throw new TypeError("@@toPrimitive must return a primitive value.")})(t,"string");return"symbol"==E(t)?t:t+""}var _=window.fengmap,t=(()=>{return t=function t(i){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=this,r=t;if(!(e instanceof r))throw new TypeError("Cannot call a class as a function");this.Rt=void 0===n.autoConnectBuilding||n.autoConnectBuilding,this.Lt=i,this.At=!1,this.Ct=null,this.Pt=0,this.Ft=0,this.Dt=0,this.It=[],this.Nt=[],this.Vt=0,this.Yt=0,this.Xt=1,this.Zt=null,this.Gt=null,this.Ht=0,this.qt=0,this.Kt=null,this.zt=null,this.Ut=!1,this.Bt=null,this.Qt=null,this.Wt=-1,this.Jt=new Map,this.$t={playing:"playing",complete:"complete"},this.ti=!0,this.ii=-1,this.ni=0,this.ei=0,this.ri(),this.hi=new Map,this.si=this.si.bind(this),this.ui=this.ui.bind(this),this.oi=this.oi.bind(this),this.Lt.on("levelChanged",this.si),this.Lt.on("visibleLevelsLoaded",this.si),this.Lt.on("dispose",this.oi),this.Rt&&this.Lt.on("buildingLoaded",this.ui)},(i=[{key:"setSpeed",value:function(t){this.Xt=t}},{key:"setTracks",value:function(t){var i=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];this.ai(t),this.Qt=t,this.ci(i)}},{key:"getMarker",value:function(t){return t===b.LINE_MARKER?this.Gt:this.Zt}},{key:"getTrackInfo",value:function(){return{totalLength:+this.Ht.toFixed(3),totalTimes:+this.qt.toFixed(3)}}},{key:"setProgress",value:function(t){for(var i=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=new Date(t).getTime(),e=-1,r=0;r<this.Qt.length;r++){if(this.Qt[r].timestamp==n){e=r;break}if(this.Qt[r].timestamp>n){e=r-1;break}}-1!==e&&(this.Kt=null,this.zt=null,this.Vt=e,this.Ft=this.Nt[e],this.Dt=this.fi[e],this.Pt=n-this.Qt[0].timestamp,this.Kt=new k(this.Qt[e].x,this.Qt[e].y,this.Qt[e].absoluteZ),this.Yt=n,this.ci(i))}},{key:"play",value:function(){this.At=!0,this.Ct=null,this.Vt}},{key:"pause",value:function(){this.At=!1}},{key:"stop",value:function(){this.At=!1,this.setProgress(this.Qt[this.Qt.length-1].time)}},{key:"start",value:function(){this.setProgress(this.Qt[0].time)}},{key:"render",value:function(){!0!==this.Ut&&(this.Ut=!0,this.li(),this.vi())}},{key:"clear",value:function(){0!=this.Ut&&(this.Gt.visible=!1,this.Ut=!1,this.Zt)&&this.Zt.parent&&this.Zt.remove()}},{key:"on",value:function(t,i){this.Jt.set(t,i)}},{key:"setMarkerStyle",value:function(t,i){this.Bt&&this.Zt&&this.Zt.parent&&this.Zt.remove(),this.Bt=Object.assign({},i,{type:t}),this.Zt=this.yi(this.Bt),this.vi()}},{key:"setTrackStyle",value:function(t){void 0===t.zFighting?t.zFighting=!0:!1===t.zFighting&&(t.zFighting=void 0),this.Mi=t,this.ei=t.height||0;var i=this.di(this.Qt,this.ei),i=this.ki(i);this.Gt=new _.FMLineMarker({color:t.color,width:t.width,animate:t.animate,smooth:!1,segments:i,url:t.url,type:t.type,borderColor:t.borderColor,depth:t.depth,zFighting:t.zFighting,isGeneralize:void 0!==t.isGeneralize&&t.isGeneralize}),this.Gt.addTo(this.Lt),this.Gt.visible=this.Ut,this.Gt.getLineNodes||1!=this.ti||(this.ti=!1)}},{key:"dispose",value:function(){this.Lt.off("levelChanged",this.si),this.Lt.off("visibleLevelsLoaded",this.si),this.Lt.off("dispose",this.oi),this.Rt&&this.Lt.off("buildingLoaded",this.ui),window.cancelAnimationFrame(this.Wt),this.clear(),this.Gt&&this.Gt.dispose(),this.Zt&&this.Zt.parent&&this.Zt.dispose(),this.Gt=null,this.Zt=null,this.Kt=null,this.Qt=null,this.Lt=null,this.It=null,this.Nt=null,this.Bt=null}}])&&ft(t.prototype,i),n&&ft(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,i,n})(),vt=(Object.assign(t.prototype,{ui:function(t){var i=this.hi.get(t.buildingID);i&&!i.hasProcess&&(this.hi.set(t.buildingID,{hasProcess:!0}),this.si(),i=this.di(this.Qt,this.ei),t=this.ki(i),this.Gt)&&(this.Gt.segments=t)},si:function(){this.Qt&&(this.setTracks(this.Qt,!1),this.setProgress(this.Yt,!1))},mi:function(){return this.ti},li:function(){0!=this.Ut&&null!==this.Gt&&(this.Gt.visible=!0,this.pi())},bi:function(){var t=this.Qt[this.Vt].level,i=this.wi(this.Qt[this.Vt].buildingID);return{floor:this.Lt.getBuilding(i).getFloor(t),buildingID:i,level:t}},vi:function(){var t;0!=this.Ut&&(t=this.bi().floor,this.Bt.type===b.LOCATION_MARKER?this.Zt.addTo(this.Lt):this.Zt.addTo(t),this.Bt.type!=b.DYNAMIC_MODEL_MARKER)&&this.gi()},yi:function(t){var i=this,n=t.type,e=t.size,r=t.scale,h=t.url,s=(this.ni=t.height||0,g(g(g(g({},b.LOCATION_MARKER,_.FMLocationMarker),b.DYNAMIC_MODEL_MARKER,_.FMDynamicModel),b.IMAGE_MARKER,_.FMImageMarker),b.DOM_MARKER,_.FMDomMarker)),u=null,o=null,s=(null!=this.Qt&&(u=this.Qt[0].level,o=this.Qt[0].buildingID),s[n]);if(s)return r=g(g(g(g({},b.IMAGE_MARKER,{url:h,size:e,x:0,y:0}),b.DYNAMIC_MODEL_MARKER,{url:h,scale:r,x:0,y:0,callback:function(){i.gi()}}),b.LOCATION_MARKER,{url:h,size:e,x:0,y:0,level:u,buildingID:o}),b.DOM_MARKER,{x:0,y:0}),new s(Object.assign(r[n],t));console.error("type only is LOCATION_MARKER, DYNAMIC_MODEL_MARKER, IMAGE_MARKER")},pi:function(){var t,i;this.Gt&&(t=(i=this.Ei()).p,i=i.pNoGap,this.mi()?this._i(t):this.Gt.moveProportion(i))},Si:function(){var t,i=this.bi().floor;if(i)return(t={x:this.Kt.x,y:this.Kt.y,z:this.Kt.z}).z-=i.height,t},gi:function(){var t,i,n,e;this.Zt&&this.Ut&&(t=(e=this.bi()).buildingID,i=e.level,e=e.floor)&&(n=this.Si(),e=this.Bt.type==b.LOCATION_MARKER?this.Lt:e,this.Zt.level!=i&&this.Zt.type!==b.DYNAMIC_MODEL_MARKER&&(this.Zt.parent&&this.Zt.remove(),this.Zt.addTo(e)),this.Zt.moveTo({x:n.x,y:n.y,animate:!1,level:i,buildingID:this.Lt.getMapOptions().buildingID==t?null:t}),this.Zt.height=n.z+this.ni)},xi:function(t,i){var n=this.Jt.get(t);this.$t.playing===t&&!0===this.At?n&&n(i):this.$t.playing!==t&&n&&n(i)},ji:function(){this.gi()},Ei:function(){return{p:this.Ft/this.Ht,pNoGap:this.Dt/this.Oi}},Ti:function(){var t=this.Pt/this.qt;return Math.min(+t.toFixed(t,3),1)},Ri:function(t,i,n){t=new k(t.x,t.y,t.absoluteZ),i=new k(i.x,i.y,i.absoluteZ),t=t.lerp(i,n);null==this.Kt&&(this.Kt=t.clone()),this.Ft+=t.distanceTo(this.Kt),this.Kt.set(t.x,t.y,t.z)},Li:function(t,i,n){var e=new k(t.x,t.y,t.relativeZ),r=new k(i.x,i.y,i.relativeZ),e=e.lerp(r,n);null==this.zt&&(this.zt=e.clone()),t.level===i.level&&(this.Dt+=this.zt.distanceTo(e)),this.zt.set(e.x,e.y,e.z)},ci:function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],i=this.Qt[this.Vt],n=this.Pt-this.It[this.Vt],i=i.nextPointTimeGap,e=-1;if(0==n&&null!=i)e=0;else{if(null==i)return 0==this.At?(r=this.Qt[this.Vt],t&&this.xi(this.$t.playing,{progress:this.Qt[this.Vt].timestamp,level:this.Qt[this.Vt].level,buildingID:this.Qt[this.Vt].buildingID,index:this.Vt,position:{x:r.x,y:r.y,z:r.z}}),t&&this.xi(this.$t.complete),null==this.Kt&&(this.Kt=new k(0,0,0)),this.Kt.set(r.x,r.y,r.absoluteZ),this.ji(),this.pi()):t&&this.xi(this.$t.complete),void(this.At=!1);e=n/i}var e=Math.min(e,1),r=this.Qt[this.Vt],t=this.Qt[this.Vt+1],n=(this.Ri(r,t,e),this.Li(r,t,e),this.ji(),this.pi(),1<=e&&(this.Vt+=1),r.timestamp),i=t.timestamp;this.Yt=Number.parseInt(s.lerp(n,i,e)),this.xi(this.$t.playing,{progress:this.Yt,level:this.Qt[this.Vt].level,buildingID:this.Qt[this.Vt].buildingID,index:this.Vt,position:{x:this.Kt.x,y:this.Kt.y,z:this.Kt.z}})},ri:function(){var t,i;this.Wt=at.window.requestAnimationFrame(this.ri.bind(this)),this.At&&(null==this.Ct&&(this.Ct=(new Date).getTime()),i=(t=(new Date).getTime())-this.Ct,i*=this.Xt,this.Ct=t,this.Pt+=i,this.ci())},di:function(t,i){for(var n=[],e=-1,r=-1,h={groupId:-1,points:[]},s=0;s<t.length;s++){var u=t[s],o=u.x,a=u.y,c=u.z,f=u.level,u=u.buildingID;e===f&&r===u||(0<h.points.length&&n.push(h),h={groupId:f,buildingID:u,points:[]},e=f,r=u),h.points.push({x:o,y:a,z:c+i}),s===t.length-1&&n.push(h)}return n},Ai:function(t,i,n,e,r){return(r-t)/(i-t)*(e-n)+n},ki:function(t){for(var i=[],n=0;n<t.length;n++){var e=t[n],r=e.groupId,h=e.points,e=e.buildingID,s=new _.FMSegment;s.level=r,s.points=h,s.buildingID=e,i.push(s)}return i},Ci:function(t){for(var i=this.Qt,n=-1,e=1;e<=i.length-1;e++)t>=this.It[e-1]&&t<this.It[e]&&(n=e-1);return n},Pi:function(t,i){var n=-1,e=-1,r=-1,h=i[t-1];h&&h.timestamp&&(n=t-1);for(var s,u,o,a=t+1;a<i.length;a++){var c=i[a];if(c&&c.time){e=a;break}}return-1!==e&&-1!==n&&(h=i[n].timestamp,s=new Date(i[e].time).getTime()-h,o=new f(i[n].x,i[n].y),t=new f(i[t].x,i[t].y),u=new f(i[e].x,i[e].y),r=(o=t.distanceTo(o))/(o+t.distanceTo(u))*s+h),r=-1===(r=-1===r&&-1!==e?new Date(i[e].time).getTime():r)&&-1!==n?i[n].timestamp:r},Fi:function(t,i,n){var e=new Date(t.time).getTime(),r=new Date(n.time).getTime()-e,t=new f(t.x,t.y),i=new f(i.x,i.y),n=new f(n.x,n.y),t=i.distanceTo(t);return t/(t+i.distanceTo(n))*r+e},ai:function(t){this.It=[],this.qt=0,this.Nt=[],this.fi=[],this.Ht=0;for(var i=t[this.Oi=0].buildingID,n=(void 0===i&&(i=null),t.length),e=0;e<n;e++){void 0===t[e].z&&(t[e].z=0),void 0===t[e].buildingID&&(t[e].buildingID=null);var r,h=t[e],s=h.time,u=h.level,h=h.buildingID,s=(h&&this.hi.set(h,{}),t[e].timestamp=new Date(s).getTime(),!isNaN(t[e].timestamp)&&0!==t[e].timestamp||(t[e].timestamp=this.Pi(e,t)),this.Lt.getBuilding(this.wi(h)).getFloor(u));if(!s)return void console.warn("level ",u);t[e].absoluteZ=t[e].z+s.height,t[e].relativeZ=t[e].z,i!==h&&this.Rt&&(u=w({},t[e-1]),s=w({},t[e]),r=t[e-1].buildingID?e-1:e,r=null==(r=this.Lt.getBuilding(this.wi(t[r].buildingID)).getFloor(t[r].level).getLayers(b.EXTENT_LAYER)[0])||null==(r=r.getFeatures()[0])?void 0:r.coordinates[0])&&ot.ot(u,s,r,r={})&&(t.splice(e,0,w(w({},u),{},{x:r.x,y:r.y,timestamp:this.Fi(u,r,s)})),t.splice(e+1,0,w(w({},s),{},{x:r.x,y:r.y,timestamp:this.Fi(u,r,s)})),n+=2,e+=2),i=h}for(var o=new k(t[0].x,t[0].y,t[0].absoluteZ),a=new k(t[0].x,t[0].y,t[0].relativeZ),c=-1,f=0;f<t.length-1;f++){var l=t[f].level,v=new k(t[f].x,t[f].y,t[f].absoluteZ),y=new k(t[f].x,t[f].y,t[f].relativeZ);this.Ht+=v.clone().distanceTo(o),(c=-1==c?l:c)==l&&(this.Oi+=y.clone().distanceTo(a)),c=l,t[f].nextPointTimeGap=t[f+1].timestamp-t[f].timestamp,t[f].nextPointTimeGap<0&&(t[f].nextPointTimeGap=0),this.It[f]=this.qt,this.qt+=t[f].nextPointTimeGap,this.Nt[f]=this.Ht,this.fi[f]=this.Oi,o.copy(v),a.copy(y)}var M=t.length-1,d=(t[M].nextPointTimeGap=void 0,this.It[M]=this.qt,new k(t[M].x,t[M].y,t[M].absoluteZ)),M=new k(t[M].x,t[M].y,t[M].relativeZ);this.Ht+=d.distanceTo(o),this.Oi+=M.distanceTo(a),this.Nt[t.length-1]=this.Ht,this.fi[t.length-1]=this.Oi},_i:function(t){this.Gt.moveProportion(t,!0)},wi:function(t){return null==t||""===t?this.Lt.getMapOptions().buildingID:t},oi:function(){this.dispose()}}),"v3.1.10"),yt=237,F=window.fengmap||{};F.VERSION=vt,F.BUILD=yt,F.FMTracksPlayer=t,I.default=F}],e={},r.m=n,r.c=e,r.d=function(t,i,n){r.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"Di",{value:!0})},r.t=function(i,t){if(1&t&&(i=r(i)),8&t)return i;if(4&t&&"object"==typeof i&&i&&i.Di)return i;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:i}),2&t&&"string"!=typeof i)for(var e in i)r.d(n,e,function(t){return i[t]}.bind(null,e));return n},r.n=function(t){var i=t&&t.Di?function(){return t.default}:function(){return t};return r.d(i,"a",i),i},r.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},r.p="",r(r.s=0).default;function r(t){var i;return(e[t]||(i=e[t]={i:t,l:!1,exports:{}},n[t].call(i.exports,i,i.exports,r),i.l=!0,i)).exports}var n,e});