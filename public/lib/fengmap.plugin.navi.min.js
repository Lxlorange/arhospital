/**Released Version v3.1.7,BUILD 62,Time 1719469149614. Fengmap Javascript SDK , see: https://www.fengmap.com for details**/
!function(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?exports.fengmap=i():t.fengmap=i()}(this,function(){return n=[function(C,D,t){"use strict";t.r(D);var F={MODULE_SHORTEST:1,MODULE_BEST:2},Y={PRIORITY_DEFAULT:1,PRIORITY_LIFTFIRST:2,PRIORITY_ESCALATORFIRST:3,PRIORITY_STAIRFIRST:4,PRIORITY_LIFTONLY:5,PRIORITY_ESCALATORONLY:6,PRIORITY_STAIRONLY:7,PRIORITY_ACCESSIBLEONLY:8,PRIORITY_LIFTFIRST1:9,PRIORITY_ESCALATORFIRST1:10,PRIORITY_STAIRFIRST1:11},B={ZH:"zh",EN:"en"},h={Auto:1,SpecifiedDistance:2};function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function V(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,function(t){t=function(t,i){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===i?String:Number)(t);n=n.call(t,i||"default");if("object"!=r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==r(t)?t:String(t)}(e.key),e)}}function Z(t,i,n){return i&&V(t.prototype,i),n&&V(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var t=Z(function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function")}),X=(Object.assign(t.prototype,{h:function(t,i){void 0===this.u&&(this.u={});var n=this.u;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(i)&&n[t].push(i)},v:function(t,i){var n;return void 0!==this.u&&void 0!==(n=this.u)[t]&&-1!==n[t].indexOf(i)},M:function(t,i){var n;void 0!==this.u&&void 0!==(t=this.u[t])&&-1!==(n=t.indexOf(i))&&t.splice(n,1)},k:function(t){if(void 0!==this.u){var i=this.u[t.type];if(void 0!==i)for(var n=i.slice(0),e=0,r=n.length;e<r;e++)n[e].call(this,t)}}}),t);function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function z(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,function(t){t=function(t,i){if("object"!=s(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===i?String:Number)(t);n=n.call(t,i||"default");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==s(t)?t:String(t)}(e.key),e)}}var H=function(){function i(t){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");this.autoStart=void 0===t||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}var t,n,e;return t=i,(n=[{key:"start",value:function(){this.startTime=U(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var t,i=0;return this.autoStart&&!this.running?(this.start(),0):(this.running&&(i=((t=U())-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=i),i)}}])&&z(t.prototype,n),e&&z(t,e),Object.defineProperty(t,"prototype",{writable:!1}),i}();function U(){return("undefined"==typeof performance?Date:performance).now()}for(var o=[],i=0;i<256;i++)o[i]=(i<16?"0":"")+i.toString(16);var n=1234567,e={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t=4294967295*Math.random()|0,i=4294967295*Math.random()|0,n=4294967295*Math.random()|0,e=4294967295*Math.random()|0;return(o[255&t]+o[t>>8&255]+o[t>>16&255]+o[t>>24&255]+"-"+o[255&i]+o[i>>8&255]+"-"+o[i>>16&15|64]+o[i>>24&255]+"-"+o[63&n|128]+o[n>>8&255]+"-"+o[n>>16&255]+o[n>>24&255]+o[255&e]+o[e>>8&255]+o[e>>16&255]+o[e>>24&255]).toUpperCase()},clamp:function(t,i,n){return Math.max(i,Math.min(n,t))},euclideanModulo:function(t,i){return(t%i+i)%i},mapLinear:function(t,i,n,e,r){return e+(t-i)*(r-e)/(n-i)},lerp:function(t,i,n){return(1-n)*t+n*i},smoothstep:function(t,i,n){return t<=i?0:n<=t?1:(t=(t-i)/(n-i))*t*(3-2*t)},smootherstep:function(t,i,n){return t<=i?0:n<=t?1:(t=(t-i)/(n-i))*t*t*(t*(6*t-15)+10)},randInt:function(t,i){return t+Math.floor(Math.random()*(i-t+1))},randFloat:function(t,i){return t+Math.random()*(i-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(t){return((n=16807*(n=void 0!==t?t%2147483647:n)%2147483647)-1)/2147483646},degToRad:function(t){return t*e.DEG2RAD},radToDeg:function(t){return t*e.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,i,n,e,r){var s=Math.cos,h=Math.sin,o=s(n/2),u=h(n/2),a=s((i+e)/2),f=h((i+e)/2),c=s((i-e)/2),l=h((i-e)/2),v=s((e-i)/2),y=h((e-i)/2);switch(r){case"XYX":t.set(o*f,u*c,u*l,o*a);break;case"YZY":t.set(u*l,o*f,u*c,o*a);break;case"ZXZ":t.set(u*c,u*l,o*f,o*a);break;case"XZX":t.set(o*f,u*y,u*v,o*a);break;case"YXY":t.set(u*v,o*f,u*y,o*a);break;case"ZYZ":t.set(u*y,u*v,o*f,o*a);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}};function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function K(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,function(t){t=function(t,i){if("object"!=u(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===i?String:Number)(t);n=n.call(t,i||"default");if("object"!=u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==u(t)?t:String(t)}(e.key),e)}}t=function(){function h(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,r=this,s=h;if(!(r instanceof s))throw new TypeError("Cannot call a class as a function");Object.defineProperty(this,"isQuaternion",{value:!0}),this.g=t,this._=i,this.S=n,this.O=e}var t,i,n;return t=h,n=[{key:"slerp",value:function(t,i,n,e){return n.copy(t).slerp(i,e)}},{key:"slerpFlat",value:function(t,i,n,e,r,s,h){var o,u,a,f=n[e+0],c=n[e+1],l=n[e+2],n=n[e+3],e=r[s+0],v=r[s+1],y=r[s+2],r=r[s+3];n===r&&f===e&&c===v&&l===y||(s=1-h,o=0<=(u=f*e+c*v+l*y+n*r)?1:-1,(a=1-u*u)>Number.EPSILON&&(a=Math.sqrt(a),u=Math.atan2(a,u*o),s=Math.sin(s*u)/a,h=Math.sin(h*u)/a),f=f*s+e*(u=h*o),c=c*s+v*u,l=l*s+y*u,n=n*s+r*u,s===1-h&&(f*=a=1/Math.sqrt(f*f+c*c+l*l+n*n),c*=a,l*=a,n*=a)),t[i]=f,t[i+1]=c,t[i+2]=l,t[i+3]=n}},{key:"multiplyQuaternionsFlat",value:function(t,i,n,e,r,s){var h=n[e],o=n[e+1],u=n[e+2],n=n[e+3],e=r[s],a=r[s+1],f=r[s+2],r=r[s+3];return t[i]=h*r+n*e+o*f-u*a,t[i+1]=o*r+n*a+u*e-h*f,t[i+2]=u*r+n*f+h*a-o*e,t[i+3]=n*r-h*e-o*a-u*f,t}}],(i=[{key:"x",get:function(){return this.g},set:function(t){this.g=t,this.R()}},{key:"y",get:function(){return this._},set:function(t){this._=t,this.R()}},{key:"z",get:function(){return this.S},set:function(t){this.S=t,this.R()}},{key:"w",get:function(){return this.O},set:function(t){this.O=t,this.R()}},{key:"set",value:function(t,i,n,e){return this.g=t,this._=i,this.S=n,this.O=e,this.R(),this}},{key:"clone",value:function(){return new this.constructor(this.g,this._,this.S,this.O)}},{key:"copy",value:function(t){return this.g=t.x,this._=t.y,this.S=t.z,this.O=t.w,this.R(),this}},{key:"setFromEuler",value:function(t,i){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=t.g,e=t._,r=t.S,s=t._order,t=Math.cos,h=Math.sin,o=t(n/2),u=t(e/2),a=t(r/2),f=h(n/2),c=h(e/2),l=h(r/2);switch(s){case"XYZ":this.g=f*u*a+o*c*l,this._=o*c*a-f*u*l,this.S=o*u*l+f*c*a,this.O=o*u*a-f*c*l;break;case"YXZ":this.g=f*u*a+o*c*l,this._=o*c*a-f*u*l,this.S=o*u*l-f*c*a,this.O=o*u*a+f*c*l;break;case"ZXY":this.g=f*u*a-o*c*l,this._=o*c*a+f*u*l,this.S=o*u*l+f*c*a,this.O=o*u*a-f*c*l;break;case"ZYX":this.g=f*u*a-o*c*l,this._=o*c*a+f*u*l,this.S=o*u*l-f*c*a,this.O=o*u*a+f*c*l;break;case"YZX":this.g=f*u*a+o*c*l,this._=o*c*a+f*u*l,this.S=o*u*l-f*c*a,this.O=o*u*a-f*c*l;break;case"XZY":this.g=f*u*a-o*c*l,this._=o*c*a-f*u*l,this.S=o*u*l+f*c*a,this.O=o*u*a+f*c*l;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return!1!==i&&this.R(),this}},{key:"setFromAxisAngle",value:function(t,i){var i=i/2,n=Math.sin(i);return this.g=t.x*n,this._=t.y*n,this.S=t.z*n,this.O=Math.cos(i),this.R(),this}},{key:"setFromRotationMatrix",value:function(t){var t=t.elements,i=t[0],n=t[4],e=t[8],r=t[1],s=t[5],h=t[9],o=t[2],u=t[6],t=t[10],a=i+s+t;return 0<a?(a=.5/Math.sqrt(a+1),this.O=.25/a,this.g=(u-h)*a,this._=(e-o)*a,this.S=(r-n)*a):s<i&&t<i?(a=2*Math.sqrt(1+i-s-t),this.O=(u-h)/a,this.g=.25*a,this._=(n+r)/a,this.S=(e+o)/a):t<s?(a=2*Math.sqrt(1+s-i-t),this.O=(e-o)/a,this.g=(n+r)/a,this._=.25*a,this.S=(h+u)/a):(a=2*Math.sqrt(1+t-i-s),this.O=(r-n)/a,this.g=(e+o)/a,this._=(h+u)/a,this.S=.25*a),this.R(),this}},{key:"setFromUnitVectors",value:function(t,i){var n=t.dot(i)+1;return n<1e-6?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this.g=-t.y,this._=t.x,this.S=0):(this.g=0,this._=-t.z,this.S=t.y)):(this.g=t.y*i.z-t.z*i.y,this._=t.z*i.x-t.x*i.z,this.S=t.x*i.y-t.y*i.x),this.O=n,this.normalize()}},{key:"angleTo",value:function(t){return 2*Math.acos(Math.abs(e.clamp(this.dot(t),-1,1)))}},{key:"rotateTowards",value:function(t,i){var n=this.angleTo(t);return 0!==n&&(i=Math.min(1,i/n),this.slerp(t,i)),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this.g*=-1,this._*=-1,this.S*=-1,this.R(),this}},{key:"dot",value:function(t){return this.g*t.g+this._*t._+this.S*t.S+this.O*t.O}},{key:"lengthSq",value:function(){return this.g*this.g+this._*this._+this.S*this.S+this.O*this.O}},{key:"length",value:function(){return Math.sqrt(this.g*this.g+this._*this._+this.S*this.S+this.O*this.O)}},{key:"normalize",value:function(){var t=this.length();return 0===t?(this.g=0,this._=0,this.S=0,this.O=1):(this.g=this.g*(t=1/t),this._=this._*t,this.S=this.S*t,this.O=this.O*t),this.R(),this}},{key:"multiply",value:function(t,i){return void 0!==i?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,i)):this.multiplyQuaternions(this,t)}},{key:"premultiply",value:function(t){return this.multiplyQuaternions(t,this)}},{key:"multiplyQuaternions",value:function(t,i){var n=t.g,e=t._,r=t.S,t=t.O,s=i.g,h=i._,o=i.S,i=i.O;return this.g=n*i+t*s+e*o-r*h,this._=e*i+t*h+r*s-n*o,this.S=r*i+t*o+n*h-e*s,this.O=t*i-n*s-e*h-r*o,this.R(),this}},{key:"slerp",value:function(t,i){if(0!==i){if(1===i)return this.copy(t);var n,e=this.g,r=this._,s=this.S,h=this.O,o=h*t.O+e*t.g+r*t._+s*t.S;o<0?(this.O=-t.O,this.g=-t.g,this._=-t._,this.S=-t.S,o=-o):this.copy(t),1<=o?(this.O=h,this.g=e,this._=r,this.S=s):((t=1-o*o)<=Number.EPSILON?(this.O=(n=1-i)*h+i*this.O,this.g=n*e+i*this.g,this._=n*r+i*this._,this.S=n*s+i*this.S,this.normalize()):(n=Math.sqrt(t),t=Math.atan2(n,o),o=Math.sin((1-i)*t)/n,i=Math.sin(i*t)/n,this.O=h*o+this.O*i,this.g=e*o+this.g*i,this._=r*o+this._*i,this.S=s*o+this.S*i),this.R())}return this}},{key:"equals",value:function(t){return t.g===this.g&&t._===this._&&t.S===this.S&&t.O===this.O}},{key:"fromArray",value:function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return this.g=t[i],this._=t[i+1],this.S=t[i+2],this.O=t[i+3],this.R(),this}},{key:"toArray",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return t[i]=this.g,t[i+1]=this._,t[i+2]=this.S,t[i+3]=this.O,t}},{key:"fromBufferAttribute",value:function(t,i){return this.g=t.getX(i),this._=t.getY(i),this.S=t.getZ(i),this.O=t.getW(i),this}},{key:"onChange",value:function(t){return this.R=t,this}},{key:"_onChangeCallback",value:function(){}}])&&K(t.prototype,i),n&&K(t,n),Object.defineProperty(t,"prototype",{writable:!1}),h}();function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function G(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,function(t){t=function(t,i){if("object"!=a(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===i?String:Number)(t);n=n.call(t,i||"default");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==a(t)?t:String(t)}(e.key),e)}}var c=function(){function s(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,e=this,r=s;if(!(e instanceof r))throw new TypeError("Cannot call a class as a function");Object.defineProperty(this,"isVector3",{value:!0}),this.x=t,this.y=i,this.z=n}var t,i,n;return t=s,(i=[{key:"set",value:function(t,i,n){return void 0===n&&(n=this.z),this.x=t,this.y=i,this.z=n,this}},{key:"setScalar",value:function(t){return this.x=t,this.y=t,this.z=t,this}},{key:"setX",value:function(t){return this.x=t,this}},{key:"setY",value:function(t){return this.y=t,this}},{key:"setZ",value:function(t){return this.z=t,this}},{key:"setComponent",value:function(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;default:throw new Error("index is out of range: "+t)}return this}},{key:"getComponent",value:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}},{key:"add",value:function(t,i){return void 0!==i?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,i)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}},{key:"addScalar",value:function(t){return this.x+=t,this.y+=t,this.z+=t,this}},{key:"addVectors",value:function(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this}},{key:"addScaledVector",value:function(t,i){return this.x+=t.x*i,this.y+=t.y*i,this.z+=t.z*i,this}},{key:"sub",value:function(t,i){return void 0!==i?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,i)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}},{key:"subScalar",value:function(t){return this.x-=t,this.y-=t,this.z-=t,this}},{key:"subVectors",value:function(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this}},{key:"multiply",value:function(t,i){return void 0!==i?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,i)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)}},{key:"multiplyScalar",value:function(t){return this.x*=t,this.y*=t,this.z*=t,this}},{key:"multiplyVectors",value:function(t,i){return this.x=t.x*i.x,this.y=t.y*i.y,this.z=t.z*i.z,this}},{key:"applyEuler",value:function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(q.setFromEuler(t))}},{key:"applyAxisAngle",value:function(t,i){return this.applyQuaternion(q.setFromAxisAngle(t,i))}},{key:"applyMatrix3",value:function(t){var i=this.x,n=this.y,e=this.z,t=t.elements;return this.x=t[0]*i+t[3]*n+t[6]*e,this.y=t[1]*i+t[4]*n+t[7]*e,this.z=t[2]*i+t[5]*n+t[8]*e,this}},{key:"applyNormalMatrix",value:function(t){return this.applyMatrix3(t).normalize()}},{key:"applyMatrix4",value:function(t){var i=this.x,n=this.y,e=this.z,t=t.elements,r=1/(t[3]*i+t[7]*n+t[11]*e+t[15]);return this.x=(t[0]*i+t[4]*n+t[8]*e+t[12])*r,this.y=(t[1]*i+t[5]*n+t[9]*e+t[13])*r,this.z=(t[2]*i+t[6]*n+t[10]*e+t[14])*r,this}},{key:"applyQuaternion",value:function(t){var i=this.x,n=this.y,e=this.z,r=t.x,s=t.y,h=t.z,t=t.w,o=t*i+s*e-h*n,u=t*n+h*i-r*e,a=t*e+r*n-s*i,i=-r*i-s*n-h*e;return this.x=o*t+i*-r+u*-h-a*-s,this.y=u*t+i*-s+a*-r-o*-h,this.z=a*t+i*-h+o*-s-u*-r,this}},{key:"project",value:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}},{key:"unproject",value:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}},{key:"transformDirection",value:function(t){var i=this.x,n=this.y,e=this.z,t=t.elements;return this.x=t[0]*i+t[4]*n+t[8]*e,this.y=t[1]*i+t[5]*n+t[9]*e,this.z=t[2]*i+t[6]*n+t[10]*e,this.normalize()}},{key:"divide",value:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}},{key:"divideScalar",value:function(t){return this.multiplyScalar(1/t)}},{key:"min",value:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}},{key:"max",value:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}},{key:"clamp",value:function(t,i){return this.x=Math.max(t.x,Math.min(i.x,this.x)),this.y=Math.max(t.y,Math.min(i.y,this.y)),this.z=Math.max(t.z,Math.min(i.z,this.z)),this}},{key:"clampScalar",value:function(t,i){return this.x=Math.max(t,Math.min(i,this.x)),this.y=Math.max(t,Math.min(i,this.y)),this.z=Math.max(t,Math.min(i,this.z)),this}},{key:"clampLength",value:function(t,i){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(i,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y+this.z*t.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(t){return this.normalize().multiplyScalar(t)}},{key:"lerp",value:function(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this.z+=(t.z-this.z)*i,this}},{key:"lerpVectors",value:function(t,i,n){return this.x=t.x+(i.x-t.x)*n,this.y=t.y+(i.y-t.y)*n,this.z=t.z+(i.z-t.z)*n,this}},{key:"cross",value:function(t,i){return void 0!==i?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,i)):this.crossVectors(this,t)}},{key:"crossVectors",value:function(t,i){var n=t.x,e=t.y,t=t.z,r=i.x,s=i.y,i=i.z;return this.x=e*i-t*s,this.y=t*r-n*i,this.z=n*s-e*r,this}},{key:"projectOnVector",value:function(t){var i=t.lengthSq();return 0===i?this.set(0,0,0):(i=t.dot(this)/i,this.copy(t).multiplyScalar(i))}},{key:"projectOnPlane",value:function(t){return f.copy(this).projectOnVector(t),this.sub(f)}},{key:"reflect",value:function(t){return this.sub(f.copy(t).multiplyScalar(2*this.dot(t)))}},{key:"angleTo",value:function(t){var i=Math.sqrt(this.lengthSq()*t.lengthSq());return 0===i?Math.PI/2:(t=this.dot(t)/i,Math.acos(e.clamp(t,-1,1)))}},{key:"distanceTo",value:function(t){return Math.sqrt(this.distanceToSquared(t))}},{key:"distanceToSquared",value:function(t){var i=this.x-t.x,n=this.y-t.y,t=this.z-t.z;return i*i+n*n+t*t}},{key:"manhattanDistanceTo",value:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}},{key:"setFromSpherical",value:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}},{key:"setFromSphericalCoords",value:function(t,i,n){var e=Math.sin(i)*t;return this.x=e*Math.sin(n),this.y=Math.cos(i)*t,this.z=e*Math.cos(n),this}},{key:"setFromCylindrical",value:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}},{key:"setFromCylindricalCoords",value:function(t,i,n){return this.x=t*Math.sin(i),this.y=n,this.z=t*Math.cos(i),this}},{key:"setFromMatrixPosition",value:function(t){t=t.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}},{key:"setFromMatrixScale",value:function(t){var i=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),t=this.setFromMatrixColumn(t,2).length();return this.x=i,this.y=n,this.z=t,this}},{key:"setFromMatrixColumn",value:function(t,i){return this.fromArray(t.elements,4*i)}},{key:"setFromMatrix3Column",value:function(t,i){return this.fromArray(t.elements,3*i)}},{key:"equals",value:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}},{key:"fromArray",value:function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[i],this.y=t[i+1],this.z=t[i+2],this}},{key:"toArray",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return t[i]=this.x,t[i+1]=this.y,t[i+2]=this.z,t}},{key:"fromBufferAttribute",value:function(t,i,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(i),this.y=t.getY(i),this.z=t.getZ(i),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}])&&G(t.prototype,i),n&&G(t,n),Object.defineProperty(t,"prototype",{writable:!1}),s}(),f=new c,q=new t;function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Q(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,function(t){t=function(t,i){if("object"!=l(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===i?String:Number)(t);n=n.call(t,i||"default");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==l(t)?t:String(t)}(e.key),e)}}var t=function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.T={x:Number.MAX_VALUE,y:Number.MAX_VALUE},this.j={x:-Number.MAX_VALUE,y:-Number.MAX_VALUE}}var i,n,e;return i=t,(n=[{key:"min",get:function(){return this.T}},{key:"max",get:function(){return this.j}},{key:"center",get:function(){var t={x:Number.NaN,y:Number.NaN};return this.valid()&&(t.x=(this.min.x+this.max.x)/2,t.y=(this.min.y+this.max.y)/2),t}},{key:"size",get:function(){var t={x:Number.NaN,y:Number.NaN};return this.valid()&&(t.x=this.max.x-this.min.x,t.y=this.max.y-this.min.y),t}},{key:"copy",value:function(t){return this.j.x=t.max.x,this.j.y=t.max.y,this.T.x=t.min.x,this.T.y=t.min.y,this}},{key:"clone",value:function(){return(new t).copy(this)}},{key:"reset",value:function(){this.T={x:Number.MAX_VALUE,y:Number.MAX_VALUE},this.j={x:-Number.MAX_VALUE,y:-Number.MAX_VALUE}}},{key:"toObject",value:function(){return{min:this.min,max:this.max,center:this.center,size:this.size}}},{key:"expand",value:function(t){this.I(t)}},{key:"expandByCoords",value:function(t){this.L(t)}},{key:"valid",value:function(){return this.A()}},{key:"isCross",value:function(t){var i=!0;return t.max.x<this.min.x&&(i=!1),t.min.x>this.max.x&&(i=!1),t.max.y<this.min.y&&(i=!1),i=t.min.y>this.max.y?!1:i}}])&&Q(i.prototype,n),e&&Q(i,e),Object.defineProperty(i,"prototype",{writable:!1}),t}(),W=(Object.assign(t.prototype,{A:function(){return!(this.min.x>this.max.x||this.min.y>this.max.y)},I:function(t){t&&t.valid()&&(t.min.x<this.min.x&&(this.min.x=t.min.x),t.min.y<this.min.y&&(this.min.y=t.min.y),t.max.x>this.max.x&&(this.max.x=t.max.x),t.max.y>this.max.y)&&(this.max.y=t.max.y)},L:function(t){var i=this;t&&0!=t.length&&t.forEach(function(t){t.x<i.min.x&&(i.min.x=t.x),t.y<i.min.y&&(i.min.y=t.y),t.x>i.max.x&&(i.max.x=t.x),t.y>i.max.y&&(i.max.y=t.y)})}}),t),$=function(t,i,n){n=n||2;var e,r,s,h,o,u=i&&i.length,a=u?i[0]*n:t.length,f=J(t,0,a,n,!0),c=[];if(f&&f.next!==f.prev){if(u&&(f=function(t,i,n,e){var r,s,h,o,u=[];for(r=0,s=i.length;r<s;r++)o=i[r]*e,h=r<s-1?i[r+1]*e:t.length,(o=J(t,o,h,e,!1))===o.next&&(o.steiner=!0),u.push(function(t){var i=t,n=t;for(;(i.x<n.x||i.x===n.x&&i.y<n.y)&&(n=i),i=i.next,i!==t;);return n}(o));for(u.sort(tt),r=0;r<u.length;r++)!function(t,i){(i=function(t,i){var n,e=i,r=t.x,s=t.y,h=-1/0;do{if(s<=e.y&&s>=e.next.y&&e.next.y!==e.y){var o=e.x+(s-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(o<=r&&h<o){if((h=o)===r){if(s===e.y)return e;if(s===e.next.y)return e.next}n=e.x<e.next.x?e:e.next}}}while(e=e.next,e!==i);if(!n)return null;if(r!==h){var u,a=n,f=n.x,c=n.y,l=1/0;for(e=n;r>=e.x&&e.x>=f&&r!==e.x&&R(s<c?r:h,s,f,c,s<c?h:r,s,e.x,e.y)&&(u=Math.abs(s-e.y)/(r-e.x),x(e,t))&&(u<l||u===l&&(e.x>n.x||e.x===n.x&&function(t,i){return T(t.prev,t,i.prev)<0&&T(i.next,t,t.next)<0}(n,e)))&&(n=e,l=u),(e=e.next)!==a;);}return n}(t,i))&&(t=et(i,t),E(i,i.next),E(t,t.next))}(u[r],n),n=E(n,n.next);return n}(t,i,f,n)),t.length>80*n){for(var l=e=t[0],v=r=t[1],y=n;y<a;y+=n)(s=t[y])<l&&(l=s),(h=t[y+1])<v&&(v=h),e<s&&(e=s),r<h&&(r=h);o=0!==(o=Math.max(e-l,r-v))?1/o:0}O(f,c,n,l,v,o)}return c};function J(t,i,n,e,r){var s,h;if(r===0<function(t,i,n,e){for(var r=0,s=i,h=n-e;s<n;s+=e)r+=(t[h]-t[s])*(t[s+1]+t[h+1]),h=s;return r}(t,i,n,e))for(s=i;s<n;s+=e)h=rt(s,t[s],t[s+1],h);else for(s=n-e;i<=s;s-=e)h=rt(s,t[s],t[s+1],h);return h&&j(h,h.next)&&(I(h),h=h.next),h}function E(t,i){if(!t)return t;i=i||t;var n,e=t;do{if(n=!1,e.steiner||!j(e,e.next)&&0!==T(e.prev,e,e.next))e=e.next;else{if(I(e),(e=i=e.prev)===e.next)break;n=!0}}while(n||e!==i);return i}function O(t,i,n,e,r,s,h){if(t){if(!h&&s){for(var o=t,u=e,a=r,f=s,c=o;null===c.z&&(c.z=it(c.x,c.y,u,a,f)),c.prevZ=c.prev,c.nextZ=c.next,(c=c.next)!==o;);c.prevZ.nextZ=null,c.prevZ=null;var l,v,y,d,b,m,p,M,k=c,g=1;do{for(v=k,b=k=null,m=0;v;){for(m++,y=v,l=p=0;l<g&&(p++,y=y.nextZ);l++);for(M=g;0<p||0<M&&y;)0!==p&&(0===M||!y||v.z<=y.z)?(v=(d=v).nextZ,p--):(y=(d=y).nextZ,M--),b?b.nextZ=d:k=d,d.prevZ=b,b=d;v=y}}while(b.nextZ=null,g*=2,1<m)}for(var w,_,S=t;t.prev!==t.next;)if(w=t.prev,_=t.next,s?function(t,i,n,e){var r=t.prev,s=t,h=t.next;if(0<=T(r,s,h))return;var o=(r.x<s.x?r.x<h.x?r:h:s.x<h.x?s:h).x,u=(r.y<s.y?r.y<h.y?r:h:s.y<h.y?s:h).y,a=(r.x>s.x?r.x>h.x?r:h:s.x>h.x?s:h).x,f=(r.y>s.y?r.y>h.y?r:h:s.y>h.y?s:h).y,c=it(o,u,i,n,e),l=it(a,f,i,n,e),v=t.prevZ,y=t.nextZ;for(;v&&v.z>=c&&y&&y.z<=l;){if(v!==t.prev&&v!==t.next&&R(r.x,r.y,s.x,s.y,h.x,h.y,v.x,v.y)&&0<=T(v.prev,v,v.next))return;if(v=v.prevZ,y!==t.prev&&y!==t.next&&R(r.x,r.y,s.x,s.y,h.x,h.y,y.x,y.y)&&0<=T(y.prev,y,y.next))return;y=y.nextZ}for(;v&&v.z>=c;){if(v!==t.prev&&v!==t.next&&R(r.x,r.y,s.x,s.y,h.x,h.y,v.x,v.y)&&0<=T(v.prev,v,v.next))return;v=v.prevZ}for(;y&&y.z<=l;){if(y!==t.prev&&y!==t.next&&R(r.x,r.y,s.x,s.y,h.x,h.y,y.x,y.y)&&0<=T(y.prev,y,y.next))return;y=y.nextZ}return 1}(t,e,r,s):function(t){var i=t.prev,n=t,e=t.next;if(0<=T(i,n,e))return;var r=t.next.next;for(;r!==t.prev;){if(R(i.x,i.y,n.x,n.y,e.x,e.y,r.x,r.y)&&0<=T(r.prev,r,r.next))return;r=r.next}return 1}(t))i.push(w.i/n),i.push(t.i/n),i.push(_.i/n),I(t),t=_.next,S=_.next;else if((t=_)===S){h?1===h?O(t=function(t,i,n){var e=t;do{var r=e.prev,s=e.next.next}while(!j(r,s)&&nt(r,e,e.next,s)&&x(r,s)&&x(s,r)&&(i.push(r.i/n),i.push(e.i/n),i.push(s.i/n),I(e),I(e.next),e=t=s),e=e.next,e!==t);return E(e)}(E(t),i,n),i,n,e,r,s,2):2===h&&function(t,i,n,e,r,s){var h=t;do{for(var o,u=h.next.next;u!==h.prev;){if(h.i!==u.i&&function(t,i){return t.next.i!==i.i&&t.prev.i!==i.i&&!function(t,i){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==i.i&&n.next.i!==i.i&&nt(n,n.next,t,i))return 1}while(n=n.next,n!==t);return}(t,i)&&(x(t,i)&&x(i,t)&&function(t,i){var n=t,e=!1,r=(t.x+i.x)/2,s=(t.y+i.y)/2;for(;n.y>s!=n.next.y>s&&n.next.y!==n.y&&r<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(e=!e),n=n.next,n!==t;);return e}(t,i)&&(T(t.prev,t,i.prev)||T(t,i.prev,i))||j(t,i)&&0<T(t.prev,t,t.next)&&0<T(i.prev,i,i.next))}(h,u))return o=et(h,u),h=E(h,h.next),o=E(o,o.next),O(h,i,n,e,r,s),O(o,i,n,e,r,s);u=u.next}}while(h=h.next,h!==t)}(t,i,n,e,r,s):O(E(t),i,n,e,r,s,1);break}}}function tt(t,i){return t.x-i.x}function it(t,i,n,e,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=32767*(i-e)*r)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function R(t,i,n,e,r,s,h,o){return 0<=(r-h)*(i-o)-(t-h)*(s-o)&&0<=(t-h)*(e-o)-(n-h)*(i-o)&&0<=(n-h)*(s-o)-(r-h)*(e-o)}function T(t,i,n){return(i.y-t.y)*(n.x-i.x)-(i.x-t.x)*(n.y-i.y)}function j(t,i){return t.x===i.x&&t.y===i.y}function nt(t,i,n,e){var r=y(T(t,i,n)),s=y(T(t,i,e)),h=y(T(n,e,t)),o=y(T(n,e,i));return r!==s&&h!==o||0===r&&v(t,n,i)||0===s&&v(t,e,i)||0===h&&v(n,t,e)||!(0!==o||!v(n,i,e))}function v(t,i,n){return i.x<=Math.max(t.x,n.x)&&i.x>=Math.min(t.x,n.x)&&i.y<=Math.max(t.y,n.y)&&i.y>=Math.min(t.y,n.y)}function y(t){return 0<t?1:t<0?-1:0}function x(t,i){return T(t.prev,t,t.next)<0?0<=T(t,i,t.next)&&0<=T(t,t.prev,i):T(t,i,t.prev)<0||T(t,t.next,i)<0}function et(t,i){var n=new st(t.i,t.x,t.y),e=new st(i.i,i.x,i.y),r=t.next,s=i.prev;return(t.next=i).prev=t,(n.next=r).prev=n,(e.next=n).prev=e,(s.next=e).prev=s,e}function rt(t,i,n,e){t=new st(t,i,n);return e?(t.next=e.next,(t.prev=e).next.prev=t,e.next=t):(t.prev=t).next=t,t}function I(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function st(t,i,n){this.i=t,this.x=i,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function ht(t){return function(t){if(Array.isArray(t))return ot(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,i){var n;if(t)return"string"==typeof t?ot(t,i):"Map"===(n="Object"===(n=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ot(t,i):void 0}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ot(t,i){(null==i||i>t.length)&&(i=t.length);for(var n=0,e=new Array(i);n<i;n++)e[n]=t[n];return e}var d={area:function(t){for(var i=t.length,n=0,e=i-1,r=0;r<i;e=r++)n+=t[e].x*t[r].y-t[r].x*t[e].y;return.5*n},isClockWise:function(t){return d.area(t)<0},triangulateShape:function(t,i){var n=[],e=[],r=[],s=(ut(t),at(n,t),t.length);i.forEach(ut);for(var h=0;h<i.length;h++)e.push(s),s+=i[h].length,at(n,i[h]);for(var o=$(n,e),u=0;u<o.length;u+=3)r.push(o.slice(u,u+3));return r},triangulate:function(t){(r=[]).push.apply(r,ht(t[0]));for(var i=[],n=1;n<t.length;n++){var e=[];e.push.apply(e,ht(t[n])),i.push(e)}if(!d.isClockWise(r))for(var r=r.reverse(),s=0,h=i.length;s<h;s++){var o=i[s];d.isClockWise(o)&&(i[s]=o.reverse())}return d.triangulateShape(r,i)}};function ut(t){var i,n=t.length;2<n&&(n=t[n-1],i=t[0],n.x===i.x)&&n.y===i.y&&t.pop()}function at(t,i){for(var n=0;n<i.length;n++)t.push(i[n].x),t.push(i[n].y)}function b(t){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ft(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,function(t){t=function(t,i){if("object"!=b(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===i?String:Number)(t);n=n.call(t,i||"default");if("object"!=b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==b(t)?t:String(t)}(e.key),e)}}function ct(t,i,n){return i&&ft(t.prototype,i),n&&ft(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var m=1e-5,p=.001,lt=Math.PI/180,vt=180/Math.PI,t=ct(function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function")});Object.assign(t.prototype,{P:function(){return m},N:function(){return lt},C:function(){return vt},D:function(t){return t<m&&-m<t},F:function(t){return m<t},Y:function(t){return t<-m},B:function(t,i,n){i=(t.x-n.x)*(i.y-n.y)-(i.x-n.x)*(t.y-n.y);return Math.abs(i)<m?0:i},distanceOfTwoPoints:function(t,i){return t&&i?Math.sqrt((t.x-i.x)*(t.x-i.x)+(t.y-i.y)*(t.y-i.y)):Number.NaN},distance:function(t,i){return Math.sqrt(Math.pow(i.x-t.x,2)+Math.pow(i.y-t.y,2))},isPolygonContainPoint:function(t,i){for(var n=0,e=0;e<t.length;e++){var r=t[e].x,s=t[e].y,h=0,o=0,o=(e<t.length-1?(h=t[e+1].x,t[e+1]):(h=t[0].x,t[0])).y;if(r===i.x&&s===i.y||h===i.x&&o===i.y)return!0;if(o!==s){var u=r+(i.y-s)*(h-r)/(o-s);if(u===i.x)return!0;r!==h?u<=Math.max(r,h)&&u>=Math.min(r,h)&&u>i.x&&u!==r&&(u===h&&0<(s-i.y)*(o-i.y)?n+=2:n++):u<=Math.max(r,h)&&u>=Math.min(r,h)&&u>i.x&&(u===h&&0<(s-i.y)*(o-i.y)?n+=2:n++)}}return 0<n%2},isPolygonContainPoint2:function(t,i){var n=t.length;if(n<3)return!1;for(var e=n-1,r=0,s=0;s<n;s++){var h=t[s],o=t[e];h.y>i.y!=o.y>i.y&&i.x<(o.x-h.x)*(i.y-h.y)/(o.y-h.y)+h.x&&(h.y>o.y?r++:r--),e=s}return 0!=r},isPolygonInPolygon:function(t,i){var n=Object.assign([],t),e=Object.assign([],i);n.push(n[0]),e.push(e[0]);for(var r=0;r<n.length-1;r++){var s=n[r];if(!this.isPolygonContainPoint(e,s)&&!this.isPolygonContainPoint2(e,s))return!1}for(var h=0;h<n.length-1;h++)for(var o=0;o<e.length-1;o++)if(this.V(n[h],n[h+1],e[o],e[o+1]).isintersect&&!this.Z(e[o],e[o+1],n[h])&&!this.Z(e[o],e[o+1],n[h+1]))return!1;return!0},X:function(t,i,n,e){return!(Math.max(t.x,i.x)<Math.min(n.x,e.x)||Math.max(t.y,i.y)<Math.min(n.y,e.y)||Math.max(n.x,e.x)<Math.min(t.x,i.x)||Math.max(n.y,e.y)<Math.min(t.y,i.y))},H:function(t,i,n,e){return!(Math.max(t.x,i.x)<Math.min(n.x,e.x)||Math.max(t.y,i.y)<Math.min(n.y,e.y)||Math.max(n.x,e.x)<Math.min(t.x,i.x)||Math.max(n.y,e.y)<Math.min(t.y,i.y)||0===this.B(n,i,t)&&0===this.B(i,e,t)||this.B(n,i,t)*this.B(i,e,t)<0||this.B(t,e,n)*this.B(e,i,n)<0)},U:function(t,i,n){return!(t.x<i.x||t.y<i.y||t.x>n.x||t.y>n.y)},K:function(t,i,n){var e=Math.min(i.x,n.x),r=Math.max(i.x,n.x),s=Math.min(i.y,n.y),i=Math.max(i.y,n.y);return!(t.x<e||t.x>r||t.y<s||t.y>i)},G:function(t,i,n){var e=Math.min(n.x,i.x),r=Math.max(n.x,i.x),s=Math.min(n.y,i.y),n=Math.max(n.y,i.y);return!(t.x<e||t.x>r||t.y<s||t.y>n)},q:function(t,i,n){for(var e,r,s=!1,h=0;h<n;h++)e=i[h],r=i[(h+1)%n],(e.y<t.y&&r.y>=t.y||r.y<t.y&&e.y>=t.y)&&(e.x<=t.x||r.x<=t.x)&&e.x+(t.y-e.y)/(r.y-e.y)*(r.x-e.x)<t.x&&(s=!s);return s},W:function(t,i,n){return(t.x-i.x)*(n.y-i.y)==(n.x-i.x)*(t.y-i.y)&&Math.min(i.x,n.x)<=t.x&&t.x<=Math.max(i.x,n.x)&&Math.min(i.y,n.y)<=t.y&&t.y<=Math.max(i.y,n.y)},$:function(t,i){return Math.sqrt((t.x-i.x)*(t.x-i.x)+(t.y-i.y)*(t.y-i.y))},J:function(t,i){return(t.x-i.x)*(t.x-i.x)+(t.y-i.y)*(t.y-i.y)},tt:function(t,i,n){var e=i.x,i=i.y,r=n.x,n=n.y,s=t.x,t=t.y,h=r-e,o=n-i,u=h*h+o*o,a=s-e,f=t-i,c=a*a+f*f;return this.D(u)?this.D(c)?0:c:(u=Math.sqrt(u),f=this.F(o=(h=h/u)*a+(a=o/u)*f)?this.Y(o-u)?(f=s-(e+o*h))*f+(u=t-(i+o*a))*u:(e=s-r)*e+(h=t-n)*h:c,this.D(f)?0:f)},it:function(t,i,n,e){var r,s=i.x,h=i.y,o=n.x,u=n.y,a=t.x,t=t.y,f=o-s,c=u-h,l=Math.sqrt(f*f+c*c),v=a-s,y=t-h,d=Math.sqrt(v*v+y*y);return this.D(l)?(e.x=i.x,e.y=i.y,this.D(r=d)?0:r):(r=this.F(c=(f=f/l)*v+(v=c/l)*y)?this.Y(c-l)?(l=a-(y=s+c*f),f=t-(s=h+c*v),h=Math.sqrt(l*l+f*f),e.x=y,e.y=s,h):(c=a-o,v=t-u,l=Math.sqrt(c*c+v*v),e.x=n.x,e.y=n.y,l):(e.x=i.x,e.y=i.y,d),this.D(r)?0:r)},nt:function(t,i){for(var n=0,e=0,r=0,s=0;s<i;s++){var h=t[s],o=t[(s+1)%i],u=(h.x*o.y-h.y*o.x)/2;n+=u,e+=u*(h.x+o.x)/3,r+=u*(h.y+o.y)/3}return{x:e/=n,y:r/=n}},et:function(t){for(var i=d.triangulate([t]),n=0,e=0,r=0,s=0;s<i.length;s++){var h=t[i[s][0]],o=t[i[s][1]],u=t[i[s][2]],a=o.x-h.x,f=o.y-h.y,c=u.x-h.x,a=(a*(u.y-h.y)-c*f)/2;n+=a,e+=(h.x+o.x+u.x)/3*a,r+=(h.y+o.y+u.y)/3*a}return{x:e/n,y:r/n}},rt:function(t,i){if(i<3)return 0;for(var n=0,e=0;e<i;++e){var r=t[e],s=t[(e+1)%i];n+=r.x*s.y-r.y*s.x}return Math.abs(n/2)},st:function(t,i,n,e,r){var s,h;return this.H(t,i,n,e)?(s=(e.x-n.x)*(t.y-i.y)-(i.x-t.x)*(n.y-e.y),h=(t.y-n.y)*(i.x-t.x)*(e.x-n.x)+n.x*(e.y-n.y)*(i.x-t.x)-t.x*(i.y-t.y)*(e.x-n.x),r.x=h/s,s=(t.x-i.x)*(e.y-n.y)-(i.y-t.y)*(n.x-e.x),h=i.y*(t.x-i.x)*(e.y-n.y)+(e.x-i.x)*(e.y-n.y)*(t.y-i.y)-e.y*(n.x-e.x)*(i.y-t.y),r.y=h/s,1):0},ht:function(t,i,n,e,r){var s=Math.min(n.x,e.x),h=Math.max(n.x,e.x),o=Math.min(n.y,e.y),u=Math.max(n.y,e.y),a=t.x,f=t.y,c=n.x,l=n.y,v=e.x,y=e.y;if(90==i)return!(t.x<s||t.x>h||(h-s<p?t.y>=l&&t.y<=y||t.y>=y&&t.y<=l?(r.x=t.x,r.y=t.y,0):l<y&&t.x<l?(r.x=c,r.y=l,0):!(y<l&&t.x<y)||(r.x=v,r.y=y,0):(r.y=d=(y-l)/(v-c)*(a-c)+l,r.x=a,d<f||!this.G(r,n,e))));if(270==i)return!(t.x<s||t.x>h||(Math.abs(h-s<p)?t.y>=l&&t.y<=y||t.y>=y&&t.y<=l?(r.x=t.x,r.y=t.y,0):l<y&&t.y>y?(r.x=v,r.y=y,0):!(y<l&&t.y>l)||(r.x=c,r.y=l,0):(r.y=d=(y-l)/(v-c)*(a-c)+l,r.x=a,f<d||!this.G(r,n,e))));if(270!=i&&90!=i&&Math.abs(h-s<p)){var t=s,d=Math.tan(i/180*Math.PI)*(t-a)+f;if(r.y=d,r.x=t,this.G(r,n,e))return h=d-f,0<(s=t-a)/Math.sqrt(s*s+h*h)*Math.cos(i/180*Math.PI)}return Math.abs(u-o<=p)?(d=o,t=1/Math.tan(i/180*Math.PI)*(d-f)+a,r.x=t,r.y=d,!!this.G(r,n,e)&&(s=d-f,0<(h=t-a)/Math.sqrt(h*h+s*s)*Math.cos(i/180*Math.PI))):(t=f+(u=Math.tan(i/180*Math.PI))*((d=(l-f-((o=(y-l)/(v-c))*c-u*a))/(u-o))-a),r.x=d,r.y=t,!!this.G(r,n,e)&&(h=d-a,s=t-f,Math.abs(h)<=p&&Math.abs(s)<=p||0<h/Math.sqrt(h*h+s*s)*Math.cos(i/180*Math.PI)))},ot:function(t,i){return Math.abs(t.x-i.x)<m&&Math.abs(t.y-i.y)<m},ut:function(t,i,n,e){var r,s,h,o,u=t.x,a=t.y,f=i.x,c=i.y,l=n.x,v=n.y;return this.ot(t,i)||this.ot(t,n)?(e.x=u,e.y=a,!0):(h=Math.min(i.x,n.x),o=Math.max(i.x,n.x),r=Math.min(i.y,n.y),s=Math.max(i.y,n.y),Math.abs(f-l)<1e-5?(e.x=f,r<=(e.y=a)&&a<=s):Math.abs(c-v)<1e-5?(e.x=u,e.y=c,h<=u&&u<=o):(o=a+(r=-1/((v-c)/(l-f)))*((h=(c-a-((s=(v-c)/(l-f))*f-r*u))/(r-s))-u),e.x=h,e.y=o,!!this.G(e,i,n)||!(!this.ot(t,i)&&!this.ot(t,n))))},at:function(t,i){return{x:t.y*i.z-t.z*i.y,y:t.z*i.x-t.x*i.z,z:t.x*i.y-t.y*i.x}},ft:function(t,i){return t.x*i.x+t.y*i.y+t.z*i.z},ct:function(t){return Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z)},lt:function(t,i){return t.x*i.x+t.y*i.y},vt:function(t,i){return t.x*i.y-t.y*i.x},yt:function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},dt:function(t,i){var n,e;return 0==t.x&&0==t.y||0==i.x&&0==i.y?0:(n={x:t.x,y:t.y,z:0},e={x:i.x,y:i.y,z:0},n=this.at(n,e),e=this.lt(t,i),e=Math.acos(e/(this.yt(t)*this.yt(i))),0<n.z?e/Math.PI*180:360-e/Math.PI*180)},bt:function(t,i,n,e){for(var r=0;r<n.length;r++){var s=n[r],h=n[(r+1)%n.length];if(1==this.st(t,i,s,h,e))return!0}return!1},Mt:function(t,i,n,e,r){var s=Math.min(t.x,n.x,e.x),h=Math.max(t.x,n.x,e.x),o=Math.min(t.y,n.y,e.y),u=Math.max(t.y,n.y,e.y),h=Math.sqrt((h-s)*(h-s)+(u-o)*(u-o)),s=i/180*Math.PI,u=h*Math.cos(s)+t.x,o=h*Math.sin(s)+t.y;return 1==this.st(t,{x:u,y:o},n,e,r)},kt:function(t){var i={x:null,y:null},n=0,e=0,r=t.length;1<t.length&&t[0].x===t[t.length-1].x&&t[0].y===t[t.length-1].y&&r--;for(var s=0;s<r;s++)n+=t[s].x,e+=t[s].y;return i.x=n/t.length,i.y=e/t.length,i},gt:function(t,i,n,e){var r=[],s=t.x-i,h=t.x+i,o=t.y-i,u=t.y+i,a=Math.min(n.x,e.x),f=Math.max(n.x,e.x),c=Math.min(n.y,e.y),l=Math.max(n.y,e.y);return f<s||h<a||l<o||u<c||(s=e.x-n.x,h=e.y-n.y,(o=(t=(s*(o=t.x-n.x)+h*(u=t.y-n.y))/(e=s*s+h*h))*t-(o*o+u*u-i*i)/e)<0)||(u=Math.sqrt(o),e={x:n.x-s*(i=-t+u),y:n.y-h*i},s={x:n.x-s*(o=-t-u),y:n.y-h*o},i!==o&&(a<=e.x&&e.x<=f&&c<=e.y&&e.y<=l&&r.push(e),a<=s.x)&&s.x<=f&&c<=s.y&&s.y<=l&&r.push(s)),r},wt:function(t,i,n){var e,r={};if(t.x!=i.x)return e=i=(i.y-t.y)/(i.x-t.x),i=t.y-i*t.x,r.x=(+n.x- -1*e*n.y-e*i)/(e*e+1),r.y=(e*e*n.y- -1*e*n.x- -1*i)/(e*e+1),r;r.x=t.x,r.y=n.y},V:function(t,i,n,e){var r,s,h,o,u={point:null,isintersect:!1};return this.distanceOfTwoPoints(t,n)<.001||this.distanceOfTwoPoints(t,e)<.001?(u.isintersect=!0,u.point=t):this.distanceOfTwoPoints(i,n)<.001||this.distanceOfTwoPoints(i,e)<.001?(u.isintersect=!0,u.point=i):(r={x:i.x-t.x,y:i.y-t.y},s={x:e.x-n.x,y:e.y-n.y},h={x:n.x-t.x,y:n.y-t.y},e={x:e.x-t.x,y:e.y-t.y},i={x:i.x-n.x,y:i.y-n.y},n={x:-h.x,y:-h.y},o=this.vt(s,r),Math.abs(o)<=1e-5||this.vt(h,r)*this.vt(e,r)<=-5e-4&&this.vt(n,s)*this.vt(i,s)<-5e-4&&(e=this.vt(s,h)/o,u.point={x:t.x+r.x*e,y:t.y+r.y*e},u.isintersect=!0)),u},_t:function(t,i,n){t.x===i.x&&(i.x=i.x+1),t.y===i.y&&(i.y=i.y+1),i.x===n.x&&(n.x=n.x+1),i.y===n.y&&(n.y=n.y+1);var e=i.x-t.x,t=i.y-t.y,r=n.x-i.x;return!(0<e*(n.y-i.y)-t*r)},getAngle:function(t){var i=t.p1,t=t.p2,n=t.x-i.x,t=t.y-i.y,i=Math.sqrt(n*n+t*t),i=Math.asin(Math.abs(t)/i);return 0<n&&0<t?i:n<0&&0<t?Math.PI-i:n<0&&t<0?Math.PI+i:0<n&&t<0?2*Math.PI-i:0==n&&0<t?i:0==n&&t<0?3*Math.PI/2:0<n&&0==t?i:n<0&&0==t?Math.PI:null},St:function(t){var i=this.distanceOfTwoPoints(t[0],t[1]),n=this.distanceOfTwoPoints(t[1],t[2]),t=this.distanceOfTwoPoints(t[0],t[2]),e=(i+n+t)/2;return Math.sqrt(e*(e-i)*(e-n)*(e-t))},Et:function(t,i){var n,e,r,s,h;return this.it(t,i[0],i[1],{})<1e-4||this.it(t,i[0],i[2],{})<1e-4||this.it(t,i[1],i[2],{})<1e-4||(s={x:i[1].x-i[0].x,y:i[1].y-i[0].y},n={x:i[0].x-i[2].x,y:i[0].y-i[2].y},e={x:i[2].x-i[1].x,y:i[2].y-i[1].y},h={x:t.x-i[0].x,y:t.y-i[0].y},r={x:t.x-i[1].x,y:t.y-i[1].y},t={x:t.x-i[2].x,y:t.y-i[2].y},i=this.vt(s,h),s=this.vt(e,r),h=this.vt(n,t),m<i*s&&m<s*h)},Ot:function(t,i,n){var e=n.length,r={isintersect:!1,start:null,end:null,type:0,outer:null},s=[];if(this.Et(t,n)&&(r.start=t),this.Et(i,n)&&(r.end=i),null!=r.start&&null!=r.end)r.isintersect=!0,r.type=1;else{for(var h=(n[1].x+n[2].x)/2,o=(n[1].y+n[2].y)/2,u=1;u<e;u++){var a,f=this.V(t,i,n[u-1],n[u]);if(f.isintersect){if(null!=r.start)return r.end=f.point,r.isintersect=!0,r.outer="end",a=this.dt({x:h-n[0].x,y:o-n[0].y},{x:i.x-n[0].x,y:i.y-n[0].y}),r.type=0<(a=a<180?a:a-360)?2:3,r;if(null!=r.end)return r.start=f.point,r.isintersect=!0,r.outer="start",a=this.dt({x:h-n[0].x,y:o-n[0].y},{x:t.x-n[0].x,y:t.y-n[0].y}),r.type=0<(a=a<180?a:a-360)?2:3,r;s.push(f)}}var c,l=this.V(t,i,n[0],n[e-1]);if(l.isintersect){if(null!=r.start)return r.end=l.point,r.isintersect=!0,r.outer="end",c=this.dt({x:h-n[0].x,y:o-n[0].y},{x:i.x-n[0].x,y:i.y-n[0].y}),r.type=0<(c=c<180?c:c-360)?2:3,r;if(null!=r.end)return r.start=l.point,r.isintersect=!0,r.outer="start",c=this.dt({x:h-n[0].x,y:o-n[0].y},{x:t.x-n[0].x,y:t.y-n[0].y}),r.type=0<(c=c<180?c:c-360)?2:3,r;s.push(l)}2!=s.length||this.distanceOfTwoPoints(s[0].point,s[1].point)<.01||(this.distanceOfTwoPoints(s[0].point,t)<=this.distanceOfTwoPoints(s[0].point,i)?(r.start=s[0].point,r.end=s[1].point):(r.start=s[1].point,r.end=s[0].point),r.isintersect=!0,r.type=4)}return r},Rt:function(t,i,n){var e=n.length,r={isintersect:!1,start:null,end:null},s=[];if(this.Et(t,n)&&(r.start=t),this.Et(i,n)&&(r.end=i),null!=r.start&&null!=r.end)r.isintersect=!0;else{for(var h=1;h<e;h++){var o=this.V(t,i,n[h-1],n[h]);if(o.isintersect){if(null!=r.start)return r.end=o.point,r.isintersect=!0,r;if(null!=r.end)return r.start=t,r.isintersect=!0,r;s.push(o)}}var u=this.V(t,i,n[0],n[e-1]);if(u.isintersect){if(null!=r.start)return r.end=u.point,r.isintersect=!0,r;if(null!=r.end)return r.start=t,r.isintersect=!0,r;s.push(u)}2==s.length&&(r.start=(this.distanceOfTwoPoints(s[0].point,t)<=this.distanceOfTwoPoints(s[0].point,i)?s[0]:s[1]).point,r.end=(this.distanceOfTwoPoints(s[0].point,t)>this.distanceOfTwoPoints(s[0].point,i)?s[0]:s[1]).point,r.isintersect=!0)}return r},Tt:function(r,t){if(0==t.length)return[r];for(var i,n,e=this.jt(t),s=[],h=(e.sort(function(t,i){var n=(t.xt.x-r.xt.x)*(t.xt.x-r.xt.x)+(t.xt.y-r.xt.y)*(t.xt.y-r.xt.y),e=(i.xt.x-r.xt.x)*(i.xt.x-r.xt.x)+(i.xt.y-r.xt.y)*(i.xt.y-r.xt.y),t=(t.It.x-r.xt.x)*(t.It.x-r.xt.x)+(t.It.y-r.xt.y)*(t.It.y-r.xt.y),i=(i.It.x-r.xt.x)*(i.It.x-r.xt.x)+(i.It.y-r.xt.y)*(i.It.y-r.xt.y);return(n<t?n:t)<(e<i?e:i)}),0),h=0;h<e.length;h++)this.distanceOfTwoPoints(e[h].xt,e[h].It)<.01||(i=this.distanceOfTwoPoints(e[h].xt,r.xt),n=this.distanceOfTwoPoints(e[h].It,r.xt),i<.01?r.xt=e[h].It:n<.01?r.xt=e[h].xt:i<n?.1<this.distanceOfTwoPoints(r.xt,e[h].xt)&&(s.push({Lt:r.Lt,xt:r.xt,It:e[h].xt,$:r.$,At:r.At}),r.xt=e[h].It):.1<this.distanceOfTwoPoints(r.xt,e[h].It)&&(s.push({Lt:r.Lt,xt:r.xt,It:e[h].It,$:r.$,At:r.At}),r.xt=e[h].xt),e.splice(h,1));return.1<this.distanceOfTwoPoints(r.xt,r.It)&&s.push(r),s},jt:function(t){var i=[];if(1==t.length)return t;for(var n=t[0],e=1;0<t.length;){if(e>=t.length){if(i.push(n),t.splice(0,1),t.length<1)break;n=t[0],e=1}if(1===t.length){i.push(n);break}this.Z(n.xt,n.It,t[e].xt)?(this.Z(n.xt,n.It,t[e].It)||(n.It=t[e].It),t.splice(e,1)):this.Z(n.xt,n.It,t[e].It)?(n.xt=t[e].xt,t.splice(e,1)):this.Z(t[e].xt,t[e].It,n.xt)?(n=(this.Z(t[e].xt,t[e].It,n.It)||(t[e].It=n.It),t[e]),t.splice(e,1)):this.Z(t[e].xt,t[e].It,n.It)?(t[e].xt=n.xt,n=t[e],t.splice(e,1)):e++}return i},Z:function(t,i,n){var e=t.x-n.x,r=t.y-n.y,s=i.x-n.x,h=i.y-n.y,o=this.distanceOfTwoPoints(t,n),n=this.distanceOfTwoPoints(i,n),t=this.distanceOfTwoPoints(t,i);return e*h-r*s<1e-5&&o+n-t<.001},Pt:function(t,i,n){var e=i.x-t.x,t=i.y-t.y,r=Math.sqrt(e*e+t*t);return{x:i.x+e/r*n,y:i.y+t/r*n}}});var w=new t,yt={Drive:1,Walk:0},t={BROWSER:0,WX:1},dt=(Object.freeze(t),{document:"undefined"!=typeof document?document:{},window:"undefined"!=typeof window?window:{},environment:t.BROWSER,XMLHttpRequest:"undefined"!=typeof XMLHttpRequest?XMLHttpRequest:{}}),t={RIGHT:2,LEFT:4,BOTTOM:8,TOP:16,RIGHT_BOTTOM:32,LEFT_BOTTOM:64,RIGHT_TOP:128,LEFT_TOP:256,CENTER:512},bt=(Object.freeze(t),t),t={NONE:0,EXTRUDE_MARKER:2,FM3DTILE_LAYER:4,IMAGE_MARKER:8,LOCATION_MARKER:16,POLYGON_MARKER:32,TEXT_MARKER:64,LINE_MARKER:128,LINE3D_MARKER:256,HEAT_MAP_MARKER:512,EXTENT:1024,EXTERNAL_MODEL:2048,MODEL:4096,FACILITY:8192,LABEL:16384,DYNAMIC_MODEL_MARKER:32768,DOM_MARKER:65536,SPHERE_MARKER:1<<17,CAD_LAYER:1<<18,EXTENT_LAYER:1<<20,EXTERNAL_MODEL_LAYER:1<<21,MODEL_LAYER:1<<22,FACILITY_LAYER:1<<23,LABEL_LAYER:1<<24,MARKER_GROUP:1<<25,FLOW_LINE_LAYER:1<<27,FLOW_LINE_MARKER:1<<27,FIRE_MARKER:1<<28,WALL_MARKER:1<<29,TUBE_MARKER:1<<30},mt=(t.LAYER_NODE_TYPE=new Map,t.LAYER_NODE_TYPE.set(t.EXTENT_LAYER,t.EXTENT),t.LAYER_NODE_TYPE.set(t.EXTERNAL_MODEL_LAYER,t.EXTERNAL_MODEL),t.LAYER_NODE_TYPE.set(t.MODEL_LAYER,t.MODEL),t.LAYER_NODE_TYPE.set(t.FACILITY_LAYER,t.FACILITY),t.LAYER_NODE_TYPE.set(t.LABEL_LAYER,t.LABEL),t.LAYER_NODE_TYPE.set(t.DOM_MARKER,t.DOM_MARKER),t.LAYER_NODE_TYPE.set(t.DYNAMIC_MODEL_MARKER,t.DYNAMIC_MODEL_MARKER),t.LAYER_NODE_TYPE.set(t.EXTRUDE_MARKER,t.EXTRUDE_MARKER),t.LAYER_NODE_TYPE.set(t.HEAT_MAP_MARKER,t.HEAT_MAP_MARKER),t.LAYER_NODE_TYPE.set(t.LINE_MARKER,t.LINE_MARKER),t.LAYER_NODE_TYPE.set(t.LOCATION_MARKER,t.LOCATION_MARKER),t.LAYER_NODE_TYPE.set(t.POLYGON_MARKER,t.POLYGON_MARKER),t.LAYER_NODE_TYPE.set(t.TEXT_MARKER,t.TEXT_MARKER),t.LAYER_NODE_TYPE.set(t.IMAGE_MARKER,t.IMAGE_MARKER),t.LAYER_NODE_TYPE.set(t.FLOW_LINE_LAYER,t.FLOW_LINE_MARKER),t.LAYER_NODE_TYPE.set(t.FIRE_MARKER,t.FIRE_MARKER),t.LAYER_NODE_TYPE.set(t.WALL_MARKER,t.WALL_MARKER),t.LAYER_NODE_TYPE.set(t.TUBE_MARKER,t.TUBE_MARKER),t.LAYER_NODE_TYPE.set(t.LINE3D_MARKER,t.LINE3D_MARKER),t.LAYER_NODE_TYPE.set(t.SPHERE_MARKER,t.SPHERE_MARKER),t.LAYER_NODE_TYPE.set(t.CAD_LAYER,t.CAD_LAYER),t);function pt(t,i){var n,e,r,s,h="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(h)return e=!(n=!0),{s:function(){h=h.call(t)},n:function(){var t=h.next();return n=t.done,t},e:function(t){e=!0,r=t},f:function(){try{n||null==h.return||h.return()}finally{if(e)throw r}}};if(Array.isArray(t)||(h=kt(t))||i&&t&&"number"==typeof t.length)return h&&(t=h),s=0,{s:i=function(){},n:function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}},e:function(t){throw t},f:i};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function M(t){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mt(t){return function(t){if(Array.isArray(t))return gt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||kt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kt(t,i){var n;if(t)return"string"==typeof t?gt(t,i):"Map"===(n="Object"===(n=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gt(t,i):void 0}function gt(t,i){(null==i||i>t.length)&&(i=t.length);for(var n=0,e=new Array(i);n<i;n++)e[n]=t[n];return e}function wt(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,function(t){t=function(t,i){if("object"!=M(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===i?String:Number)(t);n=n.call(t,i||"default");if("object"!=M(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==M(t)?t:String(t)}(e.key),e)}}var t=function(){function i(t){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");this.Nt=t.type,this.stepLength=.7,this.Ct=180/Math.PI,this.Dt=[295829355.45,147914677.73,73957338.86,36978669.43,18489334.72,9244667.36,4622333.68,2311166.84,1155583.42,577791.71,288895.85,144447.93,72223.96,36111.98,18056,9028,4514,2257,1128,564,282,141,70,35,17,8,4,2,1],this.Ft=null,this.Yt=null,this.Bt=5,this.Vt=!0,this.Zt=.2,this.Xt=!1,this.zt=!0,this.Ht=!1,this.Ut=1.2,this.Kt=80,this.Gt=30,this.qt=21,this.Qt=!0,this.Wt=22,this.$t=1.3,this.Jt=null,this.ti="",this.ii=100,this.ni=3,this.ei=1,this.ri=6,this.si=10,this.hi=5,this.oi=0,this.ui=!1,this.ai=!1,this.fi=!1,this.ci=!1,this.li=0,this.vi=0,this.yi=0,this.di=0,this.bi=null,this.mi=null,this.pi=!1,this.Mi=null,this.ki=null,this.gi=!1,this.wi=!1,this._i=null,this.Si=0,this.Ei=B.ZH,this.Oi=F.MODULE_SHORTEST,this.Ri=Y.PRIORITY_DEFAULT,this.Ti=!1,this.ji=!0,this.xi=[],this.Ii=!1,this.Li=!1,this.Ai=new Map,this.Pi=!0,this.crossCircles,this.Ni=h.Auto,this.Ci={radius:.5,dash:{size:4,gap:2}},this.Di="#002FA7",this.Fi=!0,this.Yi=0,this.Bi=new H,this.Vi=new X,this.Zi=(window&&"undefined"!==window.fengmap?window:getApp().globalData).fengmap,this.on=this.on.bind(this),this.Xi(t),this.zi()}var t,n,e;return t=i,(n=[{key:"locationMarker",get:function(){return this.Hi},set:function(t){this.Hi=t}},{key:"lineFillMode",get:function(){return this.Ni},set:function(t){this.Ni=t}},{key:"naviResult",get:function(){return this.Ui}},{key:"followPosition",get:function(){return this.Vt},set:function(t){this.Vt=t}},{key:"followAngle",get:function(){return this.Xt},set:function(t){this.Xt=t}},{key:"on",value:function(t,i){this.Vi.h(t,i)}},{key:"off",value:function(t,i){this.Vi.M(t,i)}},{key:"dispose",value:function(){this.stop(),this.Ft=null,this.Yt&&(this.Yt.dispose(),this.Yt=null)}},{key:"setLanguage",value:function(t){this.Ei!=t&&(this.Ei=t,this.Ki())}},{key:"setObstructions",value:function(t){this.Yt.setObstructions(t)}},{key:"setStartPoint",value:function(t,i){this.Gi=Object.assign({},this.Gi,t,{x:t.x,y:t.y,level:t.level,buildingID:t.buildingID,height:"number"==typeof t.height?t.height:this.ri});var n=null;return n=t.url&&!i?this.qi(this.Gi,!0):n}},{key:"setDestPoint",value:function(t,i){this.Qi=Object.assign({},this.Qi,t,{x:t.x,y:t.y,level:t.level,buildingID:t.buildingID,height:"number"==typeof t.height?t.height:this.ri});var n=null;return n=t.url&&!i?this.qi(this.Qi,!1):n}},{key:"route",value:function(t,i,n){this.Xi(t),this.Wi(),this.$i({mode:t.mode,priority:t.priority,toDoors:t.toDoors,obstruct:this.ji,viapoints:t.viapoints,barrierFree:t.barrierFree},i,n)}},{key:"naviConstraint",value:function(t,i){if(this.Gi&&this.Qi){null==this.Ji&&this.tn(),t.buildingID=void 0!==t.buildingID?t.buildingID:null;var n={},e=[],r=Number.MAX_VALUE,s=0,h={index:-1,coords:{level:t.level,buildingID:t.buildingID},angle:null,distance:Number.MAX_VALUE,distanceToNext:Number.MAX_VALUE,remain:this.nn,relDirection:1,time:null,dots:[],insertIndex:-1,toNext:null,buildingIndex:-1};this.en&&this.en.coords.buildingID!==t.buildingID&&(this.en.insertIndex=-1);for(var o=0;o<this.Ji.length;o++){if(this.Ji[o].bid!==t.buildingID);else for(var u=this.Ji[o].naviPoints,a=1;a<u.length;a++){var f,c,l=u[a-1],v=u[a],y=l.index-s;this.en&&this.en.index>l.index||(y=this.rn[o].result.naviDescriptionsData[y].endPoint,l.level===t.level&&v.level===t.level&&(f=w.it(t,l,v,n))<r&&(1===a||null===this.en||this.en&&this.en.coords.buildingID===t.buildingID&&this.en&&this.en.insertIndex<=a)&&(i&&i!==l.index||(null!=this.sn&&(c=(t.x-this.sn.x)*(v.x-l.x)+(t.y-this.sn.y)*(v.y-l.y),0===Math.abs(c)&&null!=this.en?h.relDirection=this.en.relDirection:c<0&&(h.relDirection=-1)),h.distance=f,Object.assign(h.coords,n),h.angle=this.hn(l,v),h.index=l.index,h.distanceToNext=w.$(n,y),h.insertIndex=a,h.toNext=w.$(n,v),h.buildingIndex=o,this.un(h),e.push(Object.assign({},h)),r=f)))}s+=this.rn[o].result.naviDescriptionsData.length}var d=h;if(this.en)for(var b=e.length-2;0<=b;b--)e[b].remain>=d.remain&&e[b].remain<this.en.remain&&(e[b].distance<=d.distance||Math.abs(4<=d.insertIndex-this.en.insertIndex)&&d.buildingIndex==this.en.buildingIndex)&&(d=e[b]);return d.time=t.time,this.sn=t,d.remain<.5?this.en=null:this.en=d,d}}},{key:"pathConstraint",value:function(t,i){return this.Yt?this.Yt.pathConstraint(t,i):null}},{key:"locate",value:function(t,i){this.ai&&this.stop(),this.an(t,i),this.sn=t}},{key:"locateNoConstraint",value:function(t,i){this.ai&&this.stop(),this.fn(t,i),this.sn=t}},{key:"clearLocationMarker",value:function(){this.Hi&&(this.Hi.remove(),this.Hi=null)}},{key:"clearMarkers",value:function(){this.cn&&(this.cn.remove(),this.cn=null,this.Gi=null),this.ln&&(this.ln.remove(),this.ln=null,this.Qi=null)}},{key:"drawNaviLine",value:function(t){if(this.Gi&&this.Qi)return this.vn=this.yn(this.dn,t),this.vn}},{key:"clearNaviLine",value:function(){this.vn&&(this.vn.remove(),this.vn=null)}},{key:"clearAll",value:function(){this.clearMarkers(),this.clearNaviLine(),this.clearLocationMarker()}},{key:"overview",value:function(t,i){var n=this;if(0!==this.dn.length){for(var e=new W,r=[],s=0;s<this.dn.length;s++)!function(){var i=[Number.MAX_VALUE,-Number.MAX_VALUE];n.dn[s].resultbuild.forEach(function(t){i[0]=Math.min(i[0],t.level),i[1]=Math.max(i[1],t.level),e.L(t.pointList)}),r.push({bid:n.dn[s].bid,levelRange:i})}();this.bn(t,e,r,i)}}},{key:"focusNaviLineSegment",value:function(t,i,n){if(0!=this.rn.length){for(var e,r,s,h=null,o=null,u=0;u<this.rn.length;u++){var a=this.rn[u].result.naviDescriptionsData;if(t-a.length<0){h=a[t],o=this.rn[u].bid;break}t-=a.length}o&&h&&((e=new W).L([h.startPoint,h.endPoint]),r=[Math.min(h.startLevel,h.endLevel),Math.max(h.startLevel,h.endLevel)],s=this.Ft.getBuilding(o),this.bn(i,e,r,s,n))}}},{key:"simulate",value:function(t){var i,n,e=this;this.Gi&&this.Qi&&0!==this.dn.length&&(this.ai&&this.stop(),this.ai=!0,this.Xi(t),i={},this.pi=!1,this.Mi=this.Ft.getRotation(),n=i.Ut||this.Ut,i.qt=i.qt||this.qt||0,this.mn(),this.Hi.rotateTo({heading:-this.Mi}),this.Vt?this.pn(this.Gi.level,this.Gi.buildingID,n,function(){e.ai&&e.Mn(e.Gi,n,function(){var t;e.ai&&(t=i.qt>e.Wt?e.Wt:i.qt,e.Qt?e.kn(e.Kt,n,function(){e.ai&&e.gn(t,n,function(){e.ai&&e.wn()})}):e.gn(t,n,function(){e.ai&&e.wn()}))})}):this.ai&&this.wn())}},{key:"pause",value:function(){this.ci=!0}},{key:"resume",value:function(){this.ci=!1}},{key:"stop",value:function(){this.ui=!0,this.Bi.stop(),this._n&&this.Ft.off("update",this._n),this.ci=!1,this.mi=null,this.ki=null,this.yi=0,this.pi=!1,this._i=null,this.Si=0,this.gi=!1,this.wi=!1,this._n=null,this.ai=!1,this.fi=!1,this.li=0,this.vi=0,this.bi=null,this.en=null}},{key:"getSpeed",value:function(){return this.Bt}},{key:"setSpeed",value:function(t){this.Bt=t}},{key:"addZoomCircle",value:function(t){if(0!=t.length){var i,n=null==t[0].buildingID?null:t[0].buildingID;this.Ai.has(n)?i=this.Ai.get(n):(i=new Map,this.Ai.set(n,i));for(var e,r=0;r<t.length;r++)i.has(t[r].level)||i.set(t[r].level,[]),(e=i.get(t[r].level)).push.apply(e,Mt(t[r].circle))}}},{key:"stopZoomCircle",value:function(){this.Pi=!1}},{key:"constraintTrack",value:function(t){return this.Yt.constraintTrack(t)}},{key:"setLineFillMode",value:function(t){this.Ni=t}},{key:"setPassedLineDistance",value:function(t){this.vn&&this.Ni==h.SpecifiedDistance&&this.vn.moveProportion(t/this.nn)}}])&&wt(t.prototype,n),e&&wt(t,e),Object.defineProperty(t,"prototype",{writable:!1}),i}(),_t=(Object.assign(t.prototype,{Xi:function(t){t&&(void 0!==t.map&&(this.Ft=t.map),void 0!==t.analyser&&(this.Yt=t.analyser),void 0!==t.speed&&(this.Bt=t.speed),void 0!==t.followSpeed&&(this.Zt=t.followSpeed),void 0!==t.followPosition&&(this.Vt=t.followPosition),void 0!==t.followAngle&&(this.Xt=t.followAngle),void 0!==t.locationMarkerFollowAngle&&(this.zt=t.locationMarkerFollowAngle),void 0!==t.isMultiLevels&&(this.Ht=t.isMultiLevels),void 0!==t.inTime&&(this.Ut=t.inTime),void 0!==t.tiltAngle&&(this.Kt=t.tiltAngle),void 0!==t.changeFloorTiltAngle&&(this.Gt=t.changeFloorTiltAngle),void 0!==t.changeTiltAngle&&(this.Qt=t.changeTiltAngle),void 0!==t.zoom&&(this.qt=t.zoom),void 0!==t.maxZoom&&(this.Wt=t.maxZoom),void 0!==t.extendScale&&(this.$t=t.extendScale),void 0!==t.locationMarker&&(this.Jt=t.locationMarker),void 0!==t.locationMarkerUrl&&(this.ti=t.locationMarkerUrl),void 0!==t.locationMarkerSize&&(this.ii=t.locationMarkerSize),void 0!==t.locationMarkerHeight&&(this.ni=t.locationMarkerHeight),void 0!==t.lineMarkerHeight&&(this.ei=t.lineMarkerHeight),void 0!==t.imageMarkerHeight&&(this.ri=t.imageMarkerHeight),void 0!==t.directionAssert&&(this.si=t.directionAssert),void 0!==t.combineAsset&&(this.hi=t.combineAsset),void 0!==t.completeDistance&&(this.oi=t.completeDistance),void 0!==t.Ei&&(this.si=t.directionAssert),void 0!==t.mode&&(this.Oi=t.mode),void 0!==t.priority&&(this.Ri=t.priority),void 0!==t.toDoors&&(this.Ti=t.toDoors),void 0!==t.obstruct&&(this.ji=t.obstruct),void 0!==t.viapoints&&(this.xi=t.viapoints),void 0!==t.barrierFree&&(this.Ii=t.barrierFree),void 0!==t.lineStyle&&Object.assign(this.Ci,t.lineStyle),void 0!==t.linePassed&&(this.Fi=t.linePassed),void 0!==t.lineFillMode)&&(this.Ni=t.lineFillMode)},zi:function(){1===this.Nt?this.Sn=void 0!==this.Zi.FMNaviDriveAnalyser&&this.Yt instanceof this.Zi.FMNaviDriveAnalyser:this.Sn=void 0!==this.Zi.FMNaviAnalyser&&(this.Yt instanceof this.Zi.FMNaviAnalyser||this.Yt instanceof this.Zi.FMNaviWalkAnalyser),this.Gi=null,this.Qi=null,this.cn=null,this.ln=null,this.Hi=null,this._n=null,this.Wi()},En:function(t){t=(this.Ft.getBuilding(t.buildingID)||this.Ft).getFloor(t.level);this.Hi.addTo(t)},mn:function(){!this.Hi&&this.Jt?this.Hi=this.Jt:this.Hi||this.Jt||(this.Hi=new this.Zi.FMLocationMarker({id:"location",buildingID:this.Gi.buildingID,level:this.Gi.level,x:this.Gi.x,y:this.Gi.y,url:this.ti||"",size:this.ii,height:this.ni})),this.Hi instanceof this.Zi.FMLocationMarker?this.Hi.addTo(this.Ft):this.Hi.type==mt.DYNAMIC_MODEL_MARKER&&this.En(this.Gi),this.Hi.moveTo({buildingID:this.Gi.buildingID,level:this.Gi.level,x:this.Gi.x,y:this.Gi.y})},On:function(t){for(var i,n=arguments.length<=1?0:arguments.length-1,e=0;e<n;e++){var r=e+1<1||arguments.length<=e+1?void 0:arguments[e+1];if(t[r])return t[r]}return(i=(arguments.length<=1?0:arguments.length-1)-1+1)<1||arguments.length<=i?void 0:arguments[i]},Rn:function(t){if(this.Gi&&this.Qi)return t==this.Gi.level||t==this._detData.level},Wi:function(){this.Ui=null,this.Tn=[],this.jn=[],this.dn=[],this.xn=[],this.rn=[],this.Ji=[],this.In=[],this.Ln=[],this.nn=0,this.An=[],this.en=null,this.sn=null},qi:function(t,i){if(t.level){var n=t.url||(i?"image/small/marker/nav_location_start.png":"image/small/marker/nav_location_dest.png"),e=i?this.cn:this.ln,r=(e&&e.remove(),(null!=t.buildingID?this.Ft.getBuilding(t.buildingID):this.Ft).getFloor(t.level));if(r)return(e=new this.Zi.FMImageMarker(Object.assign({map:this.Ft,url:n,callback:function(){t.callback&&t.callback(e)},anchor:bt.BOTTOM,depth:!1,collision:!1},t))).addTo(r),i?this.cn=e:this.ln=e,e}},$i:function(t,i,n){var e=this;this.Gi&&this.Qi&&(t=Object.assign({start:Object.assign({},this.Gi),dest:Object.assign({},this.Qi)},t),this.Pn(t,function(t){e.Ui=t,e.Nn(),e.crossCircles=e.Cn(e.dn,e.Ai),e.Dn(),e.Fn(),e.Yn(),e.tn(),i&&i(t)},function(t){n&&n(t)}))},Nn:function(){if(this.Ui&&this.Ui.subs&&0!=this.Ui.subs.length){for(var t=this.Ui.subs[0].buildingID,i=[],n=[],e=[],r=0;r<this.Ui.subs.length;r++){var s=this.Ui.subs[r];s.buildingID!==t&&(e.push({bid:t,result:i}),i=[],t=s.buildingID),i.push(s),r==this.Ui.subs.length-1&&e.push({bid:t,result:i})}for(var h=0;h<e.length;h++){var o=this.Bn(e[h].result);n.push({bid:e[h].bid,resultbuild:o})}this.Tn=e,this.dn=n}},Bn:function(t){for(var i=[],n=Number.NaN,e=null,r=0;r<t.length;r++){var s,h=t[r];n!=h.levels[0]&&((e={length:0,level:h.levels[0],pointList:[]}).pointList.push(h.waypoint.points[0]),i.push(e),n=h.levels[0]),h.levels[0]==h.levels[1]?((s=e.pointList).push.apply(s,Mt(h.waypoint.points.slice(1))),e.length+=h.distance):(e={length:0,level:h.levels[0],pointList:[h.waypoint.points[0]]},i.push(e),e={length:0,level:h.levels[1],pointList:[h.waypoint.points[1]]},i.push(e))}return i},Dn:function(){for(var t=0;t<this.dn.length;t++){var i=this.dn[t].resultbuild;this.Vn(i)}},Vn:function(t){for(var i=0;i<t.length-1;i++){var n,e,r=t[i];r.length&&(n=r.pointList[r.pointList.length-1],e=t[i+1].pointList[0],.2<w.$(n,e))&&r.pointList.push(Object.assign({},e))}},Fn:function(){for(var t=0;t<this.dn.length;t++){var i=this.dn[t].resultbuild,i=this.Zn(i);this.xn.push({bid:this.dn[t].bid,groupsPoints:i})}},Zn:function(t){for(var i=[],n=null,e=null,r=0;r<t.length;r++){var s=t[r],h=n==s.level;0==s.length&&0!=r&&r!=t.length-1||(h||(n=s.level,e&&i.push(e),e={level:s.level,pointList:[]}),e.pointList=e.pointList.concat(s.pointList))}return e&&i.push(e),i},Yn:function(){if(this.Ui)for(var t=0;t<this.Tn.length;t++){var i=this.Tn[t].bid,n=this.Tn[t].result,n=this.Ki(n);this.rn.push({bid:i,result:n}),this.nn+=n.naviDistance}},Ki:function(t){if(t){for(var i=[],n=[],e=[],r=0,s=this.Ei,h=t,o=0,u=null,a=0;a<h.length;a++){var f=h[a],c=f.waypoint.points,l=f.waypoint.direction[s],l=(i.push(f.instruction[s]),{startDirection:l[0],startIndex:void 0,startLevel:f.levels[0],startPoint:c[0],endDirection:l[1],endIndex:void 0,endLevel:f.levels[1],endPoint:c.slice(-1)[0],distance:f.distance});f.levels[0]==f.levels[1]?(l.startIndex=o,o+=c.length-1,l.endIndex=o):o=0,n.push(l),null!=u&&f.levels[0]==f.levels[1]||(u={level:f.levels[1],distance:0},e.push(u)),u.distance+=f.distance,r+=f.distance}return{naviDescriptions:i,naviDescriptionsData:n,naviFloorsDistance:e,naviDistance:r}}},tn:function(){if(this.Tn){for(var t=0,i=[],n=0;n<this.Tn.length;n++){for(var e=this.Tn[n].result,r=this.Tn[n].bid,s=this.Xn(e),h=this.zn(e),o=0;o<s.length;o++)s[o].index+=t;for(var u=0;u<h.length;u++)h[u].index+=t;var a=this.rn[n].result.naviDistance;t+=e.length,i.push({bid:r,distance:a,naviPoints:s,naviSubPoints:h})}this.Ji=i}},Xn:function(t){if(!t)return[];for(var i=[],n=t,e=0;e<n.length;e++){var r=n[e];if(r.levels[0]==r.levels[1])for(var s=e+1==n.length?null:n[e+1],h=r.waypoint.points,o=null==s||s.levels[0]!=s.levels[1]?h.length:h.length-1,u=0;u<o;u++){var a={x:h[u].x,y:h[u].y,z:0,level:r.levels[0],index:e};i.push(a)}}return i},zn:function(t){if(!t)return[];for(var i=[],n=t,e=0;e<n.length;e++){var r=n[e].waypoint.points,s={x:r[0].x,y:r[0].y,level:r[0].level,index:e};i.push(s),e==n.length-1&&(s={x:r.slice(-1)[0].x,y:r.slice(-1)[0].y,level:r.slice(-1)[0].level,index:n.length},i.push(s))}return i},Hn:function(t,i){var n=null;if(0!=t.length){for(var e=[],r=0;r<t.length;)t[r].distance==i&&e.push(t[r]),r+=1;if(1<e.length){for(var s=0;s<e.length;s++)if(0<=e[s].relDirection){n=e[s];break}n=n||e[0]}else 1==e.length&&(n=e[0])}return n},un:function(t){if(-1!=t.buildingIndex&&-1!==t.insertIndex){for(var i,n,e=t.buildingIndex,r=this.Ji[e].naviPoints,s=0,h=r.length-1;h>t.insertIndex;h--)h-1>=t.insertIndex&&(i=r[h],n=r[h-1],i.level===n.level)&&(s+=w.$(i,n));r[t.insertIndex]&&r[t.insertIndex].level===t.coords.level&&(s+=w.$(r[t.insertIndex],t.coords));for(var o=e+1;o<this.Ji.length;o++)s+=this.Ji[o].distance;t.remain=s}},yn:function(t,i){var r=this;if(0===t.length)return null;1!==this.Nt||this.Ci.hasOwnProperty("color")||(this.Ci.color=this.Di);for(var n=Object.assign({},this.Ci),s=(i&&i.style&&Object.assign(n,i.style),i&&i.height?i.height:this.ei),h=[],e=0;e<t.length;e++)for(var o=t[e].bid,u=t[e].resultbuild,a=0;a<u.length;a++)!function(){var t=u[a],i=t.pointList;if(0===i.length)return;var t=t.level,n=[],e=(i.forEach(function(t){var i=parseFloat(""+t.x),t=parseFloat(""+t.y);n.push({x:i,y:t,z:s})}),i.length<2&&(e=parseFloat(""+i[0].x),i=parseFloat(""+i[0].y),n.push({x:e,y:i,z:s})),new r.Zi.FMSegment);e.level=t,e.points=n,e.buildingID=o,h.push(e)}();n=new this.Zi.FMLineMarker(Object.assign({segments:h},n));return n.passed=i&&null!=i.passed?i.passed:this.Fi,n.addTo(this.Ft),n},Pn:function(t,i,n){var e=this;this.Yt.route(t,function(t){e.Ti&&t.door&&(e.Qi.x=t.door.x,e.Qi.y=t.door.y),i&&i(t)},function(t){n&&n(t)})},Mn:function(t,i,n){this.Ft.setCenter({x:t.x,y:t.y,animate:"number"==typeof i,duration:"number"==typeof i?i:0,finish:n})},kn:function(t,i,n){this.Ft.setTilt({tilt:t,animate:"number"==typeof i,duration:"number"==typeof i?i:0,finish:n})},Un:function(t,i,n){this.Ft.setRotation({rotation:t,animate:"number"==typeof i,duration:"number"==typeof i?i:0,finish:n})},gn:function(t,i,n){this.Ft.setZoom({zoom:t,animate:"number"==typeof i,duration:"number"==typeof i?i:0,finish:n},!0)},pn:function(t,i,n,e){var r,i=null==i?((r=this.Ft).setVisibleLevels([t]),r.getLevel()):((r=this.Ft.getBuilding(i)).setVisibleLevels([t]),r.level);return i==t?(e&&e(),null):r.setLevel({level:t,animate:"number"==typeof n,duration:"number"==typeof n?n:0,finish:e})},Kn:function(t){var i=this.jn;if(0===i.length)return[];for(var n=[],e=0,r=0;r<i.length;r++){var s=i[r];if(!(s.pointList.length<=1))for(var h=s.level,o=0;o<s.pointList.length;o++){for(var u=s.pointList[o],u=new c(u.x,0,u.y),a=(u.level=h,-1),f=1;f<t.length;f++)if(e<t[f].Gn){a=t[f-1].qn;break}u.qn=-1!==a?a:t[t.length-1].qn,n.push(u),e++}}return n},Qn:function(t,i){if(0===i)return t[0];for(var n,e,r=0,s=0,h=t[0],o=1;o<t.length;o++)if((n=t[o]).bid!==h.bid)h=n;else if(n.level!==h.level)h=n;else{if(i<=(r+=(e=n.clone().sub(h)).length()))return e.normalize(),(e=h.clone().add(e.clone().multiplyScalar(i-s))).level=n.level,e.index=n.qn!=h.index?h.index:n.qn,e.bid=(n.bid!=h.bid?h:n).bid,e;(h=n.clone()).level=n.level,h.index=n.qn,h.bid=n.bid,s=r}var u=t[t.length-1];return u.index=u.qn,u.bid=u.bid,u},Wn:function(t){var e,r,s,i,n;return t&&0!==t.length?(r=0,s=e=-1,t=t.map(function(t,i){var n=new c(t.startPoint.x,0,t.startPoint.y);return n.level=t.startLevel,n.qn=i,e=i,t.startLevel!==t.endLevel?(r+=s,n.Gn=r,r++):n.Gn=t.startIndex+r,s=t.endIndex,n}),i=this._naviDescriptionsData[this._naviDescriptionsData.length-1],(n=new c(i.endPoint.x,0,i.endPoint.y)).level=i.endLevel,n.qn=e+1,n.Gn=i.endIndex+r,t.push(n),t):[]},$n:function(t){var i,n,e,r=this;this.Hi&&(this.wi?(i={x:t.x,y:t.y,height:this.Hi.height,level:t.level,buildingID:t.bid},this.Hi.moveTo(i),this.wi=!1):(n=(i={}).Ut||this.Ut,i.qt=i.qt||this.qt||0,e=i.qt>this.Wt?this.Wt:i.qt,this.Ht||(this.Jn(t),this.Hi.visible=!0),this.Qt&&this.kn(this.Kt,n,null),this.Mn(t,n,function(){r.gn(e,n,function(){r.gi=!1})})))},te:function(t){this.Hi&&(this.Jn(t),this.wi=!1)},hn:function(t,i){var n=new c(0,0,1),t=new c(t.x,0,t.y),i=new c(i.x,0,i.y).clone().sub(t).normalize(),t=i.angleTo(n)*w.C();return 0<i.clone().cross(n).y?360-t:t},ie:function(t,i,n){return t===i?t:(180<Math.abs(i-t)&&(t<i?t+=360:i+=360),(t*(1-n)+i*n)%360)},ne:function(t,i){var n=this.Dt,e=Math.floor(t),r=n[e-1]*(1-t%1)+n[e]*(t%1);for(r*=i,e=0;r<n[e];)e++;return e+1-(r-n[e])/(n[e-1]-n[e])},ee:function(t){var i,n,e;this.ui||dt.window.requestAnimationFrame(this.ee.bind(this,t)),this.fi||(t.cnt++,t.cnt!==t.step)||(t.cnt=0,i=this.Bi.getDelta(),this.wi)||this.gi||this.ci||(this.yi+=this.Bt*i,this.yi<=0)||this.Bt*i==0||(i=Object.assign({},this.Qn(t.ps,this.yi)),n=this.nn-this.yi,e=i.y,i.y=i.z,i.z=e,this.bi={distance:0,remain:n<this.di?this.di:n,walk:this.yi,point:i,level:i.level,buildingID:i.bid,index:i.index-1},null!=this.mi&&(this.ki=this.hn(this.mi,i)),this.mi=Object.assign({},i),!i||n<this.di&&this.pi?this.fi=!0:(n<this.di&&!this.pi&&(this.pi=!0),this.Si||(this.Si=t.ps[0].level),null==this._i&&(this._i=t.ps[0].bid||"outdoor"),this.ai&&(e=i.bid||"outdoor",this._i!==e?(this.wi=!0,this._i=e,this.li++,this.vi=0,this.Si=i.level,this.re(1,i),this.Vi.k({type:"transit",level:i.level,buildingID:i.bid})):this.Si!==i.level&&(this.Si=i.level,this.vi++,this.re(0,i),this.Vi.k({type:"transit",level:i.level,buildingID:i.bid})))))},re:function(t,i){var n=this;if(this.Vt){var e={},r=e.Ut||this.Ut,s=(e.qt=e.qt||this.qt||0,e.qt>this.Wt?this.Wt:e.qt);if(1===t)return this.se(i.level,i.bid,function(){n.pn(i.level,i.bid,r,function(){n.$n(i)})});this.gi=!0,this.Qt&&this.kn(this.Gt,r,null),this.Ht||(this.Hi.visible=!1),this.se(i.level,i.bid,function(){n.pn(i.level,i.bid,r,function(){n.gn(s,r,function(){n.Mn(i,r,function(){n.Qt?n.kn(n.Kt,r,function(){n.$n(i)}):n.$n(i)})})})})}else if(1===t)return this.se(i.level,i.bid,function(){n.$n(i)})},he:function(){this.ui=!1;for(var t=[],i=0;i<this.Ji.length;i++){for(var n=this.Ji[i].naviPoints,e=[],r=0;r<n.length;r++){var s=new c(n[r].x,0,n[r].y);s.qn=n[r].index,s.level=n[r].level,s.bid=this.Ji[i].bid,e.push(s)}t.push.apply(t,e)}this.Bi.start(),this.fi=!1,this.li=0,this.vi=0,this.ee({step:2,cnt:0,ps:t})},oe:function(){if(!(this.gi||this.wi||this.ci)){if(this.mi){var t,i,n=new c(this.Hi.x,this.Hi.y,0).lerp(this.mi,this.pi?1:this.Zt),e=(n.level=this.mi.level,n.buildingID=this.mi.bid,this.naviConstraint(n,this.mi.index));if(e.index<0)return;if(this.Hi.moveTo({x:n.x,y:n.y,height:this.ni,level:n.level,buildingID:n.buildingID}),this.vn&&(this.vn.passed?this.vn.moveProportion(1-e.remain/this.nn):this.vn.moveProportion(0)),this.Pi)for(var r=0;r<this.crossCircles.length;r++)e.coords.buildingID==this.crossCircles[r].bid&&e.coords.level==this.crossCircles[r].level&&e.remain<=this.crossCircles[r].point.remain&&e.remain>=this.crossCircles[r].remain&&(t=!0,i=this.crossCircles[r].point);if(this.Vi.k(Object.assign({},this.bi,this.ue(e,t,i))),t=!1,i=null,this.Vt?this.Mn(n):this.Ft.updateCountDown_=0,this.fi)return this.stop(),void this.Vi.k({type:"complete"})}null!=this.ki&&(n=this.ie(this.Mi,this.ki,this.Zt),this.Mi=n,this.Hi.rotateTo({heading:-n}),this.Xt)&&this.Un(n)}},wn:function(){this.he(),this._n=this.oe.bind(this),this.Ft.on("update",this._n)},an:function(t,i){this.en=null;var n,e,r=this.naviConstraint(t);if(this.Ni==h.Auto&&this.vn&&(this.vn.passed?this.vn.moveProportion(1-r.remain/this.nn):this.vn.moveProportion(0)),this.Pi)for(var s=0;s<this.crossCircles.length;s++)r.coords.buildingID==this.crossCircles[s].bid&&r.coords.leve==this.crossCircles[s].level&&r.remain<=this.crossCircles[s].point.remain&&r.remain>=this.crossCircles[s].remain&&(n=!0,e=this.crossCircles[s].point);this.Vi.k(this.ue(r,n,e)),n=!1,e=null,this.Hi&&(r.coords.height=this.ni,this.Hi.moveTo(r.coords),void 0!==i?this.Hi.rotateTo({heading:i}):this.Hi.rotateTo({heading:-r.angle}))},fn:function(t,i){var n,e,r=this.naviConstraint(t);if(this.Pi)for(var s=0;s<this.crossCircles.length;s++)r.coords.buildingID==this.crossCircles[s].bid&&r.coords.leve==this.crossCircles[s].level&&r.remain<=this.crossCircles[s].point.remain&&r.remain>=this.crossCircles[s].remain&&(n=!0,e=this.crossCircles[s].point);this.Vi.k(this.ue(r,n,e)),n=!1,e=null,this.Hi&&(t.height=this.ni,this.Hi.moveTo(t),void 0!==i?this.Hi.rotateTo({heading:i}):this.Hi.rotateTo({heading:-r.angle}))},ae:function(t,i){for(var n=[{x:t.min.x,y:t.min.y},{x:t.min.x,y:t.max.y},{x:t.max.x,y:t.max.y},{x:t.max.x,y:t.min.y}],e=new W,r=0;r<i.length;r++)for(var s=i[r].levelRange,h=0;h<s.length;h++)for(var o=0,o=h===s.length-1?this.ei+2*this.Ci.radius:this.ei,u=0;u<n.length;u++){var a=this.Zi.FMUtil.coordsMapToScreen(this.Ft,{x:n[u].x,y:n[u].y,buildingID:i[r].bid,level:s[h],height:o});a&&e.L([a])}return e},fe:function(t,i){var t=this.ae(t,i).size,i=this.Ft.getContainer().clientHeight,n=this.Ft.getContainer().clientWidth;return n/i>t.x/t.y?t.y/i:t.x/n},ce:function(t,i,n,e,r,s){var h=this,o=this.fe(t,i),u=this.Ft.getZoom();o?(u=this.ne(this.Ft.getZoom(),o*(n||1)),r=e-1):u-=1,this.Ft.setZoom({zoom:u,animate:!1,finish:function(){++r===e?s&&s({zoom:u}):h.ce(t,i,n,e,r,s)}})},le:function(t,i){for(var n=this.ae(t,i),e=[],r=0;r<i.length;r++)for(var s=i[r].levelRange,h=i[r].bid||this.Ft.getMapOptions().buildingID,o=0;o<s.length;o++){var u=this.Ft.getBuilding(h).getFloor(s[o]).height;e.push(this.Zi.FMUtil.coordsScreenToMap(this.Ft,{x:(n.max.x+n.min.x)/2,y:(n.max.y+n.min.y)/2,z:u+2*this.Ci.radius}))}for(var a=new c,f=0;f<e.length;f++)a.add(e[f]);return a.divideScalar(e.length),a},ve:function(n,e,r,s,h,o){var u=this;this.ce(n,e,r,10,0,function(t){var i=u.le(n,e);u.Ft.setCenter({animate:!1,x:i.x,y:i.y,finish:function(){++h===s?o&&o({zoom:t.zoom,center:i}):u.ve(n,e,r,s,h,o)}})})},bn:function(t,s,h,o){for(var u=this,a=t&&void 0!==t.ratio?t.ratio:1,i=t&&void 0!==t.rotation?t.rotation:0,n=t&&void 0!==t.tilt?t.tilt:30,f=!t||void 0===t.animate||t.animate,e=1,r=[1],c=0;c<h.length;c++){for(var l=h[c].levelRange,v=[],y=l[0];y<=l[1];)v.push(y),y++;null==h[c].bid?e=(r=v)[Math.floor((v.length-1)/2)]:this.Ft.getBuilding(h[c].bid).setVisibleLevels(v)}this.Ft.setVisibleLevels(r,function(){u.Ft.setLevel({level:e,animate:f,finish:function(){var t=r.length%2==0?u.Ft.getFloorSpace()/2:0;u.Ft.getInteracations().controls.panAdd({x:0,y:t,z:0}),u.Ft.setCenter({animate:f,x:s.center.x,y:s.center.y,finish:function(){u.Ft.setTilt({tilt:n,animate:f,finish:function(){u.Ft.setRotation({rotation:i,animate:f,finish:function(){var i=u.Ft.getInteracations(),t=u.Ft.copyCamera(),n=i.copyControls(t),e=i.controls,r=u.Ft.camera;i.controls=n,u.Ft.camera=t,u.Ft.getInteracations().controls.update(),u.ve(s,h,a,10,0,function(t){i.controls=e,u.Ft.camera=r,n.dispose(),n=null,u.Ft.enableUpdateRender(),u.Ft.setZoom({animate:f,zoom:t.zoom,duration:.5}),u.Ft.setCenter({animate:f,x:t.center.x,y:t.center.y,duration:.5,finish:function(){o&&o()}})})}})}})}})}})})},se:function(t,i,n){if(null==t||null==i)return n&&n(),null;for(var e=this.Ft.getBuilding(i).levelChart,r=this.Ft.getVisibleLevels(),s=null,h=0;h<e.length;h++)if(h%2==1&&e[h]===t&&(s=e[h-1],r.indexOf(s)<0)){this.Ft.setVisibleLevels([s]);break}return null==s||this.Ft.getLevel()===s?(n&&n(),null):this.Ft.setLevel({level:s,animate:"number"==typeof duration,duration:"number"==typeof duration?duration:0,finish:n})},Cn:function(t,i){if(!i)return[];for(var n=0,e=0,r=[],s=0;s<t.length;s++)for(var h=t[s].resultbuild,o=0;o<h.length;o++)e+=h[o].length;for(var u=0;u<t.length;u++)for(var a=t[u].bid,f=t[u].resultbuild,c=0;c<f.length;c++){var l=f[c].level,v=f[c].pointList;if(0<c&&(n+=f[c-1].length),!(v.length<=1)&&(i.has(a)&&i.get(a).has(l)))for(var y=0,d=i.get(a).get(l),b=0;b<v.length;b++){0<b&&(y+=w.distance(v[b-1],v[b]));var m,p=pt(d);try{for(p.s();!(m=p.n()).done;){var M,k=m.value,g=this.ye(v,k,b);g&&(g.remain=0==b?e-(n+y):e-(n+y-g.disIntersectToPoint),M=e-(n+y-g.disCenterToPoint),r.push({center:k.center,radius:k.radius,remain:M,point:g,level:l,bid:a}))}}catch(t){p.e(t)}finally{p.f()}}}return r},ye:function(t,i,n){var e=0;if(0==n)return w.J(t[n],i.center)<=.001?Object.assign({disIntersectToCenter:disIntersectToCenter,disIntersectToPoint:e},t[n]):null;if(!(w.J(i.center,t[n-1])<=.001)&&w.tt(i.center,t[n-1],t[n])<=.001){var r,s=pt(i.points);try{for(s.s();!(r=s.n()).done;){var h=r.value;if(!w.G(h,i.center,t[n]))for(var o=n;0<o;o--)if(w.G(h,t[o-1],t[o])&&w.tt(h,t[o-1],t[o])<=.001){for(var u=[h],a=o;a<=n;a++)u.push(t[a]);for(var f=0;f<u.length-1;f++)e+=w.distance(u[f],u[f+1]);return h.disIntersectToPoint=e,h.disCenterToPoint=w.distance(i.center,t[n]),h}}}catch(t){s.e(t)}finally{s.f()}}return null},Jn:function(t){var t={x:this.Hi.x,y:this.Hi.y,height:this.Hi.height,level:t.level,buildingID:t.bid},i=this.xn[this.li].groupsPoints[this.vi];i&&i.pointList&&0<i.pointList.length&&(t=Object.assign(t,i.pointList[0])),this.Hi.moveTo(t)},ue:function(t,i,n){i={distance:t.distance,remain:t.remain,distanceToNext:t.distanceToNext,angle:t.angle,point:t.coords,level:t.coords.level,buildingID:t.coords.buildingID,index:t.index,enterCircle:i,intersect:n};return this.Nt===yt.Drive?(i.type="driving",i.drive=this.nn-t.remain):(i.type="walking",i.walk=this.nn-t.remain),i}}),t);function k(t){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function St(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,function(t){t=function(t,i){if("object"!=k(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===i?String:Number)(t);n=n.call(t,i||"default");if("object"!=k(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==k(t)?t:String(t)}(e.key),e)}}function Et(t,i,n){i=g(i);var e=t,i=Ot()?Reflect.construct(i,n||[],g(t).constructor):i.apply(t,n);if(i&&("object"===k(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");t=e;if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}function Ot(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Ot=function(){return!!t})()}function Rt(){return(Rt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,i,n){var e=function(t,i){for(;!Object.prototype.hasOwnProperty.call(t,i)&&null!==(t=g(t)););return t}(t,i);if(e)return(e=Object.getOwnPropertyDescriptor(e,i)).get?e.get.call(arguments.length<3?t:n):e.value}).apply(this,arguments)}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Tt(t,i){return(Tt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t})(t,i)}function _(t){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jt(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,function(t){t=function(t,i){if("object"!=_(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===i?String:Number)(t);n=n.call(t,i||"default");if("object"!=_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==_(t)?t:String(t)}(e.key),e)}}function xt(t,i,n){i=L(i);var e=t,i=It()?Reflect.construct(i,n||[],L(t).constructor):i.apply(t,n);if(i&&("object"===_(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");t=e;if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}function It(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(It=function(){return!!t})()}function S(){return(S="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,i,n){var e=function(t,i){for(;!Object.prototype.hasOwnProperty.call(t,i)&&null!==(t=L(t)););return t}(t,i);if(e)return(e=Object.getOwnPropertyDescriptor(e,i)).get?e.get.call(arguments.length<3?t:n):e.value}).apply(this,arguments)}function L(t){return(L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Lt(t,i){return(Lt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t})(t,i)}function A(t){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function At(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,function(t){t=function(t,i){if("object"!=A(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===i?String:Number)(t);n=n.call(t,i||"default");if("object"!=A(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==A(t)?t:String(t)}(e.key),e)}}function Pt(t,i,n){i=N(i);var e=t,i=Nt()?Reflect.construct(i,n||[],N(t).constructor):i.apply(t,n);if(i&&("object"===A(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");t=e;if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}function Nt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Nt=function(){return!!t})()}function P(){return(P="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,i,n){var e=function(t,i){for(;!Object.prototype.hasOwnProperty.call(t,i)&&null!==(t=N(t)););return t}(t,i);if(e)return(e=Object.getOwnPropertyDescriptor(e,i)).get?e.get.call(arguments.length<3?t:n):e.value}).apply(this,arguments)}function N(t){return(N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ct(t,i){return(Ct=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t})(t,i)}var Dt,Ft={FMNaviMode:F,FMNaviPriority:Y,FMLanguageType:B,FMPassedLineFillMode:h,FMNavigation:function(){var t,i=e,n=_t;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");function e(t,i,n){if(this instanceof e)return Et(this,e,[t,i,n]);throw new TypeError("Cannot call a class as a function")}return i.prototype=Object.create(n&&n.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),n&&Tt(i,n),i=e,(n=[{key:"on",value:function(t,i){Rt(g(e.prototype),"on",this).call(this,t,i)}},{key:"off",value:function(t,i){Rt(g(e.prototype),"off",this).call(this,t,i)}}])&&St(i.prototype,n),t&&St(i,t),Object.defineProperty(i,"prototype",{writable:!1}),e}(),FMNavigationDrive:function(){var t,i=e,n=_t;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");function e(t,i,n){if(this instanceof e)return t.type=yt.Drive,(t=xt(this,e,[t,i,n])).Bt=7,t.Zt=.2,t;throw new TypeError("Cannot call a class as a function")}return i.prototype=Object.create(n&&n.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),n&&Lt(i,n),i=e,(n=[{key:"on",value:function(t,i){S(L(e.prototype),"on",this).call(this,t,i)}},{key:"off",value:function(t,i){S(L(e.prototype),"off",this).call(this,t,i)}},{key:"locate",value:function(t,i){S(L(e.prototype),"locate",this).call(this,t,i)}},{key:"route",value:function(t,i,n){S(L(e.prototype),"route",this).call(this,t,i,n)}},{key:"locateNoConstraint",value:function(t,i){S(L(e.prototype),"locateNoConstraint",this).call(this,t,i)}},{key:"simulate",value:function(t){S(L(e.prototype),"simulate",this).call(this,t)}},{key:"naviResult",get:function(){return this.Ui}}])&&jt(i.prototype,n),t&&jt(i,t),Object.defineProperty(i,"prototype",{writable:!1}),e}(),FMNavigationWalk:function(){var t,i=e,n=_t;if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");function e(t,i,n){if(this instanceof e)return t.type=yt.Walk,Pt(this,e,[t,i,n]);throw new TypeError("Cannot call a class as a function")}return i.prototype=Object.create(n&&n.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),n&&Ct(i,n),i=e,(n=[{key:"on",value:function(t,i){P(N(e.prototype),"on",this).call(this,t,i)}},{key:"off",value:function(t,i){P(N(e.prototype),"off",this).call(this,t,i)}},{key:"route",value:function(t,i,n){P(N(e.prototype),"route",this).call(this,t,i,n)}}])&&At(i.prototype,n),t&&At(i,t),Object.defineProperty(i,"prototype",{writable:!1}),e}()},Yt=window.fengmap||{};for(Dt in Ft)Yt[Dt]=Ft[Dt];window.fengmap=Yt;D.default=Yt}],e={},r.m=n,r.c=e,r.d=function(t,i,n){r.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"de",{value:!0})},r.t=function(i,t){if(1&t&&(i=r(i)),8&t)return i;if(4&t&&"object"==typeof i&&i&&i.de)return i;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:i}),2&t&&"string"!=typeof i)for(var e in i)r.d(n,e,function(t){return i[t]}.bind(null,e));return n},r.n=function(t){var i=t&&t.de?function(){return t.default}:function(){return t};return r.d(i,"a",i),i},r.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},r.p="",r(r.s=0).default;function r(t){var i;return(e[t]||(i=e[t]={i:t,l:!1,exports:{}},n[t].call(i.exports,i,i.exports,r),i.l=!0,i)).exports}var n,e});