import{Matrix4}from"./chunk-MRJ2OBXY.js";import{FMType_default,Matrix3,Vector2}from"./chunk-46ABZHUX.js";import{FloatType,StaticDrawUsage}from"./chunk-2B2O43AG.js";import{Quaternion,Vector3,clamp,denormalize,generateUUID,normalize}from"./chunk-AGIEQDNA.js";import{toVec2}from"./chunk-2DLEF24H.js";import{__export}from"./chunk-6C3VEZWH.js";var Box3=class{constructor(t=new Vector3(1/0,1/0,1/0),e=new Vector3(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(r){this.makeEmpty();for(let t=0,e=r.length;t<e;t+=3)this.expandByPoint(_vector.fromArray(r,t));return this}setFromBufferAttribute(r){this.makeEmpty();for(let t=0,e=r.count;t<e;t++)this.expandByPoint(_vector.fromBufferAttribute(r,t));return this}setFromPoints(r){this.makeEmpty();for(let t=0,e=r.length;t<e;t++)this.expandByPoint(r[t]);return this}setFromCenterAndSize(t,e){e=_vector.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(e),this.max.copy(t).add(e),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(r,i=!1){r.updateWorldMatrix(!1,!1);var t=r.geometry;if(void 0!==t){var s=t.getAttribute("position");if(!0===i&&void 0!==s&&!0!==r.isInstancedMesh)for(let t=0,e=s.count;t<e;t++)!0===r.isMesh?r.getVertexPosition(t,_vector):_vector.fromBufferAttribute(s,t),_vector.applyMatrix4(r.matrixWorld),this.expandByPoint(_vector);else void 0!==r.boundingBox?(null===r.boundingBox&&r.computeBoundingBox(),_box.copy(r.boundingBox)):(null===t.boundingBox&&t.computeBoundingBox(),_box.copy(t.boundingBox)),_box.applyMatrix4(r.matrixWorld),this.union(_box)}var n=r.children;for(let t=0,e=n.length;t<e;t++)this.expandByObject(n[t],i);return this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y&&t.z>=this.min.z&&t.z<=this.max.z}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y&&t.max.z>=this.min.z&&t.min.z<=this.max.z}intersectsSphere(t){return this.clampPoint(t.center,_vector),_vector.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,r;return r=0<t.normal.x?(e=t.normal.x*this.min.x,t.normal.x*this.max.x):(e=t.normal.x*this.max.x,t.normal.x*this.min.x),0<t.normal.y?(e+=t.normal.y*this.min.y,r+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,r+=t.normal.y*this.min.y),0<t.normal.z?(e+=t.normal.z*this.min.z,r+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,r+=t.normal.z*this.min.z),e<=-t.constant&&r>=-t.constant}intersectsTriangle(t){return!this.isEmpty()&&(this.getCenter(_center),_extents.subVectors(this.max,_center),_v0.subVectors(t.a,_center),_v1.subVectors(t.b,_center),_v2.subVectors(t.c,_center),_f0.subVectors(_v1,_v0),_f1.subVectors(_v2,_v1),_f2.subVectors(_v0,_v2),!!satForAxes([0,-_f0.z,_f0.y,0,-_f1.z,_f1.y,0,-_f2.z,_f2.y,_f0.z,0,-_f0.x,_f1.z,0,-_f1.x,_f2.z,0,-_f2.x,-_f0.y,_f0.x,0,-_f1.y,_f1.x,0,-_f2.y,_f2.x,0],_v0,_v1,_v2,_extents))&&!!satForAxes([1,0,0,0,1,0,0,0,1],_v0,_v1,_v2,_extents)&&(_triangleNormal.crossVectors(_f0,_f1),satForAxes([_triangleNormal.x,_triangleNormal.y,_triangleNormal.z],_v0,_v1,_v2,_extents))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,_vector).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=.5*this.getSize(_vector).length()),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(_points[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),_points[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),_points[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),_points[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),_points[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),_points[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),_points[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),_points[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(_points)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}},_points=[new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3],_vector=new Vector3,_box=new Box3,_v0=new Vector3,_v1=new Vector3,_v2=new Vector3,_f0=new Vector3,_f1=new Vector3,_f2=new Vector3,_center=new Vector3,_extents=new Vector3,_triangleNormal=new Vector3,_testAxis=new Vector3;function satForAxes(r,i,s,n,a){for(let t=0,e=r.length-3;t<=e;t+=3){_testAxis.fromArray(r,t);var o=a.x*Math.abs(_testAxis.x)+a.y*Math.abs(_testAxis.y)+a.z*Math.abs(_testAxis.z),h=i.dot(_testAxis),u=s.dot(_testAxis),l=n.dot(_testAxis);if(Math.max(-Math.max(h,u,l),Math.min(h,u,l))>o)return!1}return!0}var EventDispatcher=class{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});var r=this._listeners;void 0===r[t]&&(r[t]=[]),-1===r[t].indexOf(e)&&r[t].push(e)}hasEventListener(t,e){var r;return void 0!==this._listeners&&void 0!==(r=this._listeners)[t]&&-1!==r[t].indexOf(e)}removeEventListener(t,e){var r;void 0!==this._listeners&&void 0!==(t=this._listeners[t])&&-1!==(r=t.indexOf(e))&&t.splice(r,1)}dispatchEvent(r){if(void 0!==this._listeners){var t=this._listeners[r.type];if(void 0!==t){r.target=this;var i=t.slice(0);for(let t=0,e=i.length;t<e;t++)i[t].call(this,r);r.target=null}}}},_vector2=new Vector3,_vector22=new Vector2,BufferAttribute=class{constructor(t,e,r=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=r,this.usage=StaticDrawUsage,this.updateRanges=[],this.gpuType=FloatType,this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(r,i,s){r*=this.itemSize,s*=i.itemSize;for(let t=0,e=this.itemSize;t<e;t++)this.array[r+t]=i.array[s+t];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(r){if(2===this.itemSize)for(let t=0,e=this.count;t<e;t++)_vector22.fromBufferAttribute(this,t),_vector22.applyMatrix3(r),this.setXY(t,_vector22.x,_vector22.y);else if(3===this.itemSize)for(let t=0,e=this.count;t<e;t++)_vector2.fromBufferAttribute(this,t),_vector2.applyMatrix3(r),this.setXYZ(t,_vector2.x,_vector2.y,_vector2.z);return this}applyMatrix4(r){for(let t=0,e=this.count;t<e;t++)_vector2.fromBufferAttribute(this,t),_vector2.applyMatrix4(r),this.setXYZ(t,_vector2.x,_vector2.y,_vector2.z);return this}applyNormalMatrix(r){for(let t=0,e=this.count;t<e;t++)_vector2.fromBufferAttribute(this,t),_vector2.applyNormalMatrix(r),this.setXYZ(t,_vector2.x,_vector2.y,_vector2.z);return this}transformDirection(r){for(let t=0,e=this.count;t<e;t++)_vector2.fromBufferAttribute(this,t),_vector2.transformDirection(r),this.setXYZ(t,_vector2.x,_vector2.y,_vector2.z);return this}set(t,e=0){return this.array.set(t,e),this}getComponent(t,e){let r=this.array[t*this.itemSize+e];return r=this.normalized?denormalize(r,this.array):r}setComponent(t,e,r){return this.normalized&&(r=normalize(r,this.array)),this.array[t*this.itemSize+e]=r,this}getX(t){let e=this.array[t*this.itemSize];return e=this.normalized?denormalize(e,this.array):e}setX(t,e){return this.normalized&&(e=normalize(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return e=this.normalized?denormalize(e,this.array):e}setY(t,e){return this.normalized&&(e=normalize(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return e=this.normalized?denormalize(e,this.array):e}setZ(t,e){return this.normalized&&(e=normalize(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return e=this.normalized?denormalize(e,this.array):e}setW(t,e){return this.normalized&&(e=normalize(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,r){return t*=this.itemSize,this.normalized&&(e=normalize(e,this.array),r=normalize(r,this.array)),this.array[t+0]=e,this.array[t+1]=r,this}setXYZ(t,e,r,i){return t*=this.itemSize,this.normalized&&(e=normalize(e,this.array),r=normalize(r,this.array),i=normalize(i,this.array)),this.array[t+0]=e,this.array[t+1]=r,this.array[t+2]=i,this}setXYZW(t,e,r,i,s){return t*=this.itemSize,this.normalized&&(e=normalize(e,this.array),r=normalize(r,this.array),i=normalize(i,this.array),s=normalize(s,this.array)),this.array[t+0]=e,this.array[t+1]=r,this.array[t+2]=i,this.array[t+3]=s,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){var t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),this.usage!==StaticDrawUsage&&(t.usage=this.usage),t}},Uint16BufferAttribute=class extends BufferAttribute{constructor(t,e,r){super(new Uint16Array(t),e,r)}},Uint32BufferAttribute=class extends BufferAttribute{constructor(t,e,r){super(new Uint32Array(t),e,r)}},Float32BufferAttribute=class extends BufferAttribute{constructor(t,e,r){super(new Float32Array(t),e,r)}},_box2=new Box3,_v12=new Vector3,_v22=new Vector3,Sphere=class{constructor(t=new Vector3,e=-1){this.isSphere=!0,this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(r,t){var i=this.center;void 0!==t?i.copy(t):_box2.setFromPoints(r).getCenter(i);let s=0;for(let t=0,e=r.length;t<e;t++)s=Math.max(s,i.distanceToSquared(r[t]));return this.radius=Math.sqrt(s),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){var r=this.center.distanceToSquared(t);return e.copy(t),r>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?t.makeEmpty():(t.set(this.center,this.center),t.expandByScalar(this.radius)),t}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){var e;return this.isEmpty()?(this.center.copy(t),this.radius=0):(_v12.subVectors(t,this.center),(t=_v12.lengthSq())>this.radius*this.radius&&(e=.5*((t=Math.sqrt(t))-this.radius),this.center.addScaledVector(_v12,e/t),this.radius+=e)),this}union(t){return t.isEmpty()||(this.isEmpty()?this.copy(t):!0===this.center.equals(t.center)?this.radius=Math.max(this.radius,t.radius):(_v22.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(_v12.copy(t.center).add(_v22)),this.expandByPoint(_v12.copy(t.center).sub(_v22)))),this}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}},_matrix=new Matrix4,_quaternion=new Quaternion,Euler=class xb{constructor(t=0,e=0,r=0,i=xb.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=e,this._z=r,this._order=i}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,r,i=this._order){return this._x=t,this._y=e,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,r=!0){var t=t.elements,i=t[0],s=t[4],n=t[8],a=t[1],o=t[5],h=t[9],u=t[2],l=t[6],c=t[10];switch(e){case"XYZ":this._y=Math.asin(clamp(n,-1,1)),Math.abs(n)<.9999999?(this._x=Math.atan2(-h,c),this._z=Math.atan2(-s,i)):(this._x=Math.atan2(l,o),this._z=0);break;case"YXZ":this._x=Math.asin(-clamp(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(n,c),this._z=Math.atan2(a,o)):(this._y=Math.atan2(-u,i),this._z=0);break;case"ZXY":this._x=Math.asin(clamp(l,-1,1)),Math.abs(l)<.9999999?(this._y=Math.atan2(-u,c),this._z=Math.atan2(-s,o)):(this._y=0,this._z=Math.atan2(a,i));break;case"ZYX":this._y=Math.asin(-clamp(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(l,c),this._z=Math.atan2(a,i)):(this._x=0,this._z=Math.atan2(-s,o));break;case"YZX":this._z=Math.asin(clamp(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-h,o),this._y=Math.atan2(-u,i)):(this._x=0,this._y=Math.atan2(n,c));break;case"XZY":this._z=Math.asin(-clamp(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(l,o),this._y=Math.atan2(n,i)):(this._x=Math.atan2(-h,c),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!0===r&&this._onChangeCallback(),this}setFromQuaternion(t,e,r){return _matrix.makeRotationFromQuaternion(t),this.setFromRotationMatrix(_matrix,e,r)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return _quaternion.setFromEuler(this),this.setFromQuaternion(_quaternion,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}},Layers=(Euler.DEFAULT_ORDER="XYZ",class{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!=(this.mask&t.mask)}isEnabled(t){return 0!=(this.mask&(1<<t|0))}}),_object3DId=0,_v13=new Vector3,_q1=new Quaternion,_m1=new Matrix4,_target=new Vector3,_position=new Vector3,_scale=new Vector3,_quaternion2=new Quaternion,_xAxis=new Vector3(1,0,0),_yAxis=new Vector3(0,1,0),_zAxis=new Vector3(0,0,1),_addedEvent={type:"added"},_removedEvent={type:"removed"},_childaddedEvent={type:"childadded",child:null},_childremovedEvent={type:"childremoved",child:null},Object3D=class n1 extends EventDispatcher{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:_object3DId++}),this.uuid=generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=n1.DEFAULT_UP.clone();var t=new Vector3;let e=new Euler,r=new Quaternion;var i=new Vector3(1,1,1);e._onChange(function(){r.setFromEuler(e,!1)}),r._onChange(function(){e.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Matrix4},normalMatrix:{value:new Matrix3}}),this.matrix=new Matrix4,this.matrixWorld=new Matrix4,this.matrixAutoUpdate=n1.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=n1.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return _q1.setFromAxisAngle(t,e),this.quaternion.multiply(_q1),this}rotateOnWorldAxis(t,e){return _q1.setFromAxisAngle(t,e),this.quaternion.premultiply(_q1),this}rotateX(t){return this.rotateOnAxis(_xAxis,t)}rotateY(t){return this.rotateOnAxis(_yAxis,t)}rotateZ(t){return this.rotateOnAxis(_zAxis,t)}translateOnAxis(t,e){return _v13.copy(t).applyQuaternion(this.quaternion),this.position.add(_v13.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(_xAxis,t)}translateY(t){return this.translateOnAxis(_yAxis,t)}translateZ(t){return this.translateOnAxis(_zAxis,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(_m1.copy(this.matrixWorld).invert())}lookAt(t,e,r){t.isVector3?_target.copy(t):_target.set(t,e,r);t=this.parent;this.updateWorldMatrix(!0,!1),_position.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_m1.lookAt(_position,_target,this.up):_m1.lookAt(_target,_position,this.up),this.quaternion.setFromRotationMatrix(_m1),t&&(_m1.extractRotation(t.matrixWorld),_q1.setFromRotationMatrix(_m1),this.quaternion.premultiply(_q1.invert()))}add(t){if(1<arguments.length)for(let t=0;t<arguments.length;t++)this.add(arguments[t]);else t===this?console.error("THREE.Object3D.add: object can't be added as a child of itself.",t):t&&t.isObject3D?(t.removeFromParent(),(t.parent=this).children.push(t),t.dispatchEvent(_addedEvent),_childaddedEvent.child=t,this.dispatchEvent(_childaddedEvent),_childaddedEvent.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t);return this}remove(t){if(1<arguments.length)for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);else{var e=this.children.indexOf(t);-1!==e&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(_removedEvent),_childremovedEvent.child=t,this.dispatchEvent(_childremovedEvent),_childremovedEvent.child=null)}return this}removeFromParent(){var t=this.parent;return null!==t&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),_m1.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),_m1.multiply(t.parent.matrixWorld)),t.applyMatrix4(_m1),t.removeFromParent(),(t.parent=this).children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(_addedEvent),_childaddedEvent.child=t,this.dispatchEvent(_childaddedEvent),_childaddedEvent.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(r,i){if(this[r]===i)return this;for(let t=0,e=this.children.length;t<e;t++){var s=this.children[t].getObjectByProperty(r,i);if(void 0!==s)return s}}getObjectsByProperty(r,i,s=[]){this[r]===i&&s.push(this);var n=this.children;for(let t=0,e=n.length;t<e;t++)n[t].getObjectsByProperty(r,i,s);return s}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position,t,_scale),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position,_quaternion2,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);var e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(r){r(this);var i=this.children;for(let t=0,e=i.length;t<e;t++)i[t].traverse(r)}traverseVisible(r){if(!1!==this.visible){r(this);var i=this.children;for(let t=0,e=i.length;t<e;t++)i[t].traverseVisible(r)}}traverseAncestors(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(r){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||r)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),r=!(this.matrixWorldNeedsUpdate=!1));var i=this.children;for(let t=0,e=i.length;t<e;t++)i[t].updateMatrixWorld(r)}updateWorldMatrix(t,e){var r=this.parent;if(!0===t&&null!==r&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===e){var i=this.children;for(let t=0,e=i.length;t<e;t++)i[t].updateWorldMatrix(!1,!0)}}toJSON(r){var t,e,i,s,n,a,o=void 0===r||"string"==typeof r,h={},u=(o&&(r={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},h.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"}),{});function l(t,e){return void 0===t[e.uuid]&&(t[e.uuid]=e.toJSON(r)),e.uuid}if(u.uuid=this.uuid,u.type=this.type,""!==this.name&&(u.name=this.name),!0===this.castShadow&&(u.castShadow=!0),!0===this.receiveShadow&&(u.receiveShadow=!0),!1===this.visible&&(u.visible=!1),!1===this.frustumCulled&&(u.frustumCulled=!1),0!==this.renderOrder&&(u.renderOrder=this.renderOrder),0<Object.keys(this.userData).length&&(u.userData=this.userData),u.layers=this.layers.mask,u.matrix=this.matrix.toArray(),u.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(u.matrixAutoUpdate=!1),this.isInstancedMesh&&(u.type="InstancedMesh",u.count=this.count,u.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor)&&(u.instanceColor=this.instanceColor.toJSON()),this.isBatchedMesh&&(u.type="BatchedMesh",u.perObjectFrustumCulled=this.perObjectFrustumCulled,u.sortObjects=this.sortObjects,u.drawRanges=this._drawRanges,u.reservedRanges=this._reservedRanges,u.visibility=this._visibility,u.active=this._active,u.bounds=this._bounds.map(t=>({boxInitialized:t.boxInitialized,boxMin:t.box.min.toArray(),boxMax:t.box.max.toArray(),sphereInitialized:t.sphereInitialized,sphereRadius:t.sphere.radius,sphereCenter:t.sphere.center.toArray()})),u.maxInstanceCount=this._maxInstanceCount,u.maxVertexCount=this._maxVertexCount,u.maxIndexCount=this._maxIndexCount,u.geometryInitialized=this._geometryInitialized,u.geometryCount=this._geometryCount,u.matricesTexture=this._matricesTexture.toJSON(r),null!==this._colorsTexture&&(u.colorsTexture=this._colorsTexture.toJSON(r)),null!==this.boundingSphere&&(u.boundingSphere={center:u.boundingSphere.center.toArray(),radius:u.boundingSphere.radius}),null!==this.boundingBox)&&(u.boundingBox={min:u.boundingBox.min.toArray(),max:u.boundingBox.max.toArray()}),this.isScene)this.background&&(this.background.isColor?u.background=this.background.toJSON():this.background.isTexture&&(u.background=this.background.toJSON(r).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(u.environment=this.environment.toJSON(r).uuid);else if(this.isMesh||this.isLine||this.isPoints){u.geometry=l(r.geometries,this.geometry);var c=this.geometry.parameters;if(void 0!==c&&void 0!==c.shapes){var d=c.shapes;if(Array.isArray(d))for(let t=0,e=d.length;t<e;t++){var m=d[t];l(r.shapes,m)}else l(r.shapes,d)}}if(this.isSkinnedMesh&&(u.bindMode=this.bindMode,u.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton)&&(l(r.skeletons,this.skeleton),u.skeleton=this.skeleton.uuid),void 0!==this.material)if(Array.isArray(this.material)){var p=[];for(let t=0,e=this.material.length;t<e;t++)p.push(l(r.materials,this.material[t]));u.material=p}else u.material=l(r.materials,this.material);if(0<this.children.length){u.children=[];for(let t=0;t<this.children.length;t++)u.children.push(this.children[t].toJSON(r).object)}if(0<this.animations.length){u.animations=[];for(let t=0;t<this.animations.length;t++){var x=this.animations[t];u.animations.push(l(r.animations,x))}}return o&&(c=v(r.geometries),o=v(r.materials),t=v(r.textures),e=v(r.images),i=v(r.shapes),s=v(r.skeletons),n=v(r.animations),a=v(r.nodes),0<c.length&&(h.geometries=c),0<o.length&&(h.materials=o),0<t.length&&(h.textures=t),0<e.length&&(h.images=e),0<i.length&&(h.shapes=i),0<s.length&&(h.skeletons=s),0<n.length&&(h.animations=n),0<a.length)&&(h.nodes=a),h.object=u,h;function v(t){var e,r=[];for(e in t){var i=t[e];delete i.metadata,r.push(i)}return r}}clone(t){return(new this.constructor).copy(this,t)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let t=0;t<e.children.length;t++){var r=e.children[t];this.add(r.clone())}return this}},FMEnvironmentType=(Object3D.DEFAULT_UP=new Vector3(0,1,0),Object3D.DEFAULT_MATRIX_AUTO_UPDATE=!0,Object3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,{BROWSER:0,WX:1}),FMEnvironmentType_default=(Object.freeze(FMEnvironmentType),FMEnvironmentType),Platform={document:"undefined"!=typeof document?document:{},window:"undefined"!=typeof window?window:{},environment:FMEnvironmentType.BROWSER,XMLHttpRequest:"undefined"!=typeof XMLHttpRequest?XMLHttpRequest:{}};function arrayNeedsUint32(e){for(let t=e.length-1;0<=t;--t)if(65535<=e[t])return!0;return!1}var _id=0,_m12=new Matrix4,_obj=new Object3D,_offset=new Vector3,_box3=new Box3,_boxMorphTargets=new Box3,_vector3=new Vector3,BufferGeometry=class y2 extends EventDispatcher{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:_id++}),this.uuid=generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(arrayNeedsUint32(t)?Uint32BufferAttribute:Uint16BufferAttribute)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e,r=0){this.groups.push({start:t,count:e,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){var e=this.attributes.position,e=(void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0),this.attributes.normal),r=(void 0!==e&&(r=(new Matrix3).getNormalMatrix(t),e.applyNormalMatrix(r),e.needsUpdate=!0),this.attributes.tangent);return void 0!==r&&(r.transformDirection(t),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return _m12.makeRotationFromQuaternion(t),this.applyMatrix4(_m12),this}rotateX(t){return _m12.makeRotationX(t),this.applyMatrix4(_m12),this}rotateY(t){return _m12.makeRotationY(t),this.applyMatrix4(_m12),this}rotateZ(t){return _m12.makeRotationZ(t),this.applyMatrix4(_m12),this}translate(t,e,r){return _m12.makeTranslation(t,e,r),this.applyMatrix4(_m12),this}scale(t,e,r){return _m12.makeScale(t,e,r),this.applyMatrix4(_m12),this}lookAt(t){return _obj.lookAt(t),_obj.updateMatrix(),this.applyMatrix4(_obj.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(_offset).negate(),this.translate(_offset.x,_offset.y,_offset.z),this}setFromPoints(r){var i=[];for(let t=0,e=r.length;t<e;t++){var s=r[t];i.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Float32BufferAttribute(i,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Box3);var t=this.attributes.position,r=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Vector3(-1/0,-1/0,-1/0),new Vector3(1/0,1/0,1/0));else{if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),r)for(let t=0,e=r.length;t<e;t++){var i=r[t];_box3.setFromBufferAttribute(i),this.morphTargetsRelative?(_vector3.addVectors(this.boundingBox.min,_box3.min),this.boundingBox.expandByPoint(_vector3),_vector3.addVectors(this.boundingBox.max,_box3.max),this.boundingBox.expandByPoint(_vector3)):(this.boundingBox.expandByPoint(_box3.min),this.boundingBox.expandByPoint(_box3.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Sphere);var i=this.attributes.position,s=this.morphAttributes.position;if(i&&i.isGLBufferAttribute)console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Vector3,1/0);else if(i){var n=this.boundingSphere.center;if(_box3.setFromBufferAttribute(i),s)for(let t=0,e=s.length;t<e;t++){var a=s[t];_boxMorphTargets.setFromBufferAttribute(a),this.morphTargetsRelative?(_vector3.addVectors(_box3.min,_boxMorphTargets.min),_box3.expandByPoint(_vector3),_vector3.addVectors(_box3.max,_boxMorphTargets.max),_box3.expandByPoint(_vector3)):(_box3.expandByPoint(_boxMorphTargets.min),_box3.expandByPoint(_boxMorphTargets.max))}_box3.getCenter(n);let r=0;for(let t=0,e=i.count;t<e;t++)_vector3.fromBufferAttribute(i,t),r=Math.max(r,n.distanceToSquared(_vector3));if(s)for(let t=0,e=s.length;t<e;t++){var o=s[t],h=this.morphTargetsRelative;for(let t=0,e=o.count;t<e;t++)_vector3.fromBufferAttribute(o,t),h&&(_offset.fromBufferAttribute(i,t),_vector3.add(_offset)),r=Math.max(r,n.distanceToSquared(_vector3))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){var b,A,w,z,S=this.index,t=this.attributes;if(null===S||void 0===t.position||void 0===t.normal||void 0===t.uv)console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");else{let r=t.position,i=t.normal,s=t.uv,n=(!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new BufferAttribute(new Float32Array(4*r.count),4)),this.getAttribute("tangent")),a=[],o=[];for(let t=0;t<r.count;t++)a[t]=new Vector3,o[t]=new Vector3;let h=new Vector3,u=new Vector3,l=new Vector3,c=new Vector2,d=new Vector2,m=new Vector2,p=new Vector3,x=new Vector3,v=this.groups;for(let t=0,e=(v=0===v.length?[{start:0,count:S.count}]:v).length;t<e;++t){var B=v[t],C=B.start;for(let t=C,e=C+B.count;t<e;t+=3)b=S.getX(t+0),A=S.getX(t+1),w=S.getX(t+2),z=void 0,h.fromBufferAttribute(r,b),u.fromBufferAttribute(r,A),l.fromBufferAttribute(r,w),c.fromBufferAttribute(s,b),d.fromBufferAttribute(s,A),m.fromBufferAttribute(s,w),u.sub(h),l.sub(h),d.sub(c),m.sub(c),z=1/(d.x*m.y-m.x*d.y),isFinite(z)&&(p.copy(u).multiplyScalar(m.y).addScaledVector(l,-d.y).multiplyScalar(z),x.copy(l).multiplyScalar(d.x).addScaledVector(u,-m.x).multiplyScalar(z),a[b].add(p),a[A].add(p),a[w].add(p),o[b].add(x),o[A].add(x),o[w].add(x))}let y=new Vector3,f=new Vector3,g=new Vector3,_=new Vector3;for(let t=0,e=v.length;t<e;++t){var M=v[t],V=M.start;for(let t=V,e=V+M.count;t<e;t+=3)P(S.getX(t+0)),P(S.getX(t+1)),P(S.getX(t+2))}function P(t){g.fromBufferAttribute(i,t),_.copy(g);var e=a[t],e=(y.copy(e),y.sub(g.multiplyScalar(g.dot(e))).normalize(),f.crossVectors(_,e),f.dot(o[t])),e=e<0?-1:1;n.setXYZW(t,y.x,y.y,y.z,e)}}}computeVertexNormals(){var i=this.index,s=this.getAttribute("position");if(void 0!==s){let r=this.getAttribute("normal");if(void 0===r)r=new BufferAttribute(new Float32Array(3*s.count),3),this.setAttribute("normal",r);else for(let t=0,e=r.count;t<e;t++)r.setXYZ(t,0,0,0);var n=new Vector3,a=new Vector3,o=new Vector3,h=new Vector3,u=new Vector3,l=new Vector3,c=new Vector3,d=new Vector3;if(i)for(let t=0,e=i.count;t<e;t+=3){var m=i.getX(t+0),p=i.getX(t+1),x=i.getX(t+2);n.fromBufferAttribute(s,m),a.fromBufferAttribute(s,p),o.fromBufferAttribute(s,x),c.subVectors(o,a),d.subVectors(n,a),c.cross(d),h.fromBufferAttribute(r,m),u.fromBufferAttribute(r,p),l.fromBufferAttribute(r,x),h.add(c),u.add(c),l.add(c),r.setXYZ(m,h.x,h.y,h.z),r.setXYZ(p,u.x,u.y,u.z),r.setXYZ(x,l.x,l.y,l.z)}else for(let t=0,e=s.count;t<e;t+=3)n.fromBufferAttribute(s,t+0),a.fromBufferAttribute(s,t+1),o.fromBufferAttribute(s,t+2),c.subVectors(o,a),d.subVectors(n,a),c.cross(d),r.setXYZ(t+0,c.x,c.y,c.z),r.setXYZ(t+1,c.x,c.y,c.z),r.setXYZ(t+2,c.x,c.y,c.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){var r=this.attributes.normal;for(let t=0,e=r.count;t<e;t++)_vector3.fromBufferAttribute(r,t),_vector3.normalize(),r.setXYZ(t,_vector3.x,_vector3.y,_vector3.z)}toNonIndexed(){function r(r,i){var s=r.array,n=r.itemSize,t=r.normalized,a=new s.constructor(i.length*n);let o=0,h=0;for(let t=0,e=i.length;t<e;t++){o=r.isInterleavedBufferAttribute?i[t]*r.data.stride+r.offset:i[t]*n;for(let t=0;t<n;t++)a[h++]=s[o++]}return new BufferAttribute(a,n,t)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;var t,i=new y2,s=this.index.array,e=this.attributes;for(t in e){var n=r(e[t],s);i.setAttribute(t,n)}var a,o=this.morphAttributes;for(a in o){var h=[],u=o[a];for(let t=0,e=u.length;t<e;t++){var l=r(u[t],s);h.push(l)}i.morphAttributes[a]=h}i.morphTargetsRelative=this.morphTargetsRelative;var c=this.groups;for(let t=0,e=c.length;t<e;t++){var d=c[t];i.addGroup(d.start,d.count,d.materialIndex)}return i}toJSON(){var r={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),0<Object.keys(this.userData).length&&(r.userData=this.userData),void 0!==this.parameters){var t,e=this.parameters;for(t in e)void 0!==e[t]&&(r[t]=e[t])}else{r.data={attributes:{}};var i,s=this.index,n=(null!==s&&(r.data.index={type:s.array.constructor.name,array:Array.prototype.slice.call(s.array)}),this.attributes);for(i in n){var a=n[i];r.data.attributes[i]=a.toJSON(r.data)}var o,h={};let t=!1;for(o in this.morphAttributes){var u=this.morphAttributes[o],l=[];for(let t=0,e=u.length;t<e;t++){var c=u[t];l.push(c.toJSON(r.data))}0<l.length&&(h[o]=l,t=!0)}t&&(r.data.morphAttributes=h,r.data.morphTargetsRelative=this.morphTargetsRelative);s=this.groups,s=(0<s.length&&(r.data.groups=JSON.parse(JSON.stringify(s))),this.boundingSphere);null!==s&&(r.data.boundingSphere={center:s.center.toArray(),radius:s.radius})}return r}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var e,r={},i=(this.name=t.name,t.index),s=(null!==i&&this.setIndex(i.clone(r)),t.attributes);for(e in s){var n=s[e];this.setAttribute(e,n.clone(r))}var a,o=t.morphAttributes;for(a in o){var h=[],u=o[a];for(let t=0,e=u.length;t<e;t++)h.push(u[t].clone(r));this.morphAttributes[a]=h}this.morphTargetsRelative=t.morphTargetsRelative;var l=t.groups;for(let t=0,e=l.length;t<e;t++){var c=l[t];this.addGroup(c.start,c.count,c.materialIndex)}i=t.boundingBox,null!==i&&(this.boundingBox=i.clone()),i=t.boundingSphere;return null!==i&&(this.boundingSphere=i.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}},Curve=class{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(t,e){t=this.getUtoTmapping(t);return this.getPoint(t,e)}getPoints(e=5){var r=[];for(let t=0;t<=e;t++)r.push(this.getPoint(t/e));return r}getSpacedPoints(e=5){var r=[];for(let t=0;t<=e;t++)r.push(this.getPointAt(t/e));return r}getLength(){var t=this.getLengths();return t[t.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var r=[];let i,s=this.getPoint(0),n=0;r.push(0);for(let t=1;t<=e;t++)i=this.getPoint(t/e),n+=i.distanceTo(s),r.push(n),s=i;return this.cacheArcLengths=r}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e){var r=this.getLengths();let i=0;var s=r.length;let n,a=(n=e||t*r[s-1],0),o=s-1,h;for(;a<=o;)if((h=r[i=Math.floor(a+(o-a)/2)]-n)<0)a=i+1;else{if(!(0<h)){o=i;break}o=i-1}return r[i=o]===n?i/(s-1):(e=r[i],t=r[i+1],t=(n-e)/(t-e),(i+t)/(s-1))}getTangent(t,e){let r=t-1e-4,i=t+1e-4;r<0&&(r=0),1<i&&(i=1);var t=this.getPoint(r),s=this.getPoint(i),e=e||new(t.isVector2?Vector2:Vector3);return e.copy(s).sub(t).normalize(),e}getTangentAt(t,e){t=this.getUtoTmapping(t);return this.getTangent(t,e)}computeFrenetFrames(r,t){var e=new Vector3,i=[],s=[],n=[],a=new Vector3,o=new Matrix4;for(let t=0;t<=r;t++){var h=t/r;i[t]=this.getTangentAt(h,new Vector3)}s[0]=new Vector3,n[0]=new Vector3;let u=Number.MAX_VALUE;var l,c=Math.abs(i[0].x),d=Math.abs(i[0].y),m=Math.abs(i[0].z);c<=u&&(u=c,e.set(1,0,0)),d<=u&&(u=d,e.set(0,1,0)),m<=u&&e.set(0,0,1),a.crossVectors(i[0],e).normalize(),s[0].crossVectors(i[0],a),n[0].crossVectors(i[0],s[0]);for(let t=1;t<=r;t++)s[t]=s[t-1].clone(),n[t]=n[t-1].clone(),a.crossVectors(i[t-1],i[t]),a.length()>Number.EPSILON&&(a.normalize(),l=Math.acos(clamp(i[t-1].dot(i[t]),-1,1)),s[t].applyMatrix4(o.makeRotationAxis(a,l))),n[t].crossVectors(i[t],s[t]);if(!0===t){let e=Math.acos(clamp(s[0].dot(s[r]),-1,1));e/=r,0<i[0].dot(a.crossVectors(s[0],s[r]))&&(e=-e);for(let t=1;t<=r;t++)s[t].applyMatrix4(o.makeRotationAxis(i[t],e*t)),n[t].crossVectors(i[t],s[t])}return{tangents:i,normals:s,binormals:n}}clone(){return(new this.constructor).copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){var t={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}},Curves_exports={},EllipseCurve=(__export(Curves_exports,{ArcCurve:()=>ArcCurve,CatmullRomCurve3:()=>CatmullRomCurve3,CubicBezierCurve:()=>CubicBezierCurve,CubicBezierCurve3:()=>CubicBezierCurve3,EllipseCurve:()=>EllipseCurve,LineCurve:()=>LineCurve,LineCurve3:()=>LineCurve3,QuadraticBezierCurve:()=>QuadraticBezierCurve,QuadraticBezierCurve3:()=>QuadraticBezierCurve3,SplineCurve:()=>SplineCurve}),class extends Curve{constructor(t=0,e=0,r=1,i=1,s=0,n=2*Math.PI,a=!1,o=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=n,this.aClockwise=a,this.aRotation=o}getPoint(t,e=new Vector2){var r=2*Math.PI;let i=this.aEndAngle-this.aStartAngle;for(var s=Math.abs(i)<Number.EPSILON;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=s?0:r),!0!==this.aClockwise||s||(i===r?i=-r:i-=r);var n,a,s=this.aStartAngle+t*i;let o=this.aX+this.xRadius*Math.cos(s),h=this.aY+this.yRadius*Math.sin(s);return 0!==this.aRotation&&(t=Math.cos(this.aRotation),s=Math.sin(this.aRotation),n=o-this.aX,a=h-this.aY,o=n*t-a*s+this.aX,h=n*s+a*t+this.aY),e.set(o,h)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){var t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}),ArcCurve=class extends EllipseCurve{constructor(t,e,r,i,s,n){super(t,e,r,r,i,s,n),this.isArcCurve=!0,this.type="ArcCurve"}};function CubicPoly(){let s=0,n=0,a=0,o=0;function h(t,e,r,i){s=t,n=r,a=-3*t+3*e-2*r-i,o=2*t-2*e+r+i}return{initCatmullRom:function(t,e,r,i,s){h(e,r,s*(r-t),s*(i-e))},initNonuniformCatmullRom:function(t,e,r,i,s,n,a){t=(e-t)/s-(r-t)/(s+n)+(r-e)/n,s=(r-e)/n-(i-e)/(n+a)+(i-r)/a;h(e,r,t*=n,s*=n)},calc:function(t){var e=t*t,r=e*t;return s+n*t+a*e+o*r}}}var tmp=new Vector3,px=new CubicPoly,py=new CubicPoly,pz=new CubicPoly,CatmullRomCurve3=class extends Curve{constructor(t=[],e=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=r,this.tension=i}getPoint(i,t=new Vector3){var s=this.points,e=s.length,i=(e-(this.closed?0:1))*i;let r=Math.floor(i),n=i-r;this.closed?r+=0<r?0:(Math.floor(Math.abs(r)/e)+1)*e:0===n&&r===e-1&&(r=e-2,n=1);let a,o;a=this.closed||0<r?s[(r-1)%e]:(tmp.subVectors(s[0],s[1]).add(s[0]),tmp);var i=s[r%e],h=s[(r+1)%e];if(o=this.closed||r+2<e?s[(r+2)%e]:(tmp.subVectors(s[e-1],s[e-2]).add(s[e-1]),tmp),"centripetal"===this.curveType||"chordal"===this.curveType){s="chordal"===this.curveType?.5:.25;let t=Math.pow(a.distanceToSquared(i),s),e=Math.pow(i.distanceToSquared(h),s),r=Math.pow(h.distanceToSquared(o),s);e<1e-4&&(e=1),t<1e-4&&(t=e),r<1e-4&&(r=e),px.initNonuniformCatmullRom(a.x,i.x,h.x,o.x,t,e,r),py.initNonuniformCatmullRom(a.y,i.y,h.y,o.y,t,e,r),pz.initNonuniformCatmullRom(a.z,i.z,h.z,o.z,t,e,r)}else"catmullrom"===this.curveType&&(px.initCatmullRom(a.x,i.x,h.x,o.x,this.tension),py.initCatmullRom(a.y,i.y,h.y,o.y,this.tension),pz.initCatmullRom(a.z,i.z,h.z,o.z,this.tension));return t.set(px.calc(n),py.calc(n),pz.calc(n)),t}copy(r){super.copy(r),this.points=[];for(let t=0,e=r.points.length;t<e;t++){var i=r.points[t];this.points.push(i.clone())}return this.closed=r.closed,this.curveType=r.curveType,this.tension=r.tension,this}toJSON(){var r=super.toJSON();r.points=[];for(let t=0,e=this.points.length;t<e;t++){var i=this.points[t];r.points.push(i.toArray())}return r.closed=this.closed,r.curveType=this.curveType,r.tension=this.tension,r}fromJSON(r){super.fromJSON(r),this.points=[];for(let t=0,e=r.points.length;t<e;t++){var i=r.points[t];this.points.push((new Vector3).fromArray(i))}return this.closed=r.closed,this.curveType=r.curveType,this.tension=r.tension,this}};function CatmullRom(t,e,r,i,s){var e=.5*(i-e),s=.5*(s-r),n=t*t;return(2*r-2*i+e+s)*(t*n)+(-3*r+3*i-2*e-s)*n+e*t+r}function QuadraticBezierP0(t,e){t=1-t;return t*t*e}function QuadraticBezierP1(t,e){return 2*(1-t)*t*e}function QuadraticBezierP2(t,e){return t*t*e}function QuadraticBezier(t,e,r,i){return QuadraticBezierP0(t,e)+QuadraticBezierP1(t,r)+QuadraticBezierP2(t,i)}function CubicBezierP0(t,e){t=1-t;return t*t*t*e}function CubicBezierP1(t,e){var r=1-t;return 3*r*r*t*e}function CubicBezierP2(t,e){return 3*(1-t)*t*t*e}function CubicBezierP3(t,e){return t*t*t*e}function CubicBezier(t,e,r,i,s){return CubicBezierP0(t,e)+CubicBezierP1(t,r)+CubicBezierP2(t,i)+CubicBezierP3(t,s)}var CubicBezierCurve=class extends Curve{constructor(t=new Vector2,e=new Vector2,r=new Vector2,i=new Vector2){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=r,this.v3=i}getPoint(t,e=new Vector2){var r=this.v0,i=this.v1,s=this.v2,n=this.v3;return e.set(CubicBezier(t,r.x,i.x,s.x,n.x),CubicBezier(t,r.y,i.y,s.y,n.y)),e}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){var t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}},CubicBezierCurve3=class extends Curve{constructor(t=new Vector3,e=new Vector3,r=new Vector3,i=new Vector3){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=r,this.v3=i}getPoint(t,e=new Vector3){var r=this.v0,i=this.v1,s=this.v2,n=this.v3;return e.set(CubicBezier(t,r.x,i.x,s.x,n.x),CubicBezier(t,r.y,i.y,s.y,n.y),CubicBezier(t,r.z,i.z,s.z,n.z)),e}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){var t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}},LineCurve=class extends Curve{constructor(t=new Vector2,e=new Vector2){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new Vector2){return 1===t?e.copy(this.v2):(e.copy(this.v2).sub(this.v1),e.multiplyScalar(t).add(this.v1)),e}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new Vector2){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){var t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},LineCurve3=class extends Curve{constructor(t=new Vector3,e=new Vector3){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=t,this.v2=e}getPoint(t,e=new Vector3){return 1===t?e.copy(this.v2):(e.copy(this.v2).sub(this.v1),e.multiplyScalar(t).add(this.v1)),e}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new Vector3){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){var t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},QuadraticBezierCurve=class extends Curve{constructor(t=new Vector2,e=new Vector2,r=new Vector2){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=r}getPoint(t,e=new Vector2){var r=this.v0,i=this.v1,s=this.v2;return e.set(QuadraticBezier(t,r.x,i.x,s.x),QuadraticBezier(t,r.y,i.y,s.y)),e}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){var t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},QuadraticBezierCurve3=class extends Curve{constructor(t=new Vector3,e=new Vector3,r=new Vector3){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=r}getPoint(t,e=new Vector3){var r=this.v0,i=this.v1,s=this.v2;return e.set(QuadraticBezier(t,r.x,i.x,s.x),QuadraticBezier(t,r.y,i.y,s.y),QuadraticBezier(t,r.z,i.z,s.z)),e}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){var t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},SplineCurve=class extends Curve{constructor(t=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=t}getPoint(t,e=new Vector2){var r=this.points,t=(r.length-1)*t,i=Math.floor(t),t=t-i,s=r[0===i?i:i-1],n=r[i],a=r[i>r.length-2?r.length-1:i+1],r=r[i>r.length-3?r.length-1:i+2];return e.set(CatmullRom(t,s.x,n.x,a.x,r.x),CatmullRom(t,s.y,n.y,a.y,r.y)),e}copy(r){super.copy(r),this.points=[];for(let t=0,e=r.points.length;t<e;t++){var i=r.points[t];this.points.push(i.clone())}return this}toJSON(){var r=super.toJSON();r.points=[];for(let t=0,e=this.points.length;t<e;t++){var i=this.points[t];r.points.push(i.toArray())}return r}fromJSON(r){super.fromJSON(r),this.points=[];for(let t=0,e=r.points.length;t<e;t++){var i=r.points[t];this.points.push((new Vector2).fromArray(i))}return this}},CurvePath=class extends Curve{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){var t,e=this.curves[0].getPoint(0),r=this.curves[this.curves.length-1].getPoint(1);return e.equals(r)||(t=!0===e.isVector2?"LineCurve":"LineCurve3",this.curves.push(new Curves_exports[t](r,e))),this}getPoint(t,e){var r,i,s,n=t*this.getLength(),a=this.getCurveLengths();let o=0;for(;o<a.length;){if(a[o]>=n)return r=a[o]-n,s=(i=this.curves[o]).getLength(),i.getPointAt(0===s?0:1-r/s,e);o++}return null}getLength(){var t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;var r=[];let i=0;for(let t=0,e=this.curves.length;t<e;t++)i+=this.curves[t].getLength(),r.push(i);return this.cacheLengths=r}getSpacedPoints(e=40){var r=[];for(let t=0;t<=e;t++)r.push(this.getPoint(t/e));return this.autoClose&&r.push(r[0]),r}getPoints(r=12){var i=[];let s;for(let t=0,e=this.curves;t<e.length;t++){var n=e[t],a=n.isEllipseCurve?2*r:n.isLineCurve||n.isLineCurve3?1:n.isSplineCurve?r*n.points.length:r,o=n.getPoints(a);for(let t=0;t<o.length;t++){var h=o[t];s&&s.equals(h)||(i.push(h),s=h)}}return this.autoClose&&1<i.length&&!i[i.length-1].equals(i[0])&&i.push(i[0]),i}copy(r){super.copy(r),this.curves=[];for(let t=0,e=r.curves.length;t<e;t++){var i=r.curves[t];this.curves.push(i.clone())}return this.autoClose=r.autoClose,this}toJSON(){var r=super.toJSON();r.autoClose=this.autoClose,r.curves=[];for(let t=0,e=this.curves.length;t<e;t++){var i=this.curves[t];r.curves.push(i.toJSON())}return r}fromJSON(r){super.fromJSON(r),this.autoClose=r.autoClose,this.curves=[];for(let t=0,e=r.curves.length;t<e;t++){var i=r.curves[t];this.curves.push((new Curves_exports[i.type]).fromJSON(i))}return this}},Path=class extends CurvePath{constructor(t){super(),this.type="Path",this.currentPoint=new Vector2,t&&this.setFromPoints(t)}setFromPoints(r){this.moveTo(r[0].x,r[0].y);for(let t=1,e=r.length;t<e;t++)this.lineTo(r[t].x,r[t].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){var r=new LineCurve(this.currentPoint.clone(),new Vector2(t,e));return this.curves.push(r),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,r,i){t=new QuadraticBezierCurve(this.currentPoint.clone(),new Vector2(t,e),new Vector2(r,i));return this.curves.push(t),this.currentPoint.set(r,i),this}bezierCurveTo(t,e,r,i,s,n){t=new CubicBezierCurve(this.currentPoint.clone(),new Vector2(t,e),new Vector2(r,i),new Vector2(s,n));return this.curves.push(t),this.currentPoint.set(s,n),this}splineThru(t){var e=[this.currentPoint.clone()].concat(t),e=new SplineCurve(e);return this.curves.push(e),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,r,i,s,n){var a=this.currentPoint.x,o=this.currentPoint.y;return this.absarc(t+a,e+o,r,i,s,n),this}absarc(t,e,r,i,s,n){return this.absellipse(t,e,r,r,i,s,n),this}ellipse(t,e,r,i,s,n,a,o){var h=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(t+h,e+u,r,i,s,n,a,o),this}absellipse(t,e,r,i,s,n,a,o){t=new EllipseCurve(t,e,r,i,s,n,a,o),0<this.curves.length&&((e=t.getPoint(0)).equals(this.currentPoint)||this.lineTo(e.x,e.y)),this.curves.push(t),r=t.getPoint(1);return this.currentPoint.copy(r),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){var t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}},Shape=class extends Path{constructor(t){super(t),this.uuid=generateUUID(),this.type="Shape",this.holes=[]}getPointsHoles(r){var i=[];for(let t=0,e=this.holes.length;t<e;t++)i[t]=this.holes[t].getPoints(r);return i}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(r){super.copy(r),this.holes=[];for(let t=0,e=r.holes.length;t<e;t++){var i=r.holes[t];this.holes.push(i.clone())}return this}toJSON(){var r=super.toJSON();r.uuid=this.uuid,r.holes=[];for(let t=0,e=this.holes.length;t<e;t++){var i=this.holes[t];r.holes.push(i.toJSON())}return r}fromJSON(r){super.fromJSON(r),this.uuid=r.uuid,this.holes=[];for(let t=0,e=r.holes.length;t<e;t++){var i=r.holes[t];this.holes.push((new Path).fromJSON(i))}return this}},Earcut={triangulate:function(o,h,u=2){var l=h&&h.length,c=l?h[0]*u:o.length;let d=linkedList(o,0,c,u,!0);var m=[];if(d&&d.next!==d.prev){let e,r,i,s,n,a,t;if(l&&(d=eliminateHoles(o,h,d,u)),o.length>80*u){e=i=o[0],r=s=o[1];for(let t=u;t<c;t+=u)n=o[t],a=o[t+1],n<e&&(e=n),a<r&&(r=a),n>i&&(i=n),a>s&&(s=a);t=0!==(t=Math.max(i-e,s-r))?32767/t:0}earcutLinked(d,m,u,e,r,t,0)}return m}};function linkedList(t,e,r,i,s){let n,a;if(s===0<signedArea(t,e,r,i))for(n=e;n<r;n+=i)a=insertNode(n,t[n],t[n+1],a);else for(n=r-i;n>=e;n-=i)a=insertNode(n,t[n],t[n+1],a);return a&&equals(a,a.next)&&(removeNode(a),a=a.next),a}function filterPoints(t,e){if(!t)return t;e=e||t;let r=t,i;do{if(i=!1,r.steiner||!equals(r,r.next)&&0!==area(r.prev,r,r.next))r=r.next;else{if(removeNode(r),(r=e=r.prev)===r.next)break;i=!0}}while(i||r!==e);return e}function earcutLinked(i,s,n,a,o,h,u){if(i){!u&&h&&indexCurve(i,a,o,h);let t=i,e,r;for(;i.prev!==i.next;)if(e=i.prev,r=i.next,h?isEarHashed(i,a,o,h):isEar(i))s.push(e.i/n|0),s.push(i.i/n|0),s.push(r.i/n|0),removeNode(i),i=r.next,t=r.next;else if((i=r)===t){u?1===u?earcutLinked(i=cureLocalIntersections(filterPoints(i),s,n),s,n,a,o,h,2):2===u&&splitEarcut(i,s,n,a,o,h):earcutLinked(filterPoints(i),s,n,a,o,h,1);break}}}function isEar(t){var e=t.prev,r=t,t=t.next;if(0<=area(e,r,t))return!1;var i=e.x,s=r.x,n=t.x,a=e.y,o=r.y,h=t.y,u=i<s?i<n?i:n:s<n?s:n,l=a<o?a<h?a:h:o<h?o:h,c=s<i?n<i?i:n:n<s?s:n,d=o<a?h<a?a:h:h<o?o:h;let m=t.next;for(;m!==e;){if(m.x>=u&&m.x<=c&&m.y>=l&&m.y<=d&&pointInTriangle(i,a,s,o,n,h,m.x,m.y)&&0<=area(m.prev,m,m.next))return!1;m=m.next}return!0}function isEarHashed(t,e,r,i){var s=t.prev,n=t,a=t.next;if(0<=area(s,n,a))return!1;var o=s.x,h=n.x,u=a.x,l=s.y,c=n.y,d=a.y,m=o<h?o<u?o:u:h<u?h:u,p=l<c?l<d?l:d:c<d?c:d,x=h<o?u<o?o:u:u<h?h:u,v=c<l?d<l?l:d:d<c?c:d,y=zOrder(m,p,e,r,i),f=zOrder(x,v,e,r,i);let g=t.prevZ,_=t.nextZ;for(;g&&g.z>=y&&_&&_.z<=f;){if(g.x>=m&&g.x<=x&&g.y>=p&&g.y<=v&&g!==s&&g!==a&&pointInTriangle(o,l,h,c,u,d,g.x,g.y)&&0<=area(g.prev,g,g.next))return!1;if(g=g.prevZ,_.x>=m&&_.x<=x&&_.y>=p&&_.y<=v&&_!==s&&_!==a&&pointInTriangle(o,l,h,c,u,d,_.x,_.y)&&0<=area(_.prev,_,_.next))return!1;_=_.nextZ}for(;g&&g.z>=y;){if(g.x>=m&&g.x<=x&&g.y>=p&&g.y<=v&&g!==s&&g!==a&&pointInTriangle(o,l,h,c,u,d,g.x,g.y)&&0<=area(g.prev,g,g.next))return!1;g=g.prevZ}for(;_&&_.z<=f;){if(_.x>=m&&_.x<=x&&_.y>=p&&_.y<=v&&_!==s&&_!==a&&pointInTriangle(o,l,h,c,u,d,_.x,_.y)&&0<=area(_.prev,_,_.next))return!1;_=_.nextZ}return!0}function cureLocalIntersections(t,e,r){let i=t;do{var s=i.prev,n=i.next.next;!equals(s,n)&&intersects(s,i,i.next,n)&&locallyInside(s,n)&&locallyInside(n,s)&&(e.push(s.i/r|0),e.push(i.i/r|0),e.push(n.i/r|0),removeNode(i),removeNode(i.next),i=t=n),i=i.next}while(i!==t);return filterPoints(i)}function splitEarcut(t,e,r,i,s,n){let a=t;do{let t=a.next.next;for(;t!==a.prev;){var o;if(a.i!==t.i&&isValidDiagonal(a,t))return o=splitPolygon(a,t),a=filterPoints(a,a.next),o=filterPoints(o,o.next),earcutLinked(a,e,r,i,s,n,0),void earcutLinked(o,e,r,i,s,n,0);t=t.next}}while((a=a.next)!==t)}function eliminateHoles(t,e,r,i){var s=[];let n,a,o,h,u;for(n=0,a=e.length;n<a;n++)o=e[n]*i,h=n<a-1?e[n+1]*i:t.length,(u=linkedList(t,o,h,i,!1))===u.next&&(u.steiner=!0),s.push(getLeftmost(u));for(s.sort(compareX),n=0;n<s.length;n++)r=eliminateHole(s[n],r);return r}function compareX(t,e){return t.x-e.x}function eliminateHole(t,e){var r=findHoleBridge(t,e);return r?(filterPoints(t=splitPolygon(r,t),t.next),filterPoints(r,r.next)):e}function findHoleBridge(t,e){let r=e,i=-1/0,s;var n=t.x,a=t.y;do{if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){var o=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(o<=n&&o>i&&(i=o,s=r.x<r.next.x?r:r.next,o===n))return s}}while((r=r.next)!==e);if(!s)return null;var h=s,u=s.x,l=s.y;let c=1/0,d;for(r=s;n>=r.x&&r.x>=u&&n!==r.x&&pointInTriangle(a<l?n:i,a,u,l,a<l?i:n,a,r.x,r.y)&&(d=Math.abs(a-r.y)/(n-r.x),locallyInside(r,t))&&(d<c||d===c&&(r.x>s.x||r.x===s.x&&sectorContainsSector(s,r)))&&(s=r,c=d),(r=r.next)!==h;);return s}function sectorContainsSector(t,e){return area(t.prev,t,e.prev)<0&&area(e.next,t,t.next)<0}function indexCurve(t,e,r,i){let s=t;for(;0===s.z&&(s.z=zOrder(s.x,s.y,e,r,i)),s.prevZ=s.prev,s.nextZ=s.next,(s=s.next)!==t;);s.prevZ.nextZ=null,s.prevZ=null,sortLinked(s)}function sortLinked(t){let e,r,i,s,n,a,o,h,u=1;do{for(r=t,t=null,n=null,a=0;r;){for(a++,i=r,o=0,e=0;e<u&&(o++,i=i.nextZ);e++);for(h=u;0<o||0<h&&i;)0!==o&&(0===h||!i||r.z<=i.z)?(r=(s=r).nextZ,o--):(i=(s=i).nextZ,h--),n?n.nextZ=s:t=s,s.prevZ=n,n=s;r=i}}while(n.nextZ=null,u*=2,1<a);return t}function zOrder(t,e,r,i,s){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*s|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-i)*s|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function getLeftmost(t){let e=t,r=t;for(;(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),(e=e.next)!==t;);return r}function pointInTriangle(t,e,r,i,s,n,a,o){return(t-a)*(n-o)<=(s-a)*(e-o)&&(r-a)*(e-o)<=(t-a)*(i-o)&&(s-a)*(i-o)<=(r-a)*(n-o)}function isValidDiagonal(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!intersectsPolygon(t,e)&&(locallyInside(t,e)&&locallyInside(e,t)&&middleInside(t,e)&&(area(t.prev,t,e.prev)||area(t,e.prev,e))||equals(t,e)&&0<area(t.prev,t,t.next)&&0<area(e.prev,e,e.next))}function area(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function equals(t,e){return t.x===e.x&&t.y===e.y}function intersects(t,e,r,i){var s=sign(area(t,e,r)),n=sign(area(t,e,i)),a=sign(area(r,i,t)),o=sign(area(r,i,e));return s!==n&&a!==o||!!(0===s&&onSegment(t,r,e)||0===n&&onSegment(t,i,e)||0===a&&onSegment(r,t,i)||0===o&&onSegment(r,e,i))}function onSegment(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function sign(t){return 0<t?1:t<0?-1:0}function intersectsPolygon(t,e){let r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&intersects(r,r.next,t,e))return!0}while((r=r.next)!==t);return!1}function locallyInside(t,e){return area(t.prev,t,t.next)<0?0<=area(t,e,t.next)&&0<=area(t,t.prev,e):area(t,e,t.prev)<0||area(t,t.next,e)<0}function middleInside(t,e){let r=t,i=!1;for(var s=(t.x+e.x)/2,n=(t.y+e.y)/2;r.y>n!=r.next.y>n&&r.next.y!==r.y&&s<(r.next.x-r.x)*(n-r.y)/(r.next.y-r.y)+r.x&&(i=!i),(r=r.next)!==t;);return i}function splitPolygon(t,e){var r=new Node(t.i,t.x,t.y),i=new Node(e.i,e.x,e.y),s=t.next,n=e.prev;return(t.next=e).prev=t,(r.next=s).prev=r,(i.next=r).prev=i,(n.next=i).prev=n,i}function insertNode(t,e,r,i){t=new Node(t,e,r);return i?(t.next=i.next,(t.prev=i).next.prev=t,i.next=t):(t.prev=t).next=t,t}function removeNode(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Node(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(r,i,s,n){let a=0;for(let t=i,e=s-n;t<s;t+=n)a+=(r[e]-r[t])*(r[t+1]+r[e+1]),e=t;return a}var ShapeUtils=class pk{static area(r){var i=r.length;let s=0;for(let t=i-1,e=0;e<i;t=e++)s+=r[t].x*r[e].y-r[e].x*r[t].y;return.5*s}static isClockWise(t){return pk.area(t)<0}static triangulateShape(t,e){var r=[],i=[],s=[];removeDupEndPts(t),addContour(r,t);let n=t.length;e.forEach(removeDupEndPts);for(let t=0;t<e.length;t++)i.push(n),n+=e[t].length,addContour(r,e[t]);var a=Earcut.triangulate(r,i);for(let t=0;t<a.length;t+=3)s.push(a.slice(t,t+3));return s}};function removeDupEndPts(t){var e=t.length;2<e&&t[e-1].equals(t[0])&&t.pop()}function addContour(e,r){for(let t=0;t<r.length;t++)e.push(r[t].x),e.push(r[t].y)}var ExtrudeGeometry=class Kk extends BufferGeometry{constructor(r=new Shape([new Vector2(.5,.5),new Vector2(-.5,.5),new Vector2(-.5,-.5),new Vector2(.5,-.5)]),ot={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:r,options:ot},r=Array.isArray(r)?r:[r];let ht=this,ut=[],lt=[];for(let t=0,e=r.length;t<e;t++)(t=>{let i=[],k=void 0!==ot.curveSegments?ot.curveSegments:12,m=void 0!==ot.steps?ot.steps:1,r=void 0!==ot.depth?ot.depth:1,s=void 0===ot.bevelEnabled||ot.bevelEnabled,e=void 0!==ot.bevelThickness?ot.bevelThickness:.2,n=void 0!==ot.bevelSize?ot.bevelSize:e-.1,a=void 0!==ot.bevelOffset?ot.bevelOffset:0,p=void 0!==ot.bevelSegments?ot.bevelSegments:3,o=ot.extrudePath,L=void 0!==ot.UVGenerator?ot.UVGenerator:WorldUVGenerator,h,u=!1,l,c,d,x,U=(o&&(h=o.getSpacedPoints(m),u=!0,s=!1,l=o.computeFrenetFrames(m,!1),c=new Vector3,d=new Vector3,x=new Vector3),s||(p=0,e=0,n=0,a=0),t.extractPoints(k)),v=U.shape,y=U.holes,F=!ShapeUtils.isClockWise(v);if(F){v=v.reverse();for(let t=0,e=y.length;t<e;t++){var J=y[t];ShapeUtils.isClockWise(J)&&(y[t]=J.reverse())}}let f=ShapeUtils.triangulateShape(v,y),g=v;for(let t=0,e=y.length;t<e;t++){var D=y[t];v=v.concat(D)}function _(t,e,r){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().addScaledVector(e,r)}let b=v.length,A=f.length;function W(t,e,r){let i,s,n;var a=t.x-e.x,o=t.y-e.y,h=r.x-t.x,u=r.y-t.y,l=a*a+o*o;if(Math.abs(a*u-o*h)>Number.EPSILON){var c=Math.sqrt(l),d=Math.sqrt(h*h+u*u),m=e.x-o/c,e=e.y+a/c,c=((r.x-u/d-m)*u-(r.y+h/d-e)*h)/(a*u-o*h),r=(i=m+a*c-t.x,s=e+o*c-t.y,i*i+s*s);if(r<=2)return new Vector2(i,s);n=Math.sqrt(r/2)}else{let t=!1;a>Number.EPSILON?h>Number.EPSILON&&(t=!0):a<-Number.EPSILON?h<-Number.EPSILON&&(t=!0):Math.sign(o)===Math.sign(u)&&(t=!0),n=t?(i=-o,s=a,Math.sqrt(l)):(i=a,s=o,Math.sqrt(l/2))}return new Vector2(i/n,s/n)}var w=[];for(let t=0,e=g.length,r=e-1,i=t+1;t<e;t++,r++,i++)r===e&&(r=0),i===e&&(i=0),w[t]=W(g[t],g[r],g[i]);let z=[],S,B=w.concat();for(let t=0,e=y.length;t<e;t++){var C=y[t];S=[];for(let t=0,e=C.length,r=e-1,i=t+1;t<e;t++,r++,i++)r===e&&(r=0),i===e&&(i=0),S[t]=W(C[t],C[r],C[i]);z.push(S),B=B.concat(S)}for(let t=0;t<p;t++){var X=t/p,q=e*Math.cos(X*Math.PI/2),I=n*Math.sin(X*Math.PI/2)+a;for(let t=0,e=g.length;t<e;t++){var Z=_(g[t],w[t],I);O(Z.x,Z.y,-q)}for(let t=0,e=y.length;t<e;t++){var j=y[t];S=z[t];for(let t=0,e=j.length;t<e;t++){var G=_(j[t],S[t],I);O(G.x,G.y,-q)}}}var Y=n+a;for(let t=0;t<b;t++){var M=s?_(v[t],B[t],Y):v[t];u?(d.copy(l.normals[0]).multiplyScalar(M.x),c.copy(l.binormals[0]).multiplyScalar(M.y),x.copy(h[0]).add(d).add(c),O(x.x,x.y,x.z)):O(M.x,M.y,0)}for(let e=1;e<=m;e++)for(let t=0;t<b;t++){var V=s?_(v[t],B[t],Y):v[t];u?(d.copy(l.normals[e]).multiplyScalar(V.x),c.copy(l.binormals[e]).multiplyScalar(V.y),x.copy(h[e]).add(d).add(c),O(x.x,x.y,x.z)):O(V.x,V.y,r/m*e)}for(let t=p-1;0<=t;t--){var Q=t/p,P=e*Math.cos(Q*Math.PI/2),H=n*Math.sin(Q*Math.PI/2)+a;for(let t=0,e=g.length;t<e;t++){var K=_(g[t],w[t],H);O(K.x,K.y,r+P)}for(let t=0,e=y.length;t<e;t++){var $=y[t];S=z[t];for(let t=0,e=$.length;t<e;t++){var N=_($[t],S[t],H);u?O(N.x,N.y+h[m-1].y,h[m-1].x+P):O(N.x,N.y,r+P)}}}function tt(t,i){let e=t.length;for(;0<=--e;){var s=e;let r=e-1;r<0&&(r=t.length-1);for(let t=0,e=m+2*p;t<e;t++){var n=b*t,a=b*(t+1),o=i+r+n,h=i+r+a,u=(d=c=l=u=void 0,i+s+n),l=o,c=h,d=i+s+a;T(u),T(l),T(d),T(l),T(c),T(d),u=ut.length/3,R((l=L.generateSideWallUV(ht,ut,u-6,u-3,u-2,u-1))[0]),R(l[1]),R(l[3]),R(l[1]),R(l[2]),R(l[3])}}}function O(t,e,r){i.push(t),i.push(e),i.push(r)}function E(t,e,r){T(t),T(e),T(r);t=ut.length/3,e=L.generateTopUV(ht,ut,t-3,t-2,t-1);R(e[0]),R(e[1]),R(e[2])}function T(t){ut.push(i[3*t+0]),ut.push(i[3*t+1]),ut.push(i[3*t+2])}function R(t){lt.push(t.x),lt.push(t.y)}var et,t=ut.length/3;if(s){let e=0*b;for(let t=0;t<A;t++){var rt=f[t];E(rt[2]+e,rt[1]+e,rt[0]+e)}et=m+2*p,e=b*et;for(let t=0;t<A;t++){var it=f[t];E(it[0]+e,it[1]+e,it[2]+e)}}else{for(let t=0;t<A;t++){var st=f[t];E(st[2],st[1],st[0])}for(let t=0;t<A;t++){var nt=f[t];E(nt[0]+b*m,nt[1]+b*m,nt[2]+b*m)}}ht.addGroup(t,ut.length/3-t,0);{t=ut.length/3;let r=0;tt(g,r),r+=g.length;for(let t=0,e=y.length;t<e;t++){var at=y[t];tt(at,r),r+=at.length}ht.addGroup(t,ut.length/3-t,1)}})(r[t]);this.setAttribute("position",new Float32BufferAttribute(ut,3)),this.setAttribute("uv",new Float32BufferAttribute(lt,2)),this.computeVertexNormals()}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){var t=super.toJSON();return toJSON(this.parameters.shapes,this.parameters.options,t)}static fromJSON(r,i){var s=[];for(let t=0,e=r.shapes.length;t<e;t++){var n=i[r.shapes[t]];s.push(n)}var t=r.options.extrudePath;return void 0!==t&&(r.options.extrudePath=(new Curves_exports[t.type]).fromJSON(t)),new Kk(s,r.options)}},WorldUVGenerator={generateTopUV:function(t,e,r,i,s){var n=e[3*r],a=e[3*i],i=e[3*i+1],o=e[3*s],s=e[3*s+1];return[new Vector2(n,e[3*r+1]),new Vector2(a,i),new Vector2(o,s)]},generateSideWallUV:function(t,e,r,i,s,n){var a=e[3*r],o=e[3*r+1],r=e[3*r+2],h=e[3*i],u=e[3*i+1],i=e[3*i+2],l=e[3*s],c=e[3*s+1],s=e[3*s+2],d=e[3*n],m=e[3*n+1],e=e[3*n+2];return Math.abs(o-u)<Math.abs(a-h)?[new Vector2(a,1-r),new Vector2(h,1-i),new Vector2(l,1-s),new Vector2(d,1-e)]:[new Vector2(o,1-r),new Vector2(u,1-i),new Vector2(c,1-s),new Vector2(m,1-e)]}};function toJSON(r,t,i){if(i.shapes=[],Array.isArray(r))for(let t=0,e=r.length;t<e;t++){var s=r[t];i.shapes.push(s.uuid)}else i.shapes.push(r.uuid);return i.options=Object.assign({},t),void 0!==t.extrudePath&&(i.options.extrudePath=t.extrudePath.toJSON()),i}var ShapeGeometry=class Ko extends BufferGeometry{constructor(e=new Shape([new Vector2(0,.5),new Vector2(-.5,-.5),new Vector2(.5,-.5)]),d=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:d};let m=[],p=[],x=[],v=[],r=0,y=0;if(!1===Array.isArray(e))i(e);else for(let t=0;t<e.length;t++)i(e[t]),this.addGroup(r,y,t),r+=y,y=0;function i(t){var r=p.length/3,t=t.extractPoints(d);let i=t.shape;var s=t.holes;!1===ShapeUtils.isClockWise(i)&&(i=i.reverse());for(let t=0,e=s.length;t<e;t++){var n=s[t];!0===ShapeUtils.isClockWise(n)&&(s[t]=n.reverse())}var a=ShapeUtils.triangulateShape(i,s);for(let t=0,e=s.length;t<e;t++){var o=s[t];i=i.concat(o)}for(let t=0,e=i.length;t<e;t++){var h=i[t];p.push(h.x,h.y,0),x.push(0,0,1),v.push(h.x,h.y)}for(let t=0,e=a.length;t<e;t++){var u=a[t],l=u[0]+r,c=u[1]+r,u=u[2]+r;m.push(l,c,u),y+=3}}this.setIndex(m),this.setAttribute("position",new Float32BufferAttribute(p,3)),this.setAttribute("normal",new Float32BufferAttribute(x,3)),this.setAttribute("uv",new Float32BufferAttribute(v,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){var t=super.toJSON();return toJSON2(this.parameters.shapes,t)}static fromJSON(r,i){var s=[];for(let t=0,e=r.shapes.length;t<e;t++){var n=i[r.shapes[t]];s.push(n)}return new Ko(s,r.curveSegments)}};function toJSON2(r,i){if(i.shapes=[],Array.isArray(r))for(let t=0,e=r.length;t<e;t++){var s=r[t];i.shapes.push(s.uuid)}else i.shapes.push(r.uuid);return i}var FMBound=class Cp{constructor(){this._min={x:Number.MAX_VALUE,y:Number.MAX_VALUE},this._max={x:-Number.MAX_VALUE,y:-Number.MAX_VALUE}}get min(){return this._min}get max(){return this._max}get center(){var t={x:Number.NaN,y:Number.NaN};return this.valid()&&(t.x=(this.min.x+this.max.x)/2,t.y=(this.min.y+this.max.y)/2),t}get size(){var t={x:Number.NaN,y:Number.NaN};return this.valid()&&(t.x=this.max.x-this.min.x,t.y=this.max.y-this.min.y),t}copy(t){return this._max.x=t.max.x,this._max.y=t.max.y,this._min.x=t.min.x,this._min.y=t.min.y,this}clone(){return(new Cp).copy(this)}reset(){this._min={x:Number.MAX_VALUE,y:Number.MAX_VALUE},this._max={x:-Number.MAX_VALUE,y:-Number.MAX_VALUE}}toObject(){return{min:this.min,max:this.max,center:this.center,size:this.size}}expand(t){this._expand(t)}expandByCoords(t){this._expandByCoords(t)}valid(){return this._valid()}isCross(t){let e=!0;return t.max.x<this.min.x&&(e=!1),t.min.x>this.max.x&&(e=!1),t.max.y<this.min.y&&(e=!1),e=t.min.y>this.max.y?!1:e}},FMBound_default=(Object.assign(FMBound.prototype,{_valid(){return!(this.min.x>this.max.x||this.min.y>this.max.y)},_expand(t){t&&t.valid()&&(t.min.x<this.min.x&&(this.min.x=t.min.x),t.min.y<this.min.y&&(this.min.y=t.min.y),t.max.x>this.max.x&&(this.max.x=t.max.x),t.max.y>this.max.y)&&(this.max.y=t.max.y)},_expandByCoords(t){t&&0!=t.length&&t.forEach(t=>{t.x<this.min.x&&(this.min.x=t.x),t.y<this.min.y&&(this.min.y=t.y),t.x>this.max.x&&(this.max.x=t.x),t.y>this.max.y&&(this.max.y=t.y)})}}),FMBound);function createLineGeometry(t,e){var r=t.getPoints(),i=(r&&0<r.length&&r.push(r[0]),[]),s=r.length;for(let t=0;t<s;t++)0===t||t===s-1||i.push(r[t].x,r[t].y,e),i.push(r[t].x,r[t].y,e);t=new BufferGeometry;return t.setAttribute("position",new Float32BufferAttribute(i,3)),t}function getAttributeByBufferGeometry(t,e,r){var i,s=t.attributes;for(i in s){var{count:n,itemSize:a,usage:o,array:h}=s[i],n=new ArrayBuffer(n*a*4);new Float32Array(n).set(h),r.push(n),e.push({key:i,itemSize:a,usage:o,array:n})}}function handleGeometry(t,r){let{type:e,coordGroup:i,bound:s,amount:n,referenceBound:a,createLineType:o,lineHeight:h}=t;var u=new FMBound_default,t=(u.expandByCoords([s.max,s.min]),new FMBound_default),l=(e===FMType_default.MODEL&&t.expandByCoords([a.max,a.min]),new Shape),c=new Float64Array(i[0]);let d=toVec2(c);if(0<d.length){l.moveTo(d[0].x-u.center.x,d[0].y-u.center.y);for(let t=1;t<d.length;t++)l.lineTo(d[t].x-u.center.x,d[t].y-u.center.y)}if(1<i.length)for(let t=1;t<i.length;t++){var m=new Float64Array(i[t]),p=new Path;if(0<m.length){d=toVec2(m),p.moveTo(d[0].x-u.center.x,d[0].y-u.center.y);for(let t=1;t<d.length;t++)p.lineTo(d[t].x-u.center.x,d[t].y-u.center.y)}l.holes.push(p)}let x=null;x=0===n?new ShapeGeometry(l):new ExtrudeGeometry(l,{depth:n,bevelEnabled:!1});let v,y,f,g;g=e===FMType_default.MODEL?(v=t.min.x,y=t.min.y,f=t.max.x-v,t.max.y-y):(v=u.min.x,y=u.min.y,f=u.max.x-v,u.max.y-y);var{position:_,uv:b}=x.attributes;for(let t=0;t<_.count;t++){var A=_.getX(t),w=(_.getY(t),_.getZ(t)),A=(A+u.center.x-v)/f,w=(u.center.y,y,g,0===w?0:1);b.setX(t,A),b.setY(t,w)}c=[];getAttributeByBufferGeometry(x,c,r);let z=[];if("geometry"===o)getAttributeByBufferGeometry(createLineGeometry(l,h,z,r),z,r);else if("onlyData"===o){t=l.getPoints();let e=[];t.forEach(t=>{e.push(t.x,t.y,h)});t=new ArrayBuffer(4*e.length);r.push(t),new Float32Array(t).set(e),z=t}return{attributesInfo:c,lineAttributeInfo:z}}export{handleGeometry};