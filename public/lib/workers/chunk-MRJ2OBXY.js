import{WebGLCoordinateSystem,WebGPUCoordinateSystem}from"./chunk-2B2O43AG.js";import{Vector3}from"./chunk-AGIEQDNA.js";var Matrix4=class a{constructor(e,t,r,s,i,n,o,m,h,l,u,_,c,x,y,v){a.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,r,s,i,n,o,m,h,l,u,_,c,x,y,v)}set(e,t,r,s,i,n,o,a,m,h,l,u,_,c,x,y){var v=this.elements;return v[0]=e,v[4]=t,v[8]=r,v[12]=s,v[1]=i,v[5]=n,v[9]=o,v[13]=a,v[2]=m,v[6]=h,v[10]=l,v[14]=u,v[3]=_,v[7]=c,v[11]=x,v[15]=y,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new a).fromArray(this.elements)}copy(e){var t=this.elements,e=e.elements;return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],this}copyPosition(e){var t=this.elements,e=e.elements;return t[12]=e[12],t[13]=e[13],t[14]=e[14],this}setFromMatrix3(e){e=e.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){var t=this.elements,r=e.elements,s=1/_v1.setFromMatrixColumn(e,0).length(),i=1/_v1.setFromMatrixColumn(e,1).length(),e=1/_v1.setFromMatrixColumn(e,2).length();return t[0]=r[0]*s,t[1]=r[1]*s,t[2]=r[2]*s,t[3]=0,t[4]=r[4]*i,t[5]=r[5]*i,t[6]=r[6]*i,t[7]=0,t[8]=r[8]*e,t[9]=r[9]*e,t[10]=r[10]*e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){var t,r,s,i,n=this.elements,o=e.x,a=e.y,m=e.z,h=Math.cos(o),o=Math.sin(o),l=Math.cos(a),a=Math.sin(a),u=Math.cos(m),m=Math.sin(m);return"XYZ"===e.order?(r=h*u,s=h*m,i=o*u,t=o*m,n[0]=l*u,n[4]=-l*m,n[8]=a,n[1]=s+i*a,n[5]=r-t*a,n[9]=-o*l,n[2]=t-r*a,n[6]=i+s*a,n[10]=h*l):"YXZ"===e.order?(t=l*m,r=a*u,n[0]=(i=l*u)+(s=a*m)*o,n[4]=r*o-t,n[8]=h*a,n[1]=h*m,n[5]=h*u,n[9]=-o,n[2]=t*o-r,n[6]=s+i*o,n[10]=h*l):"ZXY"===e.order?(t=l*m,r=a*u,n[0]=(s=l*u)-(i=a*m)*o,n[4]=-h*m,n[8]=r+t*o,n[1]=t+r*o,n[5]=h*u,n[9]=i-s*o,n[2]=-h*a,n[6]=o,n[10]=h*l):"ZYX"===e.order?(t=h*u,r=h*m,i=o*u,s=o*m,n[0]=l*u,n[4]=i*a-r,n[8]=t*a+s,n[1]=l*m,n[5]=s*a+t,n[9]=r*a-i,n[2]=-a,n[6]=o*l,n[10]=h*l):"YZX"===e.order?(s=h*l,t=h*a,r=o*l,i=o*a,n[0]=l*u,n[4]=i-s*m,n[8]=r*m+t,n[1]=m,n[5]=h*u,n[9]=-o*u,n[2]=-a*u,n[6]=t*m+r,n[10]=s-i*m):"XZY"===e.order&&(t=h*l,r=h*a,s=o*l,i=o*a,n[0]=l*u,n[4]=-m,n[8]=a*u,n[1]=t*m+i,n[5]=h*u,n[9]=r*m-s,n[2]=s*m-r,n[6]=o*u,n[10]=i*m+t),n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(_zero,e,_one)}lookAt(e,t,r){var s=this.elements;return _z.subVectors(e,t),0===_z.lengthSq()&&(_z.z=1),_z.normalize(),_x.crossVectors(r,_z),0===_x.lengthSq()&&(1===Math.abs(r.z)?_z.x+=1e-4:_z.z+=1e-4,_z.normalize(),_x.crossVectors(r,_z)),_x.normalize(),_y.crossVectors(_z,_x),s[0]=_x.x,s[4]=_y.x,s[8]=_z.x,s[1]=_x.y,s[5]=_y.y,s[9]=_z.y,s[2]=_x.z,s[6]=_y.z,s[10]=_z.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){var e=e.elements,t=t.elements,r=this.elements,s=e[0],i=e[4],n=e[8],o=e[12],a=e[1],m=e[5],h=e[9],l=e[13],u=e[2],_=e[6],c=e[10],x=e[14],y=e[3],v=e[7],z=e[11],e=e[15],M=t[0],d=t[4],p=t[8],k=t[12],C=t[1],S=t[5],w=t[9],V=t[13],f=t[2],g=t[6],b=t[10],F=t[14],G=t[3],R=t[7],A=t[11],t=t[15];return r[0]=s*M+i*C+n*f+o*G,r[4]=s*d+i*S+n*g+o*R,r[8]=s*p+i*w+n*b+o*A,r[12]=s*k+i*V+n*F+o*t,r[1]=a*M+m*C+h*f+l*G,r[5]=a*d+m*S+h*g+l*R,r[9]=a*p+m*w+h*b+l*A,r[13]=a*k+m*V+h*F+l*t,r[2]=u*M+_*C+c*f+x*G,r[6]=u*d+_*S+c*g+x*R,r[10]=u*p+_*w+c*b+x*A,r[14]=u*k+_*V+c*F+x*t,r[3]=y*M+v*C+z*f+e*G,r[7]=y*d+v*S+z*g+e*R,r[11]=y*p+v*w+z*b+e*A,r[15]=y*k+v*V+z*F+e*t,this}multiplyScalar(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){var e=this.elements,t=e[0],r=e[4],s=e[8],i=e[12],n=e[1],o=e[5],a=e[9],m=e[13],h=e[2],l=e[6],u=e[10],_=e[14];return e[3]*(+i*a*l-s*m*l-i*o*u+r*m*u+s*o*_-r*a*_)+e[7]*(+t*a*_-t*m*u+i*n*u-s*n*_+s*m*h-i*a*h)+e[11]*(+t*m*l-t*o*_-i*n*l+r*n*_+i*o*h-r*m*h)+e[15]*(-s*o*h-t*a*l+t*o*u+s*n*l-r*n*u+r*a*h)}transpose(){var e=this.elements,t=e[1];return e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){var s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=t,s[14]=r),this}invert(){var e=this.elements,t=e[0],r=e[1],s=e[2],i=e[3],n=e[4],o=e[5],a=e[6],m=e[7],h=e[8],l=e[9],u=e[10],_=e[11],c=e[12],x=e[13],y=e[14],v=e[15],z=l*y*m-x*u*m+x*a*_-o*y*_-l*a*v+o*u*v,M=c*u*m-h*y*m-c*a*_+n*y*_+h*a*v-n*u*v,d=h*x*m-c*l*m+c*o*_-n*x*_-h*o*v+n*l*v,p=c*l*a-h*x*a-c*o*u+n*x*u+h*o*y-n*l*y,k=t*z+r*M+s*d+i*p;return 0==k?this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0):(e[0]=z*(z=1/k),e[1]=(x*u*i-l*y*i-x*s*_+r*y*_+l*s*v-r*u*v)*z,e[2]=(o*y*i-x*a*i+x*s*m-r*y*m-o*s*v+r*a*v)*z,e[3]=(l*a*i-o*u*i-l*s*m+r*u*m+o*s*_-r*a*_)*z,e[4]=M*z,e[5]=(h*y*i-c*u*i+c*s*_-t*y*_-h*s*v+t*u*v)*z,e[6]=(c*a*i-n*y*i-c*s*m+t*y*m+n*s*v-t*a*v)*z,e[7]=(n*u*i-h*a*i+h*s*m-t*u*m-n*s*_+t*a*_)*z,e[8]=d*z,e[9]=(c*l*i-h*x*i-c*r*_+t*x*_+h*r*v-t*l*v)*z,e[10]=(n*x*i-c*o*i+c*r*m-t*x*m-n*r*v+t*o*v)*z,e[11]=(h*o*i-n*l*i-h*r*m+t*l*m+n*r*_-t*o*_)*z,e[12]=p*z,e[13]=(h*x*s-c*l*s+c*r*u-t*x*u-h*r*y+t*l*y)*z,e[14]=(c*o*s-n*x*s-c*r*a+t*x*a+n*r*y-t*o*y)*z,e[15]=(n*l*s-h*o*s+h*r*a-t*l*a-n*r*u+t*o*u)*z,this)}scale(e){var t=this.elements,r=e.x,s=e.y,e=e.z;return t[0]*=r,t[4]*=s,t[8]*=e,t[1]*=r,t[5]*=s,t[9]*=e,t[2]*=r,t[6]*=s,t[10]*=e,t[3]*=r,t[7]*=s,t[11]*=e,this}getMaxScaleOnAxis(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2];return Math.sqrt(Math.max(t,e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){var t=Math.cos(e),e=Math.sin(e);return this.set(1,0,0,0,0,t,-e,0,0,e,t,0,0,0,0,1),this}makeRotationY(e){var t=Math.cos(e),e=Math.sin(e);return this.set(t,0,e,0,0,1,0,0,-e,0,t,0,0,0,0,1),this}makeRotationZ(e){var t=Math.cos(e),e=Math.sin(e);return this.set(t,-e,0,0,e,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){var r=Math.cos(t),t=Math.sin(t),s=1-r,i=e.x,n=e.y,e=e.z,o=s*i,a=s*n;return this.set(o*i+r,o*n-t*e,o*e+t*n,0,o*n+t*e,a*n+r,a*e-t*i,0,o*e-t*n,a*e+t*i,s*e*e+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,s,i,n){return this.set(1,r,i,0,e,1,n,0,t,s,1,0,0,0,0,1),this}compose(e,t,r){var s=this.elements,i=t._x,n=t._y,o=t._z,t=t._w,a=i+i,m=n+n,h=o+o,l=i*a,u=i*m,i=i*h,_=n*m,n=n*h,o=o*h,a=t*a,m=t*m,t=t*h,h=r.x,c=r.y,r=r.z;return s[0]=(1-(_+o))*h,s[1]=(u+t)*h,s[2]=(i-m)*h,s[3]=0,s[4]=(u-t)*c,s[5]=(1-(l+o))*c,s[6]=(n+a)*c,s[7]=0,s[8]=(i+m)*r,s[9]=(n-a)*r,s[10]=(1-(l+_))*r,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,t,r){var s=this.elements;let i=_v1.set(s[0],s[1],s[2]).length();var n=_v1.set(s[4],s[5],s[6]).length(),o=_v1.set(s[8],s[9],s[10]).length(),e=(this.determinant()<0&&(i=-i),e.x=s[12],e.y=s[13],e.z=s[14],_m1.copy(this),1/i),s=1/n,a=1/o;return _m1.elements[0]*=e,_m1.elements[1]*=e,_m1.elements[2]*=e,_m1.elements[4]*=s,_m1.elements[5]*=s,_m1.elements[6]*=s,_m1.elements[8]*=a,_m1.elements[9]*=a,_m1.elements[10]*=a,t.setFromRotationMatrix(_m1),r.x=i,r.y=n,r.z=o,this}makePerspective(e,t,r,s,i,n,o=WebGLCoordinateSystem){var a=this.elements,m=2*i/(t-e),h=2*i/(r-s),t=(t+e)/(t-e),e=(r+s)/(r-s);let l,u;if(o===WebGLCoordinateSystem)l=-(n+i)/(n-i),u=-2*n*i/(n-i);else{if(o!==WebGPUCoordinateSystem)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);l=-n/(n-i),u=-n*i/(n-i)}return a[0]=m,a[4]=0,a[8]=t,a[12]=0,a[1]=0,a[5]=h,a[9]=e,a[13]=0,a[2]=0,a[6]=0,a[10]=l,a[14]=u,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,r,s,i,n,o=WebGLCoordinateSystem){var a=this.elements,m=1/(t-e),h=1/(r-s),l=1/(n-i),t=(t+e)*m,e=(r+s)*h;let u,_;if(o===WebGLCoordinateSystem)u=(n+i)*l,_=-2*l;else{if(o!==WebGPUCoordinateSystem)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);u=i*l,_=-1*l}return a[0]=2*m,a[4]=0,a[8]=0,a[12]=-t,a[1]=0,a[5]=2*h,a[9]=0,a[13]=-e,a[2]=0,a[6]=0,a[10]=_,a[14]=-u,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){var t=this.elements,r=e.elements;for(let e=0;e<16;e++)if(t[e]!==r[e])return!1;return!0}fromArray(t,r=0){for(let e=0;e<16;e++)this.elements[e]=t[e+r];return this}toArray(e=[],t=0){var r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}},_v1=new Vector3,_m1=new Matrix4,_zero=new Vector3(0,0,0),_one=new Vector3(1,1,1),_x=new Vector3,_y=new Vector3,_z=new Vector3;export{Matrix4};