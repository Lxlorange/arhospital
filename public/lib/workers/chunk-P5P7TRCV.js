import{MathUtils as s}from"./chunk-7IGK3GFL.js";function t(t,i,s,h){this.t=t||0,this.i=i||0,this.h=s||0,this.o=void 0!==h?h:1}Object.assign(t,{slerp:function(t,i,s,h){return s.copy(t).slerp(i,h)},slerpFlat:function(t,i,s,h,n,r,e){var o,u,a,c=s[h+0],f=s[h+1],l=s[h+2],s=s[h+3],h=n[r+0],M=n[r+1],m=n[r+2],n=n[r+3];s===n&&c===h&&f===M&&l===m||(r=1-e,o=0<=(u=c*h+f*M+l*m+s*n)?1:-1,(a=1-u*u)>Number.EPSILON&&(a=Math.sqrt(a),u=Math.atan2(a,u*o),r=Math.sin(r*u)/a,e=Math.sin(e*u)/a),c=c*r+h*(u=e*o),f=f*r+M*u,l=l*r+m*u,s=s*r+n*u,r===1-e&&(c*=a=1/Math.sqrt(c*c+f*f+l*l+s*s),f*=a,l*=a,s*=a)),t[i]=c,t[i+1]=f,t[i+2]=l,t[i+3]=s}}),Object.defineProperties(t.prototype,{x:{get:function(){return this.t},set:function(t){this.t=t,this.u()}},y:{get:function(){return this.i},set:function(t){this.i=t,this.u()}},z:{get:function(){return this.h},set:function(t){this.h=t,this.u()}},w:{get:function(){return this.o},set:function(t){this.o=t,this.u()}}}),Object.assign(t.prototype,{isQuaternion:!0,set:function(t,i,s,h){return this.t=t,this.i=i,this.h=s,this.o=h,this.u(),this},clone:function(){return new this.constructor(this.t,this.i,this.h,this.o)},copy:function(t){return this.t=t.x,this.i=t.y,this.h=t.z,this.o=t.w,this.u(),this},setFromEuler:function(t,i){var s,h,n,r,e,o,u;if(t&&t.isEuler)return e=t.t,o=t.i,s=t.h,t=t.order,r=Math.cos,u=Math.sin,h=r(e/2),n=r(o/2),r=r(s/2),e=u(e/2),o=u(o/2),u=u(s/2),"XYZ"===t?(this.t=e*n*r+h*o*u,this.i=h*o*r-e*n*u,this.h=h*n*u+e*o*r,this.o=h*n*r-e*o*u):"YXZ"===t?(this.t=e*n*r+h*o*u,this.i=h*o*r-e*n*u,this.h=h*n*u-e*o*r,this.o=h*n*r+e*o*u):"ZXY"===t?(this.t=e*n*r-h*o*u,this.i=h*o*r+e*n*u,this.h=h*n*u+e*o*r,this.o=h*n*r-e*o*u):"ZYX"===t?(this.t=e*n*r-h*o*u,this.i=h*o*r+e*n*u,this.h=h*n*u-e*o*r,this.o=h*n*r+e*o*u):"YZX"===t?(this.t=e*n*r+h*o*u,this.i=h*o*r+e*n*u,this.h=h*n*u-e*o*r,this.o=h*n*r-e*o*u):"XZY"===t&&(this.t=e*n*r-h*o*u,this.i=h*o*r-e*n*u,this.h=h*n*u+e*o*r,this.o=h*n*r+e*o*u),!1!==i&&this.u(),this;throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.")},setFromAxisAngle:function(t,i){var i=i/2,s=Math.sin(i);return this.t=t.x*s,this.i=t.y*s,this.h=t.z*s,this.o=Math.cos(i),this.u(),this},setFromRotationMatrix:function(t){var i,t=t.elements,s=t[0],h=t[4],n=t[8],r=t[1],e=t[5],o=t[9],u=t[2],a=t[6],t=t[10],c=s+e+t;return 0<c?(i=.5/Math.sqrt(c+1),this.o=.25/i,this.t=(a-o)*i,this.i=(n-u)*i,this.h=(r-h)*i):e<s&&t<s?(i=2*Math.sqrt(1+s-e-t),this.o=(a-o)/i,this.t=.25*i,this.i=(h+r)/i,this.h=(n+u)/i):t<e?(i=2*Math.sqrt(1+e-s-t),this.o=(n-u)/i,this.t=(h+r)/i,this.i=.25*i,this.h=(o+a)/i):(i=2*Math.sqrt(1+t-s-e),this.o=(r-h)/i,this.t=(n+u)/i,this.i=(o+a)/i,this.h=.25*i),this.u(),this},setFromUnitVectors:function(t,i){var s=t.dot(i)+1;return s<1e-6?(s=0,Math.abs(t.x)>Math.abs(t.z)?(this.t=-t.y,this.i=t.x,this.h=0):(this.t=0,this.i=-t.z,this.h=t.y)):(this.t=t.y*i.z-t.z*i.y,this.i=t.z*i.x-t.x*i.z,this.h=t.x*i.y-t.y*i.x),this.o=s,this.normalize()},angleTo:function(t){return 2*Math.acos(Math.abs(s.clamp(this.dot(t),-1,1)))},rotateTowards:function(t,i){var s=this.angleTo(t);return 0!==s&&(i=Math.min(1,i/s),this.slerp(t,i)),this},inverse:function(){return this.conjugate()},conjugate:function(){return this.t*=-1,this.i*=-1,this.h*=-1,this.u(),this},dot:function(t){return this.t*t.t+this.i*t.i+this.h*t.h+this.o*t.o},lengthSq:function(){return this.t*this.t+this.i*this.i+this.h*this.h+this.o*this.o},length:function(){return Math.sqrt(this.t*this.t+this.i*this.i+this.h*this.h+this.o*this.o)},normalize:function(){var t=this.length();return 0===t?(this.t=0,this.i=0,this.h=0,this.o=1):(this.t=this.t*(t=1/t),this.i=this.i*t,this.h=this.h*t,this.o=this.o*t),this.u(),this},multiply:function(t,i){return void 0!==i?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,i)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,i){var s=t.t,h=t.i,n=t.h,t=t.o,r=i.t,e=i.i,o=i.h,i=i.o;return this.t=s*i+t*r+h*o-n*e,this.i=h*i+t*e+n*r-s*o,this.h=n*i+t*o+s*e-h*r,this.o=t*i-s*r-h*e-n*o,this.u(),this},slerp:function(t,i){if(0!==i){if(1===i)return this.copy(t);var s,h=this.t,n=this.i,r=this.h,e=this.o,o=e*t.o+h*t.t+n*t.i+r*t.h;o<0?(this.o=-t.o,this.t=-t.t,this.i=-t.i,this.h=-t.h,o=-o):this.copy(t),1<=o?(this.o=e,this.t=h,this.i=n,this.h=r):((t=1-o*o)<=Number.EPSILON?(this.o=(s=1-i)*e+i*this.o,this.t=s*h+i*this.t,this.i=s*n+i*this.i,this.h=s*r+i*this.h,this.normalize()):(s=Math.sqrt(t),t=Math.atan2(s,o),o=Math.sin((1-i)*t)/s,i=Math.sin(i*t)/s,this.o=e*o+this.o*i,this.t=h*o+this.t*i,this.i=n*o+this.i*i,this.h=r*o+this.h*i),this.u())}return this},equals:function(t){return t.t===this.t&&t.i===this.i&&t.h===this.h&&t.o===this.o},fromArray:function(t,i){return this.t=t[i=void 0===i?0:i],this.i=t[i+1],this.h=t[i+2],this.o=t[i+3],this.u(),this},toArray:function(t,i){return(t=void 0===t?[]:t)[i=void 0===i?0:i]=this.t,t[i+1]=this.i,t[i+2]=this.h,t[i+3]=this.o,t},fromBufferAttribute:function(t,i){return this.t=t.getX(i),this.i=t.getY(i),this.h=t.getZ(i),this.o=t.getW(i),this},onChange:function(t){return this.u=t,this},u:function(){}});var i=new n,h=new t;function n(t,i,s){this.x=t||0,this.y=i||0,this.z=s||0}Object.assign(n.prototype,{isVector3:!0,set:function(t,i,s){return this.x=t,this.y=i,this.z=s,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,i){return void 0!==i?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,i)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this},addScaledVector:function(t,i){return this.x+=t.x*i,this.y+=t.y*i,this.z+=t.z*i,this},sub:function(t,i){return void 0!==i?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,i)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this},multiply:function(t,i){return void 0!==i?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,i)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,i){return this.x=t.x*i.x,this.y=t.y*i.y,this.z=t.z*i.z,this},applyEuler:function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(h.setFromEuler(t))},applyAxisAngle:function(t,i){return this.applyQuaternion(h.setFromAxisAngle(t,i))},applyMatrix3:function(t){var i=this.x,s=this.y,h=this.z,t=t.elements;return this.x=t[0]*i+t[3]*s+t[6]*h,this.y=t[1]*i+t[4]*s+t[7]*h,this.z=t[2]*i+t[5]*s+t[8]*h,this},applyNormalMatrix:function(t){return this.applyMatrix3(t).normalize()},applyMatrix4:function(t){var i=this.x,s=this.y,h=this.z,t=t.elements,n=1/(t[3]*i+t[7]*s+t[11]*h+t[15]);return this.x=(t[0]*i+t[4]*s+t[8]*h+t[12])*n,this.y=(t[1]*i+t[5]*s+t[9]*h+t[13])*n,this.z=(t[2]*i+t[6]*s+t[10]*h+t[14])*n,this},applyQuaternion:function(t){var i=this.x,s=this.y,h=this.z,n=t.x,r=t.y,e=t.z,t=t.w,o=t*i+r*h-e*s,u=t*s+e*i-n*h,a=t*h+n*s-r*i,i=-n*i-r*s-e*h;return this.x=o*t+i*-n+u*-e-a*-r,this.y=u*t+i*-r+a*-n-o*-e,this.z=a*t+i*-e+o*-r-u*-n,this},project:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)},unproject:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)},transformDirection:function(t){var i=this.x,s=this.y,h=this.z,t=t.elements;return this.x=t[0]*i+t[4]*s+t[8]*h,this.y=t[1]*i+t[5]*s+t[9]*h,this.z=t[2]*i+t[6]*s+t[10]*h,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,i){return this.x=Math.max(t.x,Math.min(i.x,this.x)),this.y=Math.max(t.y,Math.min(i.y,this.y)),this.z=Math.max(t.z,Math.min(i.z,this.z)),this},clampScalar:function(t,i){return this.x=Math.max(t,Math.min(i,this.x)),this.y=Math.max(t,Math.min(i,this.y)),this.z=Math.max(t,Math.min(i,this.z)),this},clampLength:function(t,i){var s=this.length();return this.divideScalar(s||1).multiplyScalar(Math.max(t,Math.min(i,s)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this.z+=(t.z-this.z)*i,this},lerpVectors:function(t,i,s){return this.subVectors(i,t).multiplyScalar(s).add(t)},cross:function(t,i){return void 0!==i?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,i)):this.crossVectors(this,t)},crossVectors:function(t,i){var s=t.x,h=t.y,t=t.z,n=i.x,r=i.y,i=i.z;return this.x=h*i-t*r,this.y=t*n-s*i,this.z=s*r-h*n,this},projectOnVector:function(t){var i=t.lengthSq();return 0===i?this.set(0,0,0):(i=t.dot(this)/i,this.copy(t).multiplyScalar(i))},projectOnPlane:function(t){return i.copy(this).projectOnVector(t),this.sub(i)},reflect:function(t){return this.sub(i.copy(t).multiplyScalar(2*this.dot(t)))},angleTo:function(t){var i=Math.sqrt(this.lengthSq()*t.lengthSq());return 0===i?Math.PI/2:(t=this.dot(t)/i,Math.acos(s.clamp(t,-1,1)))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var i=this.x-t.x,s=this.y-t.y,t=this.z-t.z;return i*i+s*s+t*t},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},setFromSphericalCoords:function(t,i,s){var h=Math.sin(i)*t;return this.x=h*Math.sin(s),this.y=Math.cos(i)*t,this.z=h*Math.cos(s),this},setFromCylindrical:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},setFromCylindricalCoords:function(t,i,s){return this.x=t*Math.sin(i),this.y=s,this.z=t*Math.cos(i),this},setFromMatrixPosition:function(t){t=t.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(t){var i=this.setFromMatrixColumn(t,0).length(),s=this.setFromMatrixColumn(t,1).length(),t=this.setFromMatrixColumn(t,2).length();return this.x=i,this.y=s,this.z=t,this},setFromMatrixColumn:function(t,i){return this.fromArray(t.elements,4*i)},setFromMatrix3Column:function(t,i){return this.fromArray(t.elements,3*i)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,i){return this.x=t[i=void 0===i?0:i],this.y=t[i+1],this.z=t[i+2],this},toArray:function(t,i){return(t=void 0===t?[]:t)[i=void 0===i?0:i]=this.x,t[i+1]=this.y,t[i+2]=this.z,t},fromBufferAttribute:function(t,i,s){return void 0!==s&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(i),this.y=t.getY(i),this.z=t.getZ(i),this}});var u=new n,a=new l,r=new n(0,0,0),e=new n(1,1,1),o=new n,c=new n,f=new n;function l(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}Object.assign(l.prototype,{isMatrix4:!0,set:function(t,i,s,h,n,r,e,o,u,a,c,f,l,M,m,d){var v=this.elements;return v[0]=t,v[4]=i,v[8]=s,v[12]=h,v[1]=n,v[5]=r,v[9]=e,v[13]=o,v[2]=u,v[6]=a,v[10]=c,v[14]=f,v[3]=l,v[7]=M,v[11]=m,v[15]=d,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new l).fromArray(this.elements)},copy:function(t){var i=this.elements,t=t.elements;return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i[6]=t[6],i[7]=t[7],i[8]=t[8],i[9]=t[9],i[10]=t[10],i[11]=t[11],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15],this},copyPosition:function(t){var i=this.elements,t=t.elements;return i[12]=t[12],i[13]=t[13],i[14]=t[14],this},extractBasis:function(t,i,s){return t.setFromMatrixColumn(this,0),i.setFromMatrixColumn(this,1),s.setFromMatrixColumn(this,2),this},makeBasis:function(t,i,s){return this.set(t.x,i.x,s.x,0,t.y,i.y,s.y,0,t.z,i.z,s.z,0,0,0,0,1),this},extractRotation:function(t){var i=this.elements,s=t.elements,h=1/u.setFromMatrixColumn(t,0).length(),n=1/u.setFromMatrixColumn(t,1).length(),t=1/u.setFromMatrixColumn(t,2).length();return i[0]=s[0]*h,i[1]=s[1]*h,i[2]=s[2]*h,i[3]=0,i[4]=s[4]*n,i[5]=s[5]*n,i[6]=s[6]*n,i[7]=0,i[8]=s[8]*t,i[9]=s[9]*t,i[10]=s[10]*t,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this},makeRotationFromEuler:function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var i,s,h,n,r,e,o,u,a,c,f,l,M=this.elements,m=t.x,d=t.y,v=t.z,p=Math.cos(m),m=Math.sin(m),y=Math.cos(d),d=Math.sin(d),g=Math.cos(v),v=Math.sin(v);return"XYZ"===t.order?(r=p*g,e=p*v,o=m*g,u=m*v,M[0]=y*g,M[4]=-y*v,M[8]=d,M[1]=e+o*d,M[5]=r-u*d,M[9]=-m*y,M[2]=u-r*d,M[6]=o+e*d,M[10]=p*y):"YXZ"===t.order?(s=y*v,h=d*g,M[0]=(i=y*g)+(n=d*v)*m,M[4]=h*m-s,M[8]=p*d,M[1]=p*v,M[5]=p*g,M[9]=-m,M[2]=s*m-h,M[6]=n+i*m,M[10]=p*y):"ZXY"===t.order?(s=y*v,h=d*g,M[0]=(i=y*g)-(n=d*v)*m,M[4]=-p*v,M[8]=h+s*m,M[1]=s+h*m,M[5]=p*g,M[9]=n-i*m,M[2]=-p*d,M[6]=m,M[10]=p*y):"ZYX"===t.order?(r=p*g,e=p*v,o=m*g,u=m*v,M[0]=y*g,M[4]=o*d-e,M[8]=r*d+u,M[1]=y*v,M[5]=u*d+r,M[9]=e*d-o,M[2]=-d,M[6]=m*y,M[10]=p*y):"YZX"===t.order?(a=p*y,c=p*d,f=m*y,l=m*d,M[0]=y*g,M[4]=l-a*v,M[8]=f*v+c,M[1]=v,M[5]=p*g,M[9]=-m*g,M[2]=-d*g,M[6]=c*v+f,M[10]=a-l*v):"XZY"===t.order&&(a=p*y,c=p*d,f=m*y,l=m*d,M[0]=y*g,M[4]=-v,M[8]=d*g,M[1]=a*v+l,M[5]=p*g,M[9]=c*v-f,M[2]=f*v-c,M[6]=m*g,M[10]=l*v+a),M[3]=0,M[7]=0,M[11]=0,M[12]=0,M[13]=0,M[14]=0,M[15]=1,this},makeRotationFromQuaternion:function(t){return this.compose(r,t,e)},lookAt:function(t,i,s){var h=this.elements;return f.subVectors(t,i),0===f.lengthSq()&&(f.z=1),f.normalize(),o.crossVectors(s,f),0===o.lengthSq()&&(1===Math.abs(s.z)?f.x+=1e-4:f.z+=1e-4,f.normalize(),o.crossVectors(s,f)),o.normalize(),c.crossVectors(f,o),h[0]=o.x,h[4]=c.x,h[8]=f.x,h[1]=o.y,h[5]=c.y,h[9]=f.y,h[2]=o.z,h[6]=c.z,h[10]=f.z,this},multiply:function(t,i){return void 0!==i?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,i)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,i){var t=t.elements,i=i.elements,s=this.elements,h=t[0],n=t[4],r=t[8],e=t[12],o=t[1],u=t[5],a=t[9],c=t[13],f=t[2],l=t[6],M=t[10],m=t[14],d=t[3],v=t[7],p=t[11],t=t[15],y=i[0],g=i[4],E=i[8],w=i[12],x=i[1],b=i[5],V=i[9],R=i[13],k=i[2],T=i[6],F=i[10],S=i[14],A=i[3],Z=i[7],X=i[11],i=i[15];return s[0]=h*y+n*x+r*k+e*A,s[4]=h*g+n*b+r*T+e*Z,s[8]=h*E+n*V+r*F+e*X,s[12]=h*w+n*R+r*S+e*i,s[1]=o*y+u*x+a*k+c*A,s[5]=o*g+u*b+a*T+c*Z,s[9]=o*E+u*V+a*F+c*X,s[13]=o*w+u*R+a*S+c*i,s[2]=f*y+l*x+M*k+m*A,s[6]=f*g+l*b+M*T+m*Z,s[10]=f*E+l*V+M*F+m*X,s[14]=f*w+l*R+M*S+m*i,s[3]=d*y+v*x+p*k+t*A,s[7]=d*g+v*b+p*T+t*Z,s[11]=d*E+v*V+p*F+t*X,s[15]=d*w+v*R+p*S+t*i,this},multiplyScalar:function(t){var i=this.elements;return i[0]*=t,i[4]*=t,i[8]*=t,i[12]*=t,i[1]*=t,i[5]*=t,i[9]*=t,i[13]*=t,i[2]*=t,i[6]*=t,i[10]*=t,i[14]*=t,i[3]*=t,i[7]*=t,i[11]*=t,i[15]*=t,this},determinant:function(){var t=this.elements,i=t[0],s=t[4],h=t[8],n=t[12],r=t[1],e=t[5],o=t[9],u=t[13],a=t[2],c=t[6],f=t[10],l=t[14];return t[3]*(+n*o*c-h*u*c-n*e*f+s*u*f+h*e*l-s*o*l)+t[7]*(+i*o*l-i*u*f+n*r*f-h*r*l+h*u*a-n*o*a)+t[11]*(+i*u*c-i*e*l-n*r*c+s*r*l+n*e*a-s*u*a)+t[15]*(-h*e*a-i*o*c+i*e*f+h*r*c-s*r*f+s*o*a)},transpose:function(){var t=this.elements,i=t[1];return t[1]=t[4],t[4]=i,i=t[2],t[2]=t[8],t[8]=i,i=t[6],t[6]=t[9],t[9]=i,i=t[3],t[3]=t[12],t[12]=i,i=t[7],t[7]=t[13],t[13]=i,i=t[11],t[11]=t[14],t[14]=i,this},setPosition:function(t,i,s){var h=this.elements;return t.isVector3?(h[12]=t.x,h[13]=t.y,h[14]=t.z):(h[12]=t,h[13]=i,h[14]=s),this},getInverse:function(t,i){void 0!==i&&console.warn("THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.");var i=this.elements,t=t.elements,s=t[0],h=t[1],n=t[2],r=t[3],e=t[4],o=t[5],u=t[6],a=t[7],c=t[8],f=t[9],l=t[10],M=t[11],m=t[12],d=t[13],v=t[14],t=t[15],p=f*v*a-d*l*a+d*u*M-o*v*M-f*u*t+o*l*t,y=m*l*a-c*v*a-m*u*M+e*v*M+c*u*t-e*l*t,g=c*d*a-m*f*a+m*o*M-e*d*M-c*o*t+e*f*t,E=m*f*u-c*d*u-m*o*l+e*d*l+c*o*v-e*f*v,w=s*p+h*y+n*g+r*E;return 0==w?this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0):(i[0]=p*(p=1/w),i[1]=(d*l*r-f*v*r-d*n*M+h*v*M+f*n*t-h*l*t)*p,i[2]=(o*v*r-d*u*r+d*n*a-h*v*a-o*n*t+h*u*t)*p,i[3]=(f*u*r-o*l*r-f*n*a+h*l*a+o*n*M-h*u*M)*p,i[4]=y*p,i[5]=(c*v*r-m*l*r+m*n*M-s*v*M-c*n*t+s*l*t)*p,i[6]=(m*u*r-e*v*r-m*n*a+s*v*a+e*n*t-s*u*t)*p,i[7]=(e*l*r-c*u*r+c*n*a-s*l*a-e*n*M+s*u*M)*p,i[8]=g*p,i[9]=(m*f*r-c*d*r-m*h*M+s*d*M+c*h*t-s*f*t)*p,i[10]=(e*d*r-m*o*r+m*h*a-s*d*a-e*h*t+s*o*t)*p,i[11]=(c*o*r-e*f*r-c*h*a+s*f*a+e*h*M-s*o*M)*p,i[12]=E*p,i[13]=(c*d*n-m*f*n+m*h*l-s*d*l-c*h*v+s*f*v)*p,i[14]=(m*o*n-e*d*n-m*h*u+s*d*u+e*h*v-s*o*v)*p,i[15]=(e*f*n-c*o*n+c*h*u-s*f*u-e*h*l+s*o*l)*p,this)},invert:function(){var t=this.elements,i=t[0],s=t[1],h=t[2],n=t[3],r=t[4],e=t[5],o=t[6],u=t[7],a=t[8],c=t[9],f=t[10],l=t[11],M=t[12],m=t[13],d=t[14],v=t[15],p=c*d*u-m*f*u+m*o*l-e*d*l-c*o*v+e*f*v,y=M*f*u-a*d*u-M*o*l+r*d*l+a*o*v-r*f*v,g=a*m*u-M*c*u+M*e*l-r*m*l-a*e*v+r*c*v,E=M*c*o-a*m*o-M*e*f+r*m*f+a*e*d-r*c*d,w=i*p+s*y+h*g+n*E;return 0==w?this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0):(t[0]=p*(p=1/w),t[1]=(m*f*n-c*d*n-m*h*l+s*d*l+c*h*v-s*f*v)*p,t[2]=(e*d*n-m*o*n+m*h*u-s*d*u-e*h*v+s*o*v)*p,t[3]=(c*o*n-e*f*n-c*h*u+s*f*u+e*h*l-s*o*l)*p,t[4]=y*p,t[5]=(a*d*n-M*f*n+M*h*l-i*d*l-a*h*v+i*f*v)*p,t[6]=(M*o*n-r*d*n-M*h*u+i*d*u+r*h*v-i*o*v)*p,t[7]=(r*f*n-a*o*n+a*h*u-i*f*u-r*h*l+i*o*l)*p,t[8]=g*p,t[9]=(M*c*n-a*m*n-M*s*l+i*m*l+a*s*v-i*c*v)*p,t[10]=(r*m*n-M*e*n+M*s*u-i*m*u-r*s*v+i*e*v)*p,t[11]=(a*e*n-r*c*n-a*s*u+i*c*u+r*s*l-i*e*l)*p,t[12]=E*p,t[13]=(a*m*h-M*c*h+M*s*f-i*m*f-a*s*d+i*c*d)*p,t[14]=(M*e*h-r*m*h-M*s*o+i*m*o+r*s*d-i*e*d)*p,t[15]=(r*c*h-a*e*h+a*s*o-i*c*o-r*s*f+i*e*f)*p,this)},scale:function(t){var i=this.elements,s=t.x,h=t.y,t=t.z;return i[0]*=s,i[4]*=h,i[8]*=t,i[1]*=s,i[5]*=h,i[9]*=t,i[2]*=s,i[6]*=h,i[10]*=t,i[3]*=s,i[7]*=h,i[11]*=t,this},getMaxScaleOnAxis:function(){var t=this.elements,i=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],s=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(i,s,t))},makeTranslation:function(t,i,s){return this.set(1,0,0,t,0,1,0,i,0,0,1,s,0,0,0,1),this},makeRotationX:function(t){var i=Math.cos(t),t=Math.sin(t);return this.set(1,0,0,0,0,i,-t,0,0,t,i,0,0,0,0,1),this},makeRotationY:function(t){var i=Math.cos(t),t=Math.sin(t);return this.set(i,0,t,0,0,1,0,0,-t,0,i,0,0,0,0,1),this},makeRotationZ:function(t){var i=Math.cos(t),t=Math.sin(t);return this.set(i,-t,0,0,t,i,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,i){var s=Math.cos(i),i=Math.sin(i),h=1-s,n=t.x,r=t.y,t=t.z,e=h*n,o=h*r;return this.set(e*n+s,e*r-i*t,e*t+i*r,0,e*r+i*t,o*r+s,o*t-i*n,0,e*t-i*r,o*t+i*n,h*t*t+s,0,0,0,0,1),this},makeScale:function(t,i,s){return this.set(t,0,0,0,0,i,0,0,0,0,s,0,0,0,0,1),this},makeShear:function(t,i,s){return this.set(1,i,s,0,t,1,s,0,t,i,1,0,0,0,0,1),this},compose:function(t,i,s){var h=this.elements,n=i.t,r=i.i,e=i.h,i=i.o,o=n+n,u=r+r,a=e+e,c=n*o,f=n*u,n=n*a,l=r*u,r=r*a,e=e*a,o=i*o,u=i*u,i=i*a,a=s.x,M=s.y,s=s.z;return h[0]=(1-(l+e))*a,h[1]=(f+i)*a,h[2]=(n-u)*a,h[3]=0,h[4]=(f-i)*M,h[5]=(1-(c+e))*M,h[6]=(r+o)*M,h[7]=0,h[8]=(n+u)*s,h[9]=(r-o)*s,h[10]=(1-(c+l))*s,h[11]=0,h[12]=t.x,h[13]=t.y,h[14]=t.z,h[15]=1,this},decompose:function(t,i,s){var h=this.elements,n=u.set(h[0],h[1],h[2]).length(),r=u.set(h[4],h[5],h[6]).length(),e=u.set(h[8],h[9],h[10]).length(),t=(this.determinant()<0&&(n=-n),t.x=h[12],t.y=h[13],t.z=h[14],a.copy(this),1/n),h=1/r,o=1/e;return a.elements[0]*=t,a.elements[1]*=t,a.elements[2]*=t,a.elements[4]*=h,a.elements[5]*=h,a.elements[6]*=h,a.elements[8]*=o,a.elements[9]*=o,a.elements[10]*=o,i.setFromRotationMatrix(a),s.x=n,s.y=r,s.z=e,this},makePerspective:function(t,i,s,h,n,r){void 0===r&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var e=this.elements,o=2*n/(s-h),u=(i+t)/(i-t),s=(s+h)/(s-h),h=-(r+n)/(r-n),r=-2*r*n/(r-n);return e[0]=2*n/(i-t),e[4]=0,e[8]=u,e[12]=0,e[1]=0,e[5]=o,e[9]=s,e[13]=0,e[2]=0,e[6]=0,e[10]=h,e[14]=r,e[3]=0,e[7]=0,e[11]=-1,e[15]=0,this},makeOrthographic:function(t,i,s,h,n,r){var e=this.elements,o=1/(i-t),u=1/(s-h),a=1/(r-n),i=(i+t)*o,t=(s+h)*u,s=(r+n)*a;return e[0]=2*o,e[4]=0,e[8]=0,e[12]=-i,e[1]=0,e[5]=2*u,e[9]=0,e[13]=-t,e[2]=0,e[6]=0,e[10]=-2*a,e[14]=-s,e[3]=0,e[7]=0,e[11]=0,e[15]=1,this},equals:function(t){for(var i=this.elements,s=t.elements,h=0;h<16;h++)if(i[h]!==s[h])return!1;return!0},fromArray:function(t,i){void 0===i&&(i=0);for(var s=0;s<16;s++)this.elements[s]=t[s+i];return this},toArray:function(t,i){var s=this.elements;return(t=void 0===t?[]:t)[i=void 0===i?0:i]=s[0],t[i+1]=s[1],t[i+2]=s[2],t[i+3]=s[3],t[i+4]=s[4],t[i+5]=s[5],t[i+6]=s[6],t[i+7]=s[7],t[i+8]=s[8],t[i+9]=s[9],t[i+10]=s[10],t[i+11]=s[11],t[i+12]=s[12],t[i+13]=s[13],t[i+14]=s[14],t[i+15]=s[15],t}});export{t as Quaternion,n as Vector3,l as Matrix4};